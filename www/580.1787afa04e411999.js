(self.webpackChunkiot_master_nuwa=self.webpackChunkiot_master_nuwa||[]).push([[580],{580:(Ee,ve,fe)=>{"use strict";fe.r(ve),fe.d(ve,{ViewerModule:()=>k});var ge=fe(177),be=fe(6530),me=fe(1325),m=fe(4438),H=fe(345),j=fe(3390);const g=["iframe"];function d(U,te){if(1&U&&(m.j41(0,"div"),m.EFF(1),m.k0s()),2&U){const S=m.XpG();m.R7$(),m.JRh(S.title)}}let w=(()=>{class U{set url(S){this.safeUrl=this.san.bypassSecurityTrustResourceUrl(S)}constructor(S){this.san=S,this.title="\u7a97\u53e3",this.width=400,this.height=300}load(S){console.log("iframe load",S);const n=this.iframe.nativeElement.contentWindow;this.title=n.document.title,setTimeout(()=>{this.title=n.document.title},500),setTimeout(()=>{this.title=n.document.title},2e3)}static#e=this.\u0275fac=function(n){return new(n||U)(m.rXU(H.up))};static#t=this.\u0275cmp=m.VBU({type:U,selectors:[["app-window"]],viewQuery:function(n,o){if(1&n&&m.GBs(g,5),2&n){let T;m.mGM(T=m.lsd())&&(o.iframe=T.first)}},inputs:{title:"title",width:"width",height:"height",url:"url"},decls:3,vars:5,consts:[["iframe",""],[4,"nzModalTitle"],[3,"load","src"]],template:function(n,o){if(1&n){const T=m.RV6();m.DNE(0,d,2,1,"div",1),m.j41(1,"iframe",2,0),m.bIt("load",function(p){return m.eBV(T),m.Njj(o.load(p))}),m.k0s()}2&n&&(m.R7$(),m.xc7("width",o.width+"px")("height",o.height+"px"),m.Y8G("src",o.safeUrl,m.f$h))},dependencies:[j.hk],styles:["iframe[_ngcontent-%COMP%]{border:none}"]})}return U})();var u=fe(2126),i=fe(9558),l=fe(6504),a=fe(7301),s=fe(7553),y=fe(4412),R=fe(1413),f=fe(1985),_=fe(8750),h=fe(983),v=fe(8359),C=fe(7786),N=fe(2771),A=fe(17),W=fe(8071),q=fe(9974);const O={connector:()=>new R.B};function I(U,te=O){const{connector:S}=te;return(0,q.N)((n,o)=>{const T=S();(0,_.Tg)(U(function V(U){return new f.c(te=>U.subscribe(te))}(T))).subscribe(o),o.add(n.subscribe(T))})}function x(U,te){const S=(0,W.T)(U)?U:()=>U;return(0,W.T)(te)?I(te,{connector:S}):n=>new A.G(n,S)}var K=fe(5964),$=fe(9898),Y=function(U){return U[U.CLOSED=0]="CLOSED",U[U.CONNECTING=1]="CONNECTING",U[U.CONNECTED=2]="CONNECTED",U}(Y||{});const re=new m.nKC("NgxMqttServiceConfig"),oe=new m.nKC("NgxMqttClientService");let ne=(()=>{class U{constructor(S,n){this.options=S,this.client=n,this.observables={},this.state=new y.t(Y.CLOSED),this.messages=new R.B,this._clientId=this._generateClientId(),this._connectTimeout=1e4,this._reconnectPeriod=1e4,this._url=void 0,this._onConnect=new m.bkB,this._onReconnect=new m.bkB,this._onClose=new m.bkB,this._onOffline=new m.bkB,this._onError=new m.bkB,this._onEnd=new m.bkB,this._onMessage=new m.bkB,this._onSuback=new m.bkB,this._onPacketsend=new m.bkB,this._onPacketreceive=new m.bkB,this._handleOnConnect=o=>{!0===this.options.connectOnCreate&&Object.keys(this.observables).forEach(T=>{this.client.subscribe(T)}),this.state.next(Y.CONNECTED),this._onConnect.emit(o)},this._handleOnReconnect=()=>{!0===this.options.connectOnCreate&&Object.keys(this.observables).forEach(o=>{this.client.subscribe(o)}),this.state.next(Y.CONNECTING),this._onReconnect.emit()},this._handleOnClose=()=>{this.state.next(Y.CLOSED),this._onClose.emit()},this._handleOnOffline=()=>{this._onOffline.emit()},this._handleOnError=o=>{this._onError.emit(o),console.error(o)},this._handleOnEnd=()=>{this._onEnd.emit()},this._handleOnMessage=(o,T,L)=>{this._onMessage.emit(L),"publish"===L.cmd&&this.messages.next(L)},this._handleOnPacketsend=o=>{this._onPacketsend.emit()},this._handleOnPacketreceive=o=>{this._onPacketreceive.emit()},!1!==S.connectOnCreate&&this.connect({},n),this.state.subscribe()}get clientId(){return this._clientId}get onConnect(){return this._onConnect}get onReconnect(){return this._onReconnect}get onClose(){return this._onClose}get onOffline(){return this._onOffline}get onError(){return this._onError}get onEnd(){return this._onEnd}get onMessage(){return this._onMessage}get onPacketsend(){return this._onPacketsend}get onPacketreceive(){return this._onPacketreceive}get onSuback(){return this._onSuback}static filterMatchesTopic(S,n){if("#"===S[0]&&"$"===n[0])return!1;const o=(S||"").split("/").reverse(),T=(n||"").split("/").reverse(),L=()=>{const p=o.pop(),t=T.pop();switch(p){case"#":return!0;case"+":return!!t&&L();default:return p===t&&(void 0===p||L())}};return L()}connect(S,n){const o=s(this.options||{},S),T=o.protocol||"ws",L=o.hostname||"localhost";o.url?this._url=o.url:(this._url=`${T}://${L}`,this._url+=o.port?`:${o.port}`:"",this._url+=o.path?`${o.path}`:""),this.state.next(Y.CONNECTING);const p=s({clientId:this._clientId,reconnectPeriod:this._reconnectPeriod,connectTimeout:this._connectTimeout},o);this.client&&this.client.end(!0),this.client=n||(0,a.connect)(this._url,p),this._clientId=p.clientId,this.client.on("connect",this._handleOnConnect),this.client.on("reconnect",this._handleOnReconnect),this.client.on("close",this._handleOnClose),this.client.on("offline",this._handleOnOffline),this.client.on("error",this._handleOnError),this.client.stream.on("error",this._handleOnError),this.client.on("end",this._handleOnEnd),this.client.on("message",this._handleOnMessage),this.client.on("packetsend",this._handleOnPacketsend),this.client.on("packetreceive",this._handleOnPacketreceive)}disconnect(S=!0){if(!this.client)throw new Error("mqtt client not connected");this.client.end(S)}observeRetained(S,n={qos:1}){return this._generalObserve(S,()=>function c(U,te,S,n){S&&!(0,W.T)(S)&&(n=S);const o=(0,W.T)(S)?S:void 0;return T=>x(new N.m(U,te,n),o)(T)}(1),n)}observe(S,n={qos:1}){return this._generalObserve(S,()=>function D(U){return U?te=>I(U)(te):te=>x(new R.B)(te)}(),n)}_generalObserve(S,n,o){if(!this.client)throw new Error("mqtt client not connected");if(!this.observables[S]){const T=new R.B;this.observables[S]=function E(U,te){return new f.c(S=>{const n=U(),o=te(n);return(o?(0,_.Tg)(o):h.w).subscribe(S),()=>{n&&n.unsubscribe()}})}(()=>{const L=new v.yU;return this.client.subscribe(S,o,(p,t)=>{t&&t.forEach(e=>{128===e.qos&&(delete this.observables[e.topic],this.client.unsubscribe(e.topic),T.error(`subscription for '${e.topic}' rejected!`)),this._onSuback.emit({filter:S,granted:128!==e.qos})})}),L.add(()=>{delete this.observables[S],this.client.unsubscribe(S)}),L},L=>(0,C.h)(T,this.messages)).pipe((0,K.p)(L=>U.filterMatchesTopic(S,L.topic)),n(),(0,$.B)())}return this.observables[S]}publish(S,n,o={}){if(!this.client)throw new Error("mqtt client not connected");return f.c.create(T=>{this.client.publish(S,n,o,L=>{L?T.error(L):(T.next(null),T.complete())})})}unsafePublish(S,n,o={}){if(!this.client)throw new Error("mqtt client not connected");this.client.publish(S,n,o,T=>{if(T)throw T})}_generateClientId(){return"client-"+Math.random().toString(36).substr(2,19)}}return U.\u0275prov=m.jDH({factory:function(){return new U(m.KVO(re),m.KVO(oe))},token:U,providedIn:"root"}),U})();const ee=[{path:":id",component:(()=>{class U{constructor(S,n,o,T,L,p,t,e){function r(b){let M=L.snapshot.queryParams[b];return"true"==M||"1"==M}this.title=S,this.element=n,this.rs=o,this.cs=T,this.route=L,this.ns=p,this.ms=t,this.mqtt=e,this.id="",this.index=0,this.subs=[],this.mousewheel=!1,this.panning=!1,this.full=!1,this.padding=10,this.tools={go:b=>{this.project.pages.forEach(M=>{M.name==b&&this.Render(M)})},window:(b,M=400,z=300,J="\u7a97\u53e3")=>{this.ms.create({nzContent:w,nzData:{url:b,width:M,height:z,title:J},nzWidth:M+48,nzFooter:null})},open:(b,M=!1)=>{M?window.open(b):location.href=b},get:(b,M)=>{this.rs.get(b,M).subscribe(()=>{})},post:(b,M)=>{this.rs.post(b,M).subscribe(()=>{})},auth:b=>{}},this.load(),this.mousewheel=r("mousewheel"),this.panning=r("panning"),this.full=r("full"),this.graph=new me.ke({container:n.nativeElement,interacting:!1,mousewheel:this.mousewheel,panning:this.panning,autoResize:this.full}),this.graph.on("cell:click",({cell:b,e:M})=>{try{b.data?.listeners?.click?.call(this,b,M,this.tools),this.cs.Get(b.shape)?.listeners?.click?.call(this,b,M,this.tools)}catch(z){this.ns.error("\u70b9\u51fb\u4e8b\u4ef6\u5904\u7406\u9519\u8bef",z.message)}}),this.graph.on("cell:mouseenter",({cell:b,e:M})=>{try{this.cs.Get(b.shape)?.listeners?.mouseenter?.call(this,b,M,this.tools)}catch(z){this.ns.error("\u9f20\u6807\u4e8b\u4ef6\u5904\u7406\u9519\u8bef",z.message)}}),this.graph.on("cell:mouseleave",({cell:b,e:M})=>{try{this.cs.Get(b.shape)?.listeners?.mouseleave?.call(this,b,M,this.tools)}catch(z){this.ns.error("\u9f20\u6807\u4e8b\u4ef6\u5904\u7406\u9519\u8bef",z.message)}}),this.graph.on("cell:custom",b=>{try{b.cell?.data.listeners?.[b.event]?.call(this,b.cell,b.value,this.tools)}catch(M){this.ns.error("\u7ec4\u4ef6\u4e8b\u4ef6\u54cd\u5e94\u5904\u7406\u9519\u8bef",M.message)}})}evaluate(S,n){const o=Object.keys(n),T=Object.values(n);return new Function(...o,"return "+S)(...T)}Render(S){S.content?.cells?.forEach(n=>{this.cs.Get(n.shape)}),this.graph.drawBackground({color:S.background_color,image:S.background_image}),this.graph.fromJSON(S.content),this.full&&(this.graph.centerContent(),this.graph.zoomToFit({padding:this.padding})),this.subs.forEach(n=>n.unsubscribe()),this.subs=[],this.graph.getCells().forEach(n=>{const o=this.cs.Get(n.shape);if(n.data?.bindings)for(const T in n.data.bindings){if(!n.data.bindings.hasOwnProperty(T))continue;const L=n.data.bindings[T];console.log("binding",o.id,T,L);const t=this.mqtt.observe(`up/property/${L.product}/${L.device}`).subscribe(e=>{const r=JSON.parse(e.payload.toString());console.log("data",o.id,T,L,r);try{o.hooks?.[T]?.call(this,n,r[L.variable])}catch(b){this.ns.error("\u6570\u636e\u7ed1\u5b9a\u9519\u8bef",b.message)}});this.subs.push(t)}if(n.data?.listeners)for(const T in n.data.listeners){if(!n.data.listeners.hasOwnProperty(T))continue;const L=n.data.listeners[T];if("string"==typeof L&&L.length>0)try{n.data.listeners[T]=new Function("cell","event","tools",L)}catch(p){this.ns.error("\u811a\u672c\u7f16\u8bd1\u9519\u8bef"+T,L+" "+p.message),n.data.listeners[T]=()=>{this.ns.error("\u7ec4\u4ef6\u811a\u672c\u9519\u8bef"+T,L+" "+p.message)}}}})}load(){this.id=this.route.snapshot.paramMap.get("id"),this.rs.get(`api/project/${this.id}`).subscribe(S=>{this.project=S.data,this.title.setTitle(this.project.name),this.full?this.graph.resize(window.innerWidth,window.innerHeight):this.graph.resize(this.project.width,this.project.height),this.Render(this.project.pages[0])})}onResize(S){this.full&&(this.graph.resize(S.target.innerWidth,S.target.innerHeight),this.graph.centerContent(),this.graph.zoomToFit({padding:this.padding}))}ngOnDestroy(){this.subs.forEach(S=>S.unsubscribe())}handlePageChange(S){this.Render(this.project.pages[this.index])}static#e=this.\u0275fac=function(n){return new(n||U)(m.rXU(H.hE),m.rXU(m.aKT),m.rXU(u.By),m.rXU(i.b),m.rXU(be.nX),m.rXU(l.xY),m.rXU(j.N_),m.rXU(ne))};static#t=this.\u0275cmp=m.VBU({type:U,selectors:[["app-viewer"]],hostBindings:function(n,o){1&n&&m.bIt("resize",function(L){return o.onResize(L)},!1,m.tSv)},decls:0,vars:0,template:function(n,o){},styles:["[_nghost-%COMP%]{display:block;overflow:hidden}"]})}return U})()}];let Q=(()=>{class U{static#e=this.\u0275fac=function(n){return new(n||U)};static#t=this.\u0275mod=m.$C({type:U});static#r=this.\u0275inj=m.G2t({imports:[be.iI.forChild(ee),be.iI]})}return U})();var P=fe(1011),B=fe(4341),X=fe(5103),Z=fe(513),F=fe(8927);let k=(()=>{class U{static#e=this.\u0275fac=function(n){return new(n||U)};static#t=this.\u0275mod=m.$C({type:U});static#r=this.\u0275inj=m.G2t({imports:[ge.MD,Q,l.K9,j.U6,P.j,B.YN,X.Y3,Z.Zw,F.PQ,B.X1]})}return U})()},7301:(Ee,ve,fe)=>{Ee.exports=function(){return function m(H,j,g){function d(i,l){if(!j[i]){if(!H[i]){if(w)return w(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var y=j[i]={exports:{}};H[i][0].call(y.exports,function(R){return d(H[i][1][R]||R)},y,y.exports,m,H,j,g)}return j[i].exports}for(var w=void 0,u=0;u<g.length;u++)d(g[u]);return d}}()({1:[function(m,H,j){"use strict";j.byteLength=function s(E){var v=a(E),N=v[1];return 3*(v[0]+N)/4-N},j.toByteArray=function R(E){var v,O,C=a(E),N=C[0],A=C[1],W=new w(function y(E,v,C){return 3*(v+C)/4-C}(0,N,A)),q=0,V=A>0?N-4:N;for(O=0;O<V;O+=4)v=d[E.charCodeAt(O)]<<18|d[E.charCodeAt(O+1)]<<12|d[E.charCodeAt(O+2)]<<6|d[E.charCodeAt(O+3)],W[q++]=v>>16&255,W[q++]=v>>8&255,W[q++]=255&v;return 2===A&&(v=d[E.charCodeAt(O)]<<2|d[E.charCodeAt(O+1)]>>4,W[q++]=255&v),1===A&&(v=d[E.charCodeAt(O)]<<10|d[E.charCodeAt(O+1)]<<4|d[E.charCodeAt(O+2)]>>2,W[q++]=v>>8&255,W[q++]=255&v),W},j.fromByteArray=function h(E){for(var v,C=E.length,N=C%3,A=[],W=16383,q=0,V=C-N;q<V;q+=W)A.push(_(E,q,q+W>V?V:q+W));return 1===N?A.push(g[(v=E[C-1])>>2]+g[v<<4&63]+"=="):2===N&&A.push(g[(v=(E[C-2]<<8)+E[C-1])>>10]+g[v>>4&63]+g[v<<2&63]+"="),A.join("")};for(var g=[],d=[],w=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)g[i]=u[i],d[u.charCodeAt(i)]=i;function a(E){var v=E.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=E.indexOf("=");return-1===C&&(C=v),[C,C===v?0:4-C%4]}function f(E){return g[E>>18&63]+g[E>>12&63]+g[E>>6&63]+g[63&E]}function _(E,v,C){for(var A=[],W=v;W<C;W+=3)A.push(f((E[W]<<16&16711680)+(E[W+1]<<8&65280)+(255&E[W+2])));return A.join("")}d[45]=62,d[95]=63},{}],2:[function(m,H,j){},{}],3:[function(m,H,j){(function(g){(function(){"use strict";var d=m("base64-js"),w=m("ieee754");j.Buffer=a,j.SlowBuffer=function N(t){return+t!=t&&(t=0),a.alloc(+t)},j.INSPECT_MAX_BYTES=50;var u=2147483647;function l(t){if(t>u)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=a.prototype,e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function _(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|A(t,e),b=l(r),M=b.write(t,e);return M!==r&&(b=b.slice(0,M)),b}(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(L(t,ArrayBuffer)||t&&L(t.buffer,ArrayBuffer))return function E(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var b;return(b=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=a.prototype,b}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var b=t.valueOf&&t.valueOf();if(null!=b&&b!==t)return a.from(b,e,r);var M=function v(t){if(a.isBuffer(t)){var e=0|C(t.length),r=l(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||p(t.length)?l(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(M)return M;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function y(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return y(t),l(t<0?0:0|C(t))}function h(t){for(var e=t.length<0?0:0|C(t.length),r=l(e),b=0;b<e;b+=1)r[b]=255&t[b];return r}function C(t){if(t>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|t}function A(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||L(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,b=arguments.length>2&&!0===arguments[2];if(!b&&0===r)return 0;for(var M=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return te(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return o(t).length;default:if(M)return b?-1:te(t).length;e=(""+e).toLowerCase(),M=!0}}function W(t,e,r){var b=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return ie(this,e,r);case"utf8":case"utf-8":return G(this,e,r);case"ascii":return se(this,e,r);case"latin1":case"binary":return ne(this,e,r);case"base64":return Y(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,e,r);default:if(b)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),b=!0}}function q(t,e,r){var b=t[e];t[e]=t[r],t[r]=b}function V(t,e,r,b,M){if(0===t.length)return-1;if("string"==typeof r?(b=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),p(r=+r)&&(r=M?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(M)return-1;r=t.length-1}else if(r<0){if(!M)return-1;r=0}if("string"==typeof e&&(e=a.from(e,b)),a.isBuffer(e))return 0===e.length?-1:O(t,e,r,b,M);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?M?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):O(t,[e],r,b,M);throw new TypeError("val must be string, number or Buffer")}function O(t,e,r,b,M){var ce,z=1,J=t.length,ae=e.length;if(void 0!==b&&("ucs2"===(b=String(b).toLowerCase())||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(t.length<2||e.length<2)return-1;z=2,J/=2,ae/=2,r/=2}function le(pe,ye){return 1===z?pe[ye]:pe.readUInt16BE(ye*z)}if(M){var he=-1;for(ce=r;ce<J;ce++)if(le(t,ce)===le(e,-1===he?0:ce-he)){if(-1===he&&(he=ce),ce-he+1===ae)return he*z}else-1!==he&&(ce-=ce-he),he=-1}else for(r+ae>J&&(r=J-ae),ce=r;ce>=0;ce--){for(var ue=!0,de=0;de<ae;de++)if(le(t,ce+de)!==le(e,de)){ue=!1;break}if(ue)return ce}return-1}function I(t,e,r,b){r=Number(r)||0;var M=t.length-r;b?(b=Number(b))>M&&(b=M):b=M;var z=e.length;b>z/2&&(b=z/2);for(var J=0;J<b;++J){var ae=parseInt(e.substr(2*J,2),16);if(p(ae))return J;t[r+J]=ae}return J}function x(t,e,r,b){return T(te(e,t.length-r),t,r,b)}function c(t,e,r,b){return T(function S(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,b)}function D(t,e,r,b){return c(t,e,r,b)}function K(t,e,r,b){return T(o(e),t,r,b)}function $(t,e,r,b){return T(function n(t,e){for(var r,b,z=[],J=0;J<t.length&&!((e-=2)<0);++J)b=(r=t.charCodeAt(J))>>8,z.push(r%256),z.push(b);return z}(e,t.length-r),t,r,b)}function Y(t,e,r){return d.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function G(t,e,r){r=Math.min(t.length,r);for(var b=[],M=e;M<r;){var le,ce,he,ue,z=t[M],J=null,ae=z>239?4:z>223?3:z>191?2:1;if(M+ae<=r)switch(ae){case 1:z<128&&(J=z);break;case 2:128==(192&(le=t[M+1]))&&(ue=(31&z)<<6|63&le)>127&&(J=ue);break;case 3:ce=t[M+2],128==(192&(le=t[M+1]))&&128==(192&ce)&&(ue=(15&z)<<12|(63&le)<<6|63&ce)>2047&&(ue<55296||ue>57343)&&(J=ue);break;case 4:ce=t[M+2],he=t[M+3],128==(192&(le=t[M+1]))&&128==(192&ce)&&128==(192&he)&&(ue=(15&z)<<18|(63&le)<<12|(63&ce)<<6|63&he)>65535&&ue<1114112&&(J=ue)}null===J?(J=65533,ae=1):J>65535&&(b.push((J-=65536)>>>10&1023|55296),J=56320|1023&J),b.push(J),M+=ae}return function oe(t){var e=t.length;if(e<=re)return String.fromCharCode.apply(String,t);for(var r="",b=0;b<e;)r+=String.fromCharCode.apply(String,t.slice(b,b+=re));return r}(b)}j.kMaxLength=u,!(a.TYPED_ARRAY_SUPPORT=function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(t,e,r){return s(t,e,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(t,e,r){return function R(t,e,r){return y(t),t<=0?l(t):void 0!==e?"string"==typeof r?l(t).fill(e,r):l(t).fill(e):l(t)}(t,e,r)},a.allocUnsafe=function(t){return f(t)},a.allocUnsafeSlow=function(t){return f(t)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,r){if(L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),L(r,Uint8Array)&&(r=a.from(r,r.offset,r.byteLength)),!a.isBuffer(e)||!a.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var b=e.length,M=r.length,z=0,J=Math.min(b,M);z<J;++z)if(e[z]!==r[z]){b=e[z],M=r[z];break}return b<M?-1:M<b?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var b;if(void 0===r)for(r=0,b=0;b<e.length;++b)r+=e[b].length;var M=a.allocUnsafe(r),z=0;for(b=0;b<e.length;++b){var J=e[b];if(L(J,Uint8Array)&&(J=a.from(J)),!a.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(M,z),z+=J.length}return M},a.byteLength=A,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)q(this,r,r+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)q(this,r,r+3),q(this,r+1,r+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)q(this,r,r+7),q(this,r+1,r+6),q(this,r+2,r+5),q(this,r+3,r+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?G(this,0,e):W.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=j.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,r,b,M,z){if(L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===b&&(b=e?e.length:0),void 0===M&&(M=0),void 0===z&&(z=this.length),r<0||b>e.length||M<0||z>this.length)throw new RangeError("out of range index");if(M>=z&&r>=b)return 0;if(M>=z)return-1;if(r>=b)return 1;if(this===e)return 0;for(var J=(z>>>=0)-(M>>>=0),ae=(b>>>=0)-(r>>>=0),le=Math.min(J,ae),ce=this.slice(M,z),he=e.slice(r,b),ue=0;ue<le;++ue)if(ce[ue]!==he[ue]){J=ce[ue],ae=he[ue];break}return J<ae?-1:ae<J?1:0},a.prototype.includes=function(e,r,b){return-1!==this.indexOf(e,r,b)},a.prototype.indexOf=function(e,r,b){return V(this,e,r,b,!0)},a.prototype.lastIndexOf=function(e,r,b){return V(this,e,r,b,!1)},a.prototype.write=function(e,r,b,M){if(void 0===r)M="utf8",b=this.length,r=0;else if(void 0===b&&"string"==typeof r)M=r,b=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(b)?(b>>>=0,void 0===M&&(M="utf8")):(M=b,b=void 0)}var z=this.length-r;if((void 0===b||b>z)&&(b=z),e.length>0&&(b<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");for(var J=!1;;)switch(M){case"hex":return I(this,e,r,b);case"utf8":case"utf-8":return x(this,e,r,b);case"ascii":return c(this,e,r,b);case"latin1":case"binary":return D(this,e,r,b);case"base64":return K(this,e,r,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,r,b);default:if(J)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),J=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var re=4096;function se(t,e,r){var b="";r=Math.min(t.length,r);for(var M=e;M<r;++M)b+=String.fromCharCode(127&t[M]);return b}function ne(t,e,r){var b="";r=Math.min(t.length,r);for(var M=e;M<r;++M)b+=String.fromCharCode(t[M]);return b}function ie(t,e,r){var b=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>b)&&(r=b);for(var M="",z=e;z<r;++z)M+=U(t[z]);return M}function ee(t,e,r){for(var b=t.slice(e,r),M="",z=0;z<b.length;z+=2)M+=String.fromCharCode(b[z]+256*b[z+1]);return M}function Q(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,r,b,M,z){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>M||e<z)throw new RangeError('"value" argument is out of bounds');if(r+b>t.length)throw new RangeError("Index out of range")}function B(t,e,r,b,M,z){if(r+b>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function X(t,e,r,b,M){return e=+e,r>>>=0,M||B(t,0,r,4),w.write(t,e,r,b,23,4),r+4}function Z(t,e,r,b,M){return e=+e,r>>>=0,M||B(t,0,r,8),w.write(t,e,r,b,52,8),r+8}a.prototype.slice=function(e,r){var b=this.length;(e=~~e)<0?(e+=b)<0&&(e=0):e>b&&(e=b),(r=void 0===r?b:~~r)<0?(r+=b)<0&&(r=0):r>b&&(r=b),r<e&&(r=e);var M=this.subarray(e,r);return M.__proto__=a.prototype,M},a.prototype.readUIntLE=function(e,r,b){e>>>=0,r>>>=0,b||Q(e,r,this.length);for(var M=this[e],z=1,J=0;++J<r&&(z*=256);)M+=this[e+J]*z;return M},a.prototype.readUIntBE=function(e,r,b){e>>>=0,r>>>=0,b||Q(e,r,this.length);for(var M=this[e+--r],z=1;r>0&&(z*=256);)M+=this[e+--r]*z;return M},a.prototype.readUInt8=function(e,r){return e>>>=0,r||Q(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,r){return e>>>=0,r||Q(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,r){return e>>>=0,r||Q(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,r){return e>>>=0,r||Q(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,r){return e>>>=0,r||Q(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,r,b){e>>>=0,r>>>=0,b||Q(e,r,this.length);for(var M=this[e],z=1,J=0;++J<r&&(z*=256);)M+=this[e+J]*z;return M>=(z*=128)&&(M-=Math.pow(2,8*r)),M},a.prototype.readIntBE=function(e,r,b){e>>>=0,r>>>=0,b||Q(e,r,this.length);for(var M=r,z=1,J=this[e+--M];M>0&&(z*=256);)J+=this[e+--M]*z;return J>=(z*=128)&&(J-=Math.pow(2,8*r)),J},a.prototype.readInt8=function(e,r){return e>>>=0,r||Q(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,r){e>>>=0,r||Q(e,2,this.length);var b=this[e]|this[e+1]<<8;return 32768&b?4294901760|b:b},a.prototype.readInt16BE=function(e,r){e>>>=0,r||Q(e,2,this.length);var b=this[e+1]|this[e]<<8;return 32768&b?4294901760|b:b},a.prototype.readInt32LE=function(e,r){return e>>>=0,r||Q(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,r){return e>>>=0,r||Q(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,r){return e>>>=0,r||Q(e,4,this.length),w.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,r){return e>>>=0,r||Q(e,4,this.length),w.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,r){return e>>>=0,r||Q(e,8,this.length),w.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,r){return e>>>=0,r||Q(e,8,this.length),w.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,r,b,M){e=+e,r>>>=0,b>>>=0,M||P(this,e,r,b,Math.pow(2,8*b)-1,0);var J=1,ae=0;for(this[r]=255&e;++ae<b&&(J*=256);)this[r+ae]=e/J&255;return r+b},a.prototype.writeUIntBE=function(e,r,b,M){e=+e,r>>>=0,b>>>=0,M||P(this,e,r,b,Math.pow(2,8*b)-1,0);var J=b-1,ae=1;for(this[r+J]=255&e;--J>=0&&(ae*=256);)this[r+J]=e/ae&255;return r+b},a.prototype.writeUInt8=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,1,255,0),this[r]=255&e,r+1},a.prototype.writeUInt16LE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},a.prototype.writeUInt16BE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},a.prototype.writeUInt32LE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},a.prototype.writeUInt32BE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},a.prototype.writeIntLE=function(e,r,b,M){if(e=+e,r>>>=0,!M){var z=Math.pow(2,8*b-1);P(this,e,r,b,z-1,-z)}var J=0,ae=1,le=0;for(this[r]=255&e;++J<b&&(ae*=256);)e<0&&0===le&&0!==this[r+J-1]&&(le=1),this[r+J]=(e/ae|0)-le&255;return r+b},a.prototype.writeIntBE=function(e,r,b,M){if(e=+e,r>>>=0,!M){var z=Math.pow(2,8*b-1);P(this,e,r,b,z-1,-z)}var J=b-1,ae=1,le=0;for(this[r+J]=255&e;--J>=0&&(ae*=256);)e<0&&0===le&&0!==this[r+J+1]&&(le=1),this[r+J]=(e/ae|0)-le&255;return r+b},a.prototype.writeInt8=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},a.prototype.writeInt16LE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},a.prototype.writeInt16BE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},a.prototype.writeInt32LE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},a.prototype.writeInt32BE=function(e,r,b){return e=+e,r>>>=0,b||P(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},a.prototype.writeFloatLE=function(e,r,b){return X(this,e,r,!0,b)},a.prototype.writeFloatBE=function(e,r,b){return X(this,e,r,!1,b)},a.prototype.writeDoubleLE=function(e,r,b){return Z(this,e,r,!0,b)},a.prototype.writeDoubleBE=function(e,r,b){return Z(this,e,r,!1,b)},a.prototype.copy=function(e,r,b,M){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(b||(b=0),!M&&0!==M&&(M=this.length),r>=e.length&&(r=e.length),r||(r=0),M>0&&M<b&&(M=b),M===b||0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),e.length-r<M-b&&(M=e.length-r+b);var z=M-b;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,b,M);else if(this===e&&b<r&&r<M)for(var J=z-1;J>=0;--J)e[J+r]=this[J+b];else Uint8Array.prototype.set.call(e,this.subarray(b,M),r);return z},a.prototype.fill=function(e,r,b,M){if("string"==typeof e){if("string"==typeof r?(M=r,r=0,b=this.length):"string"==typeof b&&(M=b,b=this.length),void 0!==M&&"string"!=typeof M)throw new TypeError("encoding must be a string");if("string"==typeof M&&!a.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(1===e.length){var z=e.charCodeAt(0);("utf8"===M&&z<128||"latin1"===M)&&(e=z)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<b)throw new RangeError("Out of range index");if(b<=r)return this;var J;if(r>>>=0,b=void 0===b?this.length:b>>>0,e||(e=0),"number"==typeof e)for(J=r;J<b;++J)this[J]=e;else{var ae=a.isBuffer(e)?e:a.from(e,M),le=ae.length;if(0===le)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(J=0;J<b-r;++J)this[J+r]=ae[J%le]}return this};var F=/[^+/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function te(t,e){e=e||1/0;for(var r,b=t.length,M=null,z=[],J=0;J<b;++J){if((r=t.charCodeAt(J))>55295&&r<57344){if(!M){if(r>56319){(e-=3)>-1&&z.push(239,191,189);continue}if(J+1===b){(e-=3)>-1&&z.push(239,191,189);continue}M=r;continue}if(r<56320){(e-=3)>-1&&z.push(239,191,189),M=r;continue}r=65536+(M-55296<<10|r-56320)}else M&&(e-=3)>-1&&z.push(239,191,189);if(M=null,r<128){if((e-=1)<0)break;z.push(r)}else if(r<2048){if((e-=2)<0)break;z.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;z.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;z.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return z}function o(t){return d.toByteArray(function k(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function T(t,e,r,b){for(var M=0;M<b&&!(M+r>=e.length||M>=t.length);++M)e[M+r]=t[M];return M}function L(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function p(t){return t!=t}}).call(this)}).call(this,m("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:5}],4:[function(m,H,j){"use strict";var w,g="object"==typeof Reflect?Reflect:null,d=g&&"function"==typeof g.apply?g.apply:function(O,I,x){return Function.prototype.apply.call(O,I,x)};w=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:function(O){return Object.getOwnPropertyNames(O)};var i=Number.isNaN||function(O){return O!=O};function l(){l.init.call(this)}H.exports=l,H.exports.once=function A(V,O){return new Promise(function(I,x){function c(K){V.removeListener(O,D),x(K)}function D(){"function"==typeof V.removeListener&&V.removeListener("error",c),I([].slice.call(arguments))}q(V,O,D,{once:!0}),"error"!==O&&function W(V,O,I){"function"==typeof V.on&&q(V,"error",O,I)}(V,c,{once:!0})})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var a=10;function s(V){if("function"!=typeof V)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof V)}function y(V){return void 0===V._maxListeners?l.defaultMaxListeners:V._maxListeners}function R(V,O,I,x){var c,D,K;if(s(I),void 0===(D=V._events)?(D=V._events=Object.create(null),V._eventsCount=0):(void 0!==D.newListener&&(V.emit("newListener",O,I.listener?I.listener:I),D=V._events),K=D[O]),void 0===K)K=D[O]=I,++V._eventsCount;else if("function"==typeof K?K=D[O]=x?[I,K]:[K,I]:x?K.unshift(I):K.push(I),(c=y(V))>0&&K.length>c&&!K.warned){K.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=V,$.type=O,$.count=K.length,function u(V){console&&console.warn&&console.warn(V)}($)}return V}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(V,O,I){var x={fired:!1,wrapFn:void 0,target:V,type:O,listener:I},c=f.bind(x);return c.listener=I,x.wrapFn=c,c}function h(V,O,I){var x=V._events;if(void 0===x)return[];var c=x[O];return void 0===c?[]:"function"==typeof c?I?[c.listener||c]:[c]:I?function N(V){for(var O=new Array(V.length),I=0;I<O.length;++I)O[I]=V[I].listener||V[I];return O}(c):v(c,c.length)}function E(V){var O=this._events;if(void 0!==O){var I=O[V];if("function"==typeof I)return 1;if(void 0!==I)return I.length}return 0}function v(V,O){for(var I=new Array(O),x=0;x<O;++x)I[x]=V[x];return I}function q(V,O,I,x){if("function"==typeof V.on)x.once?V.once(O,I):V.on(O,I);else{if("function"!=typeof V.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof V);V.addEventListener(O,function c(D){x.once&&V.removeEventListener(O,c),I(D)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(V){if("number"!=typeof V||V<0||i(V))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+V+".");a=V}}),l.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(O){if("number"!=typeof O||O<0||i(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this},l.prototype.getMaxListeners=function(){return y(this)},l.prototype.emit=function(O){for(var I=[],x=1;x<arguments.length;x++)I.push(arguments[x]);var c="error"===O,D=this._events;if(void 0!==D)c=c&&void 0===D.error;else if(!c)return!1;if(c){var K;if(I.length>0&&(K=I[0]),K instanceof Error)throw K;var $=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw $.context=K,$}var Y=D[O];if(void 0===Y)return!1;if("function"==typeof Y)d(Y,this,I);else{var G=Y.length,re=v(Y,G);for(x=0;x<G;++x)d(re[x],this,I)}return!0},l.prototype.on=l.prototype.addListener=function(O,I){return R(this,O,I,!1)},l.prototype.prependListener=function(O,I){return R(this,O,I,!0)},l.prototype.once=function(O,I){return s(I),this.on(O,_(this,O,I)),this},l.prototype.prependOnceListener=function(O,I){return s(I),this.prependListener(O,_(this,O,I)),this},l.prototype.off=l.prototype.removeListener=function(O,I){var x,c,D,K,$;if(s(I),void 0===(c=this._events))return this;if(void 0===(x=c[O]))return this;if(x===I||x.listener===I)0==--this._eventsCount?this._events=Object.create(null):(delete c[O],c.removeListener&&this.emit("removeListener",O,x.listener||I));else if("function"!=typeof x){for(D=-1,K=x.length-1;K>=0;K--)if(x[K]===I||x[K].listener===I){$=x[K].listener,D=K;break}if(D<0)return this;0===D?x.shift():function C(V,O){for(;O+1<V.length;O++)V[O]=V[O+1];V.pop()}(x,D),1===x.length&&(c[O]=x[0]),void 0!==c.removeListener&&this.emit("removeListener",O,$||I)}return this},l.prototype.removeAllListeners=function(O){var I,x,c;if(void 0===(x=this._events))return this;if(void 0===x.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==x[O]&&(0==--this._eventsCount?this._events=Object.create(null):delete x[O]),this;if(0===arguments.length){var K,D=Object.keys(x);for(c=0;c<D.length;++c)"removeListener"!==(K=D[c])&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(I=x[O]))this.removeListener(O,I);else if(void 0!==I)for(c=I.length-1;c>=0;c--)this.removeListener(O,I[c]);return this},l.prototype.listeners=function(O){return h(this,O,!0)},l.prototype.rawListeners=function(O){return h(this,O,!1)},l.listenerCount=function(V,O){return"function"==typeof V.listenerCount?V.listenerCount(O):E.call(V,O)},l.prototype.listenerCount=E,l.prototype.eventNames=function(){return this._eventsCount>0?w(this._events):[]}},{}],5:[function(m,H,j){j.read=function(g,d,w,u,i){var l,a,s=8*i-u-1,y=(1<<s)-1,R=y>>1,f=-7,_=w?i-1:0,h=w?-1:1,E=g[d+_];for(_+=h,l=E&(1<<-f)-1,E>>=-f,f+=s;f>0;l=256*l+g[d+_],_+=h,f-=8);for(a=l&(1<<-f)-1,l>>=-f,f+=u;f>0;a=256*a+g[d+_],_+=h,f-=8);if(0===l)l=1-R;else{if(l===y)return a?NaN:1/0*(E?-1:1);a+=Math.pow(2,u),l-=R}return(E?-1:1)*a*Math.pow(2,l-u)},j.write=function(g,d,w,u,i,l){var a,s,y,R=8*l-i-1,f=(1<<R)-1,_=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,E=u?0:l-1,v=u?1:-1,C=d<0||0===d&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(s=isNaN(d)?1:0,a=f):(a=Math.floor(Math.log(d)/Math.LN2),d*(y=Math.pow(2,-a))<1&&(a--,y*=2),(d+=a+_>=1?h/y:h*Math.pow(2,1-_))*y>=2&&(a++,y/=2),a+_>=f?(s=0,a=f):a+_>=1?(s=(d*y-1)*Math.pow(2,i),a+=_):(s=d*Math.pow(2,_-1)*Math.pow(2,i),a=0));i>=8;g[w+E]=255&s,E+=v,s/=256,i-=8);for(a=a<<i|s,R+=i;R>0;g[w+E]=255&a,E+=v,a/=256,R-=8);g[w+E-v]|=128*C}},{}],6:[function(m,H,j){function g(w){return!!w.constructor&&"function"==typeof w.constructor.isBuffer&&w.constructor.isBuffer(w)}H.exports=function(w){return null!=w&&(g(w)||function d(w){return"function"==typeof w.readFloatLE&&"function"==typeof w.slice&&g(w.slice(0,0))}(w)||!!w._isBuffer)}},{}],7:[function(m,H,j){(function(g,d){(function(){"use strict";var w=m("events").EventEmitter,u=m("./store"),i=m("mqtt-packet"),l=m("readable-stream").Writable,a=m("inherits"),s=m("reinterval"),y=m("./validations"),R=m("xtend"),f=m("debug")("mqttjs:client"),_=g?g.nextTick:function(x){setTimeout(x,0)},h=d.setImmediate||function(x){_(x)},E={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},v=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],C={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function A(x,c,D){f("sendPacket :: packet: %O",c),f("sendPacket :: emitting `packetsend`"),x.emit("packetsend",c),f("sendPacket :: writing to stream");var K=i.writeToStream(c,x.stream,x.options);f("sendPacket :: writeToStream result %s",K),!K&&D?(f("sendPacket :: handle events on `drain` once through callback."),x.stream.once("drain",D)):D&&(f("sendPacket :: invoking cb"),D())}function V(x,c,D,K){f("storeAndSend :: store packet with cmd %s to outgoingStore",c.cmd),x.outgoingStore.put(c,function(Y){if(Y)return D&&D(Y);K(),A(x,c,D)})}function O(x){f("nop ::",x)}function I(x,c){var D,K=this;if(!(this instanceof I))return new I(x,c);for(D in this.options=c||{},E)this.options[D]=typeof this.options[D]>"u"?E[D]:c[D];f("MqttClient :: options.protocol",c.protocol),f("MqttClient :: options.protocolVersion",c.protocolVersion),f("MqttClient :: options.username",c.username),f("MqttClient :: options.keepalive",c.keepalive),f("MqttClient :: options.reconnectPeriod",c.reconnectPeriod),f("MqttClient :: options.rejectUnauthorized",c.rejectUnauthorized),this.options.clientId="string"==typeof c.clientId?c.clientId:function N(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}(),f("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===c.protocolVersion&&c.customHandleAcks?c.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=x,this.outgoingStore=c.outgoingStore||new u,this.incomingStore=c.incomingStore||new u,this.queueQoSZero=void 0===c.queueQoSZero||c.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",function(){var $=this.queue;f("connect :: sending queued packets"),function Y(){var G=$.shift();f("deliver :: entry %o",G);var re=null;G&&(f("deliver :: call _sendPacket for %o",re=G.packet),K._sendPacket(re,function(oe){G.cb&&G.cb(oe),Y()}))}()}),this.on("close",function(){f("close :: connected set to `false`"),this.connected=!1,f("close :: clearing connackTimer"),clearTimeout(this.connackTimer),f("close :: clearing ping timer"),null!==K.pingTimer&&(K.pingTimer.clear(),K.pingTimer=null),f("close :: calling _setupReconnect"),this._setupReconnect()}),w.call(this),f("MqttClient :: setting up stream"),this._setupStream()}a(I,w),I.prototype._setupStream=function(){var x,c=this,D=new l,K=i.parser(this.options),$=null,Y=[];function G(){if(Y.length)_(re);else{var ne=$;$=null,ne()}}function re(){f("work :: getting next packet in queue");var ne=Y.shift();if(ne)f("work :: packet pulled from queue"),c._handlePacket(ne,G);else{f("work :: no packets in queue");var ie=$;$=null,f("work :: done flag is %s",!!ie),ie&&ie()}}if(f("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),f("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),K.on("packet",function(ne){f("parser :: on packet push to packets array."),Y.push(ne)}),D._write=function(ne,ie,ee){$=ee,f("writable stream :: parsing buffer"),K.parse(ne),re()},f("_setupStream :: pipe stream to writable stream"),this.stream.pipe(D),this.stream.on("error",function oe(ne){f("streamErrorHandler :: error",ne.message),v.includes(ne.code)?(f("streamErrorHandler :: emitting error"),c.emit("error",ne)):O(ne)}),this.stream.on("close",function(){f("(%s)stream :: on close",c.options.clientId),function q(x){x&&(f("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(x).forEach(function(c){x[c].volatile&&"function"==typeof x[c].cb&&(x[c].cb(new Error("Connection closed")),delete x[c])}))}(c.outgoing),f("stream: emit close to MqttClient"),c.emit("close")}),f("_setupStream: sending packet `connect`"),(x=Object.create(this.options)).cmd="connect",A(this,x),K.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return c.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&A(this,R({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){f("!!connectTimeout hit!! Calling _cleanUp with force `true`"),c._cleanUp(!0)},this.options.connectTimeout)},I.prototype._handlePacket=function(x,c){var D=this.options;if(5===D.protocolVersion&&D.properties&&D.properties.maximumPacketSize&&D.properties.maximumPacketSize<x.length)return this.emit("error",new Error("exceeding packets size "+x.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(f("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",x),x.cmd){case"publish":this._handlePublish(x,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(x),c();break;case"pubrel":this._handlePubrel(x,c);break;case"connack":this._handleConnack(x),c();break;case"pingresp":this._handlePingresp(x),c();break;case"disconnect":this._handleDisconnect(x),c()}},I.prototype._checkDisconnecting=function(x){return this.disconnecting&&(x?x(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},I.prototype.publish=function(x,c,D,K){f("publish :: message `%s` to topic `%s`",c,x);var $,Y=this.options;if("function"==typeof D&&(K=D,D=null),D=R({qos:0,retain:!1,dup:!1},D),this._checkDisconnecting(K))return this;switch($={cmd:"publish",topic:x,payload:c,qos:D.qos,retain:D.retain,messageId:this._nextId(),dup:D.dup},5===Y.protocolVersion&&($.properties=D.properties,(!Y.properties&&$.properties&&$.properties.topicAlias||D.properties&&Y.properties&&(D.properties.topicAlias&&Y.properties.topicAliasMaximum&&D.properties.topicAlias>Y.properties.topicAliasMaximum||!Y.properties.topicAliasMaximum&&D.properties.topicAlias))&&delete $.properties.topicAlias),f("publish :: qos",D.qos),D.qos){case 1:case 2:this.outgoing[$.messageId]={volatile:!1,cb:K||O},this._storeProcessing?(f("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[$.messageId]=!1,this._storePacket($,void 0,D.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",$.cmd),this._sendPacket($,void 0,D.cbStorePut));break;default:this._storeProcessing?(f("_storeProcessing enabled"),this._storePacket($,K,D.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",$.cmd),this._sendPacket($,K,D.cbStorePut))}return this},I.prototype.subscribe=function(){for(var x,c=new Array(arguments.length),D=0;D<arguments.length;D++)c[D]=arguments[D];var oe,K=[],$=c.shift(),Y=$.resubscribe,G=c.pop()||O,re=c.pop(),se=this,ne=this.options.protocolVersion;if(delete $.resubscribe,"string"==typeof $&&($=[$]),"function"!=typeof G&&(re=G,G=O),null!==(oe=y.validateTopics($)))return h(G,new Error("Invalid topic "+oe)),this;if(this._checkDisconnecting(G))return f("subscribe: discconecting true"),this;var ie={qos:0};if(5===ne&&(ie.nl=!1,ie.rap=!1,ie.rh=0),re=R(ie,re),Array.isArray($)?$.forEach(function(Q){if(f("subscribe: array topic %s",Q),!se._resubscribeTopics.hasOwnProperty(Q)||se._resubscribeTopics[Q].qos<re.qos||Y){var P={topic:Q,qos:re.qos};5===ne&&(P.nl=re.nl,P.rap=re.rap,P.rh=re.rh,P.properties=re.properties),f("subscribe: pushing topic `%s` and qos `%s` to subs list",P.topic,P.qos),K.push(P)}}):Object.keys($).forEach(function(Q){if(f("subscribe: object topic %s",Q),!se._resubscribeTopics.hasOwnProperty(Q)||se._resubscribeTopics[Q].qos<$[Q].qos||Y){var P={topic:Q,qos:$[Q].qos};5===ne&&(P.nl=$[Q].nl,P.rap=$[Q].rap,P.rh=$[Q].rh,P.properties=re.properties),f("subscribe: pushing `%s` to subs list",P),K.push(P)}}),x={cmd:"subscribe",subscriptions:K,qos:1,retain:!1,dup:!1,messageId:this._nextId()},re.properties&&(x.properties=re.properties),K.length){if(this.options.resubscribe){f("subscribe :: resubscribe true");var ee=[];K.forEach(function(Q){if(se.options.reconnectPeriod>0){var P={qos:Q.qos};5===ne&&(P.nl=Q.nl||!1,P.rap=Q.rap||!1,P.rh=Q.rh||0,P.properties=Q.properties),se._resubscribeTopics[Q.topic]=P,ee.push(Q.topic)}}),se.messageIdToTopic[x.messageId]=ee}return this.outgoing[x.messageId]={volatile:!0,cb:function(Q,P){if(!Q)for(var B=P.granted,X=0;X<B.length;X+=1)K[X].qos=B[X];G(Q,K)}},f("subscribe :: call _sendPacket"),this._sendPacket(x),this}G(null,[])},I.prototype.unsubscribe=function(){for(var x={cmd:"unsubscribe",qos:1,messageId:this._nextId()},c=this,D=new Array(arguments.length),K=0;K<arguments.length;K++)D[K]=arguments[K];var $=D.shift(),Y=D.pop()||O,G=D.pop();return"string"==typeof $&&($=[$]),"function"!=typeof Y&&(G=Y,Y=O),this._checkDisconnecting(Y)||("string"==typeof $?x.unsubscriptions=[$]:Array.isArray($)&&(x.unsubscriptions=$),this.options.resubscribe&&x.unsubscriptions.forEach(function(re){delete c._resubscribeTopics[re]}),"object"==typeof G&&G.properties&&(x.properties=G.properties),this.outgoing[x.messageId]={volatile:!0,cb:Y},f("unsubscribe: call _sendPacket"),this._sendPacket(x)),this},I.prototype.end=function(x,c,D){var K=this;function $(){f("end :: closeStores: closing incoming and outgoing stores"),K.disconnected=!0,K.incomingStore.close(function(G){K.outgoingStore.close(function(re){if(f("end :: closeStores: emitting end"),K.emit("end"),D){let oe=G||re;f("end :: closeStores: invoking callback with args"),D(oe)}})}),K._deferredReconnect&&K._deferredReconnect()}function Y(){f("end :: (%s) :: finish :: calling _cleanUp with force %s",K.options.clientId,x),K._cleanUp(x,()=>{f("end :: finish :: calling process.nextTick on closeStores"),_($.bind(K))},c)}return f("end :: (%s)",this.options.clientId),(null==x||"boolean"!=typeof x)&&(D=c||O,c=x,x=!1,"object"!=typeof c&&(D=c,c=null,"function"!=typeof D&&(D=O))),"object"!=typeof c&&(D=c,c=null),f("end :: cb? %s",!!D),D=D||O,this.disconnecting?(D(),this):(this._clearReconnect(),this.disconnecting=!0,!x&&Object.keys(this.outgoing).length>0?(f("end :: (%s) :: calling finish in 10ms once outgoing is empty",K.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,Y,10))):(f("end :: (%s) :: immediately calling finish",K.options.clientId),Y()),this)},I.prototype.removeOutgoingMessage=function(x){var c=this.outgoing[x]?this.outgoing[x].cb:null;return delete this.outgoing[x],this.outgoingStore.del({messageId:x},function(){c(new Error("Message removed"))}),this},I.prototype.reconnect=function(x){f("client reconnect");var c=this,D=function(){x?(c.options.incomingStore=x.incomingStore,c.options.outgoingStore=x.outgoingStore):(c.options.incomingStore=null,c.options.outgoingStore=null),c.incomingStore=c.options.incomingStore||new u,c.outgoingStore=c.options.outgoingStore||new u,c.disconnecting=!1,c.disconnected=!1,c._deferredReconnect=null,c._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=D:D(),this},I.prototype._reconnect=function(){f("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),f("client already connected. disconnecting first.")):(f("_reconnect: calling _setupStream"),this._setupStream())},I.prototype._setupReconnect=function(){var x=this;!x.disconnecting&&!x.reconnectTimer&&x.options.reconnectPeriod>0?(this.reconnecting||(f("_setupReconnect :: emit `offline` state"),this.emit("offline"),f("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),f("_setupReconnect :: setting reconnectTimer for %d ms",x.options.reconnectPeriod),x.reconnectTimer=setInterval(function(){f("reconnectTimer :: reconnect triggered!"),x._reconnect()},x.options.reconnectPeriod)):f("_setupReconnect :: doing nothing...")},I.prototype._clearReconnect=function(){f("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},I.prototype._cleanUp=function(x,c){var D=arguments[2];if(c&&(f("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",c)),f("_cleanUp :: forced? %s",x),x)0===this.options.reconnectPeriod&&this.options.clean&&function W(x){x&&(f("flush: queue exists? %b",!!x),Object.keys(x).forEach(function(c){"function"==typeof x[c].cb&&(x[c].cb(new Error("Connection closed")),delete x[c])}))}(this.outgoing),f("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{var K=R({cmd:"disconnect"},D);f("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(K,h.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(f("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(f("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),c&&!this.connected&&(f("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",c),c())},I.prototype._sendPacket=function(x,c,D){if(f("_sendPacket :: (%s) ::  start",this.options.clientId),D=D||O,!this.connected)return f("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(x,c,D);switch(this._shiftPingInterval(),x.cmd){case"publish":break;case"pubrel":return void V(this,x,c,D);default:return void A(this,x,c)}switch(x.qos){case 2:case 1:V(this,x,c,D);break;default:A(this,x,c)}f("_sendPacket :: (%s) ::  end",this.options.clientId)},I.prototype._storePacket=function(x,c,D){f("_storePacket :: packet: %o",x),f("_storePacket :: cb? %s",!!c),D=D||O,0===(x.qos||0)&&this.queueQoSZero||"publish"!==x.cmd?this.queue.push({packet:x,cb:c}):x.qos>0?(c=this.outgoing[x.messageId]?this.outgoing[x.messageId].cb:null,this.outgoingStore.put(x,function(K){if(K)return c&&c(K);D()})):c&&c(new Error("No connection to broker"))},I.prototype._setupPingTimer=function(){f("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);var x=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=s(function(){x._checkPing()},1e3*this.options.keepalive))},I.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},I.prototype._checkPing=function(){f("_checkPing :: checking ping..."),this.pingResp?(f("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(f("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},I.prototype._handlePingresp=function(){this.pingResp=!0},I.prototype._handleConnack=function(x){f("_handleConnack");var c=this.options,K=5===c.protocolVersion?x.reasonCode:x.returnCode;if(clearTimeout(this.connackTimer),x.properties&&(x.properties.topicAliasMaximum&&(c.properties||(c.properties={}),c.properties.topicAliasMaximum=x.properties.topicAliasMaximum),x.properties.serverKeepAlive&&c.keepalive&&(c.keepalive=x.properties.serverKeepAlive,this._shiftPingInterval()),x.properties.maximumPacketSize&&(c.properties||(c.properties={}),c.properties.maximumPacketSize=x.properties.maximumPacketSize)),0===K)this.reconnecting=!1,this._onConnect(x);else if(K>0){var $=new Error("Connection refused: "+C[K]);$.code=K,this.emit("error",$)}},I.prototype._handlePublish=function(x,c){f("_handlePublish: packet %o",x),c=typeof c<"u"?c:O;var D=x.topic.toString(),K=x.payload,$=x.qos,Y=x.messageId,G=this,re=this.options,oe=[0,16,128,131,135,144,145,151,153];switch(f("_handlePublish: qos %d",$),$){case 2:re.customHandleAcks(D,K,x,function(se,ne){return se instanceof Error||(ne=se,se=null),se?G.emit("error",se):-1===oe.indexOf(ne)?G.emit("error",new Error("Wrong reason code for pubrec")):void(ne?G._sendPacket({cmd:"pubrec",messageId:Y,reasonCode:ne},c):G.incomingStore.put(x,function(){G._sendPacket({cmd:"pubrec",messageId:Y},c)}))});break;case 1:re.customHandleAcks(D,K,x,function(se,ne){return se instanceof Error||(ne=se,se=null),se?G.emit("error",se):-1===oe.indexOf(ne)?G.emit("error",new Error("Wrong reason code for puback")):(ne||G.emit("message",D,K,x),void G.handleMessage(x,function(ie){if(ie)return c&&c(ie);G._sendPacket({cmd:"puback",messageId:Y,reasonCode:ne},c)}))});break;case 0:this.emit("message",D,K,x),this.handleMessage(x,c);break;default:f("_handlePublish: unknown QoS. Doing nothing.")}},I.prototype.handleMessage=function(x,c){c()},I.prototype._handleAck=function(x){var G,c=x.messageId,D=x.cmd,K=null,$=this.outgoing[c]?this.outgoing[c].cb:null,Y=this;if($){switch(f("_handleAck :: packet type",D),D){case"pubcomp":case"puback":var re=x.reasonCode;re&&re>0&&16!==re&&((G=new Error("Publish error: "+C[re])).code=re,$(G,x)),delete this.outgoing[c],this.outgoingStore.del(x,$);break;case"pubrec":K={cmd:"pubrel",qos:2,messageId:c};var oe=x.reasonCode;oe&&oe>0&&16!==oe?((G=new Error("Publish error: "+C[oe])).code=oe,$(G,x)):this._sendPacket(K);break;case"suback":delete this.outgoing[c];for(var se=0;se<x.granted.length;se++)if(128&x.granted[se]){var ne=this.messageIdToTopic[c];ne&&ne.forEach(function(ie){delete Y._resubscribeTopics[ie]})}$(null,x);break;case"unsuback":delete this.outgoing[c],$(null);break;default:Y.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else f("_handleAck :: Server sent an ack in error. Ignoring.")},I.prototype._handlePubrel=function(x,c){f("handling pubrel packet"),c=typeof c<"u"?c:O;var K=this,$={cmd:"pubcomp",messageId:x.messageId};K.incomingStore.get(x,function(Y,G){Y?K._sendPacket($,c):(K.emit("message",G.topic,G.payload,G),K.handleMessage(G,function(re){if(re)return c(re);K.incomingStore.del(G,O),K._sendPacket($,c)}))})},I.prototype._handleDisconnect=function(x){this.emit("disconnect",x)},I.prototype._nextId=function(){var x=this.nextId++;return 65536===this.nextId&&(this.nextId=1),x},I.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},I.prototype._resubscribe=function(x){f("_resubscribe");var c=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!x.sessionPresent)&&c.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){f("_resubscribe: protocolVersion 5");for(var D=0;D<c.length;D++){var K={};K[c[D]]=this._resubscribeTopics[c[D]],K.resubscribe=!0,this.subscribe(K,{properties:K[c[D]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},I.prototype._onConnect=function(x){if(this.disconnected)this.emit("connect",x);else{var c=this;this._setupPingTimer(),this._resubscribe(x),this.connected=!0,function D(){var K=c.outgoingStore.createStream();function $(){c._storeProcessing=!1,c._packetIdsDuringStoreProcessing={}}function Y(){K.destroy(),K=null,$()}function G(){if(K){c._storeProcessing=!0;var oe,re=K.read(1);if(!re)return void K.once("readable",G);if(c._packetIdsDuringStoreProcessing[re.messageId])return void G();c.disconnecting||c.reconnectTimer?K.destroy&&K.destroy():(oe=c.outgoing[re.messageId]?c.outgoing[re.messageId].cb:null,c.outgoing[re.messageId]={volatile:!1,cb:function(se,ne){oe&&oe(se,ne),G()}},c._packetIdsDuringStoreProcessing[re.messageId]=!0,c._sendPacket(re))}}c.once("close",Y),K.on("error",function(re){$(),c.removeListener("close",Y),c.emit("error",re)}),K.on("end",function(){var re=!0;for(var oe in c._packetIdsDuringStoreProcessing)if(!c._packetIdsDuringStoreProcessing[oe]){re=!1;break}re?($(),c.removeListener("close",Y),c.emit("connect",x)):D()}),G()}()}},H.exports=I}).call(this)}).call(this,m("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./store":13,"./validations":14,_process:69,debug:19,events:4,inherits:34,"mqtt-packet":38,"readable-stream":60,reinterval:61,xtend:68}],8:[function(m,H,j){(function(g){(function(){"use strict";var u,i,l,d=m("readable-stream").Transform,w=m("duplexify"),a=!1;H.exports=function _(h,E){if(E.hostname=E.hostname||E.host,!E.hostname)throw new Error("Could not determine host. Specify host manually.");var v="MQIsdp"===E.protocolId&&3===E.protocolVersion?"mqttv3.1":"mqtt";!function y(h){h.hostname||(h.hostname="localhost"),h.path||(h.path="/"),h.wsOptions||(h.wsOptions={})}(E);var C=function R(h,E){var v="alis"===h.protocol?"wss":"ws",C=v+"://"+h.hostname+h.path;return h.port&&80!==h.port&&443!==h.port&&(C=v+"://"+h.hostname+":"+h.port+h.path),"function"==typeof h.transformWsUrl&&(C=h.transformWsUrl(C,h,E)),C}(E,h);return(u=E.my).connectSocket({url:C,protocols:v}),i=function s(){var h=new d;return h._write=function(E,v,C){u.sendSocketMessage({data:E.buffer,success:function(){C()},fail:function(){C(new Error)}})},h._flush=function(v){u.closeSocket({success:function(){v()}})},h}(),l=w.obj(),function f(){a||(a=!0,u.onSocketOpen(function(){l.setReadable(i),l.setWritable(i),l.emit("connect")}),u.onSocketMessage(function(h){if("string"==typeof h.data){var E=g.from(h.data,"base64");i.push(E)}else{var v=new FileReader;v.addEventListener("load",function(){var C=v.result;C=C instanceof ArrayBuffer?g.from(C):g.from(C,"utf8"),i.push(C)}),v.readAsArrayBuffer(h.data)}}),u.onSocketClose(function(){l.end(),l.destroy()}),u.onSocketError(function(h){l.destroy(h)}))}(),l}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3,duplexify:21,"readable-stream":60}],9:[function(m,H,j){"use strict";var g=m("net"),d=m("debug")("mqttjs:tcp");H.exports=function w(u,i){var l,a;return i.port=i.port||1883,i.hostname=i.hostname||i.host||"localhost",d("port %d and host %s",l=i.port,a=i.hostname),g.createConnection(l,a)}},{debug:19,net:2}],10:[function(m,H,j){"use strict";var g=m("tls"),d=m("debug")("mqttjs:tls");H.exports=function w(u,i){var l;function a(s){i.rejectUnauthorized&&u.emit("error",s),l.end()}return i.port=i.port||8883,i.host=i.hostname||i.host||"localhost",i.servername=i.host,i.rejectUnauthorized=!1!==i.rejectUnauthorized,delete i.path,d("port %d host %s rejectUnauthorized %b",i.port,i.host,i.rejectUnauthorized),(l=g.connect(i)).on("secureConnect",function(){i.rejectUnauthorized&&!l.authorized?l.emit("error",new Error("TLS not authorized")):l.removeListener("error",a)}),l.on("error",a),l}},{debug:19,tls:2}],11:[function(m,H,j){(function(g,d){(function(){"use strict";const w=m("ws"),u=m("debug")("mqttjs:ws"),i=m("duplexify"),l=m("readable-stream").Transform;let a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const s=typeof g<"u"&&"browser"===g.title||"function"==typeof fe;function y(C,N){let A=C.protocol+"://"+C.hostname+":"+C.port+C.path;return"function"==typeof C.transformWsUrl&&(A=C.transformWsUrl(A,C,N)),A}function R(C){let N=C;return C.hostname||(N.hostname="localhost"),C.port||(N.port="wss"===C.protocol?443:80),C.path||(N.path="/"),C.wsOptions||(N.wsOptions={}),!s&&"wss"===C.protocol&&a.forEach(function(A){C.hasOwnProperty(A)&&!C.wsOptions.hasOwnProperty(A)&&(N.wsOptions[A]=C[A])}),N}H.exports=s?function v(C,N){let A;u("browserStreamBuilder");const q=function f(C){let N=R(C);if(N.hostname||(N.hostname=N.host),!N.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const A=new URL(document.URL);N.hostname=A.hostname,N.port||(N.port=A.port)}return void 0===N.objectMode&&(N.objectMode=!(!0===N.binary||void 0===N.binary)),N}(N).browserBufferSize||524288,V=N.browserBufferTimeout||1e3,O=!N.objectMode;let I=function h(C,N){const A="MQIsdp"===N.protocolId&&3===N.protocolVersion?"mqttv3.1":"mqtt";let W=y(N,C),q=new WebSocket(W,[A]);return q.binaryType="arraybuffer",q}(C,N),x=function D(ne,ie,ee){let Q=new l({objectModeMode:ne.objectMode});return Q._write=ie,Q._flush=ee,Q}(N,function oe(ne,ie,ee){I.bufferedAmount>q&&setTimeout(oe,V,ne,ie,ee),O&&"string"==typeof ne&&(ne=d.from(ne,"utf8"));try{I.send(ne)}catch(Q){return ee(Q)}ee()},function se(ne){I.close(),ne()});N.objectMode||(x._writev=re),x.on("close",()=>{I.close()});const c=typeof I.addEventListener>"u";function K(){A.setReadable(x),A.setWritable(x),A.emit("connect")}function $(){A.end(),A.destroy()}function Y(ne){A.destroy(ne)}function G(ne){let ie=ne.data;ie=ie instanceof ArrayBuffer?d.from(ie):d.from(ie,"utf8"),x.push(ie)}function re(ne,ie){const ee=new Array(ne.length);for(let Q=0;Q<ne.length;Q++)ee[Q]="string"==typeof ne[Q].chunk?d.from(ne[Q],"utf8"):ne[Q].chunk;this._write(d.concat(ee),"binary",ie)}return I.readyState===I.OPEN?A=x:(A=A=i(void 0,void 0,N),N.objectMode||(A._writev=re),c?I.addEventListener("open",K):I.onopen=K),A.socket=I,c?(I.addEventListener("close",$),I.addEventListener("error",Y),I.addEventListener("message",G)):(I.onclose=$,I.onerror=Y,I.onmessage=G),A}:function E(C,N){u("streamBuilder");let A=R(N);const W=y(A,C);let q=function _(C,N,A){u("createWebSocket"),u("protocol: "+A.protocolId+" "+A.protocolVersion);const W="MQIsdp"===A.protocolId&&3===A.protocolVersion?"mqttv3.1":"mqtt";return u("creating new Websocket for url: "+N+" and protocol: "+W),new w(N,[W],A.wsOptions)}(0,W,A),V=w.createWebSocketStream(q,A.wsOptions);return V.url=W,V}}).call(this)}).call(this,m("_process"),m("buffer").Buffer)},{_process:69,buffer:3,debug:19,duplexify:21,"readable-stream":60,ws:67}],12:[function(m,H,j){(function(g){(function(){"use strict";var u,i,l,d=m("readable-stream").Transform,w=m("duplexify");H.exports=function f(_,h){if(h.hostname=h.hostname||h.host,!h.hostname)throw new Error("Could not determine host. Specify host manually.");var E="MQIsdp"===h.protocolId&&3===h.protocolVersion?"mqttv3.1":"mqtt";!function s(_){_.hostname||(_.hostname="localhost"),_.path||(_.path="/"),_.wsOptions||(_.wsOptions={})}(h);var v=function y(_,h){var E="wxs"===_.protocol?"wss":"ws",v=E+"://"+_.hostname+_.path;return _.port&&80!==_.port&&443!==_.port&&(v=E+"://"+_.hostname+":"+_.port+_.path),"function"==typeof _.transformWsUrl&&(v=_.transformWsUrl(v,_,h)),v}(h,_);u=wx.connectSocket({url:v,protocols:[E]}),i=function a(){var _=new d;return _._write=function(h,E,v){u.send({data:h.buffer,success:function(){v()},fail:function(C){v(new Error(C))}})},_._flush=function(E){u.close({success:function(){E()}})},_}(),(l=w.obj())._destroy=function(N,A){u.close({success:function(){A&&A(N)}})};var C=l.destroy;return l.destroy=function(){l.destroy=C;var N=this;setTimeout(function(){u.close({fail:function(){N._destroy(new Error)}})},0)}.bind(l),function R(){u.onOpen(function(){l.setReadable(i),l.setWritable(i),l.emit("connect")}),u.onMessage(function(_){var h=_.data;h=h instanceof ArrayBuffer?g.from(h):g.from(h,"utf8"),i.push(h)}),u.onClose(function(){l.end(),l.destroy()}),u.onError(function(_){l.destroy(new Error(_.errMsg))})}(),l}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3,duplexify:21,"readable-stream":60}],13:[function(m,H,j){"use strict";var g=m("xtend"),d=m("readable-stream").Readable,w={objectMode:!0},u={clean:!0};function i(l){if(!(this instanceof i))return new i(l);this.options=l||{},this.options=g(u,l),this._inflights=new Map}i.prototype.put=function(l,a){return this._inflights.set(l.messageId,l),a&&a(),this},i.prototype.createStream=function(){var l=new d(w),a=!1,s=[],y=0;return this._inflights.forEach(function(R,f){s.push(R)}),l._read=function(){this.push(!a&&y<s.length?s[y++]:null)},l.destroy=function(){if(!a){var R=this;a=!0,setTimeout(function(){R.emit("close")},0)}},l},i.prototype.del=function(l,a){return(l=this._inflights.get(l.messageId))?(this._inflights.delete(l.messageId),a(null,l)):a&&a(new Error("missing packet")),this},i.prototype.get=function(l,a){return(l=this._inflights.get(l.messageId))?a(null,l):a&&a(new Error("missing packet")),this},i.prototype.close=function(l){this.options.clean&&(this._inflights=null),l&&l()},H.exports=i},{"readable-stream":60,xtend:68}],14:[function(m,H,j){"use strict";function g(w){for(var u=w.split("/"),i=0;i<u.length;i++)if("+"!==u[i]){if("#"===u[i])return i===u.length-1;if(-1!==u[i].indexOf("+")||-1!==u[i].indexOf("#"))return!1}return!0}H.exports={validateTopics:function d(w){if(0===w.length)return"empty_topic_list";for(var u=0;u<w.length;u++)if(!g(w[u]))return w[u];return null}}},{}],15:[function(m,H,j){(function(g){(function(){"use strict";var d=m("../client"),w=m("../store"),u=m("url"),i=m("xtend"),l=m("debug")("mqttjs"),a={};function y(R,f){if(l("connecting to an MQTT broker..."),"object"==typeof R&&!f&&(f=R,R=null),f=f||{},R){var _=u.parse(R,!0);if(null!=_.port&&(_.port=Number(_.port)),null===(f=i(_,f)).protocol)throw new Error("Missing protocol");f.protocol=f.protocol.replace(/:$/,"")}if(function s(R){var f;R.auth&&((f=R.auth.match(/^(.+):(.+)$/))?(R.username=f[1],R.password=f[2]):R.username=R.auth)}(f),f.query&&"string"==typeof f.query.clientId&&(f.clientId=f.query.clientId),f.cert&&f.key){if(!f.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(f.protocol))switch(f.protocol){case"mqtt":f.protocol="mqtts";break;case"ws":f.protocol="wss";break;case"wx":f.protocol="wxs";break;case"ali":f.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+f.protocol+'"!')}}if(!a[f.protocol]){var h=-1!==["mqtts","wss"].indexOf(f.protocol);f.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(C,N){return(!h||N%2!=0)&&"function"==typeof a[C]})[0]}if(!1===f.clean&&!f.clientId)throw new Error("Missing clientId for unclean clients");f.protocol&&(f.defaultProtocol=f.protocol);var v=new d(function E(C){return f.servers&&((!C._reconnectCount||C._reconnectCount===f.servers.length)&&(C._reconnectCount=0),f.host=f.servers[C._reconnectCount].host,f.port=f.servers[C._reconnectCount].port,f.protocol=f.servers[C._reconnectCount].protocol?f.servers[C._reconnectCount].protocol:f.defaultProtocol,f.hostname=f.host,C._reconnectCount++),l("calling streambuilder for",f.protocol),a[f.protocol](C,f)},f);return v.on("error",function(){}),v}typeof g<"u"&&"browser"!==g.title||"function"!=typeof fe?(a.mqtt=m("./tcp"),a.tcp=m("./tcp"),a.ssl=m("./tls"),a.tls=m("./tls"),a.mqtts=m("./tls")):(a.wx=m("./wx"),a.wxs=m("./wx"),a.ali=m("./ali"),a.alis=m("./ali")),a.ws=m("./ws"),a.wss=m("./ws"),H.exports=y,H.exports.connect=y,H.exports.MqttClient=d,H.exports.Store=w}).call(this)}).call(this,m("_process"))},{"../client":7,"../store":13,"./ali":8,"./tcp":9,"./tls":10,"./ws":11,"./wx":12,_process:69,debug:19,url:75,xtend:68}],16:[function(m,H,j){"use strict";const{Buffer:g}=m("buffer"),d=Symbol.for("BufferList");function w(u){if(!(this instanceof w))return new w(u);w._init.call(this,u)}w._init=function(i){Object.defineProperty(this,d,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},w.prototype._new=function(i){return new w(i)},w.prototype._offset=function(i){if(0===i)return[0,0];let l=0;for(let a=0;a<this._bufs.length;a++){const s=l+this._bufs[a].length;if(i<s||a===this._bufs.length-1)return[a,i-l];l=s}},w.prototype._reverseOffset=function(u){const i=u[0];let l=u[1];for(let a=0;a<i;a++)l+=this._bufs[a].length;return l},w.prototype.get=function(i){if(i>this.length||i<0)return;const l=this._offset(i);return this._bufs[l[0]][l[1]]},w.prototype.slice=function(i,l){return"number"==typeof i&&i<0&&(i+=this.length),"number"==typeof l&&l<0&&(l+=this.length),this.copy(null,0,i,l)},w.prototype.copy=function(i,l,a,s){if(("number"!=typeof a||a<0)&&(a=0),("number"!=typeof s||s>this.length)&&(s=this.length),a>=this.length||s<=0)return i||g.alloc(0);const y=!!i,R=this._offset(a),f=s-a;let _=f,h=y&&l||0,E=R[1];if(0===a&&s===this.length){if(!y)return 1===this._bufs.length?this._bufs[0]:g.concat(this._bufs,this.length);for(let v=0;v<this._bufs.length;v++)this._bufs[v].copy(i,h),h+=this._bufs[v].length;return i}if(_<=this._bufs[R[0]].length-E)return y?this._bufs[R[0]].copy(i,l,E,E+_):this._bufs[R[0]].slice(E,E+_);y||(i=g.allocUnsafe(f));for(let v=R[0];v<this._bufs.length;v++){const C=this._bufs[v].length-E;if(!(_>C)){this._bufs[v].copy(i,h,E,E+_),h+=C;break}this._bufs[v].copy(i,h,E),h+=C,_-=C,E&&(E=0)}return i.length>h?i.slice(0,h):i},w.prototype.shallowSlice=function(i,l){if((i=i||0)<0&&(i+=this.length),(l="number"!=typeof l?this.length:l)<0&&(l+=this.length),i===l)return this._new();const a=this._offset(i),s=this._offset(l),y=this._bufs.slice(a[0],s[0]+1);return 0===s[1]?y.pop():y[y.length-1]=y[y.length-1].slice(0,s[1]),0!==a[1]&&(y[0]=y[0].slice(a[1])),this._new(y)},w.prototype.toString=function(i,l,a){return this.slice(l,a).toString(i)},w.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;){if(!(i>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},w.prototype.duplicate=function(){const i=this._new();for(let l=0;l<this._bufs.length;l++)i.append(this._bufs[l]);return i},w.prototype.append=function(i){if(null==i)return this;if(i.buffer)this._appendBuffer(g.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let l=0;l<i.length;l++)this.append(i[l]);else if(this._isBufferList(i))for(let l=0;l<i._bufs.length;l++)this.append(i._bufs[l]);else"number"==typeof i&&(i=i.toString()),this._appendBuffer(g.from(i));return this},w.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},w.prototype.indexOf=function(u,i,l){if(void 0===l&&"string"==typeof i&&(l=i,i=void 0),"function"==typeof u||Array.isArray(u))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof u?u=g.from([u]):"string"==typeof u?u=g.from(u,l):this._isBufferList(u)?u=u.slice():Array.isArray(u.buffer)?u=g.from(u.buffer,u.byteOffset,u.byteLength):g.isBuffer(u)||(u=g.from(u)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),0===u.length)return i>this.length?this.length:i;const a=this._offset(i);let s=a[0],y=a[1];for(;s<this._bufs.length;s++){const R=this._bufs[s];for(;y<R.length;)if(R.length-y>=u.length){const _=R.indexOf(u,y);if(-1!==_)return this._reverseOffset([s,_]);y=R.length-u.length+1}else{const _=this._reverseOffset([s,y]);if(this._match(_,u))return _;y++}y=0}return-1},w.prototype._match=function(u,i){if(this.length-u<i.length)return!1;for(let l=0;l<i.length;l++)if(this.get(u+l)!==i[l])return!1;return!0},function(){const u={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const i in u)!function(l){w.prototype[l]=null===u[l]?function(a,s){return this.slice(a,a+s)[l](0,s)}:function(a=0){return this.slice(a,a+u[l])[l](0)}}(i)}(),w.prototype._isBufferList=function(i){return i instanceof w||w.isBufferList(i)},w.isBufferList=function(i){return null!=i&&i[d]},H.exports=w},{buffer:3}],17:[function(m,H,j){"use strict";const g=m("readable-stream").Duplex,d=m("inherits"),w=m("./BufferList");function u(i){if(!(this instanceof u))return new u(i);if("function"==typeof i){this._callback=i;const l=function(s){this._callback&&(this._callback(s),this._callback=null)}.bind(this);this.on("pipe",function(s){s.on("error",l)}),this.on("unpipe",function(s){s.removeListener("error",l)}),i=null}w._init.call(this,i),g.call(this)}d(u,g),Object.assign(u.prototype,w.prototype),u.prototype._new=function(l){return new u(l)},u.prototype._write=function(l,a,s){this._appendBuffer(l),"function"==typeof s&&s()},u.prototype._read=function(l){if(!this.length)return this.push(null);l=Math.min(l,this.length),this.push(this.slice(0,l)),this.consume(l)},u.prototype.end=function(l){g.prototype.end.call(this,l),this._callback&&(this._callback(null,this.slice()),this._callback=null)},u.prototype._destroy=function(l,a){this._bufs.length=0,this.length=0,a(l)},u.prototype._isBufferList=function(l){return l instanceof u||l instanceof w||u.isBufferList(l)},u.isBufferList=w.isBufferList,H.exports=u,H.exports.BufferListStream=u,H.exports.BufferList=w},{"./BufferList":16,inherits:34,"readable-stream":60}],18:[function(m,H,j){(function(g){(function(){function C(N){return Object.prototype.toString.call(N)}j.isArray=function d(N){return Array.isArray?Array.isArray(N):"[object Array]"===C(N)},j.isBoolean=function w(N){return"boolean"==typeof N},j.isNull=function u(N){return null===N},j.isNullOrUndefined=function i(N){return null==N},j.isNumber=function l(N){return"number"==typeof N},j.isString=function a(N){return"string"==typeof N},j.isSymbol=function s(N){return"symbol"==typeof N},j.isUndefined=function y(N){return void 0===N},j.isRegExp=function R(N){return"[object RegExp]"===C(N)},j.isObject=function f(N){return"object"==typeof N&&null!==N},j.isDate=function _(N){return"[object Date]"===C(N)},j.isError=function h(N){return"[object Error]"===C(N)||N instanceof Error},j.isFunction=function E(N){return"function"==typeof N},j.isPrimitive=function v(N){return null===N||"boolean"==typeof N||"number"==typeof N||"string"==typeof N||"symbol"==typeof N||typeof N>"u"},j.isBuffer=g.isBuffer}).call(this)}).call(this,{isBuffer:m("../../../../is-buffer/index.js")})},{"../../../../is-buffer/index.js":6}],19:[function(m,H,j){(function(g){(function(){j.formatArgs=function w(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+H.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;s.splice(1,0,y,"color: inherit");let R=0,f=0;s[0].replace(/%[a-zA-Z%]/g,_=>{"%%"!==_&&(R++,"%c"===_&&(f=R))}),s.splice(f,0,y)},j.save=function u(s){try{s?j.storage.setItem("debug",s):j.storage.removeItem("debug")}catch{}},j.load=function i(){let s;try{s=j.storage.getItem("debug")}catch{}return!s&&typeof g<"u"&&"env"in g&&(s=g.env.DEBUG),s},j.useColors=function d(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},j.storage=function l(){try{return localStorage}catch{}}(),j.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),j.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],j.log=console.debug||console.log||(()=>{}),H.exports=m("./common")(j);const{formatters:a}=H.exports;a.j=function(s){try{return JSON.stringify(s)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}}).call(this)}).call(this,m("_process"))},{"./common":20,_process:69}],20:[function(m,H,j){H.exports=function g(d){function u(_){let h,E=null;function v(...C){if(!v.enabled)return;const N=v,A=Number(new Date);N.diff=A-(h||A),N.prev=h,N.curr=A,h=A,C[0]=u.coerce(C[0]),"string"!=typeof C[0]&&C.unshift("%O");let q=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(O,I)=>{if("%%"===O)return"%";q++;const x=u.formatters[I];return"function"==typeof x&&(O=x.call(N,C[q]),C.splice(q,1),q--),O}),u.formatArgs.call(N,C),(N.log||u.log).apply(N,C)}return v.namespace=_,v.useColors=u.useColors(),v.color=u.selectColor(_),v.extend=i,v.destroy=u.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>null===E?u.enabled(_):E,set:C=>{E=C}}),"function"==typeof u.init&&u.init(v),v}function i(_,h){const E=u(this.namespace+(typeof h>"u"?":":h)+_);return E.log=this.log,E}function y(_){return _.toString().substring(2,_.toString().length-2).replace(/\.\*\?$/,"*")}return u.debug=u,u.default=u,u.coerce=function R(_){return _ instanceof Error?_.stack||_.message:_},u.disable=function a(){const _=[...u.names.map(y),...u.skips.map(y).map(h=>"-"+h)].join(",");return u.enable(""),_},u.enable=function l(_){let h;u.save(_),u.names=[],u.skips=[];const E=("string"==typeof _?_:"").split(/[\s,]+/),v=E.length;for(h=0;h<v;h++)E[h]&&("-"===(_=E[h].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+_.substr(1)+"$")):u.names.push(new RegExp("^"+_+"$")))},u.enabled=function s(_){if("*"===_[_.length-1])return!0;let h,E;for(h=0,E=u.skips.length;h<E;h++)if(u.skips[h].test(_))return!1;for(h=0,E=u.names.length;h<E;h++)if(u.names[h].test(_))return!0;return!1},u.humanize=m("ms"),u.destroy=function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(d).forEach(_=>{u[_]=d[_]}),u.names=[],u.skips=[],u.formatters={},u.selectColor=function w(_){let h=0;for(let E=0;E<_.length;E++)h=(h<<5)-h+_.charCodeAt(E),h|=0;return u.colors[Math.abs(h)%u.colors.length]},u.enable(u.load()),u}},{ms:43}],21:[function(m,H,j){(function(g,d){(function(){var w=m("readable-stream"),u=m("end-of-stream"),i=m("inherits"),l=m("stream-shift"),a=d.from&&d.from!==Uint8Array.from?d.from([0]):new d([0]),s=function(E,v){E._corked?E.once("uncork",v):v()},R=function(E,v){return function(C){C?function(E,v){E._autoDestroy&&E.destroy(v)}(E,"premature close"===C.message?null:C):v&&!E._ended&&E.end()}},h=function(E,v,C){if(!(this instanceof h))return new h(E,v,C);w.Duplex.call(this,C),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!C||!1!==C.autoDestroy,this._forwardDestroy=!C||!1!==C.destroy,this._forwardEnd=!C||!1!==C.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,E&&this.setWritable(E),v&&this.setReadable(v)};i(h,w.Duplex),h.obj=function(E,v,C){return C||(C={}),C.objectMode=!0,C.highWaterMark=16,new h(E,v,C)},h.prototype.cork=function(){1==++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(E){if(this._unwrite&&this._unwrite(),this.destroyed)E&&E.destroy&&E.destroy();else if(null!==E&&!1!==E){var v=this,C=u(E,{writable:!0,readable:!1},R(this,this._forwardEnd)),N=function(){var W=v._ondrain;v._ondrain=null,W&&W()};this._unwrite&&g.nextTick(N),this._writable=E,this._writable.on("drain",N),this._unwrite=function(){v._writable.removeListener("drain",N),C()},this.uncork()}else this.end()},h.prototype.setReadable=function(E){if(this._unread&&this._unread(),this.destroyed)E&&E.destroy&&E.destroy();else{if(null===E||!1===E)return this.push(null),void this.resume();var v=this,C=u(E,{writable:!1,readable:!0},R(this)),N=function(){v._forward()},A=function(){v.push(null)};this._drained=!0,this._readable=E,this._readable2=E._readableState?E:function(E){return new w.Readable({objectMode:!0,highWaterMark:16}).wrap(E)}(E),this._readable2.on("readable",N),this._readable2.on("end",A),this._unread=function(){v._readable2.removeListener("readable",N),v._readable2.removeListener("end",A),C()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var E;this._drained&&null!==(E=l(this._readable2));)this.destroyed||(this._drained=this.push(E));this._forwarding=!1}},h.prototype.destroy=function(E){if(!this.destroyed){this.destroyed=!0;var v=this;g.nextTick(function(){v._destroy(E)})}},h.prototype._destroy=function(E){if(E){var v=this._ondrain;this._ondrain=null,v?v(E):this.emit("error",E)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(E,v,C){return this.destroyed?C():this._corked?s(this,this._write.bind(this,E,v,C)):E===a?this._finish(C):this._writable?void(!1===this._writable.write(E)?this._ondrain=C:C()):C()},h.prototype._finish=function(E){var v=this;this.emit("preend"),s(this,function(){!function(E,v){!E||E._writableState&&E._writableState.finished?v():E._writableState?E.end(v):(E.end(),v())}(v._forwardEnd&&v._writable,function(){!1===v._writableState.prefinished&&(v._writableState.prefinished=!0),v.emit("prefinish"),s(v,E)})})},h.prototype.end=function(E,v,C){return"function"==typeof E?this.end(null,null,E):"function"==typeof v?this.end(E,null,v):(this._ended=!0,E&&this.write(E),this._writableState.ending||this.write(a),w.Writable.prototype.end.call(this,C))},H.exports=h}).call(this)}).call(this,m("_process"),m("buffer").Buffer)},{_process:69,buffer:3,"end-of-stream":33,inherits:34,"readable-stream":30,"stream-shift":63}],22:[function(m,H,j){"use strict";var g=m("process-nextick-args"),d=Object.keys||function(_){var h=[];for(var E in _)h.push(E);return h};H.exports=y;var w=Object.create(m("core-util-is"));w.inherits=m("inherits");var u=m("./_stream_readable"),i=m("./_stream_writable");w.inherits(y,u);for(var l=d(i.prototype),a=0;a<l.length;a++){var s=l[a];y.prototype[s]||(y.prototype[s]=i.prototype[s])}function y(_){if(!(this instanceof y))return new y(_);u.call(this,_),i.call(this,_),_&&!1===_.readable&&(this.readable=!1),_&&!1===_.writable&&(this.writable=!1),this.allowHalfOpen=!0,_&&!1===_.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",R)}function R(){this.allowHalfOpen||this._writableState.ended||g.nextTick(f,this)}function f(_){_.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=_,this._writableState.destroyed=_)}}),y.prototype._destroy=function(_,h){this.push(null),this.end(),g.nextTick(h,_)}},{"./_stream_readable":24,"./_stream_writable":26,"core-util-is":18,inherits:34,"process-nextick-args":45}],23:[function(m,H,j){"use strict";H.exports=w;var g=m("./_stream_transform"),d=Object.create(m("core-util-is"));function w(u){if(!(this instanceof w))return new w(u);g.call(this,u)}d.inherits=m("inherits"),d.inherits(w,g),w.prototype._transform=function(u,i,l){l(null,u)}},{"./_stream_transform":25,"core-util-is":18,inherits:34}],24:[function(m,H,j){(function(g,d){(function(){"use strict";var w=m("process-nextick-args");H.exports=O;var i,u=m("isarray");O.ReadableState=V,m("events");var a=function(n,o){return n.listeners(o).length},s=m("./internal/streams/stream"),y=m("safe-buffer").Buffer,R=d.Uint8Array||function(){};var h=Object.create(m("core-util-is"));h.inherits=m("inherits");var E=m("util"),v=void 0;v=E&&E.debuglog?E.debuglog("stream"):function(){};var A,C=m("./internal/streams/BufferList"),N=m("./internal/streams/destroy");h.inherits(O,s);var W=["error","close","destroy","pause","resume"];function V(n,o){var T=o instanceof(i=i||m("./_stream_duplex"));this.objectMode=!!(n=n||{}).objectMode,T&&(this.objectMode=this.objectMode||!!n.readableObjectMode);var L=n.highWaterMark,p=n.readableHighWaterMark;this.highWaterMark=L||0===L?L:T&&(p||0===p)?p:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(A||(A=m("string_decoder/").StringDecoder),this.decoder=new A(n.encoding),this.encoding=n.encoding)}function O(n){if(i=i||m("./_stream_duplex"),!(this instanceof O))return new O(n);this._readableState=new V(n,this),this.readable=!0,n&&("function"==typeof n.read&&(this._read=n.read),"function"==typeof n.destroy&&(this._destroy=n.destroy)),s.call(this)}function I(n,o,T,L,p){var e,t=n._readableState;return null===o?(t.reading=!1,function G(n,o){if(!o.ended){if(o.decoder){var T=o.decoder.end();T&&T.length&&(o.buffer.push(T),o.length+=o.objectMode?1:T.length)}o.ended=!0,re(n)}}(n,t)):(p||(e=function c(n,o){var T;return!function _(n){return y.isBuffer(n)||n instanceof R}(o)&&"string"!=typeof o&&void 0!==o&&!n.objectMode&&(T=new TypeError("Invalid non-string/buffer chunk")),T}(t,o)),e?n.emit("error",e):t.objectMode||o&&o.length>0?("string"!=typeof o&&!t.objectMode&&Object.getPrototypeOf(o)!==y.prototype&&(o=function f(n){return y.from(n)}(o)),L?t.endEmitted?n.emit("error",new Error("stream.unshift() after end event")):x(n,t,o,!0):t.ended?n.emit("error",new Error("stream.push() after EOF")):(t.reading=!1,t.decoder&&!T?(o=t.decoder.write(o),t.objectMode||0!==o.length?x(n,t,o,!1):se(n,t)):x(n,t,o,!1))):L||(t.reading=!1)),function D(n){return!n.ended&&(n.needReadable||n.length<n.highWaterMark||0===n.length)}(t)}function x(n,o,T,L){o.flowing&&0===o.length&&!o.sync?(n.emit("data",T),n.read(0)):(o.length+=o.objectMode?1:T.length,L?o.buffer.unshift(T):o.buffer.push(T),o.needReadable&&re(n)),se(n,o)}Object.defineProperty(O.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(n){this._readableState&&(this._readableState.destroyed=n)}}),O.prototype.destroy=N.destroy,O.prototype._undestroy=N.undestroy,O.prototype._destroy=function(n,o){this.push(null),o(n)},O.prototype.push=function(n,o){var L,T=this._readableState;return T.objectMode?L=!0:"string"==typeof n&&((o=o||T.defaultEncoding)!==T.encoding&&(n=y.from(n,o),o=""),L=!0),I(this,n,o,!1,L)},O.prototype.unshift=function(n){return I(this,n,null,!0,!1)},O.prototype.isPaused=function(){return!1===this._readableState.flowing},O.prototype.setEncoding=function(n){return A||(A=m("string_decoder/").StringDecoder),this._readableState.decoder=new A(n),this._readableState.encoding=n,this};var K=8388608;function Y(n,o){return n<=0||0===o.length&&o.ended?0:o.objectMode?1:n!=n?o.flowing&&o.length?o.buffer.head.data.length:o.length:(n>o.highWaterMark&&(o.highWaterMark=function $(n){return n>=K?n=K:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=o.length?n:o.ended?o.length:(o.needReadable=!0,0))}function re(n){var o=n._readableState;o.needReadable=!1,o.emittedReadable||(v("emitReadable",o.flowing),o.emittedReadable=!0,o.sync?w.nextTick(oe,n):oe(n))}function oe(n){v("emit readable"),n.emit("readable"),B(n)}function se(n,o){o.readingMore||(o.readingMore=!0,w.nextTick(ne,n,o))}function ne(n,o){for(var T=o.length;!o.reading&&!o.flowing&&!o.ended&&o.length<o.highWaterMark&&(v("maybeReadMore read 0"),n.read(0),T!==o.length);)T=o.length;o.readingMore=!1}function ee(n){v("readable nexttick read 0"),n.read(0)}function P(n,o){o.reading||(v("resume read 0"),n.read(0)),o.resumeScheduled=!1,o.awaitDrain=0,n.emit("resume"),B(n),o.flowing&&!o.reading&&n.read(0)}function B(n){var o=n._readableState;for(v("flow",o.flowing);o.flowing&&null!==n.read(););}function X(n,o){return 0===o.length?null:(o.objectMode?T=o.buffer.shift():!n||n>=o.length?(T=o.decoder?o.buffer.join(""):1===o.buffer.length?o.buffer.head.data:o.buffer.concat(o.length),o.buffer.clear()):T=function Z(n,o,T){var L;return n<o.head.data.length?(L=o.head.data.slice(0,n),o.head.data=o.head.data.slice(n)):L=n===o.head.data.length?o.shift():T?function F(n,o){var T=o.head,L=1,p=T.data;for(n-=p.length;T=T.next;){var t=T.data,e=n>t.length?t.length:n;if(p+=e===t.length?t:t.slice(0,n),0==(n-=e)){e===t.length?(++L,o.head=T.next?T.next:o.tail=null):(o.head=T,T.data=t.slice(e));break}++L}return o.length-=L,p}(n,o):function k(n,o){var T=y.allocUnsafe(n),L=o.head,p=1;for(L.data.copy(T),n-=L.data.length;L=L.next;){var t=L.data,e=n>t.length?t.length:n;if(t.copy(T,T.length-n,0,e),0==(n-=e)){e===t.length?(++p,o.head=L.next?L.next:o.tail=null):(o.head=L,L.data=t.slice(e));break}++p}return o.length-=p,T}(n,o),L}(n,o.buffer,o.decoder),T);var T}function U(n){var o=n._readableState;if(o.length>0)throw new Error('"endReadable()" called on non-empty stream');o.endEmitted||(o.ended=!0,w.nextTick(te,o,n))}function te(n,o){!n.endEmitted&&0===n.length&&(n.endEmitted=!0,o.readable=!1,o.emit("end"))}function S(n,o){for(var T=0,L=n.length;T<L;T++)if(n[T]===o)return T;return-1}O.prototype.read=function(n){v("read",n),n=parseInt(n,10);var o=this._readableState,T=n;if(0!==n&&(o.emittedReadable=!1),0===n&&o.needReadable&&(o.length>=o.highWaterMark||o.ended))return v("read: emitReadable",o.length,o.ended),0===o.length&&o.ended?U(this):re(this),null;if(0===(n=Y(n,o))&&o.ended)return 0===o.length&&U(this),null;var p,L=o.needReadable;return v("need readable",L),(0===o.length||o.length-n<o.highWaterMark)&&v("length less than watermark",L=!0),o.ended||o.reading?v("reading or ended",L=!1):L&&(v("do read"),o.reading=!0,o.sync=!0,0===o.length&&(o.needReadable=!0),this._read(o.highWaterMark),o.sync=!1,o.reading||(n=Y(T,o))),null===(p=n>0?X(n,o):null)?(o.needReadable=!0,n=0):o.length-=n,0===o.length&&(o.ended||(o.needReadable=!0),T!==n&&o.ended&&U(this)),null!==p&&this.emit("data",p),p},O.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},O.prototype.pipe=function(n,o){var T=this,L=this._readableState;switch(L.pipesCount){case 0:L.pipes=n;break;case 1:L.pipes=[L.pipes,n];break;default:L.pipes.push(n)}L.pipesCount+=1,v("pipe count=%d opts=%j",L.pipesCount,o);var t=o&&!1===o.end||n===g.stdout||n===g.stderr?ue:r;function e(de,pe){v("onunpipe"),de===T&&pe&&!1===pe.hasUnpiped&&(pe.hasUnpiped=!0,function z(){v("cleanup"),n.removeListener("close",ce),n.removeListener("finish",he),n.removeListener("drain",b),n.removeListener("error",le),n.removeListener("unpipe",e),T.removeListener("end",r),T.removeListener("end",ue),T.removeListener("data",ae),M=!0,L.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&b()}())}function r(){v("onend"),n.end()}L.endEmitted?w.nextTick(t):T.once("end",t),n.on("unpipe",e);var b=function ie(n){return function(){var o=n._readableState;v("pipeOnDrain",o.awaitDrain),o.awaitDrain&&o.awaitDrain--,0===o.awaitDrain&&a(n,"data")&&(o.flowing=!0,B(n))}}(T);n.on("drain",b);var M=!1;var J=!1;function ae(de){v("ondata"),J=!1,!1===n.write(de)&&!J&&((1===L.pipesCount&&L.pipes===n||L.pipesCount>1&&-1!==S(L.pipes,n))&&!M&&(v("false write response, pause",T._readableState.awaitDrain),T._readableState.awaitDrain++,J=!0),T.pause())}function le(de){v("onerror",de),ue(),n.removeListener("error",le),0===a(n,"error")&&n.emit("error",de)}function ce(){n.removeListener("finish",he),ue()}function he(){v("onfinish"),n.removeListener("close",ce),ue()}function ue(){v("unpipe"),T.unpipe(n)}return T.on("data",ae),function q(n,o,T){if("function"==typeof n.prependListener)return n.prependListener(o,T);n._events&&n._events[o]?u(n._events[o])?n._events[o].unshift(T):n._events[o]=[T,n._events[o]]:n.on(o,T)}(n,"error",le),n.once("close",ce),n.once("finish",he),n.emit("pipe",T),L.flowing||(v("pipe resume"),T.resume()),n},O.prototype.unpipe=function(n){var o=this._readableState,T={hasUnpiped:!1};if(0===o.pipesCount)return this;if(1===o.pipesCount)return n&&n!==o.pipes||(n||(n=o.pipes),o.pipes=null,o.pipesCount=0,o.flowing=!1,n&&n.emit("unpipe",this,T)),this;if(!n){var L=o.pipes,p=o.pipesCount;o.pipes=null,o.pipesCount=0,o.flowing=!1;for(var t=0;t<p;t++)L[t].emit("unpipe",this,T);return this}var e=S(o.pipes,n);return-1===e||(o.pipes.splice(e,1),o.pipesCount-=1,1===o.pipesCount&&(o.pipes=o.pipes[0]),n.emit("unpipe",this,T)),this},O.prototype.addListener=O.prototype.on=function(n,o){var T=s.prototype.on.call(this,n,o);if("data"===n)!1!==this._readableState.flowing&&this.resume();else if("readable"===n){var L=this._readableState;!L.endEmitted&&!L.readableListening&&(L.readableListening=L.needReadable=!0,L.emittedReadable=!1,L.reading?L.length&&re(this):w.nextTick(ee,this))}return T},O.prototype.resume=function(){var n=this._readableState;return n.flowing||(v("resume"),n.flowing=!0,function Q(n,o){o.resumeScheduled||(o.resumeScheduled=!0,w.nextTick(P,n,o))}(this,n)),this},O.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this},O.prototype.wrap=function(n){var o=this,T=this._readableState,L=!1;for(var p in n.on("end",function(){if(v("wrapped end"),T.decoder&&!T.ended){var e=T.decoder.end();e&&e.length&&o.push(e)}o.push(null)}),n.on("data",function(e){v("wrapped data"),T.decoder&&(e=T.decoder.write(e)),T.objectMode&&null==e||!(T.objectMode||e&&e.length)||o.push(e)||(L=!0,n.pause())}),n)void 0===this[p]&&"function"==typeof n[p]&&(this[p]=function(e){return function(){return n[e].apply(n,arguments)}}(p));for(var t=0;t<W.length;t++)n.on(W[t],this.emit.bind(this,W[t]));return this._read=function(e){v("wrapped _read",e),L&&(L=!1,n.resume())},this},Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),O._fromList=X}).call(this)}).call(this,m("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":22,"./internal/streams/BufferList":27,"./internal/streams/destroy":28,"./internal/streams/stream":29,_process:69,"core-util-is":18,events:4,inherits:34,isarray:35,"process-nextick-args":45,"safe-buffer":31,"string_decoder/":32,util:2}],25:[function(m,H,j){"use strict";H.exports=u;var g=m("./_stream_duplex"),d=Object.create(m("core-util-is"));function w(a,s){var y=this._transformState;y.transforming=!1;var R=y.writecb;if(!R)return this.emit("error",new Error("write callback called multiple times"));y.writechunk=null,y.writecb=null,null!=s&&this.push(s),R(a);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function u(a){if(!(this instanceof u))return new u(a);g.call(this,a),this._transformState={afterTransform:w.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.on("prefinish",i)}function i(){var a=this;"function"==typeof this._flush?this._flush(function(s,y){l(a,s,y)}):l(this,null,null)}function l(a,s,y){if(s)return a.emit("error",s);if(null!=y&&a.push(y),a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}d.inherits=m("inherits"),d.inherits(u,g),u.prototype.push=function(a,s){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,s)},u.prototype._transform=function(a,s,y){throw new Error("_transform() is not implemented")},u.prototype._write=function(a,s,y){var R=this._transformState;if(R.writecb=y,R.writechunk=a,R.writeencoding=s,!R.transforming){var f=this._readableState;(R.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},u.prototype._read=function(a){var s=this._transformState;null!==s.writechunk&&s.writecb&&!s.transforming?(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform)):s.needTransform=!0},u.prototype._destroy=function(a,s){var y=this;g.prototype._destroy.call(this,a,function(R){s(R),y.emit("close")})}},{"./_stream_duplex":22,"core-util-is":18,inherits:34}],26:[function(m,H,j){(function(g,d,w){(function(){"use strict";var u=m("process-nextick-args");function l(P){var B=this;this.next=null,this.entry=null,this.finish=function(){!function Q(P,B,X){var Z=P.entry;for(P.entry=null;Z;){var F=Z.callback;B.pendingcb--,F(X),Z=Z.next}B.corkedRequestsFree?B.corkedRequestsFree.next=P:B.corkedRequestsFree=P}(B,P)}}H.exports=q;var s,a=!g.browser&&["v0.10","v0.9."].indexOf(g.version.slice(0,5))>-1?w:u.nextTick;q.WritableState=A;var y=Object.create(m("core-util-is"));y.inherits=m("inherits");var R={deprecate:m("util-deprecate")},f=m("./internal/streams/stream"),_=m("safe-buffer").Buffer,h=d.Uint8Array||function(){};var W,C=m("./internal/streams/destroy");function N(){}function A(P,B){s=s||m("./_stream_duplex");var X=B instanceof s;this.objectMode=!!(P=P||{}).objectMode,X&&(this.objectMode=this.objectMode||!!P.writableObjectMode);var Z=P.highWaterMark,F=P.writableHighWaterMark;this.highWaterMark=Z||0===Z?Z:X&&(F||0===F)?F:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===P.decodeStrings),this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){!function $(P,B){var X=P._writableState,Z=X.sync,F=X.writecb;if(function K(P){P.writing=!1,P.writecb=null,P.length-=P.writelen,P.writelen=0}(X),B)!function D(P,B,X,Z,F){--B.pendingcb,X?(u.nextTick(F,Z),u.nextTick(ie,P,B),P._writableState.errorEmitted=!0,P.emit("error",Z)):(F(Z),P._writableState.errorEmitted=!0,P.emit("error",Z),ie(P,B))}(P,X,Z,B,F);else{var k=oe(X);!k&&!X.corked&&!X.bufferProcessing&&X.bufferedRequest&&re(P,X),Z?a(Y,P,X,k,F):Y(P,X,k,F)}}(B,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function q(P){if(s=s||m("./_stream_duplex"),!(W.call(q,this)||this instanceof s))return new q(P);this._writableState=new A(P,this),this.writable=!0,P&&("function"==typeof P.write&&(this._write=P.write),"function"==typeof P.writev&&(this._writev=P.writev),"function"==typeof P.destroy&&(this._destroy=P.destroy),"function"==typeof P.final&&(this._final=P.final)),f.call(this)}function x(P,B,X,Z,F,k){if(!X){var U=function I(P,B,X){return!P.objectMode&&!1!==P.decodeStrings&&"string"==typeof B&&(B=_.from(B,X)),B}(B,Z,F);Z!==U&&(X=!0,F="buffer",Z=U)}var te=B.objectMode?1:Z.length;B.length+=te;var S=B.length<B.highWaterMark;if(S||(B.needDrain=!0),B.writing||B.corked){var n=B.lastBufferedRequest;B.lastBufferedRequest={chunk:Z,encoding:F,isBuf:X,callback:k,next:null},n?n.next=B.lastBufferedRequest:B.bufferedRequest=B.lastBufferedRequest,B.bufferedRequestCount+=1}else c(P,B,!1,te,Z,F,k);return S}function c(P,B,X,Z,F,k,U){B.writelen=Z,B.writecb=U,B.writing=!0,B.sync=!0,X?P._writev(F,B.onwrite):P._write(F,k,B.onwrite),B.sync=!1}function Y(P,B,X,Z){X||function G(P,B){0===B.length&&B.needDrain&&(B.needDrain=!1,P.emit("drain"))}(P,B),B.pendingcb--,Z(),ie(P,B)}function re(P,B){B.bufferProcessing=!0;var X=B.bufferedRequest;if(P._writev&&X&&X.next){var F=new Array(B.bufferedRequestCount),k=B.corkedRequestsFree;k.entry=X;for(var U=0,te=!0;X;)F[U]=X,X.isBuf||(te=!1),X=X.next,U+=1;F.allBuffers=te,c(P,B,!0,B.length,F,"",k.finish),B.pendingcb++,B.lastBufferedRequest=null,k.next?(B.corkedRequestsFree=k.next,k.next=null):B.corkedRequestsFree=new l(B),B.bufferedRequestCount=0}else{for(;X;){var S=X.chunk;if(c(P,B,!1,B.objectMode?1:S.length,S,X.encoding,X.callback),X=X.next,B.bufferedRequestCount--,B.writing)break}null===X&&(B.lastBufferedRequest=null)}B.bufferedRequest=X,B.bufferProcessing=!1}function oe(P){return P.ending&&0===P.length&&null===P.bufferedRequest&&!P.finished&&!P.writing}function se(P,B){P._final(function(X){B.pendingcb--,X&&P.emit("error",X),B.prefinished=!0,P.emit("prefinish"),ie(P,B)})}function ie(P,B){var X=oe(B);return X&&(function ne(P,B){!B.prefinished&&!B.finalCalled&&("function"==typeof P._final?(B.pendingcb++,B.finalCalled=!0,u.nextTick(se,P,B)):(B.prefinished=!0,P.emit("prefinish")))}(P,B),0===B.pendingcb&&(B.finished=!0,P.emit("finish"))),X}y.inherits(q,f),A.prototype.getBuffer=function(){for(var B=this.bufferedRequest,X=[];B;)X.push(B),B=B.next;return X},function(){try{Object.defineProperty(A.prototype,"buffer",{get:R.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(P){return!!W.call(this,P)||this===q&&P&&P._writableState instanceof A}})):W=function(P){return P instanceof this},q.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},q.prototype.write=function(P,B,X){var Z=this._writableState,F=!1,k=!Z.objectMode&&function v(P){return _.isBuffer(P)||P instanceof h}(P);return k&&!_.isBuffer(P)&&(P=function E(P){return _.from(P)}(P)),"function"==typeof B&&(X=B,B=null),k?B="buffer":B||(B=Z.defaultEncoding),"function"!=typeof X&&(X=N),Z.ended?function V(P,B){var X=new Error("write after end");P.emit("error",X),u.nextTick(B,X)}(this,X):(k||function O(P,B,X,Z){var F=!0,k=!1;return null===X?k=new TypeError("May not write null values to stream"):"string"!=typeof X&&void 0!==X&&!B.objectMode&&(k=new TypeError("Invalid non-string/buffer chunk")),k&&(P.emit("error",k),u.nextTick(Z,k),F=!1),F}(this,Z,P,X))&&(Z.pendingcb++,F=x(this,Z,k,P,B,X)),F},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,!P.writing&&!P.corked&&!P.finished&&!P.bufferProcessing&&P.bufferedRequest&&re(this,P))},q.prototype.setDefaultEncoding=function(B){if("string"==typeof B&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),q.prototype._write=function(P,B,X){X(new Error("_write() is not implemented"))},q.prototype._writev=null,q.prototype.end=function(P,B,X){var Z=this._writableState;"function"==typeof P?(X=P,P=null,B=null):"function"==typeof B&&(X=B,B=null),null!=P&&this.write(P,B),Z.corked&&(Z.corked=1,this.uncork()),!Z.ending&&!Z.finished&&function ee(P,B,X){B.ending=!0,ie(P,B),X&&(B.finished?u.nextTick(X):P.once("finish",X)),B.ended=!0,P.writable=!1}(this,Z,X)},Object.defineProperty(q.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),q.prototype.destroy=C.destroy,q.prototype._undestroy=C.undestroy,q.prototype._destroy=function(P,B){this.end(),B(P)}}).call(this)}).call(this,m("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},m("timers").setImmediate)},{"./_stream_duplex":22,"./internal/streams/destroy":28,"./internal/streams/stream":29,_process:69,"core-util-is":18,inherits:34,"process-nextick-args":45,"safe-buffer":31,timers:74,"util-deprecate":65}],27:[function(m,H,j){"use strict";var d=m("safe-buffer").Buffer,w=m("util");function u(i,l,a){i.copy(l,a)}H.exports=function(){function i(){(function g(i,l){if(!(i instanceof l))throw new TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}return i.prototype.push=function(a){var s={data:a,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},i.prototype.unshift=function(a){var s={data:a,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length},i.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,a}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(a){if(0===this.length)return"";for(var s=this.head,y=""+s.data;s=s.next;)y+=a+s.data;return y},i.prototype.concat=function(a){if(0===this.length)return d.alloc(0);if(1===this.length)return this.head.data;for(var s=d.allocUnsafe(a>>>0),y=this.head,R=0;y;)u(y.data,s,R),R+=y.data.length,y=y.next;return s},i}(),w&&w.inspect&&w.inspect.custom&&(H.exports.prototype[w.inspect.custom]=function(){var i=w.inspect({length:this.length});return this.constructor.name+" "+i})},{"safe-buffer":31,util:2}],28:[function(m,H,j){"use strict";var g=m("process-nextick-args");function u(i,l){i.emit("error",l)}H.exports={destroy:function d(i,l){var a=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(l?l(i):i&&(!this._writableState||!this._writableState.errorEmitted)&&g.nextTick(u,this,i),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(R){!l&&R?(g.nextTick(u,a,R),a._writableState&&(a._writableState.errorEmitted=!0)):l&&l(R)}),this)},undestroy:function w(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":45}],29:[function(m,H,j){H.exports=m("events").EventEmitter},{events:4}],30:[function(m,H,j){(j=H.exports=m("./lib/_stream_readable.js")).Stream=j,j.Readable=j,j.Writable=m("./lib/_stream_writable.js"),j.Duplex=m("./lib/_stream_duplex.js"),j.Transform=m("./lib/_stream_transform.js"),j.PassThrough=m("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":22,"./lib/_stream_passthrough.js":23,"./lib/_stream_readable.js":24,"./lib/_stream_transform.js":25,"./lib/_stream_writable.js":26}],31:[function(m,H,j){var g=m("buffer"),d=g.Buffer;function w(i,l){for(var a in i)l[a]=i[a]}function u(i,l,a){return d(i,l,a)}d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?H.exports=g:(w(g,j),j.Buffer=u),w(d,u),u.from=function(i,l,a){if("number"==typeof i)throw new TypeError("Argument must not be a number");return d(i,l,a)},u.alloc=function(i,l,a){if("number"!=typeof i)throw new TypeError("Argument must be a number");var s=d(i);return void 0!==l?"string"==typeof a?s.fill(l,a):s.fill(l):s.fill(0),s},u.allocUnsafe=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return d(i)},u.allocUnsafeSlow=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return g.SlowBuffer(i)}},{buffer:3}],32:[function(m,H,j){"use strict";var g=m("safe-buffer").Buffer,d=g.isEncoding||function(A){switch((A=""+A)&&A.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(A){var W;switch(this.encoding=function u(A){var W=function w(A){if(!A)return"utf8";for(var W;;)switch(A){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return A;default:if(W)return;A=(""+A).toLowerCase(),W=!0}}(A);if("string"!=typeof W&&(g.isEncoding===d||!d(A)))throw new Error("Unknown encoding: "+A);return W||A}(A),this.encoding){case"utf16le":this.text=_,this.end=h,W=4;break;case"utf8":this.fillLast=y,W=4;break;case"base64":this.text=E,this.end=v,W=3;break;default:return this.write=C,void(this.end=N)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(W)}function l(A){return A<=127?0:A>>5==6?2:A>>4==14?3:A>>3==30?4:A>>6==2?-1:-2}function y(A){var W=this.lastTotal-this.lastNeed,q=function s(A,W,q){if(128!=(192&W[0]))return A.lastNeed=0,"\ufffd";if(A.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return A.lastNeed=1,"\ufffd";if(A.lastNeed>2&&W.length>2&&128!=(192&W[2]))return A.lastNeed=2,"\ufffd"}}(this,A);return void 0!==q?q:this.lastNeed<=A.length?(A.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(A.copy(this.lastChar,W,0,A.length),void(this.lastNeed-=A.length))}function _(A,W){if((A.length-W)%2==0){var q=A.toString("utf16le",W);if(q){var V=q.charCodeAt(q.length-1);if(V>=55296&&V<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1],q.slice(0,-1)}return q}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=A[A.length-1],A.toString("utf16le",W,A.length-1)}function h(A){var W=A&&A.length?this.write(A):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function E(A,W){var q=(A.length-W)%3;return 0===q?A.toString("base64",W):(this.lastNeed=3-q,this.lastTotal=3,1===q?this.lastChar[0]=A[A.length-1]:(this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1]),A.toString("base64",W,A.length-q))}function v(A){var W=A&&A.length?this.write(A):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function C(A){return A.toString(this.encoding)}function N(A){return A&&A.length?this.write(A):""}j.StringDecoder=i,i.prototype.write=function(A){if(0===A.length)return"";var W,q;if(this.lastNeed){if(void 0===(W=this.fillLast(A)))return"";q=this.lastNeed,this.lastNeed=0}else q=0;return q<A.length?W?W+this.text(A,q):this.text(A,q):W||""},i.prototype.end=function f(A){var W=A&&A.length?this.write(A):"";return this.lastNeed?W+"\ufffd":W},i.prototype.text=function R(A,W){var q=function a(A,W,q){var V=W.length-1;if(V<q)return 0;var O=l(W[V]);return O>=0?(O>0&&(A.lastNeed=O-1),O):--V<q||-2===O?0:(O=l(W[V]))>=0?(O>0&&(A.lastNeed=O-2),O):--V<q||-2===O?0:(O=l(W[V]))>=0?(O>0&&(2===O?O=0:A.lastNeed=O-3),O):0}(this,A,W);if(!this.lastNeed)return A.toString("utf8",W);this.lastTotal=q;var V=A.length-(q-this.lastNeed);return A.copy(this.lastChar,0,V),A.toString("utf8",W,V)},i.prototype.fillLast=function(A){if(this.lastNeed<=A.length)return A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,A.length),this.lastNeed-=A.length}},{"safe-buffer":31}],33:[function(m,H,j){(function(g){(function(){var d=m("once"),w=function(){},l=function(a,s,y){if("function"==typeof s)return l(a,null,s);s||(s={}),y=d(y||w);var R=a._writableState,f=a._readableState,_=s.readable||!1!==s.readable&&a.readable,h=s.writable||!1!==s.writable&&a.writable,E=!1,v=function(){a.writable||C()},C=function(){h=!1,_||y.call(a)},N=function(){_=!1,h||y.call(a)},A=function(I){y.call(a,I?new Error("exited with error code: "+I):null)},W=function(I){y.call(a,I)},q=function(){g.nextTick(V)},V=function(){if(!E){if(_&&(!f||!f.ended||f.destroyed))return y.call(a,new Error("premature close"));if(h&&(!R||!R.ended||R.destroyed))return y.call(a,new Error("premature close"))}},O=function(){a.req.on("finish",C)};return function(a){return a.setHeader&&"function"==typeof a.abort}(a)?(a.on("complete",C),a.on("abort",q),a.req?O():a.on("request",O)):h&&!R&&(a.on("end",v),a.on("close",v)),function(a){return a.stdio&&Array.isArray(a.stdio)&&3===a.stdio.length}(a)&&a.on("exit",A),a.on("end",N),a.on("finish",C),!1!==s.error&&a.on("error",W),a.on("close",q),function(){E=!0,a.removeListener("complete",C),a.removeListener("abort",q),a.removeListener("request",O),a.req&&a.req.removeListener("finish",C),a.removeListener("end",v),a.removeListener("close",v),a.removeListener("finish",C),a.removeListener("exit",A),a.removeListener("end",N),a.removeListener("error",W),a.removeListener("close",q)}};H.exports=l}).call(this)}).call(this,m("_process"))},{_process:69,once:44}],34:[function(m,H,j){H.exports="function"==typeof Object.create?function(d,w){w&&(d.super_=w,d.prototype=Object.create(w.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,w){if(w){d.super_=w;var u=function(){};u.prototype=w.prototype,d.prototype=new u,d.prototype.constructor=d}}},{}],35:[function(m,H,j){var g={}.toString;H.exports=Array.isArray||function(d){return"[object Array]"==g.call(d)}},{}],36:[function(m,H,j){(function(g){(function(){const d=H.exports;d.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},d.codes={};for(const u in d.types)d.codes[d.types[u]]=u;d.CMD_SHIFT=4,d.CMD_MASK=240,d.DUP_MASK=8,d.QOS_MASK=3,d.QOS_SHIFT=1,d.RETAIN_MASK=1,d.VARBYTEINT_MASK=127,d.VARBYTEINT_FIN_MASK=128,d.VARBYTEINT_MAX=268435455,d.SESSIONPRESENT_MASK=1,d.SESSIONPRESENT_HEADER=g.from([d.SESSIONPRESENT_MASK]),d.CONNACK_HEADER=g.from([d.codes.connack<<d.CMD_SHIFT]),d.USERNAME_MASK=128,d.PASSWORD_MASK=64,d.WILL_RETAIN_MASK=32,d.WILL_QOS_MASK=24,d.WILL_QOS_SHIFT=3,d.WILL_FLAG_MASK=4,d.CLEAN_SESSION_MASK=2,d.CONNECT_HEADER=g.from([d.codes.connect<<d.CMD_SHIFT]),d.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},d.propertiesCodes={};for(const u in d.properties)d.propertiesCodes[d.properties[u]]=u;function w(u){return[0,1,2].map(i=>[0,1].map(l=>[0,1].map(a=>{const s=g.alloc(1);return s.writeUInt8(d.codes[u]<<d.CMD_SHIFT|(l?d.DUP_MASK:0)|i<<d.QOS_SHIFT|a,0,!0),s})))}d.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},d.PUBLISH_HEADER=w("publish"),d.SUBSCRIBE_HEADER=w("subscribe"),d.SUBSCRIBE_OPTIONS_QOS_MASK=3,d.SUBSCRIBE_OPTIONS_NL_MASK=1,d.SUBSCRIBE_OPTIONS_NL_SHIFT=2,d.SUBSCRIBE_OPTIONS_RAP_MASK=1,d.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,d.SUBSCRIBE_OPTIONS_RH_MASK=3,d.SUBSCRIBE_OPTIONS_RH_SHIFT=4,d.SUBSCRIBE_OPTIONS_RH=[0,16,32],d.SUBSCRIBE_OPTIONS_NL=4,d.SUBSCRIBE_OPTIONS_RAP=8,d.SUBSCRIBE_OPTIONS_QOS=[0,1,2],d.UNSUBSCRIBE_HEADER=w("unsubscribe"),d.ACKS={unsuback:w("unsuback"),puback:w("puback"),pubcomp:w("pubcomp"),pubrel:w("pubrel"),pubrec:w("pubrec")},d.SUBACK_HEADER=g.from([d.codes.suback<<d.CMD_SHIFT]),d.VERSION3=g.from([3]),d.VERSION4=g.from([4]),d.VERSION5=g.from([5]),d.VERSION131=g.from([131]),d.VERSION132=g.from([132]),d.QOS=[0,1,2].map(u=>g.from([u])),d.EMPTY={pingreq:g.from([d.codes.pingreq<<4,0]),pingresp:g.from([d.codes.pingresp<<4,0]),disconnect:g.from([d.codes.disconnect<<4,0])}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3}],37:[function(m,H,j){(function(g){(function(){const d=m("./writeToStream"),w=m("events");class i extends w{constructor(){super(),this._array=new Array(20),this._i=0}write(a){return this._array[this._i++]=a,!0}concat(){let a=0;const s=new Array(this._array.length),y=this._array;let f,R=0;for(f=0;f<y.length&&void 0!==y[f];f++)s[f]="string"!=typeof y[f]?y[f].length:g.byteLength(y[f]),a+=s[f];const _=g.allocUnsafe(a);for(f=0;f<y.length&&void 0!==y[f];f++)"string"!=typeof y[f]?(y[f].copy(_,R),R+=s[f]):(_.write(y[f],R),R+=s[f]);return _}}H.exports=function u(l,a){const s=new i;return d(l,s,a),s.concat()}}).call(this)}).call(this,m("buffer").Buffer)},{"./writeToStream":42,buffer:3,events:4}],38:[function(m,H,j){j.parser=m("./parser").parser,j.generate=m("./generate"),j.writeToStream=m("./writeToStream")},{"./generate":37,"./parser":41,"./writeToStream":42}],39:[function(m,H,j){(function(g){(function(){const w={},u=g.isBuffer(g.from([1,2]).subarray(0,1));function i(y){const R=g.allocUnsafe(2);return R.writeUInt8(y>>8,0),R.writeUInt8(255&y,1),R}H.exports={cache:w,generateCache:function l(){for(let y=0;y<65536;y++)w[y]=i(y)},generateNumber:i,genBufVariableByteInt:function a(y){let f=0,_=0;const h=g.allocUnsafe(4);do{f=y%128|0,(y=y/128|0)>0&&(f|=128),h.writeUInt8(f,_++)}while(y>0&&_<4);return y>0&&(_=0),u?h.subarray(0,_):h.slice(0,_)},generate4ByteBuffer:function s(y){const R=g.allocUnsafe(4);return R.writeUInt32BE(y,0),R}}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3}],40:[function(m,H,j){H.exports=class g{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],41:[function(m,H,j){const g=m("bl"),d=m("events"),w=m("./packet"),u=m("./constants"),i=m("debug")("mqtt-packet:parser");class l extends d{constructor(){super(),this.parser=this.constructor.parser}static parser(s){return this instanceof l?(this.settings=s||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new l).parser(s)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new w,this.error=null,this._list=g(),this._stateCounter=0}parse(s){for(this.error&&this._resetState(),this._list.append(s),i("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const s=this._list.readUInt8(0);return this.packet.cmd=u.types[s>>u.CMD_SHIFT],this.packet.retain=!!(s&u.RETAIN_MASK),this.packet.qos=s>>u.QOS_SHIFT&u.QOS_MASK,this.packet.dup=!!(s&u.DUP_MASK),i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const s=this._parseVarByteNum(!0);return s&&(this.packet.length=s.value,this._list.consume(s.bytes)),i("_parseLength %d",s.value),!!s}_parsePayload(){i("_parsePayload: payload %O",this._list);let s=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}s=!0}return i("_parsePayload complete result: %s",s),s}_parseConnect(){let s,y,R,f;i("_parseConnect");const _={},h=this.packet,E=this._parseString();if(null===E)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==E&&"MQIsdp"!==E)return this._emitError(new Error("Invalid protocolId"));if(h.protocolId=E,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(h.protocolVersion=this._list.readUInt8(this._pos),h.protocolVersion>=128&&(h.bridgeMode=!0,h.protocolVersion=h.protocolVersion-128),3!==h.protocolVersion&&4!==h.protocolVersion&&5!==h.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(_.username=this._list.readUInt8(this._pos)&u.USERNAME_MASK,_.password=this._list.readUInt8(this._pos)&u.PASSWORD_MASK,_.will=this._list.readUInt8(this._pos)&u.WILL_FLAG_MASK,_.will&&(h.will={},h.will.retain=!!(this._list.readUInt8(this._pos)&u.WILL_RETAIN_MASK),h.will.qos=(this._list.readUInt8(this._pos)&u.WILL_QOS_MASK)>>u.WILL_QOS_SHIFT),h.clean=!!(this._list.readUInt8(this._pos)&u.CLEAN_SESSION_MASK),this._pos++,h.keepalive=this._parseNum(),-1===h.keepalive)return this._emitError(new Error("Packet too short"));if(5===h.protocolVersion){const C=this._parseProperties();Object.getOwnPropertyNames(C).length&&(h.properties=C)}const v=this._parseString();if(null===v)return this._emitError(new Error("Packet too short"));if(h.clientId=v,i("_parseConnect: packet.clientId: %s",h.clientId),_.will){if(5===h.protocolVersion){const C=this._parseProperties();Object.getOwnPropertyNames(C).length&&(h.will.properties=C)}if(s=this._parseString(),null===s)return this._emitError(new Error("Cannot parse will topic"));if(h.will.topic=s,i("_parseConnect: packet.will.topic: %s",h.will.topic),y=this._parseBuffer(),null===y)return this._emitError(new Error("Cannot parse will payload"));h.will.payload=y,i("_parseConnect: packet.will.paylaod: %s",h.will.payload)}if(_.username){if(f=this._parseString(),null===f)return this._emitError(new Error("Cannot parse username"));h.username=f,i("_parseConnect: packet.username: %s",h.username)}if(_.password){if(R=this._parseBuffer(),null===R)return this._emitError(new Error("Cannot parse password"));h.password=R}return this.settings=h,i("_parseConnect: complete"),h}_parseConnack(){i("_parseConnack");const s=this.packet;if(this._list.length<1)return null;if(s.sessionPresent=!!(this._list.readUInt8(this._pos++)&u.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)s.reasonCode=this._list.length>=2?this._list.readUInt8(this._pos++):0;else{if(this._list.length<2)return null;s.returnCode=this._list.readUInt8(this._pos++)}if(-1===s.returnCode||-1===s.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(s.properties=y)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");const s=this.packet;if(s.topic=this._parseString(),null===s.topic)return this._emitError(new Error("Cannot parse topic"));if(!(s.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(s.properties=y)}s.payload=this._list.slice(this._pos,s.length),i("_parsePublish: payload from buffer list: %o",s.payload)}}_parseSubscribe(){i("_parseSubscribe");const s=this.packet;let y,R,f,_,h,E,v;if(1!==s.qos)return this._emitError(new Error("Wrong subscribe header"));if(s.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const C=this._parseProperties();Object.getOwnPropertyNames(C).length&&(s.properties=C)}for(;this._pos<s.length;){if(y=this._parseString(),null===y)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));R=this._parseByte(),f=R&u.SUBSCRIBE_OPTIONS_QOS_MASK,E=!!(R>>u.SUBSCRIBE_OPTIONS_NL_SHIFT&u.SUBSCRIBE_OPTIONS_NL_MASK),h=!!(R>>u.SUBSCRIBE_OPTIONS_RAP_SHIFT&u.SUBSCRIBE_OPTIONS_RAP_MASK),_=R>>u.SUBSCRIBE_OPTIONS_RH_SHIFT&u.SUBSCRIBE_OPTIONS_RH_MASK,v={topic:y,qos:f},5===this.settings.protocolVersion?(v.nl=E,v.rap=h,v.rh=_):this.settings.bridgeMode&&(v.rh=0,v.rap=!0,v.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",v),s.subscriptions.push(v)}}}_parseSuback(){i("_parseSuback");const s=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(s.properties=y)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){i("_parseUnsubscribe");const s=this.packet;if(s.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(s.properties=y)}for(;this._pos<s.length;){const y=this._parseString();if(null===y)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",y),s.unsubscriptions.push(y)}}}_parseUnsuback(){i("_parseUnsuback");const s=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const y=this._parseProperties();for(Object.getOwnPropertyNames(y).length&&(s.properties=y),s.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const s=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(s.length>2?(s.reasonCode=this._parseByte(),i("_parseConfirmation: packet.reasonCode `%d`",s.reasonCode)):s.reasonCode=0,s.length>3)){const y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(s.properties=y)}return!0}_parseDisconnect(){const s=this.packet;if(i("_parseDisconnect"),5===this.settings.protocolVersion){s.reasonCode=this._list.length>0?this._parseByte():0;const y=this._parseProperties();Object.getOwnPropertyNames(y).length&&(s.properties=y)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");const s=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));s.reasonCode=this._parseByte();const y=this._parseProperties();return Object.getOwnPropertyNames(y).length&&(s.properties=y),i("_parseAuth: result: true"),!0}_parseMessageId(){const s=this.packet;return s.messageId=this._parseNum(),null===s.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",s.messageId),!0)}_parseString(s){const y=this._parseNum(),R=y+this._pos;if(-1===y||R>this._list.length||R>this.packet.length)return null;const f=this._list.toString("utf8",this._pos,R);return this._pos+=y,i("_parseString: result: %s",f),f}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const s=this._parseNum(),y=s+this._pos;if(-1===s||y>this._list.length||y>this.packet.length)return null;const R=this._list.slice(this._pos,y);return this._pos+=s,i("_parseBuffer: result: %o",R),R}_parseNum(){if(this._list.length-this._pos<2)return-1;const s=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",s),s}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const s=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",s),s}_parseVarByteNum(s){i("_parseVarByteNum");let E,R=0,f=1,_=0,h=!1;const v=this._pos?this._pos:0;for(;R<4&&v+R<this._list.length;){if(E=this._list.readUInt8(v+R++),_+=f*(E&u.VARBYTEINT_MASK),f*=128,!(E&u.VARBYTEINT_FIN_MASK)){h=!0;break}if(this._list.length<=R)break}return!h&&4===R&&this._list.length>=R&&this._emitError(new Error("Invalid variable byte integer")),v&&(this._pos+=R),h=!!h&&(s?{bytes:R,value:_}:_),i("_parseVarByteNum: result: %o",h),h}_parseByte(){let s;return this._pos<this._list.length&&(s=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",s),s}_parseByType(s){switch(i("_parseByType: type: %s",s),s){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");const s=this._parseVarByteNum(),R=this._pos+s,f={};for(;this._pos<R;){const _=this._parseByte();if(!_)return this._emitError(new Error("Cannot parse property code type")),!1;const h=u.propertiesCodes[_];if(!h)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==h)f[h]?(Array.isArray(f[h])||(f[h]=[f[h]]),f[h].push(this._parseByType(u.propertiesTypes[h]))):f[h]=this._parseByType(u.propertiesTypes[h]);else{f[h]||(f[h]=Object.create(null));const E=this._parseByType(u.propertiesTypes[h]);f[h][E.name]?(Array.isArray(f[h][E.name])||(f[h][E.name]=[f[h][E.name]]),f[h][E.name].push(E.value)):f[h][E.name]=E.value}}return f}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new w,this._pos=0,!0}_emitError(s){i("_emitError"),this.error=s,this.emit("error",s)}}H.exports=l},{"./constants":36,"./packet":40,bl:17,debug:19,events:4}],42:[function(m,H,j){(function(g){(function(){const d=m("./constants"),w=g.allocUnsafe(0),u=g.from([0]),i=m("./numbers"),l=m("process-nextick-args").nextTick,a=m("debug")("mqtt-packet:writeToStream"),s=i.cache,y=i.generateNumber,R=i.generateCache,f=i.genBufVariableByteInt,_=i.generate4ByteBuffer;let h=oe,E=!0;function v(F,k,U){switch(a("generate called"),k.cork&&(k.cork(),l(C,k)),E&&(E=!1,R()),a("generate: packet.cmd: %s",F.cmd),F.cmd){case"connect":return function N(F,k,U){const te=F||{},S=te.protocolId||"MQTT";let n=te.protocolVersion||4;const o=te.will;let T=te.clean;const L=te.keepalive||0,p=te.clientId||"",t=te.username,e=te.password,r=te.properties;void 0===T&&(T=!0);let b=0;if(!S||"string"!=typeof S&&!g.isBuffer(S))return k.emit("error",new Error("Invalid protocolId")),!1;if(b+=S.length+2,3!==n&&4!==n&&5!==n)return k.emit("error",new Error("Invalid protocol version")),!1;if(b+=1,("string"==typeof p||g.isBuffer(p))&&(p||n>=4)&&(p||T))b+=g.byteLength(p)+2;else{if(n<4)return k.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*T==0)return k.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof L||L<0||L>65535||L%1!=0)return k.emit("error",new Error("Invalid keepalive")),!1;if(b+=2,b+=1,5===n){var M=ee(k,r);if(!M)return!1;b+=M.length}if(o){if("object"!=typeof o)return k.emit("error",new Error("Invalid will")),!1;if(!o.topic||"string"!=typeof o.topic)return k.emit("error",new Error("Invalid will topic")),!1;if(b+=g.byteLength(o.topic)+2,b+=2,o.payload){if(!(o.payload.length>=0))return k.emit("error",new Error("Invalid will payload")),!1;b+="string"==typeof o.payload?g.byteLength(o.payload):o.payload.length}var z={};if(5===n){if(!(z=ee(k,o.properties)))return!1;b+=z.length}}let J=!1;if(null!=t){if(!Z(t))return k.emit("error",new Error("Invalid username")),!1;J=!0,b+=g.byteLength(t)+2}if(null!=e){if(!J)return k.emit("error",new Error("Username is required to use password")),!1;if(!Z(e))return k.emit("error",new Error("Invalid password")),!1;b+=X(e)+2}k.write(d.CONNECT_HEADER),Y(k,b),ie(k,S),te.bridgeMode&&(n+=128),k.write(131===n?d.VERSION131:132===n?d.VERSION132:4===n?d.VERSION4:5===n?d.VERSION5:d.VERSION3);let ae=0;return ae|=null!=t?d.USERNAME_MASK:0,ae|=null!=e?d.PASSWORD_MASK:0,ae|=o&&o.retain?d.WILL_RETAIN_MASK:0,ae|=o&&o.qos?o.qos<<d.WILL_QOS_SHIFT:0,ae|=o?d.WILL_FLAG_MASK:0,ae|=T?d.CLEAN_SESSION_MASK:0,k.write(g.from([ae])),h(k,L),5===n&&M.write(),ie(k,p),o&&(5===n&&z.write(),G(k,o.topic),ie(k,o.payload)),null!=t&&ie(k,t),null!=e&&ie(k,e),!0}(F,k);case"connack":return function A(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=5===te?S.reasonCode:S.returnCode,o=S.properties;let T=2;if("number"!=typeof n)return k.emit("error",new Error("Invalid return code")),!1;let L=null;if(5===te){if(L=ee(k,o),!L)return!1;T+=L.length}return k.write(d.CONNACK_HEADER),Y(k,T),k.write(S.sessionPresent?d.SESSIONPRESENT_HEADER:u),k.write(g.from([n])),L?.write(),!0}(F,k,U);case"publish":return function W(F,k,U){a("publish: packet: %o",F);const te=U?U.protocolVersion:4,S=F||{},n=S.qos||0,o=S.retain?d.RETAIN_MASK:0,T=S.topic,L=S.payload||w,p=S.messageId,t=S.properties;let e=0;if("string"==typeof T)e+=g.byteLength(T)+2;else{if(!g.isBuffer(T))return k.emit("error",new Error("Invalid topic")),!1;e+=T.length+2}if(g.isBuffer(L)?e+=L.length:e+=g.byteLength(L),n&&"number"!=typeof p)return k.emit("error",new Error("Invalid messageId")),!1;n&&(e+=2);let r=null;if(5===te){if(r=ee(k,t),!r)return!1;e+=r.length}return k.write(d.PUBLISH_HEADER[n][S.dup?1:0][o?1:0]),Y(k,e),h(k,X(T)),k.write(T),n>0&&h(k,p),r?.write(),a("publish: payload: %o",L),k.write(L)}(F,k,U);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function q(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=S.cmd||"puback",o=S.messageId,T=S.dup&&"pubrel"===n?d.DUP_MASK:0;let L=0;const p=S.reasonCode,t=S.properties;let e=5===te?3:2;if("pubrel"===n&&(L=1),"number"!=typeof o)return k.emit("error",new Error("Invalid messageId")),!1;let r=null;if(5===te&&"object"==typeof t){if(r=Q(k,t,U,e),!r)return!1;e+=r.length}return k.write(d.ACKS[n][L][T][0]),Y(k,e),h(k,o),5===te&&k.write(g.from([p])),null!==r&&r.write(),!0}(F,k,U);case"subscribe":return function V(F,k,U){a("subscribe: packet: ");const te=U?U.protocolVersion:4,S=F||{},n=S.dup?d.DUP_MASK:0,o=S.messageId,T=S.subscriptions,L=S.properties;let p=0;if("number"!=typeof o)return k.emit("error",new Error("Invalid messageId")),!1;p+=2;let t=null;if(5===te){if(t=ee(k,L),!t)return!1;p+=t.length}if("object"!=typeof T||!T.length)return k.emit("error",new Error("Invalid subscriptions")),!1;for(let r=0;r<T.length;r+=1){const b=T[r].topic,M=T[r].qos;if("string"!=typeof b)return k.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof M)return k.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===te){if("boolean"!=typeof(T[r].nl||!1))return k.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(T[r].rap||!1))return k.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=T[r].rh||0;if("number"!=typeof ae||ae>2)return k.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}p+=g.byteLength(b)+2+1}a("subscribe: writing to stream: %o",d.SUBSCRIBE_HEADER),k.write(d.SUBSCRIBE_HEADER[1][n?1:0][0]),Y(k,p),h(k,o),null!==t&&t.write();let e=!0;for(const r of T){const M=r.qos,z=+r.nl,J=+r.rap,ae=r.rh;let le;G(k,r.topic),le=d.SUBSCRIBE_OPTIONS_QOS[M],5===te&&(le|=z?d.SUBSCRIBE_OPTIONS_NL:0,le|=J?d.SUBSCRIBE_OPTIONS_RAP:0,le|=ae?d.SUBSCRIBE_OPTIONS_RH[ae]:0),e=k.write(g.from([le]))}return e}(F,k,U);case"suback":return function O(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=S.messageId,o=S.granted,T=S.properties;let L=0;if("number"!=typeof n)return k.emit("error",new Error("Invalid messageId")),!1;if(L+=2,"object"!=typeof o||!o.length)return k.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<o.length;t+=1){if("number"!=typeof o[t])return k.emit("error",new Error("Invalid qos vector")),!1;L+=1}let p=null;if(5===te){if(p=Q(k,T,U,L),!p)return!1;L+=p.length}return k.write(d.SUBACK_HEADER),Y(k,L),h(k,n),null!==p&&p.write(),k.write(g.from(o))}(F,k,U);case"unsubscribe":return function I(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=S.messageId,o=S.dup?d.DUP_MASK:0,T=S.unsubscriptions,L=S.properties;let p=0;if("number"!=typeof n)return k.emit("error",new Error("Invalid messageId")),!1;if(p+=2,"object"!=typeof T||!T.length)return k.emit("error",new Error("Invalid unsubscriptions")),!1;for(let r=0;r<T.length;r+=1){if("string"!=typeof T[r])return k.emit("error",new Error("Invalid unsubscriptions")),!1;p+=g.byteLength(T[r])+2}let t=null;if(5===te){if(t=ee(k,L),!t)return!1;p+=t.length}k.write(d.UNSUBSCRIBE_HEADER[1][o?1:0][0]),Y(k,p),h(k,n),null!==t&&t.write();let e=!0;for(let r=0;r<T.length;r++)e=G(k,T[r]);return e}(F,k,U);case"unsuback":return function x(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=S.messageId,o=S.dup?d.DUP_MASK:0,T=S.granted,L=S.properties,p=S.cmd,t=0;let e=2;if("number"!=typeof n)return k.emit("error",new Error("Invalid messageId")),!1;if(5===te){if("object"!=typeof T||!T.length)return k.emit("error",new Error("Invalid qos vector")),!1;for(let b=0;b<T.length;b+=1){if("number"!=typeof T[b])return k.emit("error",new Error("Invalid qos vector")),!1;e+=1}}let r=null;if(5===te){if(r=Q(k,L,U,e),!r)return!1;e+=r.length}return k.write(d.ACKS[p][t][o][0]),Y(k,e),h(k,n),null!==r&&r.write(),5===te&&k.write(g.from(T)),!0}(F,k,U);case"pingreq":case"pingresp":return function c(F,k,U){return k.write(d.EMPTY[F.cmd])}(F,k);case"disconnect":return function D(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=S.reasonCode;let T=5===te?1:0,L=null;if(5===te){if(L=Q(k,S.properties,U,T),!L)return!1;T+=L.length}return k.write(g.from([d.codes.disconnect<<4])),Y(k,T),5===te&&k.write(g.from([n])),null!==L&&L.write(),!0}(F,k,U);case"auth":return function K(F,k,U){const te=U?U.protocolVersion:4,S=F||{},n=S.reasonCode,o=S.properties;let T=5===te?1:0;5!==te&&k.emit("error",new Error("Invalid mqtt version for auth packet"));const L=Q(k,o,U,T);return!!L&&(T+=L.length,k.write(g.from([d.codes.auth<<4])),Y(k,T),k.write(g.from([n])),null!==L&&L.write(),!0)}(F,k,U);default:return k.emit("error",new Error("Unknown command")),!1}}function C(F){F.uncork()}Object.defineProperty(v,"cacheNumbers",{get:()=>h===oe,set(F){F?((!s||0===Object.keys(s).length)&&(E=!0),h=oe):(E=!1,h=se)}});const $={};function Y(F,k){if(k>d.VARBYTEINT_MAX)return F.emit("error",new Error(`Invalid variable byte integer: ${k}`)),!1;let U=$[k];return U||(U=f(k),k<16384&&($[k]=U)),a("writeVarByteInt: writing to stream: %o",U),F.write(U)}function G(F,k){const U=g.byteLength(k);return h(F,U),a("writeString: %s",k),F.write(k,"utf8")}function re(F,k,U){G(F,k),G(F,U)}function oe(F,k){return a("writeNumberCached: number: %d",k),a("writeNumberCached: %o",s[k]),F.write(s[k])}function se(F,k){const U=y(k);return a("writeNumberGenerated: %o",U),F.write(U)}function ie(F,k){"string"==typeof k?G(F,k):k?(h(F,k.length),F.write(k)):h(F,0)}function ee(F,k){if("object"!=typeof k||null!=k.length)return{length:1,write(){B(F,{},0)}};let U=0;function te(n,o){let L=0;switch(d.propertiesTypes[n]){case"byte":if("boolean"!=typeof o)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=2;break;case"int8":if("number"!=typeof o||o<0||o>255)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=2;break;case"binary":if(o&&null===o)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=1+g.byteLength(o)+2;break;case"int16":if("number"!=typeof o||o<0||o>65535)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=3;break;case"int32":if("number"!=typeof o||o<0||o>4294967295)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=5;break;case"var":if("number"!=typeof o||o<0||o>268435455)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=1+g.byteLength(f(o));break;case"string":if("string"!=typeof o)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=3+g.byteLength(o.toString());break;case"pair":if("object"!=typeof o)return F.emit("error",new Error(`Invalid ${n}: ${o}`)),!1;L+=Object.getOwnPropertyNames(o).reduce((p,t)=>{const e=o[t];return Array.isArray(e)?p+=e.reduce((r,b)=>r+(3+g.byteLength(t.toString())+2+g.byteLength(b.toString())),0):p+=3+g.byteLength(t.toString())+2+g.byteLength(o[t].toString()),p},0);break;default:return F.emit("error",new Error(`Invalid property ${n}: ${o}`)),!1}return L}if(k)for(const n in k){let o=0,T=0;const L=k[n];if(Array.isArray(L))for(let p=0;p<L.length;p++){if(T=te(n,L[p]),!T)return!1;o+=T}else{if(T=te(n,L),!T)return!1;o=T}if(!o)return!1;U+=o}return{length:g.byteLength(f(U))+U,write(){B(F,k,U)}}}function Q(F,k,U,te){const S=["reasonString","userProperties"],n=U&&U.properties&&U.properties.maximumPacketSize?U.properties.maximumPacketSize:0;let o=ee(F,k);if(n)for(;te+o.length>n;){const T=S.shift();if(!T||!k[T])return!1;delete k[T],o=ee(F,k)}return o}function P(F,k,U){switch(d.propertiesTypes[k]){case"byte":F.write(g.from([d.properties[k]])),F.write(g.from([+U]));break;case"int8":F.write(g.from([d.properties[k]])),F.write(g.from([U]));break;case"binary":F.write(g.from([d.properties[k]])),ie(F,U);break;case"int16":F.write(g.from([d.properties[k]])),h(F,U);break;case"int32":F.write(g.from([d.properties[k]])),function ne(F,k){const U=_(k);return a("write4ByteNumber: %o",U),F.write(U)}(F,U);break;case"var":F.write(g.from([d.properties[k]])),Y(F,U);break;case"string":F.write(g.from([d.properties[k]])),G(F,U);break;case"pair":Object.getOwnPropertyNames(U).forEach(S=>{const n=U[S];Array.isArray(n)?n.forEach(o=>{F.write(g.from([d.properties[k]])),re(F,S.toString(),o.toString())}):(F.write(g.from([d.properties[k]])),re(F,S.toString(),n.toString()))});break;default:return F.emit("error",new Error(`Invalid property ${k} value: ${U}`)),!1}}function B(F,k,U){Y(F,U);for(const te in k)if(Object.prototype.hasOwnProperty.call(k,te)&&null!==k[te]){const S=k[te];if(Array.isArray(S))for(let n=0;n<S.length;n++)P(F,te,S[n]);else P(F,te,S)}}function X(F){return F?F instanceof g?F.length:g.byteLength(F):0}function Z(F){return"string"==typeof F||F instanceof g}H.exports=v}).call(this)}).call(this,m("buffer").Buffer)},{"./constants":36,"./numbers":39,buffer:3,debug:19,"process-nextick-args":45}],43:[function(m,H,j){var g=1e3,d=60*g,w=60*d,u=24*w;function R(f,_,h,E){var v=_>=1.5*h;return Math.round(f/h)+" "+E+(v?"s":"")}H.exports=function(f,_){_=_||{};var h=typeof f;if("string"===h&&f.length>0)return function a(f){if(!((f=String(f)).length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(_){var h=parseFloat(_[1]);switch((_[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*h;case"weeks":case"week":case"w":return 6048e5*h;case"days":case"day":case"d":return h*u;case"hours":case"hour":case"hrs":case"hr":case"h":return h*w;case"minutes":case"minute":case"mins":case"min":case"m":return h*d;case"seconds":case"second":case"secs":case"sec":case"s":return h*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}(f);if("number"===h&&isFinite(f))return _.long?function y(f){var _=Math.abs(f);return _>=u?R(f,_,u,"day"):_>=w?R(f,_,w,"hour"):_>=d?R(f,_,d,"minute"):_>=g?R(f,_,g,"second"):f+" ms"}(f):function s(f){var _=Math.abs(f);return _>=u?Math.round(f/u)+"d":_>=w?Math.round(f/w)+"h":_>=d?Math.round(f/d)+"m":_>=g?Math.round(f/g)+"s":f+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},{}],44:[function(m,H,j){var g=m("wrappy");function d(u){var i=function(){return i.called?i.value:(i.called=!0,i.value=u.apply(this,arguments))};return i.called=!1,i}function w(u){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=u.apply(this,arguments)};return i.onceError=(u.name||"Function wrapped with `once`")+" shouldn't be called more than once",i.called=!1,i}H.exports=g(d),H.exports.strict=g(w),d.proto=d(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return d(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return w(this)},configurable:!0})})},{wrappy:66}],45:[function(m,H,j){(function(g){(function(){"use strict";H.exports=typeof g>"u"||!g.version||0===g.version.indexOf("v0.")||0===g.version.indexOf("v1.")&&0!==g.version.indexOf("v1.8.")?{nextTick:function d(w,u,i,l){if("function"!=typeof w)throw new TypeError('"callback" argument must be a function');var s,y,a=arguments.length;switch(a){case 0:case 1:return g.nextTick(w);case 2:return g.nextTick(function(){w.call(null,u)});case 3:return g.nextTick(function(){w.call(null,u,i)});case 4:return g.nextTick(function(){w.call(null,u,i,l)});default:for(s=new Array(a-1),y=0;y<s.length;)s[y++]=arguments[y];return g.nextTick(function(){w.apply(null,s)})}}}:g}).call(this)}).call(this,m("_process"))},{_process:69}],46:[function(m,H,j){"use strict";var d={};function w(s,y,R){R||(R=Error);var _=function(h){function E(v,C,N){return h.call(this,function f(h,E,v){return"string"==typeof y?y:y(h,E,v)}(v,C,N))||this}return function g(s,y){s.prototype=Object.create(y.prototype),s.prototype.constructor=s,s.__proto__=y}(E,h),E}(R);_.prototype.name=R.name,_.prototype.code=s,d[s]=_}function u(s,y){if(Array.isArray(s)){var R=s.length;return s=s.map(function(f){return String(f)}),R>2?"one of ".concat(y," ").concat(s.slice(0,R-1).join(", "),", or ")+s[R-1]:2===R?"one of ".concat(y," ").concat(s[0]," or ").concat(s[1]):"of ".concat(y," ").concat(s[0])}return"of ".concat(y," ").concat(String(s))}w("ERR_INVALID_OPT_VALUE",function(s,y){return'The value "'+y+'" is invalid for option "'+s+'"'},TypeError),w("ERR_INVALID_ARG_TYPE",function(s,y,R){var f,_;if("string"==typeof y&&function i(s,y,R){return s.substr(!R||R<0?0:+R,y.length)===y}(y,"not ")?(f="must not be",y=y.replace(/^not /,"")):f="must be",function l(s,y,R){return(void 0===R||R>s.length)&&(R=s.length),s.substring(R-y.length,R)===y}(s," argument"))_="The ".concat(s," ").concat(f," ").concat(u(y,"type"));else{var h=function a(s,y,R){return"number"!=typeof R&&(R=0),!(R+y.length>s.length)&&-1!==s.indexOf(y,R)}(s,".")?"property":"argument";_='The "'.concat(s,'" ').concat(h," ").concat(f," ").concat(u(y,"type"))}return _+". Received type ".concat(typeof R)},TypeError),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),w("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),w("ERR_STREAM_PREMATURE_CLOSE","Premature close"),w("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),w("ERR_STREAM_WRITE_AFTER_END","write after end"),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),H.exports.codes=d},{}],47:[function(m,H,j){(function(g){(function(){"use strict";var d=Object.keys||function(f){var _=[];for(var h in f)_.push(h);return _};H.exports=s;var w=m("./_stream_readable"),u=m("./_stream_writable");m("inherits")(s,w);for(var i=d(u.prototype),l=0;l<i.length;l++){var a=i[l];s.prototype[a]||(s.prototype[a]=u.prototype[a])}function s(f){if(!(this instanceof s))return new s(f);w.call(this,f),u.call(this,f),this.allowHalfOpen=!0,f&&(!1===f.readable&&(this.readable=!1),!1===f.writable&&(this.writable=!1),!1===f.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",y)))}function y(){this._writableState.ended||g.nextTick(R,this)}function R(f){f.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=_,this._writableState.destroyed=_)}})}).call(this)}).call(this,m("_process"))},{"./_stream_readable":49,"./_stream_writable":51,_process:69,inherits:34}],48:[function(m,H,j){"use strict";H.exports=d;var g=m("./_stream_transform");function d(w){if(!(this instanceof d))return new d(w);g.call(this,w)}m("inherits")(d,g),d.prototype._transform=function(w,u,i){i(null,w)}},{"./_stream_transform":50,inherits:34}],49:[function(m,H,j){(function(g,d){(function(){"use strict";var w;H.exports=Y,Y.ReadableState=$,m("events");var i=function(t,e){return t.listeners(e).length},l=m("./internal/streams/stream"),a=m("buffer").Buffer,s=d.Uint8Array||function(){};var _,f=m("util");_=f&&f.debuglog?f.debuglog("stream"):function(){};var O,I,x,h=m("./internal/streams/buffer_list"),E=m("./internal/streams/destroy"),C=m("./internal/streams/state").getHighWaterMark,N=m("../errors").codes,A=N.ERR_INVALID_ARG_TYPE,W=N.ERR_STREAM_PUSH_AFTER_EOF,q=N.ERR_METHOD_NOT_IMPLEMENTED,V=N.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;m("inherits")(Y,l);var c=E.errorOrDestroy,D=["error","close","destroy","pause","resume"];function $(p,t,e){w=w||m("./_stream_duplex"),"boolean"!=typeof e&&(e=t instanceof w),this.objectMode=!!(p=p||{}).objectMode,e&&(this.objectMode=this.objectMode||!!p.readableObjectMode),this.highWaterMark=C(this,p,"readableHighWaterMark",e),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==p.emitClose,this.autoDestroy=!!p.autoDestroy,this.destroyed=!1,this.defaultEncoding=p.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,p.encoding&&(O||(O=m("string_decoder/").StringDecoder),this.decoder=new O(p.encoding),this.encoding=p.encoding)}function Y(p){if(w=w||m("./_stream_duplex"),!(this instanceof Y))return new Y(p);this._readableState=new $(p,this,this instanceof w),this.readable=!0,p&&("function"==typeof p.read&&(this._read=p.read),"function"==typeof p.destroy&&(this._destroy=p.destroy)),l.call(this)}function G(p,t,e,r,b){_("readableAddChunk",t);var z,M=p._readableState;if(null===t)M.reading=!1,function ee(p,t){if(_("onEofChunk"),!t.ended){if(t.decoder){var e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Q(p):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(p)))}}(p,M);else if(b||(z=function oe(p,t){var e;return!function R(p){return a.isBuffer(p)||p instanceof s}(t)&&"string"!=typeof t&&void 0!==t&&!p.objectMode&&(e=new A("chunk",["string","Buffer","Uint8Array"],t)),e}(M,t)),z)c(p,z);else if(M.objectMode||t&&t.length>0)if("string"!=typeof t&&!M.objectMode&&Object.getPrototypeOf(t)!==a.prototype&&(t=function y(p){return a.from(p)}(t)),r)M.endEmitted?c(p,new V):re(p,M,t,!0);else if(M.ended)c(p,new W);else{if(M.destroyed)return!1;M.reading=!1,M.decoder&&!e?(t=M.decoder.write(t),M.objectMode||0!==t.length?re(p,M,t,!1):B(p,M)):re(p,M,t,!1)}else r||(M.reading=!1,B(p,M));return!M.ended&&(M.length<M.highWaterMark||0===M.length)}function re(p,t,e,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,p.emit("data",e)):(t.length+=t.objectMode?1:e.length,r?t.buffer.unshift(e):t.buffer.push(e),t.needReadable&&Q(p)),B(p,t)}Object.defineProperty(Y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),Y.prototype.destroy=E.destroy,Y.prototype._undestroy=E.undestroy,Y.prototype._destroy=function(p,t){t(p)},Y.prototype.push=function(p,t){var r,e=this._readableState;return e.objectMode?r=!0:"string"==typeof p&&((t=t||e.defaultEncoding)!==e.encoding&&(p=a.from(p,t),t=""),r=!0),G(this,p,t,!1,r)},Y.prototype.unshift=function(p){return G(this,p,null,!0,!1)},Y.prototype.isPaused=function(){return!1===this._readableState.flowing},Y.prototype.setEncoding=function(p){O||(O=m("string_decoder/").StringDecoder);var t=new O(p);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var e=this._readableState.buffer.head,r="";null!==e;)r+=t.write(e.data),e=e.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var se=1073741824;function ie(p,t){return p<=0||0===t.length&&t.ended?0:t.objectMode?1:p!=p?t.flowing&&t.length?t.buffer.head.data.length:t.length:(p>t.highWaterMark&&(t.highWaterMark=function ne(p){return p>=se?p=se:(p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++),p}(p)),p<=t.length?p:t.ended?t.length:(t.needReadable=!0,0))}function Q(p){var t=p._readableState;_("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,g.nextTick(P,p))}function P(p){var t=p._readableState;_("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(p.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,S(p)}function B(p,t){t.readingMore||(t.readingMore=!0,g.nextTick(X,p,t))}function X(p,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var e=t.length;if(_("maybeReadMore read 0"),p.read(0),e===t.length)break}t.readingMore=!1}function F(p){var t=p._readableState;t.readableListening=p.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:p.listenerCount("data")>0&&p.resume()}function k(p){_("readable nexttick read 0"),p.read(0)}function te(p,t){_("resume",t.reading),t.reading||p.read(0),t.resumeScheduled=!1,p.emit("resume"),S(p),t.flowing&&!t.reading&&p.read(0)}function S(p){var t=p._readableState;for(_("flow",t.flowing);t.flowing&&null!==p.read(););}function n(p,t){return 0===t.length?null:(t.objectMode?e=t.buffer.shift():!p||p>=t.length?(e=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):e=t.buffer.consume(p,t.decoder),e);var e}function o(p){var t=p._readableState;_("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,g.nextTick(T,t,p))}function T(p,t){if(_("endReadableNT",p.endEmitted,p.length),!p.endEmitted&&0===p.length&&(p.endEmitted=!0,t.readable=!1,t.emit("end"),p.autoDestroy)){var e=t._writableState;(!e||e.autoDestroy&&e.finished)&&t.destroy()}}function L(p,t){for(var e=0,r=p.length;e<r;e++)if(p[e]===t)return e;return-1}Y.prototype.read=function(p){_("read",p),p=parseInt(p,10);var t=this._readableState,e=p;if(0!==p&&(t.emittedReadable=!1),0===p&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?o(this):Q(this),null;if(0===(p=ie(p,t))&&t.ended)return 0===t.length&&o(this),null;var b,r=t.needReadable;return _("need readable",r),(0===t.length||t.length-p<t.highWaterMark)&&_("length less than watermark",r=!0),t.ended||t.reading?_("reading or ended",r=!1):r&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(p=ie(e,t))),null===(b=p>0?n(p,t):null)?(t.needReadable=t.length<=t.highWaterMark,p=0):(t.length-=p,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),e!==p&&t.ended&&o(this)),null!==b&&this.emit("data",b),b},Y.prototype._read=function(p){c(this,new q("_read()"))},Y.prototype.pipe=function(p,t){var e=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=p;break;case 1:r.pipes=[r.pipes,p];break;default:r.pipes.push(p)}r.pipesCount+=1,_("pipe count=%d opts=%j",r.pipesCount,t);var M=t&&!1===t.end||p===g.stdout||p===g.stderr?ye:J;function z(_e,we){_("onunpipe"),_e===e&&we&&!1===we.hasUnpiped&&(we.hasUnpiped=!0,function ce(){_("cleanup"),p.removeListener("close",de),p.removeListener("finish",pe),p.removeListener("drain",ae),p.removeListener("error",ue),p.removeListener("unpipe",z),e.removeListener("end",J),e.removeListener("end",ye),e.removeListener("data",he),le=!0,r.awaitDrain&&(!p._writableState||p._writableState.needDrain)&&ae()}())}function J(){_("onend"),p.end()}r.endEmitted?g.nextTick(M):e.once("end",M),p.on("unpipe",z);var ae=function Z(p){return function(){var e=p._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&i(p,"data")&&(e.flowing=!0,S(p))}}(e);p.on("drain",ae);var le=!1;function he(_e){_("ondata");var we=p.write(_e);_("dest.write",we),!1===we&&((1===r.pipesCount&&r.pipes===p||r.pipesCount>1&&-1!==L(r.pipes,p))&&!le&&(_("false write response, pause",r.awaitDrain),r.awaitDrain++),e.pause())}function ue(_e){_("onerror",_e),ye(),p.removeListener("error",ue),0===i(p,"error")&&c(p,_e)}function de(){p.removeListener("finish",pe),ye()}function pe(){_("onfinish"),p.removeListener("close",de),ye()}function ye(){_("unpipe"),e.unpipe(p)}return e.on("data",he),function K(p,t,e){if("function"==typeof p.prependListener)return p.prependListener(t,e);p._events&&p._events[t]?Array.isArray(p._events[t])?p._events[t].unshift(e):p._events[t]=[e,p._events[t]]:p.on(t,e)}(p,"error",ue),p.once("close",de),p.once("finish",pe),p.emit("pipe",e),r.flowing||(_("pipe resume"),e.resume()),p},Y.prototype.unpipe=function(p){var t=this._readableState,e={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return p&&p!==t.pipes||(p||(p=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,p&&p.emit("unpipe",this,e)),this;if(!p){var r=t.pipes,b=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var M=0;M<b;M++)r[M].emit("unpipe",this,{hasUnpiped:!1});return this}var z=L(t.pipes,p);return-1===z||(t.pipes.splice(z,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),p.emit("unpipe",this,e)),this},Y.prototype.addListener=Y.prototype.on=function(p,t){var e=l.prototype.on.call(this,p,t),r=this._readableState;return"data"===p?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===p&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,_("on readable",r.length,r.reading),r.length?Q(this):r.reading||g.nextTick(k,this)),e},Y.prototype.removeListener=function(p,t){var e=l.prototype.removeListener.call(this,p,t);return"readable"===p&&g.nextTick(F,this),e},Y.prototype.removeAllListeners=function(p){var t=l.prototype.removeAllListeners.apply(this,arguments);return("readable"===p||void 0===p)&&g.nextTick(F,this),t},Y.prototype.resume=function(){var p=this._readableState;return p.flowing||(_("resume"),p.flowing=!p.readableListening,function U(p,t){t.resumeScheduled||(t.resumeScheduled=!0,g.nextTick(te,p,t))}(this,p)),p.paused=!1,this},Y.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Y.prototype.wrap=function(p){var t=this,e=this._readableState,r=!1;for(var b in p.on("end",function(){if(_("wrapped end"),e.decoder&&!e.ended){var z=e.decoder.end();z&&z.length&&t.push(z)}t.push(null)}),p.on("data",function(z){_("wrapped data"),e.decoder&&(z=e.decoder.write(z)),e.objectMode&&null==z||!(e.objectMode||z&&z.length)||t.push(z)||(r=!0,p.pause())}),p)void 0===this[b]&&"function"==typeof p[b]&&(this[b]=function(J){return function(){return p[J].apply(p,arguments)}}(b));for(var M=0;M<D.length;M++)p.on(D[M],this.emit.bind(this,D[M]));return this._read=function(z){_("wrapped _read",z),r&&(r=!1,p.resume())},this},"function"==typeof Symbol&&(Y.prototype[Symbol.asyncIterator]=function(){return void 0===I&&(I=m("./internal/streams/async_iterator")),I(this)}),Object.defineProperty(Y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),Y._fromList=n,Object.defineProperty(Y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Y.from=function(p,t){return void 0===x&&(x=m("./internal/streams/from")),x(Y,p,t)})}).call(this)}).call(this,m("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":46,"./_stream_duplex":47,"./internal/streams/async_iterator":52,"./internal/streams/buffer_list":53,"./internal/streams/destroy":54,"./internal/streams/from":56,"./internal/streams/state":58,"./internal/streams/stream":59,_process:69,buffer:3,events:4,inherits:34,"string_decoder/":64,util:2}],50:[function(m,H,j){"use strict";H.exports=s;var g=m("../errors").codes,d=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_MULTIPLE_CALLBACK,u=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=g.ERR_TRANSFORM_WITH_LENGTH_0,l=m("./_stream_duplex");function a(f,_){var h=this._transformState;h.transforming=!1;var E=h.writecb;if(null===E)return this.emit("error",new w);h.writechunk=null,h.writecb=null,null!=_&&this.push(_),E(f);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function s(f){if(!(this instanceof s))return new s(f);l.call(this,f),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&("function"==typeof f.transform&&(this._transform=f.transform),"function"==typeof f.flush&&(this._flush=f.flush)),this.on("prefinish",y)}function y(){var f=this;"function"!=typeof this._flush||this._readableState.destroyed?R(this,null,null):this._flush(function(_,h){R(f,_,h)})}function R(f,_,h){if(_)return f.emit("error",_);if(null!=h&&f.push(h),f._writableState.length)throw new i;if(f._transformState.transforming)throw new u;return f.push(null)}m("inherits")(s,l),s.prototype.push=function(f,_){return this._transformState.needTransform=!1,l.prototype.push.call(this,f,_)},s.prototype._transform=function(f,_,h){h(new d("_transform()"))},s.prototype._write=function(f,_,h){var E=this._transformState;if(E.writecb=h,E.writechunk=f,E.writeencoding=_,!E.transforming){var v=this._readableState;(E.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},s.prototype._read=function(f){var _=this._transformState;null===_.writechunk||_.transforming?_.needTransform=!0:(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform))},s.prototype._destroy=function(f,_){l.prototype._destroy.call(this,f,function(h){_(h)})}},{"../errors":46,"./_stream_duplex":47,inherits:34}],51:[function(m,H,j){(function(g,d){(function(){"use strict";function u(S){var n=this;this.next=null,this.entry=null,this.finish=function(){!function te(S,n,o){var T=S.entry;for(S.entry=null;T;){var L=T.callback;n.pendingcb--,L(o),T=T.next}n.corkedRequestsFree.next=S}(n,S)}}var i;H.exports=$,$.WritableState=D;var l={deprecate:m("util-deprecate")},a=m("./internal/streams/stream"),s=m("buffer").Buffer,y=d.Uint8Array||function(){};var K,_=m("./internal/streams/destroy"),E=m("./internal/streams/state").getHighWaterMark,v=m("../errors").codes,C=v.ERR_INVALID_ARG_TYPE,N=v.ERR_METHOD_NOT_IMPLEMENTED,A=v.ERR_MULTIPLE_CALLBACK,W=v.ERR_STREAM_CANNOT_PIPE,q=v.ERR_STREAM_DESTROYED,V=v.ERR_STREAM_NULL_VALUES,O=v.ERR_STREAM_WRITE_AFTER_END,I=v.ERR_UNKNOWN_ENCODING,x=_.errorOrDestroy;function c(){}function D(S,n,o){i=i||m("./_stream_duplex"),"boolean"!=typeof o&&(o=n instanceof i),this.objectMode=!!(S=S||{}).objectMode,o&&(this.objectMode=this.objectMode||!!S.writableObjectMode),this.highWaterMark=E(this,S,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===S.decodeStrings),this.defaultEncoding=S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(L){!function ee(S,n){var o=S._writableState,T=o.sync,L=o.writecb;if("function"!=typeof L)throw new A;if(function ie(S){S.writing=!1,S.writecb=null,S.length-=S.writelen,S.writelen=0}(o),n)!function ne(S,n,o,T,L){--n.pendingcb,o?(g.nextTick(L,T),g.nextTick(k,S,n),S._writableState.errorEmitted=!0,x(S,T)):(L(T),S._writableState.errorEmitted=!0,x(S,T),k(S,n))}(S,o,T,n,L);else{var p=X(o)||S.destroyed;!p&&!o.corked&&!o.bufferProcessing&&o.bufferedRequest&&B(S,o),T?g.nextTick(Q,S,o,p,L):Q(S,o,p,L)}}(n,L)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==S.emitClose,this.autoDestroy=!!S.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function $(S){var n=this instanceof(i=i||m("./_stream_duplex"));if(!n&&!K.call($,this))return new $(S);this._writableState=new D(S,this,n),this.writable=!0,S&&("function"==typeof S.write&&(this._write=S.write),"function"==typeof S.writev&&(this._writev=S.writev),"function"==typeof S.destroy&&(this._destroy=S.destroy),"function"==typeof S.final&&(this._final=S.final)),a.call(this)}function oe(S,n,o,T,L,p){if(!o){var t=function re(S,n,o){return!S.objectMode&&!1!==S.decodeStrings&&"string"==typeof n&&(n=s.from(n,o)),n}(n,T,L);T!==t&&(o=!0,L="buffer",T=t)}var e=n.objectMode?1:T.length;n.length+=e;var r=n.length<n.highWaterMark;if(r||(n.needDrain=!0),n.writing||n.corked){var b=n.lastBufferedRequest;n.lastBufferedRequest={chunk:T,encoding:L,isBuf:o,callback:p,next:null},b?b.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else se(S,n,!1,e,T,L,p);return r}function se(S,n,o,T,L,p,t){n.writelen=T,n.writecb=t,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new q("write")):o?S._writev(L,n.onwrite):S._write(L,p,n.onwrite),n.sync=!1}function Q(S,n,o,T){o||function P(S,n){0===n.length&&n.needDrain&&(n.needDrain=!1,S.emit("drain"))}(S,n),n.pendingcb--,T(),k(S,n)}function B(S,n){n.bufferProcessing=!0;var o=n.bufferedRequest;if(S._writev&&o&&o.next){var L=new Array(n.bufferedRequestCount),p=n.corkedRequestsFree;p.entry=o;for(var t=0,e=!0;o;)L[t]=o,o.isBuf||(e=!1),o=o.next,t+=1;L.allBuffers=e,se(S,n,!0,n.length,L,"",p.finish),n.pendingcb++,n.lastBufferedRequest=null,p.next?(n.corkedRequestsFree=p.next,p.next=null):n.corkedRequestsFree=new u(n),n.bufferedRequestCount=0}else{for(;o;){var r=o.chunk;if(se(S,n,!1,n.objectMode?1:r.length,r,o.encoding,o.callback),o=o.next,n.bufferedRequestCount--,n.writing)break}null===o&&(n.lastBufferedRequest=null)}n.bufferedRequest=o,n.bufferProcessing=!1}function X(S){return S.ending&&0===S.length&&null===S.bufferedRequest&&!S.finished&&!S.writing}function Z(S,n){S._final(function(o){n.pendingcb--,o&&x(S,o),n.prefinished=!0,S.emit("prefinish"),k(S,n)})}function k(S,n){var o=X(n);if(o&&(function F(S,n){!n.prefinished&&!n.finalCalled&&("function"!=typeof S._final||n.destroyed?(n.prefinished=!0,S.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,g.nextTick(Z,S,n)))}(S,n),0===n.pendingcb&&(n.finished=!0,S.emit("finish"),n.autoDestroy))){var T=S._readableState;(!T||T.autoDestroy&&T.endEmitted)&&S.destroy()}return o}m("inherits")($,a),D.prototype.getBuffer=function(){for(var n=this.bufferedRequest,o=[];n;)o.push(n),n=n.next;return o},function(){try{Object.defineProperty(D.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(K=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(n){return!!K.call(this,n)||this===$&&n&&n._writableState instanceof D}})):K=function(n){return n instanceof this},$.prototype.pipe=function(){x(this,new W)},$.prototype.write=function(S,n,o){var T=this._writableState,L=!1,p=!T.objectMode&&function f(S){return s.isBuffer(S)||S instanceof y}(S);return p&&!s.isBuffer(S)&&(S=function R(S){return s.from(S)}(S)),"function"==typeof n&&(o=n,n=null),p?n="buffer":n||(n=T.defaultEncoding),"function"!=typeof o&&(o=c),T.ending?function Y(S,n){var o=new O;x(S,o),g.nextTick(n,o)}(this,o):(p||function G(S,n,o,T){var L;return null===o?L=new V:"string"!=typeof o&&!n.objectMode&&(L=new C("chunk",["string","Buffer"],o)),!L||(x(S,L),g.nextTick(T,L),!1)}(this,T,S,o))&&(T.pendingcb++,L=oe(this,T,p,S,n,o)),L},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var S=this._writableState;S.corked&&(S.corked--,!S.writing&&!S.corked&&!S.bufferProcessing&&S.bufferedRequest&&B(this,S))},$.prototype.setDefaultEncoding=function(n){if("string"==typeof n&&(n=n.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((n+"").toLowerCase())>-1))throw new I(n);return this._writableState.defaultEncoding=n,this},Object.defineProperty($.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),$.prototype._write=function(S,n,o){o(new N("_write()"))},$.prototype._writev=null,$.prototype.end=function(S,n,o){var T=this._writableState;return"function"==typeof S?(o=S,S=null,n=null):"function"==typeof n&&(o=n,n=null),null!=S&&this.write(S,n),T.corked&&(T.corked=1,this.uncork()),T.ending||function U(S,n,o){n.ending=!0,k(S,n),o&&(n.finished?g.nextTick(o):S.once("finish",o)),n.ended=!0,S.writable=!1}(this,T,o),this},Object.defineProperty($.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(n){this._writableState&&(this._writableState.destroyed=n)}}),$.prototype.destroy=_.destroy,$.prototype._undestroy=_.undestroy,$.prototype._destroy=function(S,n){n(S)}}).call(this)}).call(this,m("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":46,"./_stream_duplex":47,"./internal/streams/destroy":54,"./internal/streams/state":58,"./internal/streams/stream":59,_process:69,buffer:3,inherits:34,"util-deprecate":65}],52:[function(m,H,j){(function(g){(function(){"use strict";var d;function w(W,q,V){return q in W?Object.defineProperty(W,q,{value:V,enumerable:!0,configurable:!0,writable:!0}):W[q]=V,W}var u=m("./end-of-stream"),i=Symbol("lastResolve"),l=Symbol("lastReject"),a=Symbol("error"),s=Symbol("ended"),y=Symbol("lastPromise"),R=Symbol("handlePromise"),f=Symbol("stream");function _(W,q){return{value:W,done:q}}function h(W){var q=W[i];if(null!==q){var V=W[f].read();null!==V&&(W[y]=null,W[i]=null,W[l]=null,q(_(V,!1)))}}function E(W){g.nextTick(h,W)}var C=Object.getPrototypeOf(function(){}),N=Object.setPrototypeOf((w(d={get stream(){return this[f]},next:function(){var q=this,V=this[a];if(null!==V)return Promise.reject(V);if(this[s])return Promise.resolve(_(void 0,!0));if(this[f].destroyed)return new Promise(function(c,D){g.nextTick(function(){q[a]?D(q[a]):c(_(void 0,!0))})});var I,O=this[y];if(O)I=new Promise(function v(W,q){return function(V,O){W.then(function(){q[s]?V(_(void 0,!0)):q[R](V,O)},O)}}(O,this));else{var x=this[f].read();if(null!==x)return Promise.resolve(_(x,!1));I=new Promise(this[R])}return this[y]=I,I}},Symbol.asyncIterator,function(){return this}),w(d,"return",function(){var q=this;return new Promise(function(V,O){q[f].destroy(null,function(I){I?O(I):V(_(void 0,!0))})})}),d),C);H.exports=function(q){var V,O=Object.create(N,(w(V={},f,{value:q,writable:!0}),w(V,i,{value:null,writable:!0}),w(V,l,{value:null,writable:!0}),w(V,a,{value:null,writable:!0}),w(V,s,{value:q._readableState.endEmitted,writable:!0}),w(V,R,{value:function(x,c){var D=O[f].read();D?(O[y]=null,O[i]=null,O[l]=null,x(_(D,!1))):(O[i]=x,O[l]=c)},writable:!0}),V));return O[y]=null,u(q,function(I){if(I&&"ERR_STREAM_PREMATURE_CLOSE"!==I.code){var x=O[l];return null!==x&&(O[y]=null,O[i]=null,O[l]=null,x(I)),void(O[a]=I)}var c=O[i];null!==c&&(O[y]=null,O[i]=null,O[l]=null,c(_(void 0,!0))),O[s]=!0}),q.on("readable",E.bind(null,O)),O}}).call(this)}).call(this,m("_process"))},{"./end-of-stream":55,_process:69}],53:[function(m,H,j){"use strict";function g(h,E){var v=Object.keys(h);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(h);E&&(C=C.filter(function(N){return Object.getOwnPropertyDescriptor(h,N).enumerable})),v.push.apply(v,C)}return v}function w(h,E,v){return E in h?Object.defineProperty(h,E,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[E]=v,h}function i(h,E){for(var v=0;v<E.length;v++){var C=E[v];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(h,C.key,C)}}var s=m("buffer").Buffer,R=m("util").inspect,f=R&&R.custom||"inspect";function _(h,E,v){s.prototype.copy.call(h,E,v)}H.exports=function(){function h(){(function u(h,E){if(!(h instanceof E))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}return function l(h,E,v){return E&&i(h.prototype,E),v&&i(h,v),h}(h,[{key:"push",value:function(v){var C={data:v,next:null};this.length>0?this.tail.next=C:this.head=C,this.tail=C,++this.length}},{key:"unshift",value:function(v){var C={data:v,next:this.head};0===this.length&&(this.tail=C),this.head=C,++this.length}},{key:"shift",value:function(){if(0!==this.length){var v=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(0===this.length)return"";for(var C=this.head,N=""+C.data;C=C.next;)N+=v+C.data;return N}},{key:"concat",value:function(v){if(0===this.length)return s.alloc(0);for(var C=s.allocUnsafe(v>>>0),N=this.head,A=0;N;)_(N.data,C,A),A+=N.data.length,N=N.next;return C}},{key:"consume",value:function(v,C){var N;return v<this.head.data.length?(N=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):N=v===this.head.data.length?this.shift():C?this._getString(v):this._getBuffer(v),N}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var C=this.head,N=1,A=C.data;for(v-=A.length;C=C.next;){var W=C.data,q=v>W.length?W.length:v;if(A+=q===W.length?W:W.slice(0,v),0==(v-=q)){q===W.length?(++N,this.head=C.next?C.next:this.tail=null):(this.head=C,C.data=W.slice(q));break}++N}return this.length-=N,A}},{key:"_getBuffer",value:function(v){var C=s.allocUnsafe(v),N=this.head,A=1;for(N.data.copy(C),v-=N.data.length;N=N.next;){var W=N.data,q=v>W.length?W.length:v;if(W.copy(C,C.length-v,0,q),0==(v-=q)){q===W.length?(++A,this.head=N.next?N.next:this.tail=null):(this.head=N,N.data=W.slice(q));break}++A}return this.length-=A,C}},{key:f,value:function(v,C){return R(this,function d(h){for(var E=1;E<arguments.length;E++){var v=null!=arguments[E]?arguments[E]:{};E%2?g(Object(v),!0).forEach(function(C){w(h,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(v)):g(Object(v)).forEach(function(C){Object.defineProperty(h,C,Object.getOwnPropertyDescriptor(v,C))})}return h}({},C,{depth:0,customInspect:!1}))}}]),h}()},{buffer:3,util:2}],54:[function(m,H,j){(function(g){(function(){"use strict";function w(s,y){l(s,y),u(s)}function u(s){s._writableState&&!s._writableState.emitClose||s._readableState&&!s._readableState.emitClose||s.emit("close")}function l(s,y){s.emit("error",y)}H.exports={destroy:function d(s,y){var R=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(y?y(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,g.nextTick(l,this,s)):g.nextTick(l,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(h){!y&&h?R._writableState?R._writableState.errorEmitted?g.nextTick(u,R):(R._writableState.errorEmitted=!0,g.nextTick(w,R,h)):g.nextTick(w,R,h):y?(g.nextTick(u,R),y(h)):g.nextTick(u,R)}),this)},undestroy:function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function a(s,y){var R=s._readableState,f=s._writableState;R&&R.autoDestroy||f&&f.autoDestroy?s.destroy(y):s.emit("error",y)}}}).call(this)}).call(this,m("_process"))},{_process:69}],55:[function(m,H,j){"use strict";var g=m("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function w(){}H.exports=function i(l,a,s){if("function"==typeof a)return i(l,null,a);a||(a={}),s=function d(l){var a=!1;return function(){if(!a){a=!0;for(var s=arguments.length,y=new Array(s),R=0;R<s;R++)y[R]=arguments[R];l.apply(this,y)}}}(s||w);var y=a.readable||!1!==a.readable&&l.readable,R=a.writable||!1!==a.writable&&l.writable,f=function(){l.writable||h()},_=l._writableState&&l._writableState.finished,h=function(){R=!1,_=!0,y||s.call(l)},E=l._readableState&&l._readableState.endEmitted,v=function(){y=!1,E=!0,R||s.call(l)},C=function(q){s.call(l,q)},N=function(){var q;return y&&!E?((!l._readableState||!l._readableState.ended)&&(q=new g),s.call(l,q)):R&&!_?((!l._writableState||!l._writableState.ended)&&(q=new g),s.call(l,q)):void 0},A=function(){l.req.on("finish",h)};return function u(l){return l.setHeader&&"function"==typeof l.abort}(l)?(l.on("complete",h),l.on("abort",N),l.req?A():l.on("request",A)):R&&!l._writableState&&(l.on("end",f),l.on("close",f)),l.on("end",v),l.on("finish",h),!1!==a.error&&l.on("error",C),l.on("close",N),function(){l.removeListener("complete",h),l.removeListener("abort",N),l.removeListener("request",A),l.req&&l.req.removeListener("finish",h),l.removeListener("end",f),l.removeListener("close",f),l.removeListener("finish",h),l.removeListener("end",v),l.removeListener("error",C),l.removeListener("close",N)}}},{"../../../errors":46}],56:[function(m,H,j){H.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],57:[function(m,H,j){"use strict";var g;var w=m("../../../errors").codes,u=w.ERR_MISSING_ARGS,i=w.ERR_STREAM_DESTROYED;function l(h){if(h)throw h}function y(h){h()}function R(h,E){return h.pipe(E)}H.exports=function _(){for(var h=arguments.length,E=new Array(h),v=0;v<h;v++)E[v]=arguments[v];var C=function f(h){return h.length&&"function"==typeof h[h.length-1]?h.pop():l}(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new u("streams");var N,A=E.map(function(W,q){var V=q<E.length-1;return function s(h,E,v,C){C=function d(h){var E=!1;return function(){E||(E=!0,h.apply(void 0,arguments))}}(C);var N=!1;h.on("close",function(){N=!0}),void 0===g&&(g=m("./end-of-stream")),g(h,{readable:E,writable:v},function(W){if(W)return C(W);N=!0,C()});var A=!1;return function(W){if(!N&&!A){if(A=!0,function a(h){return h.setHeader&&"function"==typeof h.abort}(h))return h.abort();if("function"==typeof h.destroy)return h.destroy();C(W||new i("pipe"))}}}(W,V,q>0,function(I){N||(N=I),I&&A.forEach(y),!V&&(A.forEach(y),C(N))})});return E.reduce(R)}},{"../../../errors":46,"./end-of-stream":55}],58:[function(m,H,j){"use strict";var g=m("../../../errors").codes.ERR_INVALID_OPT_VALUE;H.exports={getHighWaterMark:function w(u,i,l,a){var s=function d(u,i,l){return null!=u.highWaterMark?u.highWaterMark:i?u[l]:null}(i,a,l);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new g(a?l:"highWaterMark",s);return Math.floor(s)}return u.objectMode?16:16384}}},{"../../../errors":46}],59:[function(m,H,j){arguments[4][29][0].apply(j,arguments)},{dup:29,events:4}],60:[function(m,H,j){(j=H.exports=m("./lib/_stream_readable.js")).Stream=j,j.Readable=j,j.Writable=m("./lib/_stream_writable.js"),j.Duplex=m("./lib/_stream_duplex.js"),j.Transform=m("./lib/_stream_transform.js"),j.PassThrough=m("./lib/_stream_passthrough.js"),j.finished=m("./lib/internal/streams/end-of-stream.js"),j.pipeline=m("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":47,"./lib/_stream_passthrough.js":48,"./lib/_stream_readable.js":49,"./lib/_stream_transform.js":50,"./lib/_stream_writable.js":51,"./lib/internal/streams/end-of-stream.js":55,"./lib/internal/streams/pipeline.js":57}],61:[function(m,H,j){"use strict";function g(w,u,i){var l=this;this._callback=w,this._args=i,this._interval=setInterval(w,u,this._args),this.reschedule=function(a){a||(a=l._interval),l._interval&&clearInterval(l._interval),l._interval=setInterval(l._callback,a,l._args)},this.clear=function(){l._interval&&(clearInterval(l._interval),l._interval=void 0)},this.destroy=function(){l._interval&&clearInterval(l._interval),l._callback=void 0,l._interval=void 0,l._args=void 0}}H.exports=function d(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var w;if(arguments.length>0){w=new Array(arguments.length-2);for(var u=0;u<w.length;u++)w[u]=arguments[u+2]}return new g(arguments[0],arguments[1],w)}},{}],62:[function(m,H,j){var g=m("buffer"),d=g.Buffer;function w(i,l){for(var a in i)l[a]=i[a]}function u(i,l,a){return d(i,l,a)}d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?H.exports=g:(w(g,j),j.Buffer=u),u.prototype=Object.create(d.prototype),w(d,u),u.from=function(i,l,a){if("number"==typeof i)throw new TypeError("Argument must not be a number");return d(i,l,a)},u.alloc=function(i,l,a){if("number"!=typeof i)throw new TypeError("Argument must be a number");var s=d(i);return void 0!==l?"string"==typeof a?s.fill(l,a):s.fill(l):s.fill(0),s},u.allocUnsafe=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return d(i)},u.allocUnsafeSlow=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return g.SlowBuffer(i)}},{buffer:3}],63:[function(m,H,j){H.exports=function g(w){var u=w._readableState;return u?u.objectMode||"number"==typeof w._duplexState?w.read():w.read(function d(w){return w.buffer.length?w.buffer.head?w.buffer.head.data.length:w.buffer[0].length:w.length}(u)):null}},{}],64:[function(m,H,j){arguments[4][32][0].apply(j,arguments)},{dup:32,"safe-buffer":62}],65:[function(m,H,j){(function(g){(function(){function w(u){try{if(!g.localStorage)return!1}catch{return!1}var i=g.localStorage[u];return null!=i&&"true"===String(i).toLowerCase()}H.exports=function d(u,i){if(w("noDeprecation"))return u;var l=!1;return function a(){if(!l){if(w("throwDeprecation"))throw new Error(i);w("traceDeprecation")?console.trace(i):console.warn(i),l=!0}return u.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],66:[function(m,H,j){H.exports=function g(d,w){if(d&&w)return g(d)(w);if("function"!=typeof d)throw new TypeError("need wrapper function");return Object.keys(d).forEach(function(i){u[i]=d[i]}),u;function u(){for(var i=new Array(arguments.length),l=0;l<i.length;l++)i[l]=arguments[l];var a=d.apply(this,i),s=i[i.length-1];return"function"==typeof a&&a!==s&&Object.keys(s).forEach(function(y){a[y]=s[y]}),a}}},{}],67:[function(m,H,j){"use strict";H.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],68:[function(m,H,j){H.exports=function d(){for(var w={},u=0;u<arguments.length;u++){var i=arguments[u];for(var l in i)g.call(i,l)&&(w[l]=i[l])}return w};var g=Object.prototype.hasOwnProperty},{}],69:[function(m,H,j){var d,w,g=H.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function l(C){if(d===setTimeout)return setTimeout(C,0);if((d===u||!d)&&setTimeout)return d=setTimeout,setTimeout(C,0);try{return d(C,0)}catch{try{return d.call(null,C,0)}catch{return d.call(this,C,0)}}}!function(){try{d="function"==typeof setTimeout?setTimeout:u}catch{d=u}try{w="function"==typeof clearTimeout?clearTimeout:i}catch{w=i}}();var R,s=[],y=!1,f=-1;function _(){!y||!R||(y=!1,R.length?s=R.concat(s):f=-1,s.length&&h())}function h(){if(!y){var C=l(_);y=!0;for(var N=s.length;N;){for(R=s,s=[];++f<N;)R&&R[f].run();f=-1,N=s.length}R=null,y=!1,function a(C){if(w===clearTimeout)return clearTimeout(C);if((w===i||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(C);try{return w(C)}catch{try{return w.call(null,C)}catch{return w.call(this,C)}}}(C)}}function E(C,N){this.fun=C,this.array=N}function v(){}g.nextTick=function(C){var N=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)N[A-1]=arguments[A];s.push(new E(C,N)),1===s.length&&!y&&l(h)},E.prototype.run=function(){this.fun.apply(null,this.array)},g.title="browser",g.browser=!0,g.env={},g.argv=[],g.version="",g.versions={},g.on=v,g.addListener=v,g.once=v,g.off=v,g.removeListener=v,g.removeAllListeners=v,g.emit=v,g.prependListener=v,g.prependOnceListener=v,g.listeners=function(C){return[]},g.binding=function(C){throw new Error("process.binding is not supported")},g.cwd=function(){return"/"},g.chdir=function(C){throw new Error("process.chdir is not supported")},g.umask=function(){return 0}},{}],70:[function(m,H,j){(function(g){(function(){!function(d){var w="object"==typeof j&&j&&!j.nodeType&&j,u="object"==typeof H&&H&&!H.nodeType&&H,i="object"==typeof g&&g;(i.global===i||i.window===i||i.self===i)&&(d=i);var l,I,a=2147483647,s=36,y=1,R=26,f=38,_=700,h=72,E=128,v="-",C=/^xn--/,N=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,W={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=s-y,V=Math.floor,O=String.fromCharCode;function x(ee){throw new RangeError(W[ee])}function c(ee,Q){for(var P=ee.length,B=[];P--;)B[P]=Q(ee[P]);return B}function D(ee,Q){var P=ee.split("@"),B="";return P.length>1&&(B=P[0]+"@",ee=P[1]),B+c((ee=ee.replace(A,".")).split("."),Q).join(".")}function K(ee){for(var X,Z,Q=[],P=0,B=ee.length;P<B;)(X=ee.charCodeAt(P++))>=55296&&X<=56319&&P<B?56320==(64512&(Z=ee.charCodeAt(P++)))?Q.push(((1023&X)<<10)+(1023&Z)+65536):(Q.push(X),P--):Q.push(X);return Q}function $(ee){return c(ee,function(Q){var P="";return Q>65535&&(P+=O((Q-=65536)>>>10&1023|55296),Q=56320|1023&Q),P+O(Q)}).join("")}function Y(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:s}function G(ee,Q){return ee+22+75*(ee<26)-((0!=Q)<<5)}function re(ee,Q,P){var B=0;for(ee=P?V(ee/_):ee>>1,ee+=V(ee/Q);ee>q*R>>1;B+=s)ee=V(ee/q);return V(B+(q+1)*ee/(ee+f))}function oe(ee){var B,k,U,te,S,n,o,T,L,p,Q=[],P=ee.length,X=0,Z=E,F=h;for((k=ee.lastIndexOf(v))<0&&(k=0),U=0;U<k;++U)ee.charCodeAt(U)>=128&&x("not-basic"),Q.push(ee.charCodeAt(U));for(te=k>0?k+1:0;te<P;){for(S=X,n=1,o=s;te>=P&&x("invalid-input"),((T=Y(ee.charCodeAt(te++)))>=s||T>V((a-X)/n))&&x("overflow"),X+=T*n,!(T<(L=o<=F?y:o>=F+R?R:o-F));o+=s)n>V(a/(p=s-L))&&x("overflow"),n*=p;F=re(X-S,B=Q.length+1,0==S),V(X/B)>a-Z&&x("overflow"),Z+=V(X/B),X%=B,Q.splice(X++,0,Z)}return $(Q)}function se(ee){var Q,P,B,X,Z,F,k,U,te,S,n,T,L,p,t,o=[];for(T=(ee=K(ee)).length,Q=E,P=0,Z=h,F=0;F<T;++F)(n=ee[F])<128&&o.push(O(n));for(B=X=o.length,X&&o.push(v);B<T;){for(k=a,F=0;F<T;++F)(n=ee[F])>=Q&&n<k&&(k=n);for(k-Q>V((a-P)/(L=B+1))&&x("overflow"),P+=(k-Q)*L,Q=k,F=0;F<T;++F)if((n=ee[F])<Q&&++P>a&&x("overflow"),n==Q){for(U=P,te=s;!(U<(S=te<=Z?y:te>=Z+R?R:te-Z));te+=s)o.push(O(G(S+(t=U-S)%(p=s-S),0))),U=V(t/p);o.push(O(G(U,0))),Z=re(P,L,B==X),P=0,++B}++P,++Q}return o.join("")}if(l={version:"1.4.1",ucs2:{decode:K,encode:$},decode:oe,encode:se,toASCII:function ie(ee){return D(ee,function(Q){return N.test(Q)?"xn--"+se(Q):Q})},toUnicode:function ne(ee){return D(ee,function(Q){return C.test(Q)?oe(Q.slice(4).toLowerCase()):Q})}},w&&u)if(H.exports==w)u.exports=l;else for(I in l)l.hasOwnProperty(I)&&(w[I]=l[I]);else d.punycode=l}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],71:[function(m,H,j){"use strict";function g(w,u){return Object.prototype.hasOwnProperty.call(w,u)}H.exports=function(w,u,i,l){i=i||"=";var a={};if("string"!=typeof w||0===w.length)return a;var s=/\+/g;w=w.split(u=u||"&");var y=1e3;l&&"number"==typeof l.maxKeys&&(y=l.maxKeys);var R=w.length;y>0&&R>y&&(R=y);for(var f=0;f<R;++f){var E,v,C,N,_=w[f].replace(s,"%20"),h=_.indexOf(i);h>=0?(E=_.substr(0,h),v=_.substr(h+1)):(E=_,v=""),C=decodeURIComponent(E),N=decodeURIComponent(v),g(a,C)?d(a[C])?a[C].push(N):a[C]=[a[C],N]:a[C]=N}return a};var d=Array.isArray||function(w){return"[object Array]"===Object.prototype.toString.call(w)}},{}],72:[function(m,H,j){"use strict";var g=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};H.exports=function(i,l,a,s){return l=l||"&",a=a||"=",null===i&&(i=void 0),"object"==typeof i?w(u(i),function(y){var R=encodeURIComponent(g(y))+a;return d(i[y])?w(i[y],function(f){return R+encodeURIComponent(g(f))}).join(l):R+encodeURIComponent(g(i[y]))}).join(l):s?encodeURIComponent(g(s))+a+encodeURIComponent(g(i)):""};var d=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)};function w(i,l){if(i.map)return i.map(l);for(var a=[],s=0;s<i.length;s++)a.push(l(i[s],s));return a}var u=Object.keys||function(i){var l=[];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&l.push(a);return l}},{}],73:[function(m,H,j){"use strict";j.decode=j.parse=m("./decode"),j.encode=j.stringify=m("./encode")},{"./decode":71,"./encode":72}],74:[function(m,H,j){(function(g,d){(function(){var w=m("process/browser.js").nextTick,u=Function.prototype.apply,i=Array.prototype.slice,l={},a=0;function s(y,R){this._id=y,this._clearFn=R}j.setTimeout=function(){return new s(u.call(setTimeout,window,arguments),clearTimeout)},j.setInterval=function(){return new s(u.call(setInterval,window,arguments),clearInterval)},j.clearTimeout=j.clearInterval=function(y){y.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},j.enroll=function(y,R){clearTimeout(y._idleTimeoutId),y._idleTimeout=R},j.unenroll=function(y){clearTimeout(y._idleTimeoutId),y._idleTimeout=-1},j._unrefActive=j.active=function(y){clearTimeout(y._idleTimeoutId);var R=y._idleTimeout;R>=0&&(y._idleTimeoutId=setTimeout(function(){y._onTimeout&&y._onTimeout()},R))},j.setImmediate="function"==typeof g?g:function(y){var R=a++,f=!(arguments.length<2)&&i.call(arguments,1);return l[R]=!0,w(function(){l[R]&&(f?y.apply(null,f):y.call(null),j.clearImmediate(R))}),R},j.clearImmediate="function"==typeof d?d:function(y){delete l[y]}}).call(this)}).call(this,m("timers").setImmediate,m("timers").clearImmediate)},{"process/browser.js":69,timers:74}],75:[function(m,H,j){"use strict";var g=m("punycode"),d=m("./util");function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}j.parse=W,j.resolve=function V(I,x){return W(I,!1,!0).resolve(x)},j.resolveObject=function O(I,x){return I?W(I,!1,!0).resolveObject(x):x},j.format=function q(I){return d.isString(I)&&(I=W(I)),I instanceof w?I.format():w.prototype.format.call(I)},j.Url=w;var u=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),y=["'"].concat(s),R=["%","/","?",";","#"].concat(y),f=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=m("querystring");function W(I,x,c){if(I&&d.isObject(I)&&I instanceof w)return I;var D=new w;return D.parse(I,x,c),D}w.prototype.parse=function(I,x,c){if(!d.isString(I))throw new TypeError("Parameter 'url' must be a string, not "+typeof I);var D=I.indexOf("?"),K=-1!==D&&D<I.indexOf("#")?"?":"#",$=I.split(K);$[0]=$[0].replace(/\\/g,"/");var G=I=$.join(K);if(G=G.trim(),!c&&1===I.split("#").length){var re=l.exec(G);if(re)return this.path=G,this.href=G,this.pathname=re[1],re[2]?(this.search=re[2],this.query=x?A.parse(this.search.substr(1)):this.search.substr(1)):x&&(this.search="",this.query={}),this}var oe=u.exec(G);if(oe){var se=(oe=oe[0]).toLowerCase();this.protocol=se,G=G.substr(oe.length)}if(c||oe||G.match(/^\/\/[^@\/]+@[^@\/]+/)){var ne="//"===G.substr(0,2);ne&&(!oe||!C[oe])&&(G=G.substr(2),this.slashes=!0)}if(!C[oe]&&(ne||oe&&!N[oe])){for(var ie=-1,ee=0;ee<f.length;ee++)-1!==(Q=G.indexOf(f[ee]))&&(-1===ie||Q<ie)&&(ie=Q);var P,B;for(-1!==(B=-1===ie?G.lastIndexOf("@"):G.lastIndexOf("@",ie))&&(P=G.slice(0,B),G=G.slice(B+1),this.auth=decodeURIComponent(P)),ie=-1,ee=0;ee<R.length;ee++){var Q;-1!==(Q=G.indexOf(R[ee]))&&(-1===ie||Q<ie)&&(ie=Q)}-1===ie&&(ie=G.length),this.host=G.slice(0,ie),G=G.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var X="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!X)for(var Z=this.hostname.split(/\./),F=(ee=0,Z.length);ee<F;ee++){var k=Z[ee];if(k&&!k.match(h)){for(var U="",te=0,S=k.length;te<S;te++)k.charCodeAt(te)>127?U+="x":U+=k[te];if(!U.match(h)){var n=Z.slice(0,ee),o=Z.slice(ee+1),T=k.match(E);T&&(n.push(T[1]),o.unshift(T[2])),o.length&&(G="/"+o.join(".")+G),this.hostname=n.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),X||(this.hostname=g.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,X&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==G[0]&&(G="/"+G))}if(!v[se])for(ee=0,F=y.length;ee<F;ee++){var t=y[ee];if(-1!==G.indexOf(t)){var e=encodeURIComponent(t);e===t&&(e=escape(t)),G=G.split(t).join(e)}}var r=G.indexOf("#");-1!==r&&(this.hash=G.substr(r),G=G.slice(0,r));var b=G.indexOf("?");return-1!==b?(this.search=G.substr(b),this.query=G.substr(b+1),x&&(this.query=A.parse(this.query)),G=G.slice(0,b)):x&&(this.search="",this.query={}),G&&(this.pathname=G),N[se]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},w.prototype.format=function(){var I=this.auth||"";I&&(I=(I=encodeURIComponent(I)).replace(/%3A/i,":"),I+="@");var x=this.protocol||"",c=this.pathname||"",D=this.hash||"",K=!1,$="";this.host?K=I+this.host:this.hostname&&(K=I+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(K+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&($=A.stringify(this.query));var Y=this.search||$&&"?"+$||"";return x&&":"!==x.substr(-1)&&(x+=":"),this.slashes||(!x||N[x])&&!1!==K?(K="//"+(K||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):K||(K=""),D&&"#"!==D.charAt(0)&&(D="#"+D),Y&&"?"!==Y.charAt(0)&&(Y="?"+Y),x+K+(c=c.replace(/[?#]/g,function(G){return encodeURIComponent(G)}))+(Y=Y.replace("#","%23"))+D},w.prototype.resolve=function(I){return this.resolveObject(W(I,!1,!0)).format()},w.prototype.resolveObject=function(I){if(d.isString(I)){var x=new w;x.parse(I,!1,!0),I=x}for(var c=new w,D=Object.keys(this),K=0;K<D.length;K++){var $=D[K];c[$]=this[$]}if(c.hash=I.hash,""===I.href)return c.href=c.format(),c;if(I.slashes&&!I.protocol){for(var Y=Object.keys(I),G=0;G<Y.length;G++){var re=Y[G];"protocol"!==re&&(c[re]=I[re])}return N[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(I.protocol&&I.protocol!==c.protocol){if(!N[I.protocol]){for(var oe=Object.keys(I),se=0;se<oe.length;se++){var ne=oe[se];c[ne]=I[ne]}return c.href=c.format(),c}if(c.protocol=I.protocol,I.host||C[I.protocol])c.pathname=I.pathname;else{for(var F=(I.pathname||"").split("/");F.length&&!(I.host=F.shift()););I.host||(I.host=""),I.hostname||(I.hostname=""),""!==F[0]&&F.unshift(""),F.length<2&&F.unshift(""),c.pathname=F.join("/")}return c.search=I.search,c.query=I.query,c.host=I.host||"",c.auth=I.auth,c.hostname=I.hostname||I.host,c.port=I.port,(c.pathname||c.search)&&(c.path=(c.pathname||"")+(c.search||"")),c.slashes=c.slashes||I.slashes,c.href=c.format(),c}var Q=c.pathname&&"/"===c.pathname.charAt(0),P=I.host||I.pathname&&"/"===I.pathname.charAt(0),B=P||Q||c.host&&I.pathname,X=B,Z=c.pathname&&c.pathname.split("/")||[],k=(F=I.pathname&&I.pathname.split("/")||[],c.protocol&&!N[c.protocol]);if(k&&(c.hostname="",c.port=null,c.host&&(""===Z[0]?Z[0]=c.host:Z.unshift(c.host)),c.host="",I.protocol&&(I.hostname=null,I.port=null,I.host&&(""===F[0]?F[0]=I.host:F.unshift(I.host)),I.host=null),B=B&&(""===F[0]||""===Z[0])),P)c.host=I.host||""===I.host?I.host:c.host,c.hostname=I.hostname||""===I.hostname?I.hostname:c.hostname,c.search=I.search,c.query=I.query,Z=F;else if(F.length)Z||(Z=[]),Z.pop(),Z=Z.concat(F),c.search=I.search,c.query=I.query;else if(!d.isNullOrUndefined(I.search))return k&&(c.hostname=c.host=Z.shift(),(U=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=U.shift(),c.host=c.hostname=U.shift())),c.search=I.search,c.query=I.query,(!d.isNull(c.pathname)||!d.isNull(c.search))&&(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!Z.length)return c.pathname=null,c.path=c.search?"/"+c.search:null,c.href=c.format(),c;for(var te=Z.slice(-1)[0],S=(c.host||I.host||Z.length>1)&&("."===te||".."===te)||""===te,n=0,o=Z.length;o>=0;o--)"."===(te=Z[o])?Z.splice(o,1):".."===te?(Z.splice(o,1),n++):n&&(Z.splice(o,1),n--);if(!B&&!X)for(;n--;n)Z.unshift("..");B&&""!==Z[0]&&(!Z[0]||"/"!==Z[0].charAt(0))&&Z.unshift(""),S&&"/"!==Z.join("/").substr(-1)&&Z.push("");var U,T=""===Z[0]||Z[0]&&"/"===Z[0].charAt(0);return k&&(c.hostname=c.host=T?"":Z.length?Z.shift():"",(U=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=U.shift(),c.host=c.hostname=U.shift())),(B=B||c.host&&Z.length)&&!T&&Z.unshift(""),Z.length?c.pathname=Z.join("/"):(c.pathname=null,c.path=null),(!d.isNull(c.pathname)||!d.isNull(c.search))&&(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=I.auth||c.auth,c.slashes=c.slashes||I.slashes,c.href=c.format(),c},w.prototype.parseHost=function(){var I=this.host,x=i.exec(I);x&&(":"!==(x=x[0])&&(this.port=x.substr(1)),I=I.substr(0,I.length-x.length)),I&&(this.hostname=I)}},{"./util":76,punycode:70,querystring:73}],76:[function(m,H,j){"use strict";H.exports={isString:function(g){return"string"==typeof g},isObject:function(g){return"object"==typeof g&&null!==g},isNull:function(g){return null===g},isNullOrUndefined:function(g){return null==g}}},{}]},{},[15])(15)},7553:Ee=>{Ee.exports=function fe(){for(var ge={},be=0;be<arguments.length;be++){var me=arguments[be];for(var m in me)ve.call(me,m)&&(ge[m]=me[m])}return ge};var ve=Object.prototype.hasOwnProperty}}]);