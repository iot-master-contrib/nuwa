(self.webpackChunkiot_master_nuwa=self.webpackChunkiot_master_nuwa||[]).push([[365],{5365:(jt,Gt,b)=>{"use strict";b.r(Gt),b.d(Gt,{EditorModule:()=>Jo});var S=b(177),ct=b(6530),t=b(4438),rt=b(345),mt=b(5013),bt=b(7094),pt=b(4104),B=b(1635),tt=b(3726),U=b(6977),Bt=b(5964),Wt=b(713),et=b(6035),q=b(7806),ht=b(1025),R=b(317),Y=b(5103),zt=b(8203),ce=b(6841);const Ot=["*"],Kt=["collapseHeader"];function Z(s,o){if(1&s&&(t.qex(0),t.nrm(1,"span",7),t.bVm()),2&s){const e=o.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("nzType",e||"right")("nzRotate",n.nzActive?90:0)}}function g(s,o){if(1&s&&(t.j41(0,"div"),t.DNE(1,Z,2,2,"ng-container",3),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzExpandedIcon)}}function C(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.JRh(e.nzHeader)}}function I(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.JRh(e.nzExtra)}}function O(s,o){if(1&s&&(t.j41(0,"div",4),t.DNE(1,I,2,1,"ng-container",3),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzExtra)}}const at="collapse";let ot=(()=>{class s{constructor(e,n,i,r){this.nzConfigService=e,this.cdr=n,this.directionality=i,this.destroy$=r,this._nzModuleName=at,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(at).pipe((0,U.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,U.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(e){this.listOfNzCollapsePanelComponent.push(e)}removePanel(e){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(e),1)}click(e){this.nzAccordion&&!e.nzActive&&this.listOfNzCollapsePanelComponent.filter(n=>n!==e).forEach(n=>{n.nzActive&&(n.nzActive=!1,n.nzActiveChange.emit(n.nzActive),n.markForCheck())}),e.nzActive=!e.nzActive,e.nzActiveChange.emit(e.nzActive)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(et.yx),t.rXU(t.gRc),t.rXU(zt.dS,8),t.rXU(ht.y4))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(n,i){2&n&&t.AVh("ant-collapse-icon-position-start","left"===i.nzExpandIconPosition)("ant-collapse-icon-position-end","right"===i.nzExpandIconPosition)("ant-collapse-ghost",i.nzGhost)("ant-collapse-borderless",!i.nzBordered)("ant-collapse-rtl","rtl"===i.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[t.Jv_([ht.y4]),t.aNF],ngContentSelectors:Ot,decls:1,vars:0,template:function(n,i){1&n&&(t.NAR(),t.SdG(0))},encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,et.H4)(),(0,R.H3)()],s.prototype,"nzAccordion",void 0),(0,B.Cg)([(0,et.H4)(),(0,R.H3)()],s.prototype,"nzBordered",void 0),(0,B.Cg)([(0,et.H4)(),(0,R.H3)()],s.prototype,"nzGhost",void 0),s})();const It="collapsePanel";let Ct=(()=>{class s{markForCheck(){this.cdr.markForCheck()}constructor(e,n,i,r,a,l){this.nzConfigService=e,this.ngZone=n,this.cdr=i,this.destroy$=r,this.nzCollapseComponent=a,this.noAnimation=l,this._nzModuleName=It,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new t.bkB,this.nzConfigService.getConfigChangeEventForComponent(It).pipe((0,U.Q)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,tt.R)(this.collapseHeader.nativeElement,"click").pipe((0,Bt.p)(()=>!this.nzDisabled),(0,U.Q)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(et.yx),t.rXU(t.SKi),t.rXU(t.gRc),t.rXU(ht.y4),t.rXU(ot,1),t.rXU(ce.z,8))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-collapse-panel"]],viewQuery:function(n,i){if(1&n&&t.GBs(Kt,7),2&n){let r;t.mGM(r=t.lsd())&&(i.collapseHeader=r.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(n,i){2&n&&t.AVh("ant-collapse-no-arrow",!i.nzShowArrow)("ant-collapse-item-active",i.nzActive)("ant-collapse-item-disabled",i.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[t.Jv_([ht.y4]),t.aNF],ngContentSelectors:Ot,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(n,i){1&n&&(t.NAR(),t.j41(0,"div",1,0),t.DNE(2,g,2,1,"div"),t.j41(3,"span",2),t.DNE(4,C,2,1,"ng-container",3),t.k0s(),t.DNE(5,O,2,1,"div",4),t.k0s(),t.j41(6,"div",5)(7,"div",6),t.SdG(8),t.k0s()()),2&n&&(t.BMQ("aria-expanded",i.nzActive),t.R7$(2),t.vxM(2,i.nzShowArrow?2:-1),t.R7$(2),t.Y8G("nzStringTemplateOutlet",i.nzHeader),t.R7$(),t.vxM(5,i.nzExtra?5:-1),t.R7$(),t.AVh("ant-collapse-content-active",i.nzActive),t.Y8G("@.disabled",!(null==i.noAnimation||!i.noAnimation.nzNoAnimation))("@collapseMotion",i.nzActive?"expanded":"hidden"))},dependencies:[q.C,q.m,Y.Y3,Y.Dn],encapsulation:2,data:{animation:[Wt.GE]},changeDetection:0})}return(0,B.Cg)([(0,R.H3)()],s.prototype,"nzActive",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzDisabled",void 0),(0,B.Cg)([(0,et.H4)(),(0,R.H3)()],s.prototype,"nzShowArrow",void 0),s})(),Nt=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[Ct]})}return s})();var Vt=b(5633);function Xt(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",3),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.onClick(i))})("dragstart",function(i){const r=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onDragStart(i,r))}),t.j41(1,"div",4),t.nrm(2,"img",5),t.k0s(),t.j41(3,"div",6),t.EFF(4),t.k0s()()}if(2&s){const e=o.$implicit;t.R7$(2),t.Y8G("src",e.icon,t.B4B),t.R7$(2),t.JRh(e.name)}}function he(s,o){if(1&s&&(t.j41(0,"nz-collapse-panel",1),t.DNE(1,Xt,5,2,"div",2),t.k0s()),2&s){const e=o.$implicit,n=o.first;t.Y8G("nzHeader",e.name)("nzActive",n),t.R7$(),t.Y8G("ngForOf",e.components)}}let Jt=(()=>{class s{constructor(){this.widgets=Vt.p}onDragStart(e,n){this.canvas?.drawNode(e,n)}onClick(e){this.canvas?.drawEdge(e)}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-widgets"]],inputs:{canvas:"canvas"},standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[3,"nzHeader","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzActive"],["class","component","draggable","true",3,"click","dragstart",4,"ngFor","ngForOf"],["draggable","true",1,"component",3,"click","dragstart"],[1,"icon"],["alt","c.name","loading","lazy",3,"src"],[1,"name"]],template:function(n,i){1&n&&(t.j41(0,"nz-collapse"),t.DNE(1,he,2,3,"nz-collapse-panel",0),t.k0s()),2&n&&(t.R7$(),t.Y8G("ngForOf",i.widgets))},dependencies:[S.MD,S.Sq,Nt,Ct,ot],styles:["[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}.component[_ngcontent-%COMP%]{display:inline-block;margin:1px;padding:5px 0;cursor:pointer;width:50px}.component[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;justify-content:center;align-items:center}.component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:40px;max-height:40px}.component[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-align:center;font-size:12px}"]})}return s})();function qt(s,o){if(1&s&&(t.j41(0,"div",3)(1,"div",4),t.nrm(2,"img",5),t.k0s(),t.j41(3,"div",6),t.EFF(4),t.k0s()()),2&s){const e=o.$implicit;t.R7$(2),t.Y8G("src","/nuwa/component/"+e.id+"/"+e.icon,t.B4B),t.R7$(2),t.JRh(e.name)}}function w(s,o){if(1&s&&(t.j41(0,"nz-collapse-panel",1),t.DNE(1,qt,5,2,"div",2),t.k0s()),2&s){const e=o.$implicit,n=o.first;t.Y8G("nzHeader",e.name)("nzActive",n),t.R7$(),t.Y8G("ngForOf",e.components)}}let N=(()=>{class s{constructor(e){this.rs=e,this.collections=[],this.load()}load(){this.rs.get("nuwa/components").subscribe(e=>{let n={};e.data.forEach(i=>{let r=i.collection||"\u672a\u5206\u7ec4";n.hasOwnProperty(r)||(n[r]={name:r,components:[]}),n[r].components.push(i)}),Object.keys(n).forEach(i=>{this.collections.push(n[i])})})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(mt.By))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-components"]],inputs:{canvas:"canvas"},standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[3,"nzHeader","nzActive",4,"ngFor","ngForOf"],[3,"nzHeader","nzActive"],["class","component",4,"ngFor","ngForOf"],[1,"component"],[1,"icon"],["alt","c.name","loading","lazy",3,"src"],[1,"name"]],template:function(n,i){1&n&&(t.j41(0,"nz-collapse"),t.DNE(1,w,2,3,"nz-collapse-panel",0),t.k0s()),2&n&&(t.R7$(),t.Y8G("ngForOf",i.collections))},dependencies:[S.MD,S.Sq,Nt,Ct,ot],styles:["[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}.component[_ngcontent-%COMP%]{display:inline-block;margin:1px;padding:5px 0;cursor:pointer;width:60px}.component[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;align-items:center}.component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px}.component[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-align:center;font-size:12px}"]})}return s})();function D(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",1),t.bIt("dragstart",function(i){const r=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.onDragStart(i,r))}),t.j41(1,"div",2),t.nrm(2,"img",3),t.k0s()()}if(2&s){const e=o.$implicit;t.R7$(),t.Y8G("title",e),t.R7$(),t.Y8G("src","/nuwa/gallery/"+e,t.B4B)("alt",e)}}let E=(()=>{class s{constructor(e){this.rs=e,this.images=[],this.load()}load(){this.rs.get("nuwa/galleries").subscribe(e=>{this.images=e.data})}onDragStart(e,n){this.canvas?.drawNode(e,{name:"",id:"image",icon:"",type:"shape",internal:!0,extends:{inherit:"image"},metadata:{width:200,height:200,imageUrl:"/nuwa/gallery/"+n}})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(mt.By))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-galleries"]],inputs:{canvas:"canvas"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["class","component","draggable","true",3,"dragstart",4,"ngFor","ngForOf"],["draggable","true",1,"component",3,"dragstart"],[1,"icon",3,"title"],["loading","lazy",3,"src","alt"]],template:function(n,i){1&n&&t.DNE(0,D,3,3,"div",0),2&n&&t.Y8G("ngForOf",i.images)},dependencies:[S.MD,S.Sq,Nt],styles:["[_nghost-%COMP%]{-webkit-user-select:none;user-select:none}.component[_ngcontent-%COMP%]{display:inline-block;margin:1px;padding:5px 0;cursor:pointer;width:60px}.component[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;align-items:center}.component[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50px;max-height:50px}"]})}return s})(),j=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-sources"]],standalone:!0,features:[t.aNF],decls:2,vars:0,template:function(n,i){1&n&&(t.j41(0,"p"),t.EFF(1,"sources works!"),t.k0s())}})}return s})(),lt=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-events"]],standalone:!0,features:[t.aNF],decls:8,vars:0,template:function(n,i){1&n&&(t.j41(0,"p"),t.EFF(1,"\u70b9\u51fb\u3001\u81ea\u5b9a\u4e49"),t.k0s(),t.j41(2,"p"),t.EFF(3," \u6253\u5f00\uff08\u9875\u9762\u3001\u94fe\u63a5\uff09\uff08\u53c2\u6570\u7ed1\u5b9a\uff09\uff0c\u663e\u793a\u9690\u85cf\u5143\u7d20\uff0c\u64cd\u4f5c\u53d8\u91cf\uff0c\u6267\u884c\u811a\u672c\n"),t.k0s(),t.j41(4,"p"),t.EFF(5," \u9875\u9762\u76ee\u6807\uff1a\u5f53\u524d\u9875\u9762\uff0c\u5b50\u9875\u9762\uff08\u9700\u8981\u5bb9\u5668\uff09\uff0c\u7236\u9875\u9762\n"),t.k0s(),t.j41(6,"p"),t.EFF(7," \u94fe\u63a5\u76ee\u6807\uff1a\u5f53\u524d\u7a97\u53e3\uff0c\u5b50\u7a97\u53e3\uff08iframe\uff09\uff0c\u7236\u7a97\u53e3\n"),t.k0s())}})}return s})(),P=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-scripts"]],standalone:!0,features:[t.aNF],decls:2,vars:0,template:function(n,i){1&n&&(t.j41(0,"p"),t.EFF(1,"scripts works!"),t.k0s())}})}return s})();const $=["*"],vt=s=>({active:s});function dt(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",4),t.bIt("click",function(){const i=t.eBV(e).index,r=t.XpG();return t.Njj(r.onClick(i))}),t.EFF(1),t.k0s()}if(2&s){const e=o.$implicit,n=o.index,i=t.XpG();t.Y8G("ngClass",t.eq3(2,vt,i.index==n)),t.R7$(),t.SpI(" ",e.title," ")}}function de(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",5),t.bIt("mousedown",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onSplit(i))}),t.k0s()}}let Zt=(()=>{class s{constructor(e,n){this.templateRef=e,this.viewContainerRef=n,this.title="tab"}show(){this.viewContainerRef.createEmbeddedView(this.templateRef)}hide(){this.viewContainerRef.clear()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.C4Q),t.rXU(t.c1b))};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["","sideBarItem",""]],inputs:{title:[t.Mj6.None,"sideBarItem","title"]},standalone:!0})}return s})(),mn=(()=>{class s{constructor(){this.components=new t.rOR,this.styleWidth="200px",this.styleFlexDirection="row",this._right=!1,this._width=200,this.index=0,this.splitting=!1,this.lastX=0}set right(e){this._right=e,this.styleFlexDirection=e?"row-reverse":"row"}set width(e){this._width=e,this.styleWidth=e+"px"}onClick(e){this.index>-1&&this.components.get(this.index)?.hide(),this.index==e?(this.index=-1,this.styleWidth="auto"):(this.components.get(e)?.show(),this.index=e,this.width=this._width)}ngAfterViewInit(){setTimeout(()=>{this.components.length>0&&this.components.get(0)?.show()},10)}ngAfterContentInit(){}onSplit(e){this.splitting=!0,this.lastX=e.screenX}onMouseMove(e){if(!this.splitting)return;let n=e.screenX-this.lastX,i=this._right?this._width-n:this._width+n;i>50&&(this.width=i),this.lastX=e.screenX}onMouseUp(e){this.splitting=!1}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-side-bar"]],contentQueries:function(n,i,r){if(1&n&&t.wni(r,Zt,5),2&n){let a;t.mGM(a=t.lsd())&&(i.components=a)}},hostVars:4,hostBindings:function(n,i){1&n&&t.bIt("mousemove",function(a){return i.onMouseMove(a)},!1,t.tSv)("mouseup",function(a){return i.onMouseUp(a)},!1,t.tSv),2&n&&t.xc7("width",i.styleWidth)("flex-direction",i.styleFlexDirection)},inputs:{right:"right",width:"width"},ngContentSelectors:$,decls:5,vars:2,consts:[[1,"side"],["class","item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"content"],["class","split",3,"mousedown",4,"ngIf"],[1,"item",3,"click","ngClass"],[1,"split",3,"mousedown"]],template:function(n,i){1&n&&(t.NAR(),t.j41(0,"div",0),t.DNE(1,dt,2,4,"div",1),t.k0s(),t.j41(2,"div",2),t.SdG(3),t.k0s(),t.DNE(4,de,1,0,"div",3)),2&n&&(t.R7$(),t.Y8G("ngForOf",null==i.components?null:i.components.toArray()),t.R7$(3),t.Y8G("ngIf",i.index>-1))},dependencies:[S.YU,S.Sq,S.bT],styles:["[_nghost-%COMP%]{display:flex}.side[_ngcontent-%COMP%]{padding:1px;background-color:#f0f0f0;-webkit-user-select:none;user-select:none}.side[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#d0d0d0;border:1px solid #d0d0d0;margin:2px 1px;padding:5px 2px;writing-mode:vertical-rl;cursor:pointer}.side[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover, .side[_ngcontent-%COMP%]   .item.active[_ngcontent-%COMP%]{background-color:#fff}.content[_ngcontent-%COMP%]{flex:1;overflow-x:hidden;overflow-y:auto}.split[_ngcontent-%COMP%]{width:8px;background-color:#c9c9c9;cursor:col-resize}"]})}return s})();const bn=["editor"];let ye=(()=>{class s{constructor(){this.fields=[{key:"width",label:"\u5bbd\u5ea6",type:"number"},{key:"height",label:"\u9ad8\u5ea6",type:"number"}]}ngAfterViewInit(){setTimeout(()=>{this.editor.group.valueChanges.subscribe(e=>{Object.assign(this.page,e)})},100)}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-page"]],viewQuery:function(n,i){if(1&n&&t.GBs(bn,5),2&n){let r;t.mGM(r=t.lsd())&&(i.editor=r.first)}},inputs:{page:"page"},standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[["editor",""],[3,"fields","values"]],template:function(n,i){1&n&&(t.nrm(0,"im-smart-editor",1,0),t.j41(2,"p"),t.EFF(3,"\u53c2\u6570\u5217\u8868"),t.k0s()),2&n&&t.Y8G("fields",i.fields)("values",i.page)},dependencies:[mt.Ay]})}return s})();const Cn=["editor"];let xe=(()=>{class s{constructor(e){this.cs=e,this.fields=[],this.data={},console.log("propertiesComponent",this.canvas)}ngOnInit(){this.canvas.graph.on("cell:selected",this.onCellSelected,this);let e=this.canvas.graph.getSelectedCells();e.length>0&&this.onCellSelected({cell:e[e.length-1]})}ngOnDestroy(){this.canvas.graph.off("cell:selected",this.onCellSelected)}onCellSelected(e){if(e.cell.isEdge())return this.component=void 0,void(this.cell=void 0);this.cell=e.cell,this.component=this.cs.Get(e.cell.shape),this.fields=this.component.properties||[];let i={};this.fields.forEach(r=>{let a=e.cell.getPropByPath(r.key);void 0!==a&&(i[r.key]=a)}),this.data=i,this.ngAfterViewInit()}ngAfterViewInit(){setTimeout(()=>{this.editor.group.valueChanges.subscribe(e=>{Object.keys(e).forEach(n=>{this.cell?.setPropByPath(n,e[n])})})},100)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(pt.b))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-properties"]],viewQuery:function(n,i){if(1&n&&t.GBs(Cn,5),2&n){let r;t.mGM(r=t.lsd())&&(i.editor=r.first)}},inputs:{canvas:"canvas"},standalone:!0,features:[t.aNF],decls:4,vars:3,consts:[["editor",""],[3,"fields","values"]],template:function(n,i){1&n&&(t.j41(0,"p"),t.EFF(1),t.k0s(),t.nrm(2,"im-smart-editor",1,0)),2&n&&(t.R7$(),t.SpI("\u7ec4\u4ef6\uff1a",null==i.component?null:i.component.name,""),t.R7$(),t.Y8G("fields",i.fields)("values",i.data))},dependencies:[mt.Ay]})}return s})();var A=b(4341),$t=b(2047);function vn(s,o){if(1&s){const e=t.RV6();t.j41(0,"form",1),t.bIt("change",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onChange(i))}),t.EFF(1," X "),t.nrm(2,"nz-input-number",2),t.EFF(3," Y "),t.nrm(4,"nz-input-number",3),t.EFF(5," \u5bbd\u5ea6 "),t.nrm(6,"nz-input-number",4),t.EFF(7," \u9ad8\u5ea6 "),t.nrm(8,"nz-input-number",5),t.EFF(9," \u89d2\u5ea6 "),t.nrm(10,"nz-input-number",6),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("formGroup",e.form)}}let ke=(()=>{class s{onCellChangeSize(e){e.cell==this.cell&&this.form.patchValue(e.current)}onCellChangePosition(e){e.cell==this.cell&&this.form.patchValue(e.current)}onCellChangeAngle(e){e.cell==this.cell&&this.form.patchValue(e.current)}onCellSelected(e){if(this.cell=e.cell,this.cell.isNode()){const n=this.cell.getPosition(),i=this.cell.getSize(),r=this.cell.getAngle();this.form.patchValue(n),this.form.patchValue(i),this.form.patchValue({angle:r})}else this.cell=void 0}ngOnInit(){this.canvas.graph.on("cell:change:size",this.onCellChangeSize,this),this.canvas.graph.on("cell:change:position",this.onCellChangePosition,this),this.canvas.graph.on("cell:change:angle",this.onCellChangeAngle,this),this.canvas.graph.on("cell:selected",this.onCellSelected,this);let e=this.canvas.graph.getSelectedCells();e.length>0&&this.onCellSelected({cell:e[e.length-1]})}ngOnDestroy(){this.canvas.graph.off("cell:change:size",this.onCellChangeSize),this.canvas.graph.off("cell:change:position",this.onCellChangePosition),this.canvas.graph.off("cell:change:angle",this.onCellChangeAngle),this.canvas.graph.off("cell:selected",this.onCellSelected)}constructor(e,n){this.fb=e,this.cs=n,this.selected=[],this.form=e.group({x:[0,[A.k0.required]],y:[0,[A.k0.required]],width:[0,[A.k0.required]],height:[0,[A.k0.required]],angle:[0,[A.k0.required]]})}onChange(e){this.cell?.isNode()&&(this.cell.setPosition(this.form.value),this.cell.setSize(this.form.value),this.cell.angle(this.form.value.angle))}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(A.ok),t.rXU(pt.b))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-transform"]],inputs:{canvas:"canvas"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"formGroup","change",4,"ngIf"],[3,"change","formGroup"],["formControlName","x"],["formControlName","y"],["formControlName","width"],["formControlName","height"],["formControlName","angle"]],template:function(n,i){1&n&&t.DNE(0,vn,11,1,"form",0),2&n&&t.Y8G("ngIf",i.cell)},dependencies:[S.MD,S.bT,A.YN,A.qT,A.BC,A.cb,A.X1,A.j4,A.JD,$t.FG],styles:["nz-input-number[_ngcontent-%COMP%]{width:50px}"]})}return s})(),we=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-props"]],inputs:{canvas:"canvas"},standalone:!0,features:[t.aNF],decls:7,vars:3,consts:[["nzHeader","\u753b\u5e03","nzActive",""],[3,"page"],["nzHeader","\u53d8\u6362","nzActive",""],[3,"canvas"],["nzHeader","\u5c5e\u6027","nzActive",""]],template:function(n,i){1&n&&(t.j41(0,"nz-collapse")(1,"nz-collapse-panel",0),t.nrm(2,"app-page",1),t.k0s(),t.j41(3,"nz-collapse-panel",2),t.nrm(4,"app-transform",3),t.k0s(),t.j41(5,"nz-collapse-panel",4),t.nrm(6,"app-properties",3),t.k0s()()),2&n&&(t.R7$(2),t.Y8G("page",i.canvas.page),t.R7$(2),t.Y8G("canvas",i.canvas),t.R7$(2),t.Y8G("canvas",i.canvas))},dependencies:[ye,xe,ot,Ct,ke]})}return s})();var W,s,Yt,c=b(1325);class Se extends c.Ss{get model(){return this.graph.model}get view(){return this.graph.renderer.findViewByCell(this.node)}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}constructor(o,e,n){super(),this.node=e,this.graph=n,this.options=Object.assign(Object.assign({},W.defaultOptions),o),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this)}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this)}renderHandles(){this.container=document.createElement("div");const o=document.createElement("div");c.Jf.attr(o,"draggable","false");const e=o.cloneNode(!0);c.Jf.addClass(e,this.rotateClassName);const n=W.POSITIONS.map(i=>{const r=o.cloneNode(!0);return c.Jf.addClass(r,this.resizeClassName),c.Jf.attr(r,"data-position",i),r});this.empty(),c.Jf.append(this.container,[...n,e])}render(){return this.renderHandles(),this.view&&this.view.addClass(W.NODE_CLS),c.Jf.addClass(this.container,this.containerClassName),c.Jf.toggleClass(this.container,"no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing),c.Jf.toggleClass(this.container,"no-resize",!this.options.resizable),c.Jf.toggleClass(this.container,"no-rotate",!this.options.rotatable),this.options.className&&c.Jf.addClass(this.container,this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const o=this.graph.matrix(),e=this.node.getBBox();e.x*=o.a,e.x+=o.e,e.y*=o.d,e.y+=o.f,e.width*=o.a,e.height*=o.d;const n=c.uM.normalize(this.node.getAngle());return c.Jf.css(this.container,{transform:0!==n?`rotate(${n}deg)`:"",width:e.width,height:e.height,left:e.x,top:e.y}),this.updateResizerDirections(),this}remove(){return this.view&&this.view.removeClass(W.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const o=c.uM.normalize(this.node.getAngle()),e=Math.floor(o*(W.DIRECTIONS.length/360));if(e!==this.prevShift){const n=W.DIRECTIONS.slice(e).concat(W.DIRECTIONS.slice(0,e)),i=a=>`${this.containerClassName}-cursor-${a}`;this.container.querySelectorAll(`.${this.resizeClassName}`).forEach((a,l)=>{c.Jf.removeClass(a,W.DIRECTIONS.map(h=>i(h)).join(" ")),c.Jf.addClass(a,i(n[l]))}),this.prevShift=e}}getTrueDirection(o){const e=c.uM.normalize(this.node.getAngle());let n=W.POSITIONS.indexOf(o);return n+=Math.floor(e*(W.POSITIONS.length/360)),n%=W.POSITIONS.length,W.POSITIONS[n]}toValidResizeDirection(o){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[o]||o}startResizing(o){o.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const e=c.Jf.attr(o.target,"data-position");this.prepareResizing(o,e),this.startAction(o)}prepareResizing(o,e){const n=this.getTrueDirection(e);let i=0,r=0;e.split("-").forEach(d=>{i={left:-1,right:1}[d]||i,r={top:-1,bottom:1}[d]||r});const a=this.toValidResizeDirection(e),l={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[a],h=c.uM.normalize(this.node.getAngle());this.setEventData(o,{selector:l,direction:a,trueDirection:n,relativeDirection:e,angle:h,resizeX:i,resizeY:r,action:"resizing"})}startRotating(o){o.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const e=this.node.getBBox().getCenter(),n=this.normalizeEvent(o),i=this.graph.snapToGrid(n.clientX,n.clientY);this.setEventData(o,{center:e,action:"rotating",angle:c.uM.normalize(this.node.getAngle()),start:c.bR.create(i).theta(e)}),this.startAction(o)}onMouseMove(o){const e=this.graph.findViewByCell(this.node);let n=this.getEventData(o);if(n.action){const i=this.normalizeEvent(o);let r=i.clientX,a=i.clientY;const l=this.graph.getPlugin("scroller"),h=this.options.restrictedResizing;if(!0===h||"number"==typeof h){const m=!0===h?0:h,y=l?Math.max(m,8):m,v=this.graph.container.getBoundingClientRect();r=c.Dc.clamp(r,v.left+y,v.right-y),a=c.Dc.clamp(a,v.top+y,v.bottom-y)}else this.options.autoScrollOnResizing&&l&&l.autoScroll(r,a);const d=this.graph.snapToGrid(r,a),p=this.graph.getGridSize(),u=this.node,f=this.options;if("resizing"===n.action){n.resized||(e&&(e.addClass("node-resizing"),this.notify("node:resize",o,e)),n.resized=!0);const m=u.getBBox(),y=c.bR.create(d).rotate(n.angle,m.getCenter()).diff(m[n.selector]);let v=n.resizeX?y.x*n.resizeX:m.width,_=n.resizeY?y.y*n.resizeY:m.height;const k=v,z=_;if(v=c.fZ.snapToGrid(v,p),_=c.fZ.snapToGrid(_,p),v=Math.max(v,f.minWidth||p),_=Math.max(_,f.minHeight||p),v=Math.min(v,f.maxWidth||1/0),_=Math.min(_,f.maxHeight||1/0),f.preserveAspectRatio){const x=m.width*_/m.height;v<x?_=m.height*v/m.width:v=x}const T=n.relativeDirection;if(f.allowReverse&&(k<=-v||z<=-_)){let x;"left"===T?k<=-v&&(x="right"):"right"===T?k<=-v&&(x="left"):"top"===T?z<=-_&&(x="bottom"):"bottom"===T?z<=-_&&(x="top"):"top-left"===T?k<=-v&&z<=-_?x="bottom-right":k<=-v?x="top-right":z<=-_&&(x="bottom-left"):"top-right"===T?k<=-v&&z<=-_?x="bottom-left":k<=-v?x="top-left":z<=-_&&(x="bottom-right"):"bottom-left"===T?k<=-v&&z<=-_?x="top-right":k<=-v?x="bottom-right":z<=-_&&(x="top-left"):"bottom-right"===T&&(k<=-v&&z<=-_?x="top-left":k<=-v?x="bottom-left":z<=-_&&(x="top-right"));const M=x;this.stopHandle();const X=this.container.querySelector(`.${this.resizeClassName}[data-position="${M}"]`);this.startHandle(X),this.prepareResizing(o,M),this.onMouseMove(o)}m.width===v&&m.height===_||(u.resize(v,_,{ui:!0,direction:n.direction,relativeDirection:n.relativeDirection,trueDirection:n.trueDirection,minWidth:f.minWidth,minHeight:f.minHeight,maxWidth:f.maxWidth,maxHeight:f.maxHeight,preserveAspectRatio:!0===f.preserveAspectRatio}),this.notify("node:resizing",o,e))}else if("rotating"===n.action){n.rotated||(e&&(e.addClass("node-rotating"),this.notify("node:rotate",o,e)),n.rotated=!0);const m=u.getAngle(),y=n.start-c.bR.create(d).theta(n.center);let v=n.angle+y;f.rotateGrid&&(v=c.fZ.snapToGrid(v,f.rotateGrid)),v=c.uM.normalize(v),m!==v&&(u.rotate(v,{absolute:!0}),this.notify("node:rotating",o,e))}}}onMouseUp(o){const e=this.getEventData(o);e.action&&(this.stopAction(o),this.model.stopBatch("resizing"===e.action?"resize":"rotate",{cid:this.cid}))}startHandle(o){if(this.handle=o||null,c.Jf.addClass(this.container,`${this.containerClassName}-active`),o){c.Jf.addClass(o,`${this.containerClassName}-active-handle`);const e=o.getAttribute("data-position");if(e){const n=W.DIRECTIONS[W.POSITIONS.indexOf(e)];c.Jf.addClass(this.container,`${this.containerClassName}-cursor-${n}`)}}}stopHandle(){if(c.Jf.removeClass(this.container,`${this.containerClassName}-active`),this.handle){c.Jf.removeClass(this.handle,`${this.containerClassName}-active-handle`);const o=this.handle.getAttribute("data-position");if(o){const e=W.DIRECTIONS[W.POSITIONS.indexOf(o)];c.Jf.removeClass(this.container,`${this.containerClassName}-cursor-${e}`)}this.handle=null}}startAction(o){this.startHandle(o.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(W.documentEvents,o.data)}stopAction(o){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const e=this.graph.findViewByCell(this.node),n=this.getEventData(o);e&&(e.removeClass(`node-${n.action}`),"resizing"===n.action&&n.resized?this.notify("node:resized",o,e):"rotating"===n.action&&n.rotated&&this.notify("node:rotated",o,e))}notify(o,e,n,i={}){if(n){const r=n.graph,a=r.view.normalizeEvent(e),l=r.snapToGrid(a.clientX,a.clientY);this.trigger(o,Object.assign({e:a,view:n,node:n.cell,cell:n.cell,x:l.x,y:l.y},i))}}dispose(){this.stopListening(),this.remove(),this.off()}}!function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)}([c.Ss.dispose()],Se.prototype,"dispose",null),(s=W||(W={})).NODE_CLS="has-widget-transform",s.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],s.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],s.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},s.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0},c.ke.prototype.createTransformWidget=function(s){const o=this.getPlugin("transform");return o&&o.createWidget(s),this},c.ke.prototype.clearTransformWidgets=function(){const s=this.getPlugin("transform");return s&&s.clearWidgets(),this};class yt extends c.Nb{constructor(o={}){super(),this.name="transform",this.widgets=new Map,this.disabled=!1,this.options=o,c.H.ensure(this.name,".x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n")}init(o){this.graph=o,!this.disabled&&this.startListening()}startListening(){this.graph.on("node:click",this.onNodeClick,this),this.graph.on("blank:mousedown",this.onBlankMouseDown,this)}stopListening(){this.graph.off("node:click",this.onNodeClick,this),this.graph.off("blank:mousedown",this.onBlankMouseDown,this)}enable(){this.disabled&&(this.disabled=!1,this.startListening())}disable(){this.disabled||(this.disabled=!0,this.stopListening())}isEnabled(){return!this.disabled}createWidget(o){this.clearWidgets();const e=this.createTransform(o);e&&(this.widgets.set(o,e),e.on("*",(n,i)=>{this.trigger(n,i),this.graph.trigger(n,i)}))}onNodeClick({node:o}){this.createWidget(o)}onBlankMouseDown(){this.clearWidgets()}createTransform(o){const e=this.getTransformOptions(o);return e.resizable||e.rotatable?new Se(e,o,this.graph):null}getTransformOptions(o){this.options.resizing||(this.options.resizing={enabled:!1}),this.options.rotating||(this.options.rotating={enabled:!1}),"boolean"==typeof this.options.resizing&&(this.options.resizing={enabled:this.options.resizing}),"boolean"==typeof this.options.rotating&&(this.options.rotating={enabled:this.options.rotating});const e=yt.parseOptionGroup(this.graph,o,this.options.resizing),n=yt.parseOptionGroup(this.graph,o,this.options.rotating);return{resizable:!!e.enabled,minWidth:e.minWidth||0,maxWidth:e.maxWidth||Number.MAX_SAFE_INTEGER,minHeight:e.minHeight||0,maxHeight:e.maxHeight||Number.MAX_SAFE_INTEGER,orthogonalResizing:"boolean"!=typeof e.orthogonal||e.orthogonal,restrictedResizing:!!e.restrict,autoScrollOnResizing:"boolean"!=typeof e.autoScroll||e.autoScroll,preserveAspectRatio:!!e.preserveAspectRatio,allowReverse:"boolean"!=typeof e.allowReverse||e.allowReverse,rotatable:!!n.enabled,rotateGrid:n.grid||15}}clearWidgets(){this.widgets.forEach((o,e)=>{this.graph.getCellById(e.id)&&o.dispose()}),this.widgets.clear()}dispose(){this.clearWidgets(),this.stopListening(),this.off(),c.H.clean(this.name)}}(function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)})([c.Nb.dispose()],yt.prototype,"dispose",null),function(s){s.parseOptionGroup=function o(e,n,i){const r={};return Object.keys(i||{}).forEach(a=>{const l=i[a];r[a]="function"==typeof l?l.call(e,n):l}),r}}(yt||(yt={}));class Te extends c.Ss{get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}constructor(o){super();const{graph:e}=o,n=function(s,o){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&o.indexOf(n)<0&&(e[n]=s[n]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(s);i<n.length;i++)o.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]])}return e}(o,["graph"]);this.graph=e,this.options=Object.assign({},n),this.offset={x:0,y:0},this.render(),this.disabled||this.startListening()}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.stopListening())}setFilter(o){this.options.filter=o}render(){const o=this.containerWrapper=new c.Mi("svg"),e=this.horizontal=new c.Mi("line"),n=this.vertical=new c.Mi("line");o.addClass(this.containerClassName),e.addClass(this.horizontalClassName),n.addClass(this.verticalClassName),o.setAttribute("width","100%"),o.setAttribute("height","100%"),e.setAttribute("display","none"),n.setAttribute("display","none"),o.append([e,n]),this.options.className&&o.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}onBatchStop({name:o,data:e}){"resize"===o&&this.snapOnResizing(e.cell,e)}captureCursorOffset({view:o,x:e,y:n}){const i=o.getDelegatedView();if(i&&this.isNodeMovable(i)){const r=o.cell.getPosition();this.offset={x:e-r.x,y:n-r.y}}}isNodeMovable(o){return o&&o.cell.isNode()&&o.can("nodeMovable")}getRestrictArea(o){const e=this.graph.options.translating.restrict,n="function"==typeof e?c.eY.call(e,this.graph,o):e;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}snapOnResizing(o,e){if(this.options.resizing&&!e.snapped&&e.ui&&e.direction&&e.trueDirection){const n=this.graph.renderer.findViewByCell(o);if(n&&n.cell.isNode()){const i=o.getBBox(),r=i.bbox(o.getAngle()),a=r.getTopLeft(),l=r.getBottomRight(),h=c.uM.normalize(o.getAngle()),d=this.options.tolerance||0;let p,u,f,m,y,v;const _={vertical:0,horizontal:0},k=e.direction,z=e.trueDirection,T=e.relativeDirection;_.vertical=-1!==z.indexOf("right")?l.x:a.x,_.horizontal=-1!==z.indexOf("bottom")?l.y:a.y,this.model.getNodes().some(F=>{if(this.isIgnored(o,F))return!1;const J=F.getBBox().bbox(F.getAngle()),ft=J.getTopLeft(),Dt=J.getBottomRight(),le={vertical:[ft.x,Dt.x],horizontal:[ft.y,Dt.y]},Et={};return Object.keys(le).forEach(_e=>{const Ut=_e,ze=le[Ut].map(_t=>({position:_t,distance:Math.abs(_t-_[Ut])})).filter(_t=>_t.distance<=d);Et[Ut]=c.Rw.sortBy(ze,_t=>_t.distance)}),null==p&&Et.vertical.length>0&&(p=Et.vertical[0].position,u=Math.min(r.y,J.y),f=Math.max(l.y,Dt.y)-u),null==m&&Et.horizontal.length>0&&(m=Et.horizontal[0].position,y=Math.min(r.x,J.x),v=Math.max(l.x,Dt.x)-y),null!=p&&null!=m}),this.hide();let x=0,M=0;(null!=m||null!=p)&&(null!=p&&(x=-1!==z.indexOf("right")?p-l.x:a.x-p),null!=m&&(M=-1!==z.indexOf("bottom")?m-l.y:a.y-m));let X=0,L=0;if(h%90==0)90===h||270===h?(X=M,L=x):(X=x,L=M);else{const F=h>=0&&h<90?1:h>=90&&h<180?4:h>=180&&h<270?3:2;null!=m&&null!=p&&(x<M?(M=0,m=void 0):(x=0,p=void 0));const J=c.uM.toRad(h%90);x&&(X=3===F?x/Math.cos(J):x/Math.sin(J)),M&&(L=3===F?M/Math.cos(J):M/Math.sin(J));const ft=1===F||3===F;switch(T){case"top":case"bottom":L=M?M/(ft?Math.cos(J):Math.sin(J)):x/(ft?Math.sin(J):Math.cos(J));break;case"left":case"right":X=x?x/(ft?Math.cos(J):Math.sin(J)):M/(ft?Math.sin(J):Math.cos(J))}}switch(T){case"top":case"bottom":X=0;break;case"left":case"right":L=0}const st=this.graph.getGridSize();let K=Math.max(i.width+X,st),Q=Math.max(i.height+L,st);e.minWidth&&e.minWidth>st&&(K=Math.max(K,e.minWidth)),e.minHeight&&e.minHeight>st&&(Q=Math.max(Q,e.minHeight)),e.maxWidth&&(K=Math.min(K,e.maxWidth)),e.maxHeight&&(Q=Math.min(Q,e.maxHeight)),e.preserveAspectRatio&&(L<X?Q=K*(i.height/i.width):K=Q*(i.width/i.height)),(K!==i.width||Q!==i.height)&&(o.resize(K,Q,{direction:k,relativeDirection:T,trueDirection:z,snapped:!0,snaplines:this.cid,restrict:this.getRestrictArea(n)}),f&&(f+=Q-i.height),v&&(v+=K-i.width));const H=o.getBBox().bbox(h);p&&Math.abs(H.x-p)>1&&Math.abs(H.width+H.x-p)>1&&(p=void 0),m&&Math.abs(H.y-m)>1&&Math.abs(H.height+H.y-m)>1&&(m=void 0),this.update({verticalLeft:p,verticalTop:u,verticalHeight:f,horizontalTop:m,horizontalLeft:y,horizontalWidth:v})}}}snapOnMoving({view:o,e,x:n,y:i}){const r=o.getEventData(e).delegatedView||o;if(!this.isNodeMovable(r))return;const a=r.cell,l=a.getSize(),h=a.getPosition(),d=new c.M_(n-this.offset.x,i-this.offset.y,l.width,l.height),p=a.getAngle(),u=d.getCenter(),f=d.bbox(p),m=f.getTopLeft(),y=f.getBottomRight(),v=this.options.tolerance||0;let _,k,z,T,x,M,X=0,L=0;if(this.model.getNodes().some(st=>{if(this.isIgnored(a,st))return!1;const K=st.getBBox().bbox(st.getAngle()),Q=K.getCenter(),H=K.getTopLeft(),F=K.getBottomRight();return null==_&&(Math.abs(Q.x-u.x)<v?(_=Q.x,X=.5):Math.abs(H.x-m.x)<v?(_=H.x,X=0):Math.abs(H.x-y.x)<v?(_=H.x,X=1):Math.abs(F.x-y.x)<v?(_=F.x,X=1):Math.abs(F.x-m.x)<v&&(_=F.x),null!=_&&(k=Math.min(f.y,K.y),z=Math.max(y.y,F.y)-k)),null==T&&(Math.abs(Q.y-u.y)<v?(T=Q.y,L=.5):Math.abs(H.y-m.y)<v?T=H.y:Math.abs(H.y-y.y)<v?(T=H.y,L=1):Math.abs(F.y-y.y)<v?(T=F.y,L=1):Math.abs(F.y-m.y)<v&&(T=F.y),null!=T&&(x=Math.min(f.x,K.x),M=Math.max(y.x,F.x)-x)),null!=_&&null!=T}),this.hide(),null!=T||null!=_){null!=T&&(f.y=T-L*f.height),null!=_&&(f.x=_-X*f.width);const st=f.getCenter(),H=st.x-d.width/2-h.x,F=st.y-d.height/2-h.y;(0!==H||0!==F)&&(a.translate(H,F,{snapped:!0,restrict:this.getRestrictArea(r)}),M&&(M+=H),z&&(z+=F)),this.update({verticalLeft:_,verticalTop:k,verticalHeight:z,horizontalTop:T,horizontalLeft:x,horizontalWidth:M})}}isIgnored(o,e){return e.id===o.id||e.isDescendantOf(o)||!this.filter(e)}filter(o){const e=this.options.filter;return Array.isArray(e)?e.some(n=>"string"==typeof n?o.shape===n:o.id===n.id):"function"!=typeof e||c.eY.call(e,this.graph,o)}update(o){if(o.horizontalTop){const e=this.graph.localToGraph(new c.bR(o.horizontalLeft,o.horizontalTop)),n=this.graph.localToGraph(new c.bR(o.horizontalLeft+o.horizontalWidth,o.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${e.x}`:"0",y1:`${e.y}`,x2:this.options.sharp?`${n.x}`:"100%",y2:`${n.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(o.verticalLeft){const e=this.graph.localToGraph(new c.bR(o.verticalLeft,o.verticalTop)),n=this.graph.localToGraph(new c.bR(o.verticalLeft,o.verticalTop+o.verticalHeight));this.vertical.setAttributes({x1:`${e.x}`,y1:this.options.sharp?`${e.y}`:"0",x2:`${n.x}`,y2:this.options.sharp?`${n.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),null==this.container.parentNode&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const o=this.options.clean,e="number"==typeof o?o:!1!==o?3e3:0;return e>0&&(this.timer=window.setTimeout(()=>{null!==this.container.parentNode&&this.unmount()},e)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}!function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)}([c.Ss.dispose()],Te.prototype,"dispose",null),c.ke.prototype.isSnaplineEnabled=function(){const s=this.getPlugin("snapline");return!!s&&s.isEnabled()},c.ke.prototype.enableSnapline=function(){const s=this.getPlugin("snapline");return s&&s.enable(),this},c.ke.prototype.disableSnapline=function(){const s=this.getPlugin("snapline");return s&&s.disable(),this},c.ke.prototype.toggleSnapline=function(){const s=this.getPlugin("snapline");return s&&s.toggleEnabled(),this},c.ke.prototype.hideSnapline=function(){const s=this.getPlugin("snapline");return s&&s.hide(),this},c.ke.prototype.setSnaplineFilter=function(s){const o=this.getPlugin("snapline");return o&&o.setFilter(s),this},c.ke.prototype.isSnaplineOnResizingEnabled=function(){const s=this.getPlugin("snapline");return!!s&&s.isOnResizingEnabled()},c.ke.prototype.enableSnaplineOnResizing=function(){const s=this.getPlugin("snapline");return s&&s.enableOnResizing(),this},c.ke.prototype.disableSnaplineOnResizing=function(){const s=this.getPlugin("snapline");return s&&s.disableOnResizing(),this},c.ke.prototype.toggleSnaplineOnResizing=function(s){const o=this.getPlugin("snapline");return o&&o.toggleOnResizing(s),this},c.ke.prototype.isSharpSnapline=function(){const s=this.getPlugin("snapline");return!!s&&s.isSharp()},c.ke.prototype.enableSharpSnapline=function(){const s=this.getPlugin("snapline");return s&&s.enableSharp(),this},c.ke.prototype.disableSharpSnapline=function(){const s=this.getPlugin("snapline");return s&&s.disableSharp(),this},c.ke.prototype.toggleSharpSnapline=function(s){const o=this.getPlugin("snapline");return o&&o.toggleSharp(s),this},c.ke.prototype.getSnaplineTolerance=function(){const s=this.getPlugin("snapline");if(s)return s.getTolerance()},c.ke.prototype.setSnaplineTolerance=function(s){const o=this.getPlugin("snapline");return o&&o.setTolerance(s),this};class Ae extends c.jG{constructor(o={}){super(),this.name="snapline",this.options=Object.assign({enabled:!0,tolerance:10},o),c.H.ensure(this.name,".x6-widget-snapline {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  stroke: #2ecc71;\n  stroke-width: 1px;\n}\n")}init(o){this.snaplineImpl=new Te(Object.assign(Object.assign({},this.options),{graph:o}))}isEnabled(){return!this.snaplineImpl.disabled}enable(){this.snaplineImpl.enable()}disable(){this.snaplineImpl.disable()}toggleEnabled(o){if(null==o)return this.isEnabled()?this.disable():this.enable(),this;o!==this.isEnabled()&&(o?this.enable():this.disable())}hide(){return this.snaplineImpl.hide(),this}setFilter(o){return this.snaplineImpl.setFilter(o),this}isOnResizingEnabled(){return!0===this.snaplineImpl.options.resizing}enableOnResizing(){return this.snaplineImpl.options.resizing=!0,this}disableOnResizing(){return this.snaplineImpl.options.resizing=!1,this}toggleOnResizing(o){return null!=o?o!==this.isOnResizingEnabled()&&(o?this.enableOnResizing():this.disableOnResizing()):this.isOnResizingEnabled()?this.disableOnResizing():this.enableOnResizing(),this}isSharp(){return!0===this.snaplineImpl.options.sharp}enableSharp(){return this.snaplineImpl.options.sharp=!0,this}disableSharp(){return this.snaplineImpl.options.sharp=!1,this}toggleSharp(o){return null!=o?o!==this.isSharp()&&(o?this.enableSharp():this.disableSharp()):this.isSharp()?this.disableSharp():this.enableSharp(),this}getTolerance(){return this.snaplineImpl.options.tolerance}setTolerance(o){return this.snaplineImpl.options.tolerance=o,this}captureCursorOffset(o){this.snaplineImpl.captureCursorOffset(o)}snapOnMoving(o){this.snaplineImpl.snapOnMoving(o)}dispose(){this.snaplineImpl.dispose(),c.H.clean(this.name)}}!function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)}([c.jG.dispose()],Ae.prototype,"dispose",null);class Tn{constructor(){this.cells=[]}copy(o,e,n={}){this.options=Object.assign({},n);const r=(c.Kx.isModel(e)?e:e.model).cloneSubGraph(o,n);this.cells=c.Rw.sortBy(Object.keys(r).map(a=>r[a]),a=>a.isEdge()?2:1),this.serialize(n)}cut(o,e,n={}){this.copy(o,e,n),(c.ke.isGraph(e)?e.model:e).batchUpdate("cut",()=>{o.forEach(r=>r.remove())})}paste(o,e={}){const n=Object.assign(Object.assign({},this.options),e),{offset:i,edgeProps:r,nodeProps:a}=n;let l=20,h=20;i&&(l="number"==typeof i?i:i.dx,h="number"==typeof i?i:i.dy),this.deserialize(n);const d=this.cells;d.forEach(u=>{u.model=null,u.removeProp("zIndex"),(l||h)&&u.translate(l,h),a&&u.isNode()&&u.prop(a),r&&u.isEdge()&&u.prop(r)});const p=c.ke.isGraph(o)?o.model:o;return p.batchUpdate("paste",()=>{p.addCells(this.cells)}),this.copy(d,o,e),d}serialize(o){!1!==o.useLocalStorage&&Yt.save(this.cells)}deserialize(o){if(o.useLocalStorage){const e=Yt.fetch();e&&(this.cells=e)}}isEmpty(o={}){return o.useLocalStorage&&this.deserialize(o),this.cells.length<=0}clean(){this.options={},this.cells=[],Yt.clean()}}(function(s){const o=`${c.TS.prefixCls}.clipboard.cells`;s.save=function e(r){if(window.localStorage){const a=r.map(l=>l.toJSON());localStorage.setItem(o,JSON.stringify(a))}},s.fetch=function n(){if(window.localStorage){const r=localStorage.getItem(o),a=r?JSON.parse(r):[];if(a)return c.Kx.fromJSON(a)}},s.clean=function i(){window.localStorage&&localStorage.removeItem(o)}})(Yt||(Yt={})),c.ke.prototype.isClipboardEnabled=function(){const s=this.getPlugin("clipboard");return!!s&&s.isEnabled()},c.ke.prototype.enableClipboard=function(){const s=this.getPlugin("clipboard");return s&&s.enable(),this},c.ke.prototype.disableClipboard=function(){const s=this.getPlugin("clipboard");return s&&s.disable(),this},c.ke.prototype.toggleClipboard=function(s){const o=this.getPlugin("clipboard");return o&&o.toggleEnabled(s),this},c.ke.prototype.isClipboardEmpty=function(s){const o=this.getPlugin("clipboard");return!o||o.isEmpty(s)},c.ke.prototype.getCellsInClipboard=function(){const s=this.getPlugin("clipboard");return s?s.getCellsInClipboard():[]},c.ke.prototype.cleanClipboard=function(){const s=this.getPlugin("clipboard");return s&&s.clean(),this},c.ke.prototype.copy=function(s,o){const e=this.getPlugin("clipboard");return e&&e.copy(s,o),this},c.ke.prototype.cut=function(s,o){const e=this.getPlugin("clipboard");return e&&e.cut(s,o),this},c.ke.prototype.paste=function(s,o){const e=this.getPlugin("clipboard");return e?e.paste(s,o):[]};class Ee extends c.Nb{get disabled(){return!0!==this.options.enabled}get cells(){return this.clipboardImpl.cells}constructor(o={}){super(),this.name="clipboard",this.options=Object.assign({enabled:!0},o)}init(o){this.graph=o,this.clipboardImpl=new Tn,this.clipboardImpl.deserialize(this.options)}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(o){return null!=o?o!==this.isEnabled()&&(o?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isEmpty(o={}){return this.clipboardImpl.isEmpty(o)}getCellsInClipboard(){return this.cells}clean(o){return(!this.disabled||o)&&(this.clipboardImpl.clean(),this.notify("clipboard:changed",{cells:[]})),this}copy(o,e={}){return this.disabled||(this.clipboardImpl.copy(o,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:o})),this}cut(o,e={}){return this.disabled||(this.clipboardImpl.cut(o,this.graph,Object.assign(Object.assign({},this.commonOptions),e)),this.notify("clipboard:changed",{cells:o})),this}paste(o={},e=this.graph){return this.disabled?[]:this.clipboardImpl.paste(e,Object.assign(Object.assign({},this.commonOptions),o))}get commonOptions(){return function(s,o){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&o.indexOf(n)<0&&(e[n]=s[n]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(s);i<n.length;i++)o.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(e[n[i]]=s[n[i]])}return e}(this.options,["enabled"])}notify(o,e){this.trigger(o,e),this.graph.trigger(o,e)}dispose(){this.clean(!0),this.off()}}!function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)}([c.Nb.dispose()],Ee.prototype,"dispose",null);var Bn=b(7184),In=b.n(Bn);class Rt extends c.jG{get graph(){return this.options.graph}constructor(o){super(),this.options=o;const e=this.graph.getPlugin("scroller");this.container=e?e.container:this.graph.container,o.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=Rt.createMousetrap(this)}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(o,e,n){this.mousetrap.bind(this.getKeys(o),e,n)}off(o,e){this.mousetrap.unbind(this.getKeys(o),e)}clear(){this.mousetrap.reset()}trigger(o,e){this.mousetrap.trigger(o,e)}focus(o){this.isInputEvent(o.e)||this.target.focus({preventScroll:!0})}getKeys(o){return(Array.isArray(o)?o:[o]).map(e=>this.formatkey(e))}formatkey(o){const e=o.toLocaleLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command").replace("arrowup","up").replace("arrowright","right").replace("arrowdown","down").replace("arrowleft","left"),n=this.options.format;return n?c.eY.call(n,this.graph,e):e}isGraphEvent(o){const e=o.target;return!!e&&(e===this.target||o.currentTarget===this.target||e===document.body||c.Jf.contains(this.container,e))}isInputEvent(o){var e;const n=o.target,i=null===(e=n?.tagName)||void 0===e?void 0:e.toLowerCase();let r=["input","textarea"].includes(i);return"true"===c.Jf.attr(n,"contenteditable")&&(r=!0),r}isEnabledForEvent(o){const e=!this.disabled&&this.isGraphEvent(o),n=this.isInputEvent(o);if(e){if(n&&("Backspace"===o.key||"Delete"===o.key))return!1;if(this.options.guard)return c.eY.call(this.options.guard,this.graph,o)}return e}dispose(){this.mousetrap.reset()}}(function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)})([c.jG.dispose()],Rt.prototype,"dispose",null),function(s){s.createMousetrap=function o(e){const n=new(In())(e.target),i=n.stopCallback;return n.stopCallback=(r,a,l)=>!e.isEnabledForEvent(r)||!!i&&i.call(n,r,a,l),n}}(Rt||(Rt={})),c.ke.prototype.isKeyboardEnabled=function(){const s=this.getPlugin("keyboard");return!!s&&s.isEnabled()},c.ke.prototype.enableKeyboard=function(){const s=this.getPlugin("keyboard");return s&&s.enable(),this},c.ke.prototype.disableKeyboard=function(){const s=this.getPlugin("keyboard");return s&&s.disable(),this},c.ke.prototype.toggleKeyboard=function(s){const o=this.getPlugin("keyboard");return o&&o.toggleEnabled(s),this},c.ke.prototype.bindKey=function(s,o,e){const n=this.getPlugin("keyboard");return n&&n.bindKey(s,o,e),this},c.ke.prototype.unbindKey=function(s,o){const e=this.getPlugin("keyboard");return e&&e.unbindKey(s,o),this},c.ke.prototype.clearKeys=function(){const s=this.getPlugin("keyboard");return s&&s.clear(),this},c.ke.prototype.triggerKey=function(s,o){const e=this.getPlugin("keyboard");return e&&e.trigger(s,o),this};class Be extends c.jG{constructor(o={}){super(),this.name="keyboard",this.options=Object.assign({enabled:!0},o)}init(o){this.keyboardImpl=new Rt(Object.assign(Object.assign({},this.options),{graph:o}))}isEnabled(){return!this.keyboardImpl.disabled}enable(){this.keyboardImpl.enable()}disable(){this.keyboardImpl.disable()}toggleEnabled(o){return null!=o?o!==this.isEnabled()&&(o?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}bindKey(o,e,n){return this.keyboardImpl.on(o,e,n),this}trigger(o,e){return this.keyboardImpl.trigger(o,e),this}clear(){return this.keyboardImpl.clear(),this}unbindKey(o,e){return this.keyboardImpl.off(o,e),this}dispose(){this.keyboardImpl.dispose()}}(function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)})([c.jG.dispose()],Be.prototype,"dispose",null),c.ke.prototype.isHistoryEnabled=function(){const s=this.getPlugin("history");return!!s&&s.isEnabled()},c.ke.prototype.enableHistory=function(){const s=this.getPlugin("history");return s&&s.enable(),this},c.ke.prototype.disableHistory=function(){const s=this.getPlugin("history");return s&&s.disable(),this},c.ke.prototype.toggleHistory=function(s){const o=this.getPlugin("history");return o&&o.toggleEnabled(s),this},c.ke.prototype.undo=function(s){const o=this.getPlugin("history");return o&&o.undo(s),this},c.ke.prototype.redo=function(s){const o=this.getPlugin("history");return o&&o.redo(s),this},c.ke.prototype.undoAndCancel=function(s){const o=this.getPlugin("history");return o&&o.cancel(s),this},c.ke.prototype.canUndo=function(){const s=this.getPlugin("history");return!!s&&s.canUndo()},c.ke.prototype.canRedo=function(){const s=this.getPlugin("history");return!!s&&s.canRedo()},c.ke.prototype.cleanHistory=function(s){const o=this.getPlugin("history");return o&&o.clean(s),this},c.ke.prototype.getHistoryStackSize=function(){return this.getPlugin("history").getSize()},c.ke.prototype.getUndoStackSize=function(){return this.getPlugin("history").getUndoSize()},c.ke.prototype.getRedoStackSize=function(){return this.getPlugin("history").getRedoSize()},c.ke.prototype.getUndoRemainSize=function(){return this.getPlugin("history").getUndoRemainSize()};var V,it,Ie=function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);return i>3&&r&&Object.defineProperty(o,e,r),r};class Pt extends c.Nb{constructor(o={}){super(),this.name="history",this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.stackSize=0,this.handlers=[];const{stackSize:e=0}=o;this.stackSize=e,this.options=V.getOptions(o),this.validator=new Pt.Validator({history:this,cancelInvalid:this.options.cancelInvalid})}init(o){this.graph=o,this.model=this.graph.model,this.clean(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(o){return null!=o?o!==this.isEnabled()&&(o?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}undo(o={}){if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,o),this.redoStack.push(e),this.notify("undo",e,o))}return this}redo(o={}){if(!this.disabled){const e=this.redoStack.pop();e&&(this.applyCommand(e,o),this.undoStackPush(e),this.notify("redo",e,o))}return this}cancel(o={}){if(!this.disabled){const e=this.undoStack.pop();e&&(this.revertCommand(e,o),this.redoStack=[],this.notify("cancel",e,o))}return this}getSize(){return this.stackSize}getUndoRemainSize(){return this.stackSize-this.undoStack.length}getUndoSize(){return this.undoStack.length}getRedoSize(){return this.redoStack.length}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}clean(o={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,o),this}get disabled(){return!0!==this.options.enabled}validate(o,...e){return this.validator.validate(o,...e),this}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((o,e)=>{this.handlers[e]=this.addCommand.bind(this,o),this.model.on(o,this.handlers[e])}),this.validator.on("invalid",o=>this.trigger("invalid",o))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((o,e)=>{this.model.off(o,this.handlers[e])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(o){return{batch:!!o&&o.batch,data:{}}}revertCommand(o,e){this.freezed=!0;const n=Array.isArray(o)?V.sortBatchCommands(o):[o];for(let i=n.length-1;i>=0;i-=1){const r=n[i],a=Object.assign(Object.assign({},e),c.D5.pick(r.options,this.options.revertOptionsList||[]));this.executeCommand(r,!0,a)}this.freezed=!1}applyCommand(o,e){this.freezed=!0;const n=Array.isArray(o)?V.sortBatchCommands(o):[o];for(let i=0;i<n.length;i+=1){const r=n[i],a=Object.assign(Object.assign({},e),c.D5.pick(r.options,this.options.applyOptionsList||[]));this.executeCommand(r,!1,a)}this.freezed=!1}executeCommand(o,e,n){const i=this.model,r=i.getCell(o.data.id),a=o.event;if(V.isAddEvent(a)&&e||V.isRemoveEvent(a)&&!e)r&&r.remove(n);else if(V.isAddEvent(a)&&!e||V.isRemoveEvent(a)&&e){const l=o.data;l.node?i.addNode(l.props,n):l.edge&&i.addEdge(l.props,n)}else if(V.isChangeEvent(a)){const l=o.data,h=l.key;if(h&&r){const d=e?l.prev[h]:l.next[h];"attrs"===l.key&&this.ensureUndefinedAttrs(d,e?l.next[h]:l.prev[h])&&(n.dirty=!0),r.prop(h,d,n)}}else{const l=this.options.executeCommand;l&&c.eY.call(l,this,o,e,n)}}addCommand(o,e){if(this.freezed||this.disabled)return;const n=e,i=n.options||{};if(i.dryrun||V.isAddEvent(o)&&this.options.ignoreAdd||V.isRemoveEvent(o)&&this.options.ignoreRemove||V.isChangeEvent(o)&&this.options.ignoreChange)return;const r=this.options.beforeAddCommand;if(null!=r&&!1===c.eY.call(r,this,o,e))return;"cell:change:*"===o&&(o=`cell:change:${n.key}`);const a=n.cell,l=c.Kx.isModel(a);let h;if(this.batchCommands){if(h=this.batchCommands[Math.max(this.lastBatchIndex,0)],this.lastBatchIndex>=0&&(l&&!h.modelChange||h.data.id!==a.id||h.event!==o)){const f=this.batchCommands.findIndex(m=>(l&&m.modelChange||m.data.id===a.id)&&m.event===o);f<0||V.isAddEvent(o)||V.isRemoveEvent(o)?h=this.createCommand({batch:!0}):(h=this.batchCommands[f],this.batchCommands.splice(f,1)),this.batchCommands.push(h),this.lastBatchIndex=this.batchCommands.length-1}}else h=this.createCommand({batch:!1});if(V.isAddEvent(o)||V.isRemoveEvent(o)){const p=h.data;return h.event=o,h.options=i,p.id=a.id,p.props=c.D5.cloneDeep(a.toJSON()),a.isEdge()?p.edge=!0:a.isNode()&&(p.node=!0),this.push(h,i)}if(V.isChangeEvent(o)){const p=e.key,u=h.data;return(!h.batch||!h.event)&&(h.event=o,h.options=i,u.key=p,null==u.prev&&(u.prev={}),u.prev[p]=c.D5.cloneDeep(a.previous(p)),l?h.modelChange=!0:u.id=a.id),null==u.next&&(u.next={}),u.next[p]=c.D5.cloneDeep(a.prop(p)),this.push(h,i)}const d=this.options.afterAddCommand;d&&c.eY.call(d,this,o,e,h),this.push(h,i)}initBatchCommand(o){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(o){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const e=this.filterBatchCommand(this.batchCommands);e.length>0&&(this.redoStack=[],this.undoStackPush(e),this.consolidateCommands(),this.notify("add",e,o)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(o){let e=o.slice();const n=[];for(;e.length>0;){const i=e.shift(),r=i.event,a=i.data.id;if(null!=r&&(null!=a||i.modelChange)){if(V.isAddEvent(r)){const l=e.findIndex(h=>V.isRemoveEvent(h.event)&&h.data.id===a);if(l>=0){e=e.filter((h,d)=>l<d||h.data.id!==a);continue}}else if(V.isRemoveEvent(r)){const l=e.findIndex(h=>V.isAddEvent(h.event)&&h.data.id===a);if(l>=0){e.splice(l,1);continue}}else if(V.isChangeEvent(r)){const l=i.data;if(c.D5.isEqual(l.prev,l.next))continue}n.push(i)}}return n}notify(o,e,n){const i=null==e?null:Array.isArray(e)?e:[e];this.emit(o,{cmds:i,options:n}),this.graph.trigger(`history:${o}`,{cmds:i,options:n}),this.emit("change",{cmds:i,options:n}),this.graph.trigger("history:change",{cmds:i,options:n})}push(o,e){this.redoStack=[],o.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:o,options:e})):(this.undoStackPush(o),this.consolidateCommands(),this.notify("add",o,e))}consolidateCommands(){var o;const e=this.undoStack[this.undoStack.length-1],n=this.undoStack[this.undoStack.length-2];if(!Array.isArray(e))return;const i=new Set(e.map(a=>a.event));if(!(2===i.size&&i.has("cell:change:parent")&&i.has("cell:change:children")&&e.every(a=>{var l;return a.batch&&(null===(l=a.options)||void 0===l?void 0:l.ui)})&&Array.isArray(n)&&1===n.length))return;const r=n[0];"cell:change:position"!==r.event||null===(o=r.options)||void 0===o||!o.ui||(n.push(...e),this.undoStack.pop())}undoStackPush(o){0!==this.stackSize?(this.undoStack.length>=this.stackSize&&this.undoStack.shift(),this.undoStack.push(o)):this.undoStack.push(o)}ensureUndefinedAttrs(o,e){let n=!1;return null!==o&&null!==e&&"object"==typeof o&&"object"==typeof e&&Object.keys(e).forEach(i=>{void 0===o[i]&&void 0!==e[i]?(o[i]=void 0,n=!0):"object"==typeof o[i]&&"object"==typeof e[i]&&(n=this.ensureUndefinedAttrs(o[i],e[i]))}),n}dispose(){this.validator.dispose(),this.clean(),this.stopListening(),this.off()}}Ie([c.Nb.dispose()],Pt.prototype,"dispose",null),function(s){class o extends c.Nb{constructor(n){super(),this.map={},this.command=n.history,this.cancelInvalid=!1!==n.cancelInvalid,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:n}){return Array.isArray(n)?n.every(i=>this.isValidCommand(i)):this.isValidCommand(n)}isValidCommand(n){if(n.options&&!1===n.options.validation)return!0;let r=null;return(n.event&&this.map[n.event]||[]).forEach(a=>{let l=0;const h=d=>{const p=a[l];l+=1;try{if(!p)return void(r=d);p(d,n,h)}catch(u){h(u)}};h(r)}),!r||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:r}),!1)}validate(n,...i){const r=Array.isArray(n)?n:n.split(/\s+/);return i.forEach(a=>{if("function"!=typeof a)throw new Error(`${r.join(" ")} requires callback functions.`)}),r.forEach(a=>{null==this.map[a]&&(this.map[a]=[]),this.map[a].push(i)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}Ie([c.Nb.dispose()],o.prototype,"dispose",null),s.Validator=o}(Pt||(Pt={})),function(s){s.isAddEvent=function o(a){return"cell:added"===a},s.isRemoveEvent=function e(a){return"cell:removed"===a},s.isChangeEvent=function n(a){return null!=a&&a.startsWith("cell:change:")},s.getOptions=function i(a){const l=["cell:added","cell:removed","cell:change:*"],h=["batch:start","batch:stop"],d=a.eventNames?a.eventNames.filter(p=>!(s.isChangeEvent(p)||l.includes(p)||h.includes(p))):l;return Object.assign(Object.assign({enabled:!0},a),{eventNames:d,applyOptionsList:a.applyOptionsList||["propertyPath"],revertOptionsList:a.revertOptionsList||["propertyPath"]})},s.sortBatchCommands=function r(a){const l=[];for(let h=0,d=a.length;h<d;h+=1){const p=a[h];let u=null;if(s.isAddEvent(p.event)){const f=p.data.id;for(let m=0;m<h;m+=1)if(a[m].data.id===f){u=m;break}}null!==u?l.splice(u,0,p):l.push(p)}return l}}(V||(V={}));class Ne extends c.Ss{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(it.classNames.box)}get $boxes(){return c.Jf.children(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(o){super(),this.options=o,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new c.pM([],{comparator:it.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const o=this.graph,e=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),o.on("scale",this.onGraphTransformed,this),o.on("translate",this.onGraphTransformed,this),o.model.on("updated",this.onModelUpdated,this),e.on("added",this.onCellAdded,this),e.on("removed",this.onCellRemoved,this),e.on("reseted",this.onReseted,this),e.on("updated",this.onCollectionUpdated,this),e.on("node:change:position",this.onNodePositionChanged,this),e.on("cell:changed",this.onCellChanged,this)}stopListening(){const o=this.graph,e=this.collection;this.undelegateEvents(),o.off("scale",this.onGraphTransformed,this),o.off("translate",this.onGraphTransformed,this),o.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:o,options:e}){const{showNodeSelectionBox:n,pointerEvents:i}=this.options,{ui:r,selection:a,translateBy:l,snapped:h}=e;if((!0!==n||i&&"none"===this.getPointerEventsValue(i))&&!this.translating&&!a&&(r&&l&&o.id===l||h)){this.translating=!0;const u=o.position(),f=o.previous("position"),m=u.x-f.x,y=u.y-f.y;(0!==m||0!==y)&&this.translateSelectedNodes(m,y,o,e),this.translating=!1}}onModelUpdated({removed:o}){o&&o.length&&this.unselect(o)}isEmpty(){return this.length<=0}isSelected(o){return this.collection.has(o)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(o,e={}){e.dryrun=!0;const n=this.filter(Array.isArray(o)?o:[o]);return this.collection.add(n,e),this}unselect(o,e={}){return e.dryrun=!0,this.collection.remove(Array.isArray(o)?o:[o],e),this}reset(o,e={}){if(o){if(e.batch){const d=this.filter(Array.isArray(o)?o:[o]);return this.collection.reset(d,Object.assign(Object.assign({},e),{ui:!0})),this}const n=this.cells,i=this.filter(Array.isArray(o)?o:[o]),r={},a={};n.forEach(d=>r[d.id]=d),i.forEach(d=>a[d.id]=d);const l=[],h=[];return i.forEach(d=>{r[d.id]||l.push(d)}),n.forEach(d=>{a[d.id]||h.push(d)}),h.length&&this.unselect(h,Object.assign(Object.assign({},e),{ui:!0})),l.length&&this.select(l,Object.assign(Object.assign({},e),{ui:!0})),0===h.length&&0===l.length&&this.updateContainer(),this}return this.clean(e)}clean(o={}){return this.length&&(!1===o.batch?this.unselect(this.cells,o):this.collection.reset([],Object.assign(Object.assign({},o),{ui:!0}))),this}setFilter(o){this.options.filter=o}setContent(o){this.options.content=o}startSelecting(o){let e,n;o=this.normalizeEvent(o),this.clean();const i=this.graph.container;if(null!=o.offsetX&&null!=o.offsetY&&i.contains(o.target))e=o.offsetX,n=o.offsetY;else{const r=c.Jf.offset(i);e=o.clientX-r.left+window.pageXOffset+i.scrollLeft,n=o.clientY-r.top+window.pageYOffset+i.scrollTop}c.Jf.css(this.container,{top:n,left:e,width:1,height:1}),this.setEventData(o,{action:"selecting",clientX:o.clientX,clientY:o.clientY,offsetX:e,offsetY:n,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(it.documentEvents,o.data)}filter(o){const e=this.options.filter;return o.filter(n=>Array.isArray(e)?e.some(i=>"string"==typeof i?n.shape===i:n.id===i.id):"function"!=typeof e||c.eY.call(e,this.graph,n))}stopSelecting(o){const e=this.graph,n=this.getEventData(o);switch(n.action){case"selecting":{let r=c.Jf.width(this.container),a=c.Jf.height(this.container);const l=c.Jf.offset(this.container),h=e.pageToLocal(l.left,l.top),d=e.transform.getScale();r/=d.sx,a/=d.sy;const p=new c.M_(h.x,h.y,r,a),u=this.getCellViewsInArea(p).map(f=>f.cell);this.reset(u,{batch:!0}),this.hideRubberband();break}case"translating":{const r=e.snapToGrid(o.clientX,o.clientY);this.options.following||this.updateSelectedNodesPosition({dx:n.clientX-n.originX,dy:n.clientY-n.originY}),this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",o,r.x,r.y);break}default:this.clean()}}onMouseUp(o){this.getEventData(o).action&&(this.stopSelecting(o),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(o){this.options.following||o.stopPropagation();const e=this.normalizeEvent(o);this.options.movable&&this.startTranslating(e);const n=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:n});const i=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,i.x,i.y),this.delegateDocumentEvents(it.documentEvents,e.data)}startTranslating(o){this.graph.model.startBatch("move-selection");const e=this.graph.snapToGrid(o.clientX,o.clientY);this.setEventData(o,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})}getRestrictArea(){const o=this.graph.options.translating.restrict,e="function"==typeof o?c.eY.call(o,this.graph,null):o;return"number"==typeof e?this.graph.transform.getGraphArea().inflate(e):!0===e?this.graph.transform.getGraphArea():e||null}getSelectionOffset(o,e){let n=o.x-e.clientX,i=o.y-e.clientY;const r=this.getRestrictArea();if(r){const a=this.collection.toArray(),l=c.fh.getCellsBBox(a,{deep:!0})||c.M_.create(),h=r.x-l.x,d=r.y-l.y,p=r.x+r.width-(l.x+l.width),u=r.y+r.height-(l.y+l.height);if(n<h&&(n=h),i<d&&(i=d),p<n&&(n=p),u<i&&(i=u),!this.options.following){const f=o.x-e.originX,m=o.y-e.originY;n=f<=h||f>=p?0:n,i=m<=d||m>=u?0:i}}return{dx:n,dy:i}}updateElementPosition(o,e,n){const i=c.Jf.css(o,"left"),r=c.Jf.css(o,"top"),a=i?parseFloat(i):0,l=r?parseFloat(r):0;c.Jf.css(o,"left",a+e),c.Jf.css(o,"top",l+n)}updateSelectedNodesPosition(o){const{dx:e,dy:n}=o;if(e||n)if(this.translateSelectedNodes(e,n),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const i=this.graph.transform.getScale();for(let r=0,a=this.$boxes,l=a.length;r<l;r+=1)this.updateElementPosition(a[r],e*i.sx,n*i.sy);this.updateElementPosition(this.selectionContainer,e*i.sx,n*i.sy)}}autoScrollGraph(o,e){const n=this.graph.getPlugin("scroller");return n?n.autoScroll(o,e):{scrollerX:0,scrollerY:0}}adjustSelection(o){const e=this.normalizeEvent(o),n=this.getEventData(e);switch(n.action){case"selecting":{const r=n;!0!==r.moving&&(c.Jf.appendTo(this.container,this.graph.container),this.showRubberband(),r.moving=!0);const{scrollerX:a,scrollerY:l}=this.autoScrollGraph(e.clientX,e.clientY);r.scrollerX+=a,r.scrollerY+=l;const h=e.clientX-r.clientX+r.scrollerX,d=e.clientY-r.clientY+r.scrollerY,p=parseInt(c.Jf.css(this.container,"left")||"0",10),u=parseInt(c.Jf.css(this.container,"top")||"0",10);c.Jf.css(this.container,{left:h<0?r.offsetX+h:p,top:d<0?r.offsetY+d:u,width:Math.abs(h),height:Math.abs(d)});break}case"translating":{const r=this.graph.snapToGrid(e.clientX,e.clientY),a=n,l=this.getSelectionOffset(r,a);this.options.following?this.updateSelectedNodesPosition(l):this.updateContainerPosition(l),l.dx&&(a.clientX=r.x),l.dy&&(a.clientY=r.y),this.notifyBoxEvent("box:mousemove",o,r.x,r.y);break}}this.boxesUpdated=!1}translateSelectedNodes(o,e,n,i){const r={},a=[];if(n&&(r[n.id]=!0),this.collection.toArray().forEach(l=>{l.getDescendants({deep:!0}).forEach(h=>{r[h.id]=!0})}),i&&i.translateBy){const l=this.graph.getCellById(i.translateBy);l&&(r[l.id]=!0,l.getDescendants({deep:!0}).forEach(h=>{r[h.id]=!0}),a.push(l))}this.collection.toArray().forEach(l=>{if(!r[l.id]){const h=Object.assign(Object.assign({},i),{selection:this.cid,exclude:a});l.translate(o,e,h),this.graph.model.getConnectedEdges(l).forEach(d=>{r[d.id]||(d.translate(o,e,h),r[d.id]=!0)})}})}getCellViewsInArea(o){const e=this.graph,n={strict:this.options.strict};let i=[];return this.options.rubberNode&&(i=i.concat(e.model.getNodesInArea(o,n).map(r=>e.renderer.findViewByCell(r)).filter(r=>null!=r))),this.options.rubberEdge&&(i=i.concat(e.model.getEdgesInArea(o,n).map(r=>e.renderer.findViewByCell(r)).filter(r=>null!=r))),i}notifyBoxEvent(o,e,n,i){const a=this.getEventData(e).activeView;this.trigger(o,{e,view:a,x:n,y:i,cell:a.cell})}getSelectedClassName(o){return this.prefixClassName((o.isNode()?"node":"edge")+"-selected")}addCellSelectedClassName(o){const e=this.graph.renderer.findViewByCell(o);e&&e.addClass(this.getSelectedClassName(o))}removeCellUnSelectedClassName(o){const e=this.graph.renderer.findViewByCell(o);e&&e.removeClass(this.getSelectedClassName(o))}destroySelectionBox(o){this.removeCellUnSelectedClassName(o),this.canShowSelectionBox(o)&&(c.Jf.remove(this.container.querySelector(`[data-cell-id="${o.id}"]`)),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(o){o.forEach(e=>this.removeCellUnSelectedClassName(e)),this.hide(),c.Jf.remove(this.$boxes),this.boxCount=0}hide(){c.Jf.removeClass(this.container,this.prefixClassName(it.classNames.rubberband)),c.Jf.removeClass(this.container,this.prefixClassName(it.classNames.selected))}showRubberband(){c.Jf.addClass(this.container,this.prefixClassName(it.classNames.rubberband))}hideRubberband(){c.Jf.removeClass(this.container,this.prefixClassName(it.classNames.rubberband))}showSelected(){c.Jf.removeAttribute(this.container,"style"),c.Jf.addClass(this.container,this.prefixClassName(it.classNames.selected))}createContainer(){this.container=document.createElement("div"),c.Jf.addClass(this.container,this.prefixClassName(it.classNames.root)),this.options.className&&c.Jf.addClass(this.container,this.options.className),this.selectionContainer=document.createElement("div"),c.Jf.addClass(this.selectionContainer,this.prefixClassName(it.classNames.inner)),this.selectionContent=document.createElement("div"),c.Jf.addClass(this.selectionContent,this.prefixClassName(it.classNames.content)),c.Jf.append(this.selectionContainer,this.selectionContent),c.Jf.attr(this.selectionContainer,"data-selection-length",this.collection.length),c.Jf.prepend(this.container,this.selectionContainer)}updateContainerPosition(o){(o.dx||o.dy)&&this.updateElementPosition(this.selectionContainer,o.dx,o.dy)}updateContainer(){const o={x:1/0,y:1/0},e={x:0,y:0};this.collection.toArray().filter(r=>this.canShowSelectionBox(r)).forEach(r=>{const a=this.graph.renderer.findViewByCell(r);if(a){const l=a.getBBox({useCellGeometry:!0});o.x=Math.min(o.x,l.x),o.y=Math.min(o.y,l.y),e.x=Math.max(e.x,l.x+l.width),e.y=Math.max(e.y,l.y+l.height)}}),c.Jf.css(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:o.x,top:o.y,width:e.x-o.x,height:e.y-o.y}),c.Jf.attr(this.selectionContainer,"data-selection-length",this.collection.length);const i=this.options.content;if(i)if("function"==typeof i){const r=c.eY.call(i,this.graph,this,this.selectionContent);r&&(this.selectionContent.innerHTML=r)}else this.selectionContent.innerHTML=i;this.collection.length>0&&!this.container.parentNode?c.Jf.appendTo(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(o){return o.isNode()&&!0===this.options.showNodeSelectionBox||o.isEdge()&&!0===this.options.showEdgeSelectionBox}getPointerEventsValue(o){return"string"==typeof o?o:o(this.cells)}createSelectionBox(o){if(this.addCellSelectedClassName(o),this.canShowSelectionBox(o)){const e=this.graph.renderer.findViewByCell(o);if(e){const n=e.getBBox({useCellGeometry:!0}),i=this.boxClassName,r=document.createElement("div"),a=this.options.pointerEvents;c.Jf.addClass(r,i),c.Jf.addClass(r,`${i}-${o.isNode()?"node":"edge"}`),c.Jf.attr(r,"data-cell-id",o.id),c.Jf.css(r,{position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,pointerEvents:a?this.getPointerEventsValue(a):"auto"}),c.Jf.appendTo(r,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let o=0,e=this.$boxes,n=e.length;o<n;o+=1){const i=e[o],r=c.Jf.attr(i,"data-cell-id");c.Jf.remove(i),this.boxCount-=1;const a=this.collection.get(r);a&&this.createSelectionBox(a)}this.updateContainer()}return 0}getCellViewFromElem(o){const e=o.getAttribute("data-cell-id");if(e){const n=this.collection.get(e);if(n)return this.graph.renderer.findViewByCell(n)}return null}onCellRemoved({cell:o}){this.destroySelectionBox(o),this.updateContainer()}onReseted({previous:o,current:e}){this.destroyAllSelectionBoxes(o),e.forEach(n=>{this.listenCellRemoveEvent(n),this.createSelectionBox(n)}),this.updateContainer()}onCellAdded({cell:o}){this.listenCellRemoveEvent(o),this.createSelectionBox(o),this.updateContainer()}listenCellRemoveEvent(o){o.off("removed",this.onCellRemoved,this),o.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:o,removed:e,options:n}){o.forEach(r=>{this.trigger("cell:selected",{cell:r,options:n}),r.isNode()?this.trigger("node:selected",{cell:r,options:n,node:r}):r.isEdge()&&this.trigger("edge:selected",{cell:r,options:n,edge:r})}),e.forEach(r=>{this.trigger("cell:unselected",{cell:r,options:n}),r.isNode()?this.trigger("node:unselected",{cell:r,options:n,node:r}):r.isEdge()&&this.trigger("edge:unselected",{cell:r,options:n,edge:r})});const i={added:o,removed:e,options:n,selected:this.cells.filter(r=>!!this.graph.getCellById(r.id))};this.trigger("selection:changed",i)}dispose(){this.clean(),this.remove(),this.off()}}!function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)}([c.Ss.dispose()],Ne.prototype,"dispose",null),function(s){const o="widget-selection";s.classNames={root:o,inner:`${o}-inner`,box:`${o}-box`,content:`${o}-content`,rubberband:`${o}-rubberband`,selected:`${o}-selected`},s.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},s.depthComparator=function e(n){return n.getAncestors().length}}(it||(it={})),c.ke.prototype.isSelectionEnabled=function(){const s=this.getPlugin("selection");return!!s&&s.isEnabled()},c.ke.prototype.enableSelection=function(){const s=this.getPlugin("selection");return s&&s.enable(),this},c.ke.prototype.disableSelection=function(){const s=this.getPlugin("selection");return s&&s.disable(),this},c.ke.prototype.toggleSelection=function(s){const o=this.getPlugin("selection");return o&&o.toggleEnabled(s),this},c.ke.prototype.isMultipleSelection=function(){const s=this.getPlugin("selection");return!!s&&s.isMultipleSelection()},c.ke.prototype.enableMultipleSelection=function(){const s=this.getPlugin("selection");return s&&s.enableMultipleSelection(),this},c.ke.prototype.disableMultipleSelection=function(){const s=this.getPlugin("selection");return s&&s.disableMultipleSelection(),this},c.ke.prototype.toggleMultipleSelection=function(s){const o=this.getPlugin("selection");return o&&o.toggleMultipleSelection(s),this},c.ke.prototype.isSelectionMovable=function(){const s=this.getPlugin("selection");return!!s&&s.isSelectionMovable()},c.ke.prototype.enableSelectionMovable=function(){const s=this.getPlugin("selection");return s&&s.enableSelectionMovable(),this},c.ke.prototype.disableSelectionMovable=function(){const s=this.getPlugin("selection");return s&&s.disableSelectionMovable(),this},c.ke.prototype.toggleSelectionMovable=function(s){const o=this.getPlugin("selection");return o&&o.toggleSelectionMovable(s),this},c.ke.prototype.isRubberbandEnabled=function(){const s=this.getPlugin("selection");return!!s&&s.isRubberbandEnabled()},c.ke.prototype.enableRubberband=function(){const s=this.getPlugin("selection");return s&&s.enableRubberband(),this},c.ke.prototype.disableRubberband=function(){const s=this.getPlugin("selection");return s&&s.disableRubberband(),this},c.ke.prototype.toggleRubberband=function(s){const o=this.getPlugin("selection");return o&&o.toggleRubberband(s),this},c.ke.prototype.isStrictRubberband=function(){const s=this.getPlugin("selection");return!!s&&s.isStrictRubberband()},c.ke.prototype.enableStrictRubberband=function(){const s=this.getPlugin("selection");return s&&s.enableStrictRubberband(),this},c.ke.prototype.disableStrictRubberband=function(){const s=this.getPlugin("selection");return s&&s.disableStrictRubberband(),this},c.ke.prototype.toggleStrictRubberband=function(s){const o=this.getPlugin("selection");return o&&o.toggleStrictRubberband(s),this},c.ke.prototype.setRubberbandModifiers=function(s){const o=this.getPlugin("selection");return o&&o.setRubberbandModifiers(s),this},c.ke.prototype.setSelectionFilter=function(s){const o=this.getPlugin("selection");return o&&o.setSelectionFilter(s),this},c.ke.prototype.setSelectionDisplayContent=function(s){const o=this.getPlugin("selection");return o&&o.setSelectionDisplayContent(s),this},c.ke.prototype.isSelectionEmpty=function(){const s=this.getPlugin("selection");return!s||s.isEmpty()},c.ke.prototype.cleanSelection=function(s){const o=this.getPlugin("selection");return o&&o.clean(s),this},c.ke.prototype.resetSelection=function(s,o){const e=this.getPlugin("selection");return e&&e.reset(s,o),this},c.ke.prototype.getSelectedCells=function(){const s=this.getPlugin("selection");return s?s.getSelectedCells():[]},c.ke.prototype.getSelectedCellCount=function(){const s=this.getPlugin("selection");return s?s.getSelectedCellCount():0},c.ke.prototype.isSelected=function(s){const o=this.getPlugin("selection");return!!o&&o.isSelected(s)},c.ke.prototype.select=function(s,o){const e=this.getPlugin("selection");return e&&e.select(s,o),this},c.ke.prototype.unselect=function(s,o){const e=this.getPlugin("selection");return e&&e.unselect(s,o),this};class Mt extends c.Nb{get rubberbandDisabled(){return!0!==this.options.enabled||!0!==this.options.rubberband}get disabled(){return!0!==this.options.enabled}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(o={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Object.assign(Object.assign({enabled:!0},Mt.defaultOptions),o),c.H.ensure(this.name,".x6-widget-selection {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n")}init(o){this.graph=o,this.selectionImpl=new Ne(Object.assign(Object.assign({},this.options),{graph:o})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(o){return null!=o?o!==this.isEnabled()&&(o?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(o){return null!=o?o!==this.isMultipleSelection()&&(o?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return!1!==this.options.movable}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(o){return null!=o?o!==this.isSelectionMovable()&&(o?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(o){return null!=o?o!==this.isRubberbandEnabled()&&(o?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return!0===this.selectionImpl.options.strict}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(o){return null!=o?o!==this.isStrictRubberband()&&(o?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(o){this.setModifiers(o)}setSelectionFilter(o){return this.setFilter(o),this}setSelectionDisplayContent(o){return this.setContent(o),this}isEmpty(){return this.length<=0}clean(o={}){return this.selectionImpl.clean(o),this}reset(o,e={}){return this.selectionImpl.reset(o?this.getCells(o):[],e),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(o){return this.selectionImpl.isSelected(o)}select(o,e={}){const n=this.getCells(o);return n.length&&(this.isMultiple()?this.selectionImpl.select(n,e):this.reset(n.slice(0,1),e)),this}unselect(o,e={}){return this.selectionImpl.unselect(this.getCells(o),e),this}setup(){this.selectionImpl.on("*",(o,e)=>{this.trigger(o,e),this.graph.trigger(o,e)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:o}){if(!this.allowBlankMouseDown(o))return;const e=this.graph.panning.allowPanning(o,!0),n=this.graph.getPlugin("scroller"),i=n&&n.allowPanning(o,!0);(this.allowRubberband(o,!0)||this.allowRubberband(o)&&!i&&!e)&&this.startRubberband(o)}allowBlankMouseDown(o){const e=this.options.eventTypes;return e?.includes("leftMouseDown")&&0===o.button||e?.includes("mouseWheelDown")&&1===o.button}onBlankClick(){this.clean()}allowRubberband(o,e){return!this.rubberbandDisabled&&c.xH.isMatch(o,this.options.modifiers,e)}allowMultipleSelection(o){return this.isMultiple()&&c.xH.isMatch(o,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:o}){this.movedMap.set(o,!0)}onCellMouseUp({e:o,cell:e}){const n=this.options;let i=this.disabled;!i&&this.movedMap.has(e)&&(i=!1===n.selectCellOnMoved,i||(i=!1===n.selectNodeOnMoved&&e.isNode()),i||(i=!1===n.selectEdgeOnMoved&&e.isEdge())),i||(this.allowMultipleSelection(o)?this.unselectMap.has(e)?this.unselectMap.delete(e):this.isSelected(e)?this.unselect(e):this.select(e):this.reset(e)),this.movedMap.delete(e)}onBoxMouseDown({e:o,cell:e}){this.disabled||this.allowMultipleSelection(o)&&(this.unselect(e),this.unselectMap.set(e,!0))}getCells(o){return(Array.isArray(o)?o:[o]).map(e=>"string"==typeof e?this.graph.getCellById(e):e).filter(e=>null!=e)}startRubberband(o){return this.rubberbandDisabled||this.selectionImpl.startSelecting(o),this}isMultiple(){return!1!==this.options.multiple}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(o){return this.options.modifiers=o,this}setContent(o){return this.selectionImpl.setContent(o),this}setFilter(o){return this.selectionImpl.setFilter(o),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),c.H.clean(this.name)}}(function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)})([c.Nb.dispose()],Mt.prototype,"dispose",null),function(s){s.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null,eventTypes:["leftMouseDown","mouseWheelDown"]}}(Mt||(Mt={})),c.ke.prototype.toSVG=function(s,o){const e=this.getPlugin("export");e&&e.toSVG(s,o)},c.ke.prototype.toPNG=function(s,o){const e=this.getPlugin("export");e&&e.toPNG(s,o)},c.ke.prototype.toJPEG=function(s,o){const e=this.getPlugin("export");e&&e.toJPEG(s,o)},c.ke.prototype.exportPNG=function(s,o){const e=this.getPlugin("export");e&&e.exportPNG(s,o)},c.ke.prototype.exportJPEG=function(s,o){const e=this.getPlugin("export");e&&e.exportJPEG(s,o)},c.ke.prototype.exportSVG=function(s,o){const e=this.getPlugin("export");e&&e.exportSVG(s,o)};class Re extends c.Nb{constructor(){super(),this.name="export"}get view(){return this.graph.view}init(o){this.graph=o}exportPNG(o="chart",e={}){this.toPNG(n=>{c.B6.downloadDataUri(n,o)},e)}exportJPEG(o="chart",e={}){this.toPNG(n=>{c.B6.downloadDataUri(n,o)},e)}exportSVG(o="chart",e={}){this.toSVG(n=>{c.B6.downloadDataUri(c.B6.svgToDataUrl(n),o)},e)}toSVG(o,e={}){this.notify("before:export",e);const n=this.view.svg,i=c.Mi.create(n).clone();let r=i.node;const a=i.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),l=e.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),h=e.preserveDimensions;if(h){const u="boolean"==typeof h?l:h;i.attr({width:u.width,height:u.height})}if(i.removeAttribute("style").attr("viewBox",[l.x,l.y,l.width,l.height].join(" ")),a.removeAttribute("transform"),!1!==e.copyStyles){const u=n.ownerDocument,f=Array.from(n.querySelectorAll("*")),m=Array.from(r.querySelectorAll("*")),y=u.styleSheets.length,v=[];for(let z=y-1;z>=0;z-=1)v[z]=u.styleSheets[z],u.styleSheets[z].disabled=!0;const _={};f.forEach((z,T)=>{const x=window.getComputedStyle(z,null),M={};Object.keys(x).forEach(X=>{M[X]=x.getPropertyValue(X)}),_[T]=M}),y!==u.styleSheets.length&&v.forEach((z,T)=>{u.styleSheets[T]=z});for(let z=0;z<y;z+=1)u.styleSheets[z].disabled=!1;const k={};f.forEach((z,T)=>{const x=window.getComputedStyle(z,null),M=_[T],X={};Object.keys(x).forEach(L=>{!c.Dc.isNumber(L)&&x.getPropertyValue(L)!==M[L]&&(X[L]=x.getPropertyValue(L))}),k[T]=X}),m.forEach((z,T)=>{c.Jf.css(z,k[T])})}const d=e.stylesheet;if("string"==typeof d){const u=n.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(d);i.prepend(c.Mi.create("style",{type:"text/css"},[u]))}const p=()=>{const u=e.beforeSerialize;if("function"==typeof u){const m=c.eY.call(u,this.graph,r);m instanceof SVGSVGElement&&(r=m)}const f=(new XMLSerializer).serializeToString(r).replace(/&nbsp;/g,"\xa0");this.notify("after:export",e),o(f)};if(e.serializeImages){const u=i.find("image").map(f=>new Promise(m=>{const y=f.attr("xlink:href")||f.attr("href");c.B6.imageToDataUri(y,(v,_)=>{!v&&_&&f.attr("xlink:href",_),m()})}));Promise.all(u).then(p)}else p()}toDataURL(o,e){let n=e.viewBox||this.graph.getContentBBox();const i=c.Dc.normalizeSides(e.padding);e.width&&e.height&&(i.left+i.right>=e.width&&(i.left=i.right=0),i.top+i.bottom>=e.height&&(i.top=i.bottom=0));const r=new c.M_(-i.left,-i.top,i.left+i.right,i.top+i.bottom);e.width&&e.height&&r.scale((n.width+i.left+i.right)/e.width,(n.height+i.top+i.bottom)/e.height),n=c.M_.create(n).moveAndExpand(r);const a="number"==typeof e.width&&"number"==typeof e.height?{width:e.width,height:e.height}:n;let l=e.ratio?parseFloat(e.ratio):1;(!Number.isFinite(l)||0===l)&&(l=1);const h={width:Math.max(Math.round(a.width*l),1),height:Math.max(Math.round(a.height*l),1)};{const p=document.createElement("canvas"),u=p.getContext("2d");p.width=h.width,p.height=h.height;const f=h.width-1,m=h.height-1;u.fillStyle="rgb(1,1,1)",u.fillRect(f,m,1,1);const y=u.getImageData(f,m,1,1).data;if(1!==y[0]||1!==y[1]||1!==y[2])throw new Error("size exceeded")}const d=new Image;d.onload=()=>{const p=document.createElement("canvas");p.width=h.width,p.height=h.height;const u=p.getContext("2d");u.fillStyle=e.backgroundColor||"white",u.fillRect(0,0,h.width,h.height);try{u.drawImage(d,0,0,h.width,h.height);const f=p.toDataURL(e.type,e.quality);o(f)}catch{}},this.toSVG(p=>{d.src=`data:image/svg+xml,${encodeURIComponent(p)}`},Object.assign(Object.assign({},e),{viewBox:n,serializeImages:!0,preserveDimensions:Object.assign({},h)}))}toPNG(o,e={}){this.toDataURL(o,Object.assign(Object.assign({},e),{type:"image/png"}))}toJPEG(o,e={}){this.toDataURL(o,Object.assign(Object.assign({},e),{type:"image/jpeg"}))}notify(o,e){this.trigger(o,e),this.graph.trigger(o,e)}dispose(){this.off()}}!function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)}([c.Nb.dispose()],Re.prototype,"dispose",null);class xt extends c.Ss{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}get snapline(){return this.options.target.getPlugin("snapline")}constructor(o){super(),this.name="dnd",this.options=Object.assign(Object.assign({},xt.defaults),o),this.init()}init(){c.H.ensure(this.name,".x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n"),this.container=document.createElement("div"),c.Jf.addClass(this.container,this.prefixClassName("widget-dnd")),this.draggingGraph=new c.ke(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1,async:!1})),c.Jf.append(this.container,this.draggingGraph.container)}start(o,e){const n=e;n.preventDefault(),this.targetModel.startBatch("dnd"),c.Jf.addClass(this.container,"dragging"),c.Jf.appendTo(this.container,this.options.draggingContainer||document.body),this.sourceNode=o,this.prepareDragging(o,n.clientX,n.clientY);const i=this.updateNodePosition(n.clientX,n.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:n,node:o,cell:o,view:this.draggingView,x:i.x,y:i.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(xt.documentEvents,n.data)}isSnaplineEnabled(){return this.snapline&&this.snapline.isEnabled()}prepareDragging(o,e,n){const i=this.draggingGraph,r=i.model,a=this.options.getDragNode(o,{sourceNode:o,draggingGraph:i,targetGraph:this.targetGraph});a.position(0,0);let l=5;if(this.isSnaplineEnabled()&&(l+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const p=this.targetGraph.transform.getScale();i.scale(p.sx,p.sy),l*=Math.max(p.sx,p.sy)}else i.scale(1,1);this.clearDragging(),r.resetCells([a]);const h=i.findViewByCell(a);h.undelegateEvents(),h.cell.off("changed"),i.fitToContent({padding:l,allowNewOrigin:"any",useCellGeometry:!1});const d=h.getBBox();this.geometryBBox=h.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(d.getTopLeft()),this.draggingNode=a,this.draggingView=h,this.draggingBBox=a.getBBox(),this.padding=l,this.originOffset=this.updateGraphPosition(e,n)}updateGraphPosition(o,e){const n=document.body.scrollTop||document.documentElement.scrollTop,i=document.body.scrollLeft||document.documentElement.scrollLeft,r=this.delta,a=this.geometryBBox,l=this.padding||5,h={left:o-r.x-a.width/2-l+i,top:e-r.y-a.height/2-l+n};return this.draggingGraph&&c.Jf.css(this.container,{left:`${h.left}px`,top:`${h.top}px`}),h}updateNodePosition(o,e){const n=this.targetGraph.clientToLocal(o,e),i=this.draggingBBox;return n.x-=i.width/2,n.y-=i.height/2,this.draggingNode.position(n.x,n.y),n}snap({cell:o,current:e,options:n}){const i=o;if(n.snapped){const r=this.draggingBBox;i.position(r.x+n.tx,r.y+n.ty,{silent:!0}),this.draggingView.translate(),i.position(e.x,e.y,{silent:!0}),this.snapOffset={x:n.tx,y:n.ty}}else this.snapOffset=null}onDragging(o){const e=this.draggingView;if(e){o.preventDefault();const n=this.normalizeEvent(o),i=n.clientX,r=n.clientY;this.updateGraphPosition(i,r);const a=this.updateNodePosition(i,r),l=this.targetGraph.options.embedding.enabled,h=(l||this.isSnaplineEnabled())&&this.isInsideValidArea({x:i,y:r});if(l){e.setEventData(n,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const d=e.getEventData(n);h?e.processEmbedding(n,d):e.clearEmbedding(d),this.candidateEmbedView=d.candidateEmbedView}this.isSnaplineEnabled()&&(h?this.snapline.snapOnMoving({e:n,view:e,x:a.x,y:a.y}):this.snapline.hide())}}onDragEnd(o){const e=this.draggingNode;if(e){const n=this.normalizeEvent(o),i=this.draggingView,r=this.draggingBBox,a=this.snapOffset;let l=r.x,h=r.y;a&&(l+=a.x,h+=a.y),e.position(l,h,{silent:!0});const d=this.drop(e,{x:n.clientX,y:n.clientY}),p=u=>{u?(this.onDropped(e),this.targetGraph.options.embedding.enabled&&i&&(i.setEventData(n,{cell:u,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),i.finalizeEmbedding(n,i.getEventData(n)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};c.eY.isAsync(d)?(this.undelegateDocumentEvents(),d.then(p)):p(d)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(o){this.draggingNode===o&&(this.clearDragging(),c.Jf.removeClass(this.container,"dragging"),c.Jf.remove(this.container))}onDropInvalid(){const o=this.draggingNode;o&&this.onDropped(o)}isInsideValidArea(o){let e,n=null;const i=this.targetGraph,r=this.targetScroller;this.options.dndContainer&&(n=this.getDropArea(this.options.dndContainer));const a=n&&n.containsPoint(o);if(r)if(r.options.autoResize)e=this.getDropArea(r.container);else{const l=this.getDropArea(r.container);e=this.getDropArea(i.container).intersectsWithRect(l)}else e=this.getDropArea(i.container);return!a&&e&&e.containsPoint(o)}getDropArea(o){const e=c.Jf.offset(o),n=document.body.scrollTop||document.documentElement.scrollTop,i=document.body.scrollLeft||document.documentElement.scrollLeft;return c.M_.create({x:e.left+parseInt(c.Jf.css(o,"border-left-width"),10)-i,y:e.top+parseInt(c.Jf.css(o,"border-top-width"),10)-n,width:o.clientWidth,height:o.clientHeight})}drop(o,e){if(this.isInsideValidArea(e)){const n=this.targetGraph,i=n.model,r=n.clientToLocal(e),a=this.sourceNode,l=this.options.getDropNode(o,{sourceNode:a,draggingNode:o,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),h=l.getBBox();r.x+=h.x-h.width/2,r.y+=h.y-h.height/2;const d=this.snapOffset?1:n.getGridSize();l.position(c.fZ.snapToGrid(r.x,d),c.fZ.snapToGrid(r.y,d)),l.removeZIndex();const p=this.options.validateNode,u=!p||p(l,{sourceNode:a,draggingNode:o,droppingNode:l,targetGraph:n,draggingGraph:this.draggingGraph});return"boolean"==typeof u?u?(i.addCell(l,{stencil:this.cid}),l):null:c.eY.toDeferredBoolean(u).then(f=>f?(i.addCell(l,{stencil:this.cid}),l):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove(),c.H.clean(this.name)}}(function(s,o,e,n){var a,i=arguments.length,r=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(s,o,e,n);else for(var l=s.length-1;l>=0;l--)(a=s[l])&&(r=(i<3?a(r):i>3?a(o,e,r):a(o,e))||r);i>3&&r&&Object.defineProperty(o,e,r)})([c.Ss.dispose()],xt.prototype,"dispose",null),function(s){s.defaults={getDragNode:o=>o.clone(),getDropNode:o=>o.clone()},s.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(xt||(xt={}));var On=b(3179),Vn=b(6504);let Xn=(()=>{class s{set page(e){this._page=e,this.render(e)}get page(){return this._page}constructor(e,n,i,r){this.cs=e,this.ns=n,this.injector=i,this.graph=new c.ke({container:r.nativeElement,background:{},grid:{size:10,visible:JSON.parse(localStorage.getItem("nuwa-editor-grid")||"true"),type:"fixedDot"}}),this.graph.use(new Re),this.graph.use(new Be({enabled:!0})),this.graph.use(new yt({resizing:!0,rotating:!0})),this.graph.use(new Ae({enabled:!0})),this.graph.use(new Ee({enabled:!0})),this.graph.use(new Pt({enabled:!0})),this.graph.use(new Mt({enabled:!0,multiple:!0,rubberband:!0,rubberEdge:!0,movable:!0,strict:!0,showNodeSelectionBox:!0})),this.dnd=new xt({target:this.graph}),this.graph.bindKey("ctrl+s",a=>{this.graph.exportPNG(),a.preventDefault()}),this.graph.bindKey("ctrl+z",()=>this.graph.undo()),this.graph.bindKey("ctrl+y",()=>this.graph.redo()),this.graph.bindKey("ctrl+x",()=>this.graph.cut(this.graph.getSelectedCells(),{deep:!0})),this.graph.bindKey("ctrl+c",()=>this.graph.copy(this.graph.getSelectedCells(),{deep:!0})),this.graph.bindKey("ctrl+v",()=>this.graph.resetSelection(this.graph.paste())),this.graph.bindKey("backspace",()=>this.graph.getSelectedCells().forEach(a=>a.remove())),this.graph.bindKey("delete",()=>this.graph.getSelectedCells().forEach(a=>a.remove())),this.graph.bindKey("escape",()=>{this.drawingEdge&&(this.drawingEdge=void 0)}),this.graph.container.onclick=a=>{this.drawingEdgeComponent?(this.drawingEdge=this.graph.addEdge({shape:this.drawingEdgeComponent.id,source:[a.offsetX,a.offsetY],target:[a.offsetX+10,a.offsetY+10],...this.drawingEdgeComponent.metadata}),this.drawingEdgeComponent=void 0):this.drawingEdge=void 0},this.graph.container.onmousemove=a=>{this.drawingEdge&&this.drawingEdge.setTerminal("target",{x:a.offsetX,y:a.offsetY})},this.graph.on("edge:selected",c.eY.debounce(({edge:a})=>{a.addTools([{name:"source-arrowhead"},{name:"target-arrowhead"},{name:"vertices"},{name:"segments"}])})),this.graph.on("edge:unselected",({cell:a})=>{a.removeTools()})}render(e){e.content?.cells?.forEach(n=>{this.cs.Get(n.shape)}),this.graph.drawBackground({color:e.background_color,image:e.background_image}),this.graph.fromJSON(e.content)}drawEdge(e){this.drawingEdgeComponent=void 0,this.checkRegister(e)&&"line"==e.type&&(this.drawingEdgeComponent=e)}drawNode(e,n){let i;if(!this.checkRegister(n))return;if("line"==n.type)return void this.ns.error("\u9519\u8bef","\u7ebf\u6761\u4e0d\u80fd\u62d6\u653e");let r={};n.bindings?.forEach(a=>r[a.name]=a.default),i=this.graph.createNode({shape:n.id,...n.metadata,data:r}),this.dnd.start(i,e)}checkRegister(e){if(e.registered||e.internal)return!0;switch(e.registered=!0,e.type){case"line":if(e.extends)return c.ke.registerEdge(e.id,e.extends),!0;this.ns.error("\u7f16\u8bd1\u9519\u8bef",e.id+" "+e.name+"\u7f3a\u5c11extends");break;case"shape":if(e.extends)return c.ke.registerNode(e.id,e.extends),!0;this.ns.error("\u7f16\u8bd1\u9519\u8bef",e.id+" "+e.name+"\u7f3a\u5c11extends");break;case"html":c.yp.g3.register({shape:e.id,width:e.metadata?.width||100,height:e.metadata?.height||100,html:e.html});break;case"angular":if(e.content)return(0,On.kz)({shape:e.id,width:e.metadata?.width||100,height:e.metadata?.height||100,content:e.content,injector:this.injector}),e.registered=!0,!0;this.ns.error("\u7f16\u8bd1\u9519\u8bef",e.id+" "+e.name+"\u7f3a\u5c11content")}return!1}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(pt.b),t.rXU(Vn.xY),t.rXU(t.zZn),t.rXU(t.aKT))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-canvas"]],inputs:{page:"page"},decls:0,vars:0,template:function(n,i){},styles:["[_nghost-%COMP%]{display:block;position:relative;box-shadow:#a8a8a8 2px 2px 10px;background-color:#fff;width:100%;height:100%}"]})}return s})();var Qt=b(3053),te=b(7529),ut=b(8927),ee=b(1011);let Yn=(()=>{class s{set project(e){e&&this.group.patchValue(e)}constructor(e){this.fb=e,this.build()}build(e){this.group=this.fb.group({id:[(e=e||{}).id||"",[A.k0.required]],name:[e.name||"",[A.k0.required]],desc:[e.desc||"",[]],width:[e.width||400,[A.k0.required]],height:[e.height||400,[A.k0.required]]})}setData(e){const n=this.group.value;for(const i in n)n[i]=e[i];this.group.setValue(n)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(A.ok))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-project-setting"]],inputs:{project:"project"},decls:26,vars:11,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","id",3,"nzSpan"],["nzErrorTip","ID\u4e0d\u53ef\u4e3a\u7a7a!",3,"nzSpan"],["nz-input","","name","id","formControlName","id"],["nzRequired","","nzFor","name",3,"nzSpan"],["nzErrorTip","\u540d\u79f0\u4e0d\u53ef\u4e3a\u7a7a!",3,"nzSpan"],["nz-input","","name","name","formControlName","name"],["nzFor","width",3,"nzSpan"],[3,"nzSpan"],["formControlName","width"],["nzFor","height",3,"nzSpan"],["formControlName","height"],["nzFor","desc",3,"nzSpan"],["nz-input","","name","desc","formControlName","desc"]],template:function(n,i){1&n&&(t.j41(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),t.EFF(3,"ID"),t.k0s(),t.j41(4,"nz-form-control",2),t.nrm(5,"input",3),t.k0s()(),t.j41(6,"nz-form-item")(7,"nz-form-label",4),t.EFF(8,"\u540d\u79f0"),t.k0s(),t.j41(9,"nz-form-control",5),t.nrm(10,"input",6),t.k0s()(),t.j41(11,"nz-form-item")(12,"nz-form-label",7),t.EFF(13,"\u5bbd\u5ea6"),t.k0s(),t.j41(14,"nz-form-control",8),t.nrm(15,"nz-input-number",9),t.k0s()(),t.j41(16,"nz-form-item")(17,"nz-form-label",10),t.EFF(18,"\u9ad8\u5ea6"),t.k0s(),t.j41(19,"nz-form-control",8),t.nrm(20,"nz-input-number",11),t.k0s()(),t.j41(21,"nz-form-item")(22,"nz-form-label",12),t.EFF(23,"\u8bf4\u660e"),t.k0s(),t.j41(24,"nz-form-control",8),t.nrm(25,"input",13),t.k0s()()()),2&n&&(t.Y8G("formGroup",i.group),t.R7$(2),t.Y8G("nzSpan",5),t.R7$(2),t.Y8G("nzSpan",16),t.R7$(3),t.Y8G("nzSpan",5),t.R7$(2),t.Y8G("nzSpan",16),t.R7$(3),t.Y8G("nzSpan",5),t.R7$(2),t.Y8G("nzSpan",16),t.R7$(3),t.Y8G("nzSpan",5),t.R7$(2),t.Y8G("nzSpan",16),t.R7$(3),t.Y8G("nzSpan",5),t.R7$(2),t.Y8G("nzSpan",16))},dependencies:[A.qT,A.me,A.BC,A.cb,A.j4,A.JD,te.Uq,te.e,ut.CA,ut.Ls,ut.Mo,ut.zS,ee.Sy,$t.FG]})}return s})();function Hn(s,o){if(1&s&&(t.j41(0,"p")(1,"a",2),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&s){const e=o.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name),t.R7$(),t.SpI(" ",e.email,"\n")}}let Ln=(()=>{class s{constructor(){this.contributors=[{name:"\u6770\u795e",url:"https://github.com/zgwit",email:"jason@zgwit.com"},{name:"EnTrouble",url:"https://github.com/EnTrouble",email:"hutianqi@zgwit.cn"}]}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-about"]],decls:6,vars:1,consts:[["href","https://github.com/antvis/X6"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"]],template:function(n,i){1&n&&(t.j41(0,"p"),t.EFF(1,"\u7269\u8054\u5927\u5e08Web\u7ec4\u6001\u63d2\u4ef6\uff0c\u57fa\u4e8e\u963f\u91cc"),t.j41(2,"a",0),t.EFF(3,"AntV-X6"),t.k0s(),t.EFF(4,"\u5b9e\u73b0\uff0c\u5e95\u5c42\u4f7f\u7528Canvas\u548cSVG\u6280\u672f\uff0c\u8d21\u732e\u8005\u540d\u5355\uff1a"),t.k0s(),t.DNE(5,Hn,4,3,"p",1)),2&n&&(t.R7$(5),t.Y8G("ngForOf",i.contributors))},dependencies:[S.Sq]})}return s})();function Un(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.JRh(e.nzText)}}function Wn(s,o){if(1&s&&(t.j41(0,"span",0),t.DNE(1,Un,2,1,"ng-container",1),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzText)}}let Pe=(()=>{class s{constructor(){this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-divider"]],hostAttrs:[1,"ant-divider"],hostVars:16,hostBindings:function(n,i){2&n&&t.AVh("ant-divider-horizontal","horizontal"===i.nzType)("ant-divider-vertical","vertical"===i.nzType)("ant-divider-with-text",i.nzText)("ant-divider-plain",i.nzPlain)("ant-divider-with-text-left",i.nzText&&"left"===i.nzOrientation)("ant-divider-with-text-right",i.nzText&&"right"===i.nzOrientation)("ant-divider-with-text-center",i.nzText&&"center"===i.nzOrientation)("ant-divider-dashed",i.nzDashed)},inputs:{nzText:"nzText",nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:"nzDashed",nzPlain:"nzPlain"},exportAs:["nzDivider"],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(n,i){1&n&&t.DNE(0,Wn,2,1,"span",0),2&n&&t.vxM(0,i.nzText?0:-1)},dependencies:[q.C,q.m],encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,R.H3)()],s.prototype,"nzDashed",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzPlain",void 0),s})(),Kn=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[Pe]})}return s})();var pe=b(513),Me=b(6389),ue=b(1997),kt=b(1868),wt=b(2602);const Jn=()=>({standalone:!0});let qn=(()=>{class s{constructor(e,n,i,r){this.cs=e,this.modal=n,this.msg=i,this.viewContainerRef=r,this.onSave=new t.bkB,this.scale=1,this.scaleChange=new t.bkB,this.showGrid=JSON.parse(localStorage.getItem("nuwa-editor-grid")||"true")}handleSave(){this.onSave.emit()}handleExport(e){switch(console.log(this.graph),e){case"SVG":this.graph.exportSVG();break;case"PNG":this.graph.exportPNG();break;case"JPEG":this.graph.exportJPEG();break;case"file":this.savefiles(this.graph.toJSON(),Date.now()+"")}}handleUndo(){this.graph.undo()}handleRedo(){this.graph.redo()}handleCut(){this.graph.getSelectedCells().forEach(e=>e.removeTools()),this.graph.cut(this.graph.getSelectedCells(),{deep:!0})}handleCopy(){this.graph.getSelectedCells().forEach(e=>e.removeTools()),this.graph.copy(this.graph.getSelectedCells(),{deep:!0})}handlePaste(){this.graph.paste()}handleDelete(){this.graph.getSelectedCells().forEach(e=>e.remove())}handleAlignLeft(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let i=n,r=i.position();void 0===e?e=r.x:(r.x=e,i.setPosition(r))})}handleAlignCenter(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let i=n,r=i.position(),a=i.size();void 0===e?e=r.x+.5*a.width:(r.x=e-.5*a.width,i.setPosition(r))})}handleAlignRight(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let i=n,r=i.position(),a=i.size();void 0===e?e=r.x+a.width:(r.x=e-a.width,i.setPosition(r))})}handleValignTop(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let i=n,r=i.position();void 0===e?e=r.y:(r.y=e,i.setPosition(r))})}handleValignMiddle(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let i=n,r=i.position(),a=i.size();void 0===e?e=r.y+.5*a.height:(r.y=e-.5*a.height,i.setPosition(r))})}handleValignBottom(){let e;this.graph.getSelectedCells().forEach(n=>{if(!n.isNode())return;let i=n,r=i.position(),a=i.size();void 0===e?e=r.y+a.height:(r.y=e-a.height,i.setPosition(r))})}handleMoveTop(){this.graph.getSelectedCells().forEach(e=>{e.toFront()})}handleMoveUp(){const e=this.graph.getSelectedCells()[0];e.setZIndex(Number(e.getZIndex()||0)+1)}handleMoveDown(){const e=this.graph.getSelectedCells()[0];e.setZIndex(Number(e.getZIndex()||0)-1)}handleMoveBottom(){this.graph.getSelectedCells().forEach(e=>{e.toBack()})}handleGroup(){let e=this.graph.getSelectedCells().map(r=>r.getBBox()),n={x:e.reduce((r,a)=>r.x<a.x?r:a).x-10,y:e.reduce((r,a)=>r.y<a.y?r:a).y-10,right:e.reduce((r,a)=>r.right>a.right?r:a).right+10,bottom:e.reduce((r,a)=>r.bottom>a.bottom?r:a).bottom+10};console.log("group",n),this.cs.Get("group");let i=this.graph.addNode({shape:"group",x:n.x,y:n.y,width:n.right-n.x,height:n.bottom-n.y});this.graph.getSelectedCells().forEach(r=>{r.setZIndex(i.zIndex+r.zIndex),i.addChild(r)})}handleUngroup(){this.graph.getSelectedCells().forEach(e=>{"group"==e.shape&&(e.getChildren()?.forEach(n=>{n.setParent(null)}),e.setChildren(null),e.remove())})}isGroup(){return 1===this.graph.getSelectedCellCount()&&this.graph.getSelectedCells()[0].getChildCount()>0}handleGrid(){this.showGrid?this.graph.hideGrid():this.graph.showGrid(),this.showGrid=!this.showGrid,localStorage.setItem("nuwa-editor-grid",JSON.stringify(this.showGrid))}settingProject(){const e=this.modal.create({nzTitle:"\u7f16\u8f91\u5de5\u7a0b\u4fe1\u606f",nzContent:Yn,nzData:{project:this.project},nzViewContainerRef:this.viewContainerRef,nzFooter:[{label:"\u53d6\u6d88",onClick:()=>e.destroy()},{label:"\u4fdd\u5b58",type:"primary",onClick:n=>{const i=n.group.value;Object.assign(this.project,i),console.log("project setting",i),e.destroy()}}]})}savefiles(e,n){const i=window.URL||window.webkitURL||window,r=new Blob([JSON.stringify(e)]),a=document.createElement("a");a.href=i.createObjectURL(r),a.download=n,a.click()}handleScale(e){this.scaleChange.emit(e),this.graph.zoomTo(e)}about(){this.modal.create({nzTitle:"\u5173\u4e8e",nzContent:Ln,nzFooter:null})}handleImport(){}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(pt.b),t.rXU(Qt.N_),t.rXU(bt.xh),t.rXU(t.c1b))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-toolbar"]],inputs:{project:"project",graph:"graph",scale:"scale"},outputs:{onSave:"onSave",scaleChange:"scaleChange"},features:[t.Jv_([bt.xh,Qt.N_])],decls:75,vars:30,consts:[["exportDropDownMenu","nzDropdownMenu"],["nz-button","",3,"click"],["nz-icon","","nzType","question-circle","title","\u5173\u4e8e"],["nzType","vertical"],["nz-button","","nz-dropdown","","title","\u5bfc\u51fa",3,"nzDropdownMenu"],["nz-icon","","nzType","profile"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-divider",""],["nz-button","","title","\u4fdd\u5b58",3,"click"],["nz-icon","","nzType","save"],["nz-icon","","nzType","table","title","\u663e\u793a\u7f51\u683c"],["nz-icon","","nzType","setting","title","\u5de5\u7a0b\u8bbe\u7f6e"],["nz-button","","title","\u64a4\u9500(ctrl+z)",3,"click","disabled"],["nz-icon","","nzType","undo"],["nz-button","","title","\u91cd\u505a(ctrl+y)",3,"click","disabled"],["nz-icon","","nzType","redo"],["nz-button","","title","\u526a\u5207(ctrl+x)",3,"click","disabled"],["nz-icon","","nzType","scissor"],["nz-button","","title","\u590d\u5236(ctrl+c)",3,"click","disabled"],["nz-icon","","nzType","copy"],["nz-button","","title","\u7c98\u8d34(ctrl+v)",3,"click","disabled"],["nz-icon","","nzType","snippets"],["nz-button","","title","\u5220\u9664",3,"click","disabled"],["nz-icon","","nzType","delete"],["nz-button","",3,"click","disabled"],["nz-icon","","nzType","align-left","title","\u5de6\u5bf9\u9f50"],["nz-icon","","nzType","align-center","title","\u5c45\u4e2d\u5bf9\u9f50"],["nz-icon","","nzType","align-right","title","\u53f3\u5bf9\u9f50"],["nz-icon","","nzType","vertical-align-top","title","\u4e0a\u5bf9\u9f50"],["nz-icon","","nzType","vertical-align-middle","title","\u5c45\u4e2d\u5bf9\u9f50"],["nz-icon","","nzType","vertical-align-bottom","title","\u4e0b\u5bf9\u9f50"],["nz-icon","","nzType","vertical-right","title","\u7f6e\u9876",3,"nzRotate"],["nz-icon","","nzType","up","title","\u4e0a\u79fb\u4e00\u5c42"],["nz-icon","","nzType","down","title","\u4e0b\u79fb\u4e00\u5c42"],["nz-icon","","nzType","vertical-left","title","\u7f6e\u5e95",3,"nzRotate"],["nz-icon","","nzType","group","title","\u7ec4\u5408"],["nz-icon","","nzType","ungroup","title","\u89e3\u9664\u7ec4\u5408"],[3,"ngModelChange","ngModel","ngModelOptions"],["nzLabel","25%",3,"nzValue"],["nzLabel","50%",3,"nzValue"],["nzLabel","75%",3,"nzValue"],["nzLabel","100%",3,"nzValue"],["nzLabel","200%",3,"nzValue"],["nzLabel","500%",3,"nzValue"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"a",1),t.bIt("click",function(){return t.eBV(r),t.Njj(i.about())}),t.nrm(1,"i",2),t.k0s(),t.nrm(2,"nz-divider",3),t.j41(3,"a",4),t.nrm(4,"i",5),t.k0s(),t.j41(5,"nz-dropdown-menu",null,0)(7,"ul",6)(8,"li",7),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleExport("SVG"))}),t.EFF(9,"\u5bfc\u51faSVG"),t.k0s(),t.j41(10,"li",7),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleExport("PNG"))}),t.EFF(11,"\u5bfc\u51faPNG"),t.k0s(),t.j41(12,"li",7),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleExport("JPEG"))}),t.EFF(13,"\u5bfc\u51faJPEG"),t.k0s(),t.nrm(14,"li",8),t.j41(15,"li",7),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleExport("file"))}),t.EFF(16,"\u5bfc\u51faJSON"),t.k0s(),t.j41(17,"li",7),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleImport())}),t.EFF(18,"\u5bfc\u5165JSON"),t.k0s()()(),t.j41(19,"a",9),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleSave())}),t.nrm(20,"i",10),t.k0s(),t.j41(21,"a",1),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleGrid())}),t.nrm(22,"i",11),t.k0s(),t.j41(23,"a",1),t.bIt("click",function(){return t.eBV(r),t.Njj(i.settingProject())}),t.nrm(24,"i",12),t.k0s(),t.nrm(25,"nz-divider",3),t.j41(26,"a",13),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleUndo())}),t.nrm(27,"i",14),t.k0s(),t.j41(28,"a",15),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleRedo())}),t.nrm(29,"i",16),t.k0s(),t.nrm(30,"nz-divider",3),t.j41(31,"a",17),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleCut())}),t.nrm(32,"i",18),t.k0s(),t.j41(33,"a",19),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleCopy())}),t.nrm(34,"i",20),t.k0s(),t.j41(35,"a",21),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handlePaste())}),t.nrm(36,"i",22),t.k0s(),t.j41(37,"a",23),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleDelete())}),t.nrm(38,"i",24),t.k0s(),t.nrm(39,"nz-divider",3),t.j41(40,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleAlignLeft())}),t.nrm(41,"i",26),t.k0s(),t.j41(42,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleAlignCenter())}),t.nrm(43,"i",27),t.k0s(),t.j41(44,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleAlignRight())}),t.nrm(45,"i",28),t.k0s(),t.nrm(46,"nz-divider",3),t.j41(47,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleValignTop())}),t.nrm(48,"i",29),t.k0s(),t.j41(49,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleValignMiddle())}),t.nrm(50,"i",30),t.k0s(),t.j41(51,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleValignBottom())}),t.nrm(52,"i",31),t.k0s(),t.nrm(53,"nz-divider",3),t.j41(54,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleMoveTop())}),t.nrm(55,"i",32),t.k0s(),t.j41(56,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleMoveUp())}),t.nrm(57,"i",33),t.k0s(),t.j41(58,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleMoveDown())}),t.nrm(59,"i",34),t.k0s(),t.j41(60,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleMoveBottom())}),t.nrm(61,"i",35),t.k0s(),t.nrm(62,"nz-divider",3),t.j41(63,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleGroup())}),t.nrm(64,"i",36),t.k0s(),t.j41(65,"a",25),t.bIt("click",function(){return t.eBV(r),t.Njj(i.handleUngroup())}),t.nrm(66,"i",37),t.k0s(),t.nrm(67,"nz-divider",3),t.j41(68,"nz-select",38),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(i.handleScale(l))}),t.nrm(69,"nz-option",39)(70,"nz-option",40)(71,"nz-option",41)(72,"nz-option",42)(73,"nz-option",43)(74,"nz-option",44),t.k0s()}if(2&n){const r=t.sdS(6);t.R7$(3),t.Y8G("nzDropdownMenu",r),t.R7$(23),t.Y8G("disabled",!i.graph.canUndo()),t.R7$(2),t.Y8G("disabled",!i.graph.canRedo()),t.R7$(3),t.Y8G("disabled",!i.graph.getSelectedCellCount()),t.R7$(2),t.Y8G("disabled",!i.graph.getSelectedCellCount()),t.R7$(2),t.Y8G("disabled",!i.graph.getCellsInClipboard().length),t.R7$(2),t.Y8G("disabled",!i.graph.getSelectedCellCount()),t.R7$(3),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(2),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(2),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(3),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(2),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(2),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(3),t.Y8G("disabled",!i.graph.getSelectedCellCount()),t.R7$(),t.Y8G("nzRotate",90),t.R7$(),t.Y8G("disabled",1!=i.graph.getSelectedCellCount()),t.R7$(2),t.Y8G("disabled",1!=i.graph.getSelectedCellCount()),t.R7$(2),t.Y8G("disabled",!i.graph.getSelectedCellCount()),t.R7$(),t.Y8G("nzRotate",90),t.R7$(2),t.Y8G("disabled",i.graph.getSelectedCellCount()<2),t.R7$(2),t.Y8G("disabled",!i.isGroup()),t.R7$(3),t.Y8G("ngModel",i.scale)("ngModelOptions",t.lJ4(29,Jn)),t.R7$(),t.Y8G("nzValue",.25),t.R7$(),t.Y8G("nzValue",.5),t.R7$(),t.Y8G("nzValue",.75),t.R7$(),t.Y8G("nzValue",1),t.R7$(),t.Y8G("nzValue",2),t.R7$(),t.Y8G("nzValue",5)}},dependencies:[A.BC,A.vS,Y.Dn,Pe,pe.aO,Me.c,ue.ld,ue.WI,kt.jS,kt.CU,kt.sD,wt.j3,wt.G_,wt.wQ,wt.h4],styles:["[_nghost-%COMP%]{height:50px;display:flex;align-items:center;vertical-align:middle;padding:0 20px;border-bottom:1px solid #a8a8a8;background-color:#f0f0f0}a[_ngcontent-%COMP%]{padding:5px;margin:1px;cursor:pointer;text-decoration:none}a.disabled[_ngcontent-%COMP%]{color:gray;cursor:default}"]})}return s})();const Zn=["dialogPopup"],$n=["hueSlider"],Qn=["alphaSlider"];function ti(s,o){if(1&s&&t.nrm(0,"div"),2&s){const e=t.XpG();t.ZvI("arrow arrow-",e.cpUsePosition,""),t.xc7("left",e.cpArrowPosition)("top",e.arrowTop,"px")}}function ei(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",28),t.bIt("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onColorChange(i))})("dragStart",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onDragStart("saturation-lightness"))})("dragEnd",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onDragEnd("saturation-lightness"))}),t.nrm(1,"div",16),t.k0s()}if(2&s){const e=t.XpG();t.xc7("background-color",e.hueSliderColor),t.Y8G("rgX",1)("rgY",1),t.R7$(),t.xc7("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px")}}function ni(s,o){1&s&&(t.qSk(),t.j41(0,"svg",29),t.nrm(1,"path",30)(2,"path",31),t.k0s())}function ii(s,o){if(1&s){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAddPresetColor(i,r.selectedColor))}),t.EFF(1),t.k0s()}if(2&s){const e=t.XpG();t.HbH(e.cpAddColorButtonClass),t.Y8G("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),t.R7$(),t.SpI(" ",e.cpAddColorButtonText," ")}}function si(s,o){1&s&&t.nrm(0,"div",33)}function oi(s,o){if(1&s){const e=t.RV6();t.j41(0,"input",39),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAlphaInput(i))}),t.k0s()}if(2&s){const e=t.XpG(2);t.Y8G("rg",1)("value",null==e.cmykText?null:e.cmykText.a)}}function ri(s,o){1&s&&(t.j41(0,"div"),t.EFF(1,"A"),t.k0s())}function ai(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",34)(1,"div",35)(2,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onCyanInput(i))}),t.k0s(),t.j41(3,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onMagentaInput(i))}),t.k0s(),t.j41(4,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onYellowInput(i))}),t.k0s(),t.j41(5,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onBlackInput(i))}),t.k0s(),t.DNE(6,oi,1,2,"input",37),t.k0s(),t.j41(7,"div",35)(8,"div"),t.EFF(9,"C"),t.k0s(),t.j41(10,"div"),t.EFF(11,"M"),t.k0s(),t.j41(12,"div"),t.EFF(13,"Y"),t.k0s(),t.j41(14,"div"),t.EFF(15,"K"),t.k0s(),t.DNE(16,ri,2,0,"div",38),t.k0s()()}if(2&s){const e=t.XpG();t.xc7("display",3!==e.format?"none":"block"),t.R7$(2),t.Y8G("rg",100)("value",null==e.cmykText?null:e.cmykText.c),t.R7$(),t.Y8G("rg",100)("value",null==e.cmykText?null:e.cmykText.m),t.R7$(),t.Y8G("rg",100)("value",null==e.cmykText?null:e.cmykText.y),t.R7$(),t.Y8G("rg",100)("value",null==e.cmykText?null:e.cmykText.k),t.R7$(),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel),t.R7$(10),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel)}}function li(s,o){if(1&s){const e=t.RV6();t.j41(0,"input",39),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAlphaInput(i))}),t.k0s()}if(2&s){const e=t.XpG(2);t.Y8G("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function ci(s,o){1&s&&(t.j41(0,"div"),t.EFF(1,"A"),t.k0s())}function hi(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",40)(1,"div",35)(2,"input",41),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onHueInput(i))}),t.k0s(),t.j41(3,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onSaturationInput(i))}),t.k0s(),t.j41(4,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onLightnessInput(i))}),t.k0s(),t.DNE(5,li,1,2,"input",37),t.k0s(),t.j41(6,"div",35)(7,"div"),t.EFF(8,"H"),t.k0s(),t.j41(9,"div"),t.EFF(10,"S"),t.k0s(),t.j41(11,"div"),t.EFF(12,"L"),t.k0s(),t.DNE(13,ci,2,0,"div",38),t.k0s()()}if(2&s){const e=t.XpG();t.xc7("display",2!==e.format?"none":"block"),t.R7$(2),t.Y8G("rg",360)("value",null==e.hslaText?null:e.hslaText.h),t.R7$(),t.Y8G("rg",100)("value",null==e.hslaText?null:e.hslaText.s),t.R7$(),t.Y8G("rg",100)("value",null==e.hslaText?null:e.hslaText.l),t.R7$(),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel),t.R7$(8),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel)}}function di(s,o){if(1&s){const e=t.RV6();t.j41(0,"input",39),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAlphaInput(i))}),t.k0s()}if(2&s){const e=t.XpG(2);t.Y8G("rg",1)("value",null==e.rgbaText?null:e.rgbaText.a)}}function pi(s,o){1&s&&(t.j41(0,"div"),t.EFF(1,"A"),t.k0s())}function ui(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",42)(1,"div",35)(2,"input",43),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onRedInput(i))}),t.k0s(),t.j41(3,"input",43),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onGreenInput(i))}),t.k0s(),t.j41(4,"input",43),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onBlueInput(i))}),t.k0s(),t.DNE(5,di,1,2,"input",37),t.k0s(),t.j41(6,"div",35)(7,"div"),t.EFF(8,"R"),t.k0s(),t.j41(9,"div"),t.EFF(10,"G"),t.k0s(),t.j41(11,"div"),t.EFF(12,"B"),t.k0s(),t.DNE(13,pi,2,0,"div",38),t.k0s()()}if(2&s){const e=t.XpG();t.xc7("display",1!==e.format?"none":"block"),t.R7$(2),t.Y8G("rg",255)("value",null==e.rgbaText?null:e.rgbaText.r),t.R7$(),t.Y8G("rg",255)("value",null==e.rgbaText?null:e.rgbaText.g),t.R7$(),t.Y8G("rg",255)("value",null==e.rgbaText?null:e.rgbaText.b),t.R7$(),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel),t.R7$(8),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel)}}function gi(s,o){if(1&s){const e=t.RV6();t.j41(0,"input",39),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAlphaInput(i))}),t.k0s()}if(2&s){const e=t.XpG(2);t.Y8G("rg",1)("value",e.hexAlpha)}}function fi(s,o){1&s&&(t.j41(0,"div"),t.EFF(1,"A"),t.k0s())}function mi(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",44)(1,"div",35)(2,"input",45),t.bIt("blur",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onHexInput(null))})("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onHexInput(i))}),t.k0s(),t.DNE(3,gi,1,2,"input",37),t.k0s(),t.j41(4,"div",35)(5,"div"),t.EFF(6,"Hex"),t.k0s(),t.DNE(7,fi,2,0,"div",38),t.k0s()()}if(2&s){const e=t.XpG();t.xc7("display",0!==e.format?"none":"block"),t.AVh("hex-alpha","forced"===e.cpAlphaChannel),t.R7$(2),t.Y8G("value",e.hexText),t.R7$(),t.Y8G("ngIf","forced"===e.cpAlphaChannel),t.R7$(4),t.Y8G("ngIf","forced"===e.cpAlphaChannel)}}function bi(s,o){if(1&s){const e=t.RV6();t.j41(0,"input",39),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAlphaInput(i))}),t.k0s()}if(2&s){const e=t.XpG(2);t.Y8G("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function Ci(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",46)(1,"div",35)(2,"input",36),t.bIt("keyup.enter",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onAcceptColor(i))})("newValue",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.onValueInput(i))}),t.k0s(),t.DNE(3,bi,1,2,"input",37),t.k0s(),t.j41(4,"div",35)(5,"div"),t.EFF(6,"V"),t.k0s(),t.j41(7,"div"),t.EFF(8,"A"),t.k0s()()()}if(2&s){const e=t.XpG();t.R7$(2),t.Y8G("rg",100)("value",null==e.hslaText?null:e.hslaText.l),t.R7$(),t.Y8G("ngIf","disabled"!==e.cpAlphaChannel)}}function vi(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",47)(1,"span",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onFormatToggle(-1))}),t.k0s(),t.j41(2,"span",48),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onFormatToggle(1))}),t.k0s()()}}function _i(s,o){if(1&s){const e=t.RV6();t.j41(0,"span",55),t.bIt("click",function(i){t.eBV(e);const r=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.onRemovePresetColor(i,r))}),t.k0s()}if(2&s){const e=t.XpG(4);t.HbH(e.cpRemoveColorButtonClass)}}function zi(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",53),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.setColorFromString(i))}),t.DNE(1,_i,1,3,"span",54),t.k0s()}if(2&s){const e=o.$implicit,n=t.XpG(3);t.xc7("background-color",e),t.R7$(),t.Y8G("ngIf",n.cpAddColorButton)}}function yi(s,o){if(1&s&&(t.j41(0,"div"),t.DNE(1,zi,2,3,"div",52),t.k0s()),2&s){const e=t.XpG(2);t.HbH(e.cpPresetColorsClass),t.R7$(),t.Y8G("ngForOf",e.cpPresetColors)}}function xi(s,o){if(1&s&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2);t.HbH(e.cpPresetEmptyMessageClass),t.R7$(),t.JRh(e.cpPresetEmptyMessage)}}function ki(s,o){if(1&s&&(t.j41(0,"div",49),t.nrm(1,"hr"),t.j41(2,"div",50),t.EFF(3),t.k0s(),t.DNE(4,yi,2,4,"div",51)(5,xi,2,4,"div",51),t.k0s()),2&s){const e=t.XpG();t.R7$(3),t.JRh(e.cpPresetLabel),t.R7$(),t.Y8G("ngIf",null==e.cpPresetColors?null:e.cpPresetColors.length),t.R7$(),t.Y8G("ngIf",!(null!=e.cpPresetColors&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function wi(s,o){if(1&s){const e=t.RV6();t.j41(0,"button",58),t.bIt("click",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onCancelColor(i))}),t.EFF(1),t.k0s()}if(2&s){const e=t.XpG(2);t.HbH(e.cpCancelButtonClass),t.R7$(),t.JRh(e.cpCancelButtonText)}}function Si(s,o){if(1&s){const e=t.RV6();t.j41(0,"button",58),t.bIt("click",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onAcceptColor(i))}),t.EFF(1),t.k0s()}if(2&s){const e=t.XpG(2);t.HbH(e.cpOKButtonClass),t.R7$(),t.JRh(e.cpOKButtonText)}}function Ti(s,o){if(1&s&&(t.j41(0,"div",56),t.DNE(1,wi,2,4,"button",57)(2,Si,2,4,"button",57),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.cpCancelButton),t.R7$(),t.Y8G("ngIf",e.cpOKButton)}}function Ai(s,o){1&s&&t.eu8(0)}function Ei(s,o){if(1&s&&(t.j41(0,"div",59),t.DNE(1,Ai,1,0,"ng-container",60),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.cpExtraTemplate)}}var nt=function(s){return s[s.HEX=0]="HEX",s[s.RGBA=1]="RGBA",s[s.HSLA=2]="HSLA",s[s.CMYK=3]="CMYK",s}(nt||{});class gt{r;g;b;a;constructor(o,e,n,i){this.r=o,this.g=e,this.b=n,this.a=i}}class ne{h;s;v;a;constructor(o,e,n,i){this.h=o,this.s=e,this.v=n,this.a=i}}class St{h;s;l;a;constructor(o,e,n,i){this.h=o,this.s=e,this.l=n,this.a=i}}class Ht{c;m;y;k;a;constructor(o,e,n,i,r=1){this.c=o,this.m=e,this.y=n,this.k=i,this.a=r}}let Ni=(()=>{class s{rg;text;newValue=new t.bkB;inputChange(e){const n=e.target.value;if(void 0===this.rg)this.newValue.emit(n);else{const i=parseFloat(n);this.newValue.emit({v:i,rg:this.rg})}}static \u0275fac=function(n){return new(n||s)};static \u0275dir=t.FsC({type:s,selectors:[["","text",""]],hostBindings:function(n,i){1&n&&t.bIt("input",function(a){return i.inputChange(a)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}})}return s})(),Ri=(()=>{class s{elRef;listenerMove;listenerStop;rgX;rgY;slider;dragEnd=new t.bkB;dragStart=new t.bkB;newValue=new t.bkB;mouseDown(e){this.start(e)}touchStart(e){this.start(e)}constructor(e){this.elRef=e,this.listenerMove=n=>this.move(n),this.listenerStop=()=>this.stop()}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-n.left-window.pageXOffset}getY(e){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-n.top-window.pageYOffset}setCursor(e){const n=this.elRef.nativeElement.offsetWidth,i=this.elRef.nativeElement.offsetHeight,r=Math.max(0,Math.min(this.getX(e),n)),a=Math.max(0,Math.min(this.getY(e),i));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:r/n,v:1-a/i,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:a/i,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:r/n,rgX:this.rgX})}static \u0275fac=function(n){return new(n||s)(t.rXU(t.aKT))};static \u0275dir=t.FsC({type:s,selectors:[["","slider",""]],hostBindings:function(n,i){1&n&&t.bIt("mousedown",function(a){return i.mouseDown(a)})("touchstart",function(a){return i.touchStart(a)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}})}return s})();class De{h;s;v;a;constructor(o,e,n,i){this.h=o,this.s=e,this.v=n,this.a=i}}class je{h;s;v;a;constructor(o,e,n,i){this.h=o,this.s=e,this.v=n,this.a=i}}let ge=(()=>{class s{active=null;setActive(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}hsva2hsla(e){const n=e.h,i=e.s,r=e.v,a=e.a;if(0===r)return new St(n,0,0,a);if(0===i&&1===r)return new St(n,1,1,a);{const l=r*(2-i)/2;return new St(n,r*i/(1-Math.abs(2*l-1)),l,a)}}hsla2hsva(e){const n=Math.min(e.h,1),i=Math.min(e.s,1),r=Math.min(e.l,1),a=Math.min(e.a,1);if(0===r)return new ne(n,0,0,a);{const l=r+i*(1-Math.abs(2*r-1))/2;return new ne(n,2*(l-r)/l,l,a)}}hsvaToRgba(e){let n,i,r;const a=e.h,l=e.s,h=e.v,d=e.a,p=Math.floor(6*a),u=6*a-p,f=h*(1-l),m=h*(1-u*l),y=h*(1-(1-u)*l);switch(p%6){case 0:n=h,i=y,r=f;break;case 1:n=m,i=h,r=f;break;case 2:n=f,i=h,r=y;break;case 3:n=f,i=m,r=h;break;case 4:n=y,i=f,r=h;break;case 5:n=h,i=f,r=m;break;default:n=0,i=0,r=0}return new gt(n,i,r,d)}cmykToRgb(e){return new gt((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}rgbaToCmyk(e){const n=1-Math.max(e.r,e.g,e.b);return 1===n?new Ht(0,0,0,1,e.a):new Ht((1-e.r-n)/(1-n),(1-e.g-n)/(1-n),(1-e.b-n)/(1-n),n,e.a)}rgbaToHsva(e){let n,i;const r=Math.min(e.r,1),a=Math.min(e.g,1),l=Math.min(e.b,1),h=Math.min(e.a,1),d=Math.max(r,a,l),p=Math.min(r,a,l),u=d,f=d-p;if(i=0===d?0:f/d,d===p)n=0;else{switch(d){case r:n=(a-l)/f+(a<l?6:0);break;case a:n=(l-r)/f+2;break;case l:n=(r-a)/f+4;break;default:n=0}n/=6}return new ne(n,i,u,h)}rgbaToHex(e,n){let i="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return n&&(i+=(256|Math.round(255*e.a)).toString(16).substr(1)),i}normalizeCMYK(e){return new Ht(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new Ht(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}denormalizeRGBA(e){return new gt(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}stringToHsva(e="",n=!1){let i=null;e=(e||"").toLowerCase();const r=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new gt(parseInt(a[2],10)/255,parseInt(a[3],10)/255,parseInt(a[4],10)/255,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return new St(parseInt(a[2],10)/360,parseInt(a[3],10)/100,parseInt(a[4],10)/100,isNaN(parseFloat(a[5]))?1:parseFloat(a[5]))}}];r.push(n?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(a){return new gt(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,parseInt(a[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(a){return new gt(parseInt(a[1],16)/255,parseInt(a[2],16)/255,parseInt(a[3],16)/255,1)}}),r.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(a){return new gt(parseInt(a[1]+a[1],16)/255,parseInt(a[2]+a[2],16)/255,parseInt(a[3]+a[3],16)/255,1)}});for(const a in r)if(r.hasOwnProperty(a)){const l=r[a],h=l.re.exec(e),d=h&&l.parse(h);if(d)return d instanceof gt?i=this.rgbaToHsva(d):d instanceof St&&(i=this.hsla2hsva(d)),i}return i}outputFormat(e,n,i){switch("auto"===n&&(n=e.a<1?"rgba":"hex"),n){case"hsla":const r=this.hsva2hsla(e),a=new St(Math.round(360*r.h),Math.round(100*r.s),Math.round(100*r.l),Math.round(100*r.a)/100);return e.a<1||"always"===i?"hsla("+a.h+","+a.s+"%,"+a.l+"%,"+a.a+")":"hsl("+a.h+","+a.s+"%,"+a.l+"%)";case"rgba":const l=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===i?"rgba("+l.r+","+l.g+","+l.b+","+Math.round(100*l.a)/100+")":"rgb("+l.r+","+l.g+","+l.b+")";default:const h="always"===i||"forced"===i;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),h)}}static \u0275fac=function(n){return new(n||s)};static \u0275prov=t.jDH({token:s,factory:s.\u0275fac})}return s})();const Ge=typeof window<"u"&&"ontouchstart"in window;let Pi=(()=>{class s{ngZone;elRef;cdRef;document;platformId;service;isIE10=!1;cmyk;hsva;width;height;cmykColor;outputColor;initialColor;fallbackColor;listenerResize;listenerMouseDown;directiveInstance;sliderH;sliderDimMax;directiveElementRef;dialogArrowSize=10;dialogArrowOffset=15;dialogInputFields=[nt.HEX,nt.RGBA,nt.HSLA,nt.CMYK];useRootViewContainer=!1;show;hidden;top;left;position;format;slider;hexText;hexAlpha;cmykText;hslaText;rgbaText;arrowTop;selectedColor;hueSliderColor;alphaSliderColor;cpWidth;cpHeight;cpColorMode;cpCmykEnabled;cpAlphaChannel;cpOutputFormat;cpDisableInput;cpDialogDisplay;cpIgnoredElements;cpSaveClickOutside;cpCloseClickOutside;cpPosition;cpUsePosition;cpPositionOffset;cpOKButton;cpOKButtonText;cpOKButtonClass;cpCancelButton;cpCancelButtonText;cpCancelButtonClass;cpEyeDropper;eyeDropperSupported;cpPresetLabel;cpPresetColors;cpPresetColorsClass;cpMaxPresetColorsLength;cpPresetEmptyMessage;cpPresetEmptyMessageClass;cpAddColorButton;cpAddColorButtonText;cpAddColorButtonClass;cpRemoveColorButtonClass;cpArrowPosition;cpTriggerElement;cpExtraTemplate;dialogElement;hueSlider;alphaSlider;handleEsc(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}handleEnter(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}constructor(e,n,i,r,a,l){this.ngZone=e,this.elRef=n,this.cdRef=i,this.document=r,this.platformId=a,this.service=l,this.eyeDropperSupported=(0,S.UE)(this.platformId)&&"EyeDropper"in this.document.defaultView}ngOnInit(){this.slider=new De(0,0,0,0),this.sliderDimMax=new je(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?nt.CMYK:"rgba"===this.cpOutputFormat?nt.RGBA:"hsla"===this.cpOutputFormat?nt.HSLA:nt.HEX,this.listenerMouseDown=i=>{this.onMouseDown(i)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new je(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(e,n=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,n),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,n,i,r,a,l,h,d,p,u,f,m,y,v,_,k,z,T,x,M,X,L,st,K,Q,H,F,J,ft,Dt,le,Et,_e,Ut,ze,_t,qo,Zo){this.setInitialColor(i),this.setColorMode(d),this.isIE10=10===function Ii(){let s="";typeof navigator<"u"&&(s=navigator.userAgent.toLowerCase());const o=s.indexOf("msie ");return o>0&&parseInt(s.substring(o+5,s.indexOf(".",o)),10)}(),this.directiveInstance=e,this.directiveElementRef=n,this.cpDisableInput=m,this.cpCmykEnabled=p,this.cpAlphaChannel=u,this.cpOutputFormat=f,this.cpDialogDisplay=l,this.cpIgnoredElements=y,this.cpSaveClickOutside=v,this.cpCloseClickOutside=_,this.useRootViewContainer=k,this.width=this.cpWidth=parseInt(r,10),this.height=this.cpHeight=parseInt(a,10),this.cpPosition=z,this.cpPositionOffset=parseInt(T,10),this.cpOKButton=H,this.cpOKButtonText=J,this.cpOKButtonClass=F,this.cpCancelButton=ft,this.cpCancelButtonText=le,this.cpCancelButtonClass=Dt,this.cpEyeDropper=_t,this.fallbackColor=h||"#fff",this.setPresetConfig(M,X),this.cpPresetColorsClass=L,this.cpMaxPresetColorsLength=st,this.cpPresetEmptyMessage=K,this.cpPresetEmptyMessageClass=Q,this.cpAddColorButton=Et,this.cpAddColorButtonText=Ut,this.cpAddColorButtonClass=_e,this.cpRemoveColorButtonClass=ze,this.cpTriggerElement=qo,this.cpExtraTemplate=Zo,x||(this.dialogArrowOffset=0),"inline"===l&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===f&&"always"!==u&&"forced"!==u&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":default:this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,n){this.cpPresetLabel=e,this.cpPresetColors=n}setColorFromString(e,n=!0,i=!0){let r;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(r=this.service.stringToHsva(e,!0),!r&&!this.hsva&&(r=this.service.stringToHsva(e,!1))):r=this.service.stringToHsva(e,!1),!r&&!this.hsva&&(r=this.service.stringToHsva(this.fallbackColor,!1)),r&&(this.hsva=r,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,i))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){this.show&&!this.isIE10&&"popup"===this.cpDialogDisplay&&e.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,e.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,e.target)&&0===this.cpIgnoredElements.filter(n=>n===e.target).length&&this.ngZone.run(()=>{this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker()})}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onEyeDropper(){this.eyeDropperSupported&&(new window.EyeDropper).open().then(n=>{this.setColorFromString(n.sRGBHex,!0)})}onFormatToggle(e){const n=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),i=((this.dialogInputFields.indexOf(this.format)+e)%n+n)%n;this.format=this.dialogInputFields[i]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);let n=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(n=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const i=n.test(e);i&&(e.length<5&&(e="#"+e.substring(1).split("").map(r=>r+r).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:i,value:e,color:this.outputColor})}}onRedInput(e){const n=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(n.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:i,value:n.r,color:this.outputColor})}onBlueInput(e){const n=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(n.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:i,value:n.b,color:this.outputColor})}onGreenInput(e){const n=this.service.hsvaToRgba(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(n.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:i,value:n.g,color:this.outputColor})}onHueInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:n,value:this.hsva.h,color:this.outputColor})}onValueInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:n,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:n,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){const n=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(n.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:i,value:n.l,color:this.outputColor})}onSaturationInput(e){const n=this.service.hsva2hsla(this.hsva),i=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;i&&(n.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:i,value:n.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,n){e.stopPropagation(),this.cpPresetColors.filter(i=>i===n).length||(this.cpPresetColors=this.cpPresetColors.concat(n),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,n){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(i=>i!==n),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||this.ngZone.runOutsideAngular(()=>{Ge?document.addEventListener("touchstart",this.listenerMouseDown):document.addEventListener("mousedown",this.listenerMouseDown)}),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(Ge?document.removeEventListener("touchstart",this.listenerMouseDown):document.removeEventListener("mousedown",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,n=!0,i=!1){if(this.sliderDimMax){let r,a,l;2===this.cpColorMode&&(this.hsva.s=0);const h=this.outputColor;if(a=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(i?(l=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(l)):(l=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(l))),l=this.service.denormalizeRGBA(l),this.sliderH=this.hsva.h):l=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),r=this.service.denormalizeRGBA(this.service.hsvaToRgba(new ne(this.sliderH||this.hsva.h,1,1,1))),n&&(this.hslaText=new St(Math.round(360*a.h),Math.round(100*a.s),Math.round(100*a.l),Math.round(100*a.a)/100),this.rgbaText=new gt(l.r,l.g,l.b,Math.round(100*l.a)/100),this.cpCmykEnabled&&(this.cmykText=new Ht(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(l,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==nt.RGBA&&this.format!==nt.CMYK&&this.format!==nt.HSLA&&this.hsva.a<1&&(this.format=this.hsva.a<1?nt.RGBA:nt.HEX),this.hueSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.alphaSliderColor="rgb("+l.r+","+l.g+","+l.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==nt.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const d=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${d})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new De((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&h!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let i,e="static",n="",r=null,a=null,l=this.directiveElementRef.nativeElement.parentNode;const h=this.dialogElement.nativeElement.offsetHeight;for(;null!==l&&"HTML"!==l.tagName;){if(i=window.getComputedStyle(l),e=i.getPropertyValue("position"),n=i.getPropertyValue("transform"),"static"!==e&&null===r&&(r=l),n&&"none"!==n&&null===a&&(a=l),"fixed"===e){r=a;break}l=l.parentNode}const d=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==e);if(this.useRootViewContainer||"fixed"===e&&(!r||r instanceof HTMLUnknownElement))this.top=d.top,this.left=d.left;else{null===r&&(r=l);const k=this.createDialogBox(r,"fixed"!==e);this.top=d.top-k.top,this.left=d.left-k.left}"fixed"===e&&(this.position="fixed");let p=this.cpPosition;const u=this.dialogElement.nativeElement.getBoundingClientRect();switch("auto"===this.cpPosition&&(p=function Bi(s,o){let e="right",n="bottom";const{height:i,width:r}=s,{top:a,left:l}=o,h=a+o.height,d=l+o.width,p=a-i<0,u=h+i>(window.innerHeight||document.documentElement.clientHeight),f=l-r<0,m=d+r>(window.innerWidth||document.documentElement.clientWidth);return u&&(n="top"),p&&(n="bottom"),f&&(e="right"),m&&(e="left"),p&&u&&f&&m?["left","right","top","bottom"].reduce((_,k)=>s[_]>s[k]?_:k):f&&m?p?"bottom":u||a>h?"top":"bottom":p&&u?f?"right":m||l>d?"left":"right":`${n}-${e}`}(u,this.cpTriggerElement.nativeElement.getBoundingClientRect())),this.arrowTop="top"===p?h-1:void 0,this.cpArrowPosition=void 0,p){case"top":this.top-=h+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*d.width-this.dialogArrowOffset;break;case"bottom":this.top+=d.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*d.width-this.dialogArrowOffset;break;case"top-left":case"left-top":this.top-=h-d.height+d.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset;break;case"top-right":case"right-top":this.top-=h-d.height+d.height*this.cpPositionOffset/100,this.left+=d.width+this.dialogArrowSize-2-this.dialogArrowOffset;break;case"left":case"bottom-left":case"left-bottom":this.top+=d.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2;break;default:this.top+=d.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=d.width+this.dialogArrowSize-2}const f=window.innerHeight,m=window.innerWidth,y=this.elRef.nativeElement.getBoundingClientRect();this.top+u.height>f&&(this.top=f-u.height,this.cpArrowPosition=y.x/2-20),this.left+u.width>m&&(this.left=m-u.width,this.cpArrowPosition=y.x/2-20),this.cpUsePosition=p}}isDescendant(e,n){let i=n.parentNode;for(;null!==i;){if(i===e)return!0;i=i.parentNode}return!1}createDialogBox(e,n){const{top:i,left:r}=e.getBoundingClientRect();return{top:i+(n?window.pageYOffset:0),left:r+(n?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}static \u0275fac=function(n){return new(n||s)(t.rXU(t.SKi),t.rXU(t.aKT),t.rXU(t.gRc),t.rXU(S.qQ),t.rXU(t.Agw),t.rXU(ge))};static \u0275cmp=t.VBU({type:s,selectors:[["color-picker"]],viewQuery:function(n,i){if(1&n&&(t.GBs(Zn,7),t.GBs($n,7),t.GBs(Qn,7)),2&n){let r;t.mGM(r=t.lsd())&&(i.dialogElement=r.first),t.mGM(r=t.lsd())&&(i.hueSlider=r.first),t.mGM(r=t.lsd())&&(i.alphaSlider=r.first)}},hostBindings:function(n,i){1&n&&t.bIt("keyup.esc",function(a){return i.handleEsc(a)},!1,t.EBC)("keyup.enter",function(a){return i.handleEnter(a)},!1,t.EBC)},decls:30,vars:51,consts:[["dialogPopup",""],["hueSlider",""],["valueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],[3,"left","class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color",3,"click"],["class","eyedropper-icon","xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",4,"ngIf"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"newValue","dragStart","dragEnd","slider","rgX"],[1,"cursor"],[1,"value",3,"newValue","dragStart","dragEnd","slider","rgX"],[1,"alpha",3,"newValue","dragStart","dragEnd","slider","rgX"],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],["class","extra-template",4,"ngIf"],[1,"saturation-lightness",3,"newValue","dragStart","dragEnd","slider","rgX","rgY"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#000000",1,"eyedropper-icon"],["d","M0 0h24v24H0V0z","fill","none"],["d","M17.66 5.41l.92.92-2.69 2.69-.92-.92 2.69-2.69M17.67 3c-.26 0-.51.1-.71.29l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42l-2.34-2.34c-.2-.19-.45-.29-.7-.29zM6.92 19L5 17.08l8.06-8.06 1.92 1.92L6.92 19z"],["type","button",3,"click","disabled"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"keyup.enter","newValue","text","rg","value"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"keyup.enter","newValue","text","rg","value"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"keyup.enter","newValue","text","rg","value"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"keyup.enter","newValue","text","rg","value"],[1,"hex-text"],[3,"blur","keyup.enter","newValue","text","value"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"],[1,"extra-template"],[4,"ngTemplateOutlet"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"div",4,0),t.bIt("click",function(l){return t.eBV(r),t.Njj(l.stopPropagation())}),t.DNE(2,ti,1,7,"div",5)(3,ei,2,8,"div",6),t.j41(4,"div",7)(5,"div",8),t.nrm(6,"div",9),t.j41(7,"div",10),t.bIt("click",function(){return t.eBV(r),t.Njj(i.eyeDropperSupported&&i.cpEyeDropper&&i.onEyeDropper())}),t.DNE(8,ni,3,0,"svg",11),t.k0s(),t.DNE(9,ii,2,5,"button",12),t.k0s(),t.j41(10,"div",13),t.DNE(11,si,1,0,"div",14),t.j41(12,"div",15,1),t.bIt("newValue",function(l){return t.eBV(r),t.Njj(i.onHueChange(l))})("dragStart",function(){return t.eBV(r),t.Njj(i.onDragStart("hue"))})("dragEnd",function(){return t.eBV(r),t.Njj(i.onDragEnd("hue"))}),t.nrm(14,"div",16),t.k0s(),t.j41(15,"div",17,2),t.bIt("newValue",function(l){return t.eBV(r),t.Njj(i.onValueChange(l))})("dragStart",function(){return t.eBV(r),t.Njj(i.onDragStart("value"))})("dragEnd",function(){return t.eBV(r),t.Njj(i.onDragEnd("value"))}),t.nrm(17,"div",16),t.k0s(),t.j41(18,"div",18,3),t.bIt("newValue",function(l){return t.eBV(r),t.Njj(i.onAlphaChange(l))})("dragStart",function(){return t.eBV(r),t.Njj(i.onDragStart("alpha"))})("dragEnd",function(){return t.eBV(r),t.Njj(i.onDragEnd("alpha"))}),t.nrm(20,"div",16),t.k0s()()(),t.DNE(21,ai,17,12,"div",19)(22,hi,14,10,"div",20)(23,ui,14,10,"div",21)(24,mi,8,7,"div",22)(25,Ci,9,3,"div",23)(26,vi,3,0,"div",24)(27,ki,6,3,"div",25)(28,Ti,3,2,"div",26)(29,Ei,2,1,"div",27),t.k0s()}2&n&&(t.xc7("display",i.show?"block":"none")("visibility",i.hidden?"hidden":"visible")("top",i.top,"px")("left",i.left,"px")("position",i.position)("height",i.cpHeight,"px")("width",i.cpWidth,"px"),t.AVh("open",i.show),t.R7$(2),t.Y8G("ngIf","popup"===i.cpDialogDisplay),t.R7$(),t.Y8G("ngIf",1===(i.cpColorMode||1)),t.R7$(4),t.xc7("background-color",i.selectedColor)("cursor",i.eyeDropperSupported&&i.cpEyeDropper?"pointer":null),t.R7$(),t.Y8G("ngIf",i.eyeDropperSupported&&i.cpEyeDropper),t.R7$(),t.Y8G("ngIf",i.cpAddColorButton),t.R7$(2),t.Y8G("ngIf","disabled"===i.cpAlphaChannel),t.R7$(),t.xc7("display",1===(i.cpColorMode||1)?"block":"none"),t.Y8G("rgX",1),t.R7$(2),t.xc7("left",null==i.slider?null:i.slider.h,"px"),t.R7$(),t.xc7("display",2===(i.cpColorMode||1)?"block":"none"),t.Y8G("rgX",1),t.R7$(2),t.xc7("right",null==i.slider?null:i.slider.v,"px"),t.R7$(),t.xc7("display","disabled"===i.cpAlphaChannel?"none":"block")("background-color",i.alphaSliderColor),t.Y8G("rgX",1),t.R7$(2),t.xc7("left",null==i.slider?null:i.slider.a,"px"),t.R7$(),t.Y8G("ngIf",!i.cpDisableInput&&1===(i.cpColorMode||1)),t.R7$(),t.Y8G("ngIf",!i.cpDisableInput&&1===(i.cpColorMode||1)),t.R7$(),t.Y8G("ngIf",!i.cpDisableInput&&1===(i.cpColorMode||1)),t.R7$(),t.Y8G("ngIf",!i.cpDisableInput&&1===(i.cpColorMode||1)),t.R7$(),t.Y8G("ngIf",!i.cpDisableInput&&2===(i.cpColorMode||1)),t.R7$(),t.Y8G("ngIf",!i.cpDisableInput&&1===(i.cpColorMode||1)),t.R7$(),t.Y8G("ngIf",(null==i.cpPresetColors?null:i.cpPresetColors.length)||i.cpAddColorButton),t.R7$(),t.Y8G("ngIf",i.cpOKButton||i.cpCancelButton),t.R7$(),t.Y8G("ngIf",i.cpExtraTemplate))},dependencies:[S.Sq,S.bT,S.T3,Ni,Ri],styles:['.color-picker{position:absolute;z-index:1000;width:230px;height:auto;border:#777 solid 1px;cursor:default;-webkit-user-select:none;user-select:none;background-color:#fff}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .arrow{position:absolute;z-index:999999;width:0;height:0;border-style:solid}.color-picker .arrow.arrow-top{left:8px;border-width:10px 5px;border-color:#777 rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-bottom{top:-20px;left:8px;border-width:10px 5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) #777 rgba(0,0,0,0)}.color-picker .arrow.arrow-top-left,.color-picker .arrow.arrow-left-top{right:-21px;bottom:8px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-top-right,.color-picker .arrow.arrow-right-top{bottom:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom,.color-picker .arrow.arrow-bottom-left{top:8px;right:-21px;border-width:5px 10px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #777}.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom,.color-picker .arrow.arrow-bottom-right{top:8px;left:-20px;border-width:5px 10px;border-color:rgba(0,0,0,0) #777 rgba(0,0,0,0) rgba(0,0,0,0)}.color-picker .cursor{position:relative;width:16px;height:16px;border:#222 solid 2px;border-radius:50%;cursor:default}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:#a9a9a9 solid 1px;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{flex:1 1 auto;padding:1px;border:#a9a9a9 solid 1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;flex:1;padding:1px;margin:0 8px 0 0;border:#a9a9a9 solid 1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==)}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:16px;height:24px;background-size:8px 16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC)}.color-picker .saturation-lightness{direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-size:100% 100%;background-image:url(data:image/png;base64,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)}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:transparent}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class:before{content:"x";position:relative;bottom:3.5px;display:inline-block;font-size:10px}.color-picker .eyedropper-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);fill:#fff;mix-blend-mode:exclusion}\n'],encapsulation:2})}return s})(),Di=(()=>{class s{injector;cfr;appRef;vcRef;elRef;_service;dialog;dialogCreated=!1;ignoreChanges=!1;cmpRef;viewAttachedToAppRef=!1;colorPicker;cpWidth="230px";cpHeight="auto";cpToggle=!1;cpDisabled=!1;cpIgnoredElements=[];cpFallbackColor="";cpColorMode="color";cpCmykEnabled=!1;cpOutputFormat="auto";cpAlphaChannel="enabled";cpDisableInput=!1;cpDialogDisplay="popup";cpSaveClickOutside=!0;cpCloseClickOutside=!0;cpUseRootViewContainer=!1;cpPosition="auto";cpPositionOffset="0%";cpPositionRelativeToArrow=!1;cpOKButton=!1;cpOKButtonText="OK";cpOKButtonClass="cp-ok-button-class";cpCancelButton=!1;cpCancelButtonText="Cancel";cpCancelButtonClass="cp-cancel-button-class";cpEyeDropper=!1;cpPresetLabel="Preset colors";cpPresetColors;cpPresetColorsClass="cp-preset-colors-class";cpMaxPresetColorsLength=6;cpPresetEmptyMessage="No colors added";cpPresetEmptyMessageClass="preset-empty-message";cpAddColorButton=!1;cpAddColorButtonText="Add color";cpAddColorButtonClass="cp-add-color-button-class";cpRemoveColorButtonClass="cp-remove-color-button-class";cpArrowPosition=0;cpExtraTemplate;cpInputChange=new t.bkB(!0);cpToggleChange=new t.bkB(!0);cpSliderChange=new t.bkB(!0);cpSliderDragEnd=new t.bkB(!0);cpSliderDragStart=new t.bkB(!0);colorPickerOpen=new t.bkB(!0);colorPickerClose=new t.bkB(!0);colorPickerCancel=new t.bkB(!0);colorPickerSelect=new t.bkB(!0);colorPickerChange=new t.bkB(!1);cpCmykColorChange=new t.bkB(!0);cpPresetColorsChange=new t.bkB(!0);handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}constructor(e,n,i,r,a,l){this.injector=e,this.cfr=n,this.appRef=i,this.vcRef=r,this.elRef=a,this._service=l}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const r=this.injector.get(this.appRef.componentTypes[0],t.zZn.NULL);r!==t.zZn.NULL?e=r.vcRef||r.viewContainerRef||this.vcRef:this.viewAttachedToAppRef=!0}const n=this.cfr.resolveComponentFactory(Pi);if(this.viewAttachedToAppRef)this.cmpRef=n.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const i=t.zZn.create({providers:[],parent:e.injector});this.cmpRef=e.createComponent(n,0,i,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.cpEyeDropper,this.elRef,this.cpExtraTemplate),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,n=!0){this.ignoreChanges=n,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const e=this.elRef.nativeElement,n=this.cpIgnoredElements.filter(i=>i===e);!this.cpDisabled&&!n.length&&(typeof document<"u"&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}static \u0275fac=function(n){return new(n||s)(t.rXU(t.zZn),t.rXU(t.OM3),t.rXU(t.o8S),t.rXU(t.c1b),t.rXU(t.aKT),t.rXU(ge))};static \u0275dir=t.FsC({type:s,selectors:[["","colorPicker",""]],hostBindings:function(n,i){1&n&&t.bIt("click",function(){return i.handleClick()})("focus",function(){return i.handleFocus()})("input",function(a){return i.handleInput(a)})},inputs:{colorPicker:"colorPicker",cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpEyeDropper:"cpEyeDropper",cpPresetLabel:"cpPresetLabel",cpPresetColors:"cpPresetColors",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",cpArrowPosition:"cpArrowPosition",cpExtraTemplate:"cpExtraTemplate"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[t.OA$]})}return s})(),Fe=(()=>{class s{static \u0275fac=function(n){return new(n||s)};static \u0275mod=t.$C({type:s});static \u0275inj=t.G2t({providers:[ge],imports:[S.MD]})}return s})();function ji(s,o){if(1&s){const e=t.RV6();t.j41(0,"a",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.clearColor())}),t.EFF(1,"\u6e05\u7a7a\u8f93\u5165\u6846"),t.k0s()}}let Gi=(()=>{class s{constructor(){this.onChanged=()=>{},this.onTouched=()=>{},this.colorChange=new t.bkB}ngOnInit(){}writeValue(e){this.color=e||""}registerOnChange(e){this.onChanged=e}registerOnTouched(e){this.onTouched=e}colorPickerChange(e){console.log("property change",e),this.color=e,this.onChanged(e);let n=this.getPresentColors(),i=n.indexOf(e);i>-1&&n.splice(i,1),n.unshift(e),n.length>12&&(n.length=12),this.setPresentColors(n)}getPresentColors(){let e=localStorage.getItem("bgc-colors");if(e)try{return JSON.parse(e)}catch{}return[]}setPresentColors(e){localStorage.setItem("bgc-colors",JSON.stringify(e))}clearColor(){this.color="",this.onChanged(this.color)}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-color-input"]],outputs:{colorChange:"colorChange"},features:[t.Jv_([{provide:A.kq,useExisting:(0,t.Rfq)(()=>s),multi:!0}])],decls:3,vars:7,consts:[["suffixIconClear",""],["cpPresetLabel","\u5386\u53f2\u8bb0\u5f55",3,"valueChange","colorPickerChange","cpPresetColorsChange","value","colorPicker","cpEyeDropper","cpPresetColors","cpExtraTemplate"],[3,"click"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"input",1),t.mxI("valueChange",function(l){return t.eBV(r),t.DH7(i.color,l)||(i.color=l),t.Njj(l)}),t.bIt("colorPickerChange",function(l){return t.eBV(r),t.Njj(i.colorPickerChange(l))})("cpPresetColorsChange",function(l){return t.eBV(r),t.Njj(i.setPresentColors(l))}),t.k0s(),t.DNE(1,ji,2,0,"ng-template",null,0,t.C5r)}if(2&n){const r=t.sdS(2);t.xc7("color",i.color),t.R50("value",i.color),t.Y8G("colorPicker",i.color)("cpEyeDropper",!0)("cpPresetColors",i.getPresentColors())("cpExtraTemplate",r)}},dependencies:[Di]})}return s})(),Fi=(()=>{class s{set row(e){e&&this.group.patchValue(e)}constructor(e){this.fb=e,this.build()}build(e){this.group=this.fb.group({name:[(e=e||{}).name||"",[A.k0.required]],background_color:[e.background_color],background_image:[e.background_image]})}submit(){return new Promise((e,n)=>{this.group.valid?e(this.group.value):Object.values(this.group.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}),n())})})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(A.ok))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-page-setting"]],inputs:{row:"row"},decls:16,vars:13,consts:[["nz-form","",3,"formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nzErrorTip","\u8bf7\u8f93\u5165\u540d\u79f0!",3,"nzSm","nzXs"],["nz-input","","formControlName","name"],["nzFor","background_color",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["formControlName","background_color"],["nzFor","background_image",3,"nzSm","nzXs"],["nz-input","","formControlName","background_image","placeholder","\u8f93\u5165\u56fe\u7247\u5730\u5740"]],template:function(n,i){1&n&&(t.j41(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),t.EFF(3,"\u540d\u79f0"),t.k0s(),t.j41(4,"nz-form-control",2),t.nrm(5,"input",3),t.k0s()(),t.j41(6,"nz-form-item")(7,"nz-form-label",4),t.EFF(8,"\u80cc\u666f\u989c\u8272"),t.k0s(),t.j41(9,"nz-form-control",5),t.nrm(10,"app-color-input",6),t.k0s()(),t.j41(11,"nz-form-item")(12,"nz-form-label",7),t.EFF(13,"\u80cc\u666f\u56fe\u7247"),t.k0s(),t.j41(14,"nz-form-control",5),t.nrm(15,"input",8),t.k0s()()()),2&n&&(t.Y8G("formGroup",i.group),t.R7$(2),t.Y8G("nzSm",6)("nzXs",24),t.R7$(2),t.Y8G("nzSm",14)("nzXs",24),t.R7$(3),t.Y8G("nzSm",6)("nzXs",24),t.R7$(2),t.Y8G("nzSm",14)("nzXs",24),t.R7$(3),t.Y8G("nzSm",6)("nzXs",24),t.R7$(2),t.Y8G("nzSm",14)("nzXs",24))},dependencies:[A.qT,A.me,A.BC,A.cb,A.j4,A.JD,te.Uq,te.e,ut.CA,ut.Ls,ut.Mo,ut.zS,ee.Sy,Gi]})}return s})();const Oi=s=>({selected:s});function Vi(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",1),t.bIt("click",function(){const i=t.eBV(e).index,r=t.XpG();return t.Njj(r.open(i))}),t.EFF(1),t.j41(2,"div",2),t.bIt("click",function(i){return t.eBV(e),t.Njj(i.stopPropagation())}),t.j41(3,"span",3),t.bIt("click",function(){const i=t.eBV(e).index,r=t.XpG();return t.Njj(r.handleCopy(i))}),t.k0s(),t.j41(4,"span",4),t.bIt("click",function(){const i=t.eBV(e).index,r=t.XpG();return t.Njj(r.handleEdit(i))}),t.k0s(),t.j41(5,"span",5),t.bIt("click",function(){const i=t.eBV(e).index,r=t.XpG();return t.Njj(r.handleDel(i))}),t.k0s()()()}if(2&s){const e=o.$implicit,n=o.index,i=t.XpG();t.Y8G("ngClass",t.eq3(2,Oi,n==i.index)),t.R7$(),t.SpI(" ",e.name," ")}}let Xi=(()=>{class s{constructor(e,n,i){this.modal=e,this.ms=n,this.viewContainerRef=i,this.onPageChange=new t.bkB,this.index=0}handleEdit(e){const n=void 0===e,i=this.modal.create({nzTitle:n?"\u65b0\u589e\u9875\u9762":"\u7f16\u8f91\u9875\u9762",nzContent:Fi,nzData:{row:n?{name:"",content:{}}:this.project.pages[e]},nzViewContainerRef:this.viewContainerRef,nzFooter:[{label:"\u53d6\u6d88",onClick:()=>i.destroy()},{label:"\u4fdd\u5b58",type:"primary",onClick:r=>r?.submit().then(a=>{n?this.project.pages.push(a):this.project.pages[e]=a,this.onPageChange.emit(0),i.destroy()}).catch(a=>!1)}]})}handleDel(e){1!=this.project.pages.length?(this.project.pages.splice(e,1),this.index==e&&(e>=this.project.pages.length&&(this.index=e-1),this.onPageChange.emit(this.index))):this.ms.error("\u518d\u5220\u5c31\u6ca1\u6709\u4e86")}open(e){this.index=e,this.onPageChange.emit(e)}handleCopy(e){}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(Qt.N_),t.rXU(bt.xh),t.rXU(t.c1b))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-pages"]],inputs:{project:"project",graph:"graph"},outputs:{onPageChange:"onPageChange"},decls:1,vars:1,consts:[["class","page",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"page",3,"click","ngClass"],[1,"tools",3,"click"],["nz-icon","","nzType","copy","title","\u590d\u5236",3,"click"],["nz-icon","","nzType","edit","title","\u7f16\u8f91",3,"click"],["nz-icon","","nzType","delete","title","\u5220\u9664",3,"click"]],template:function(n,i){1&n&&t.DNE(0,Vi,6,4,"div",0),2&n&&t.Y8G("ngForOf",i.project.pages)},dependencies:[S.YU,S.Sq,Y.Dn,Me.c],styles:[".page[_ngcontent-%COMP%]{position:relative;padding:3px 5px}.page[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{position:absolute;right:5px;top:3px;display:none}.page.selected[_ngcontent-%COMP%]{background-color:#e1e1e1}.page[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.page[_ngcontent-%COMP%]:hover > .tools[_ngcontent-%COMP%]{display:block}"]})}return s})();const Yi=["canvas"];function Hi(s,o){if(1&s&&t.nrm(0,"app-pages",10),2&s){const e=t.XpG(),n=t.sdS(10);t.Y8G("project",e.project)("graph",n.graph)}}function Li(s,o){if(1&s&&t.nrm(0,"app-widgets",11),2&s){t.XpG();const e=t.sdS(10);t.Y8G("canvas",e)}}function Ui(s,o){if(1&s&&t.nrm(0,"app-components",11),2&s){t.XpG();const e=t.sdS(10);t.Y8G("canvas",e)}}function Wi(s,o){if(1&s&&t.nrm(0,"app-galleries",11),2&s){t.XpG();const e=t.sdS(10);t.Y8G("canvas",e)}}function Ki(s,o){1&s&&t.nrm(0,"app-sources")}function Ji(s,o){if(1&s&&t.nrm(0,"app-props",11),2&s){t.XpG();const e=t.sdS(10);t.Y8G("canvas",e)}}function qi(s,o){1&s&&t.nrm(0,"app-events")}function Zi(s,o){1&s&&t.nrm(0,"app-scripts")}let Oe=(()=>{class s{constructor(e,n,i,r,a,l){this.title=e,this.rs=n,this.msg=i,this.router=r,this.route=a,this.cs=l,this.id="",this.project=function Ft(){return{id:"",name:"\u7ec4\u6001\u5de5\u7a0b",desc:"",pages:[{name:"\u9996\u9875",content:{},width:window.screen.width,height:window.screen.height}]}}(),this.index=0,this.scale=1,e.setTitle(this.project.name)}ngOnInit(){this.route.snapshot.paramMap.has("id")&&(this.id=this.route.snapshot.paramMap.get("id"),this.rs.get(`api/project/${this.id}`).subscribe(e=>{this.project=e.data,this.title.setTitle(this.project.name),this.page=this.project.pages[0]}))}handleSave(){this.project.pages[this.index].content=this.renderer.graph.toJSON(),this.rs.post(this.id?`api/project/${this.id}`:"api/project/create",this.project).subscribe(n=>{this.router.navigateByUrl("/admin/project")})}handlePageChange(e){this.project.pages[this.index].content=this.renderer.graph.toJSON(),this.index=e,this.page=this.project.pages[this.index]}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(rt.hE),t.rXU(mt.By),t.rXU(bt.xh),t.rXU(ct.Ix),t.rXU(ct.nX),t.rXU(pt.b))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-editor"]],viewQuery:function(n,i){if(1&n&&t.GBs(Yi,5),2&n){let r;t.mGM(r=t.lsd())&&(i.renderer=r.first)}},decls:15,vars:19,consts:[["canvas",""],[3,"onSave","scaleChange","graph","project","scale"],[1,"body"],[3,"width"],[3,"project","graph",4,"sideBarItem"],[3,"canvas",4,"sideBarItem"],[4,"sideBarItem"],[1,"content"],[3,"page"],[3,"width","right"],[3,"project","graph"],[3,"canvas"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"app-toolbar",1),t.bIt("onSave",function(){return t.eBV(r),t.Njj(i.handleSave())}),t.mxI("scaleChange",function(l){return t.eBV(r),t.DH7(i.scale,l)||(i.scale=l),t.Njj(l)}),t.k0s(),t.j41(1,"div",2)(2,"app-side-bar",3),t.DNE(3,Hi,1,2,"app-pages",4)(4,Li,1,1,"app-widgets",5)(5,Ui,1,1,"app-components",5)(6,Wi,1,1,"app-galleries",5)(7,Ki,1,0,"app-sources",6),t.k0s(),t.j41(8,"div",7),t.nrm(9,"app-canvas",8,0),t.k0s(),t.j41(11,"app-side-bar",9),t.DNE(12,Ji,1,1,"app-props",5)(13,qi,1,0,"app-events",6)(14,Zi,1,0,"app-scripts",6),t.k0s()()}if(2&n){const r=t.sdS(10);t.Y8G("graph",r.graph)("project",i.project),t.R50("scale",i.scale),t.R7$(2),t.Y8G("width",300),t.R7$(),t.Y8G("sideBarItem","\u9875\u9762"),t.R7$(),t.Y8G("sideBarItem","\u63a7\u4ef6"),t.R7$(),t.Y8G("sideBarItem","\u7ec4\u4ef6"),t.R7$(),t.Y8G("sideBarItem","\u56fe\u5143"),t.R7$(),t.Y8G("sideBarItem","\u6570\u636e\u6e90"),t.R7$(2),t.xc7("width",i.project.pages[i.index].width*i.scale+"px")("height",i.project.pages[i.index].height*i.scale+"px"),t.Y8G("page",i.project.pages[i.index]),t.R7$(2),t.Y8G("width",400)("right",!0),t.R7$(),t.Y8G("sideBarItem","\u5c5e\u6027"),t.R7$(),t.Y8G("sideBarItem","\u4e8b\u4ef6"),t.R7$(),t.Y8G("sideBarItem","\u811a\u672c")}},dependencies:[Jt,N,E,j,lt,P,Zt,we,Xn,qn,Xi,mn],styles:["[_nghost-%COMP%]{height:100%;min-width:600px;overflow:hidden;display:flex;flex-direction:column;letter-spacing:.1em;font-size:12px}.body[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}.body[_ngcontent-%COMP%]   .splitter[_ngcontent-%COMP%]{width:8px;background-color:#c9c9c9;cursor:col-resize}.body[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;height:100%;position:relative;padding:10px;background-color:#f0f0f0;overflow:auto}"]})}return s})();const $i=[{path:"",component:Oe},{path:":id",component:Oe}];let Qi=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[ct.iI.forChild($i),ct.iI]})}return s})();var G=b(8167),Tt=b(1413),ts=b(6860);const es=["*"],ns=["nz-sider-trigger",""];function is(s,o){}function ss(s,o){if(1&s&&t.DNE(0,is,0,0,"ng-template",2),2&s){const e=t.XpG(),n=t.sdS(5);t.Y8G("ngTemplateOutlet",e.nzZeroTrigger||n)}}function os(s,o){}function rs(s,o){if(1&s&&t.DNE(0,os,0,0,"ng-template",2),2&s){const e=t.XpG(),n=t.sdS(3);t.Y8G("ngTemplateOutlet",e.nzTrigger||n)}}function as(s,o){if(1&s&&t.nrm(0,"span",3),2&s){const e=t.XpG(2);t.Y8G("nzType",e.nzCollapsed?"left":"right")}}function ls(s,o){if(1&s&&t.nrm(0,"span",3),2&s){const e=t.XpG(2);t.Y8G("nzType",e.nzCollapsed?"right":"left")}}function cs(s,o){if(1&s&&t.DNE(0,as,1,1,"span",3)(1,ls,1,1),2&s){const e=t.XpG();t.vxM(0,e.nzReverseArrow?0:1)}}function hs(s,o){1&s&&t.nrm(0,"span",4)}function ds(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.setCollapsed(!i.nzCollapsed))}),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("matchBreakPoint",e.matchBreakPoint)("nzCollapsedWidth",e.nzCollapsedWidth)("nzCollapsed",e.nzCollapsed)("nzBreakpoint",e.nzBreakpoint)("nzReverseArrow",e.nzReverseArrow)("nzTrigger",e.nzTrigger)("nzZeroTrigger",e.nzZeroTrigger)("siderWidth",e.widthSetting)}}let Ve=(()=>{class s{constructor(){this.nzCollapsed=!1,this.nzReverseArrow=!1,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.matchBreakPoint=!1,this.nzCollapsedWidth=null,this.siderWidth=null,this.nzBreakpoint=null,this.isZeroTrigger=!1,this.isNormalTrigger=!1}updateTriggerType(){this.isZeroTrigger=0===this.nzCollapsedWidth&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=0!==this.nzCollapsedWidth}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(n,i){2&n&&(t.xc7("width",i.isNormalTrigger?i.siderWidth:null),t.AVh("ant-layout-sider-trigger",i.isNormalTrigger)("ant-layout-sider-zero-width-trigger",i.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",i.isZeroTrigger&&i.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",i.isZeroTrigger&&!i.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],standalone:!0,features:[t.OA$,t.aNF],attrs:ns,decls:6,vars:2,consts:[["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","bars"]],template:function(n,i){1&n&&t.DNE(0,ss,1,1,null,2)(1,rs,1,1,null,2)(2,cs,2,1,"ng-template",null,0,t.C5r)(4,hs,1,0,"ng-template",null,1,t.C5r),2&n&&(t.vxM(0,i.isZeroTrigger?0:-1),t.R7$(),t.vxM(1,i.isNormalTrigger?1:-1))},dependencies:[S.T3,Y.Y3,Y.Dn],encapsulation:2,changeDetection:0})}return s})(),ps=(()=>{class s{updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:(0,R.j3)(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&"inline"===this.nzMenuDirective.nzMode&&0!==this.nzCollapsedWidth&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(e){e!==this.nzCollapsed&&(this.nzCollapsed=e,this.nzCollapsedChange.emit(e),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}constructor(e,n,i){this.platform=e,this.cdr=n,this.breakpointService=i,this.destroy$=new Tt.B,this.nzMenuDirective=null,this.nzCollapsedChange=new t.bkB,this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzBreakpoint=null,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.matchBreakPoint=!1,this.flexSetting=null,this.widthSetting=null}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(ht.yY,!0).pipe((0,U.Q)(this.destroy$)).subscribe(e=>{const n=this.nzBreakpoint;n&&(0,R.ij)().subscribe(()=>{this.matchBreakPoint=!e[n],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(e){const{nzCollapsed:n,nzCollapsedWidth:i,nzWidth:r}=e;(n||i||r)&&this.updateStyleMap(),n&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(ts.OD),t.rXU(t.gRc),t.rXU(ht.jp))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-sider"]],contentQueries:function(n,i,r){if(1&n&&t.wni(r,kt.jS,5),2&n){let a;t.mGM(a=t.lsd())&&(i.nzMenuDirective=a.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(n,i){2&n&&(t.xc7("flex",i.flexSetting)("max-width",i.widthSetting)("min-width",i.widthSetting)("width",i.widthSetting),t.AVh("ant-layout-sider-zero-width",i.nzCollapsed&&0===i.nzCollapsedWidth)("ant-layout-sider-light","light"===i.nzTheme)("ant-layout-sider-dark","dark"===i.nzTheme)("ant-layout-sider-collapsed",i.nzCollapsed)("ant-layout-sider-has-trigger",i.nzCollapsible&&null!==i.nzTrigger))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:"nzReverseArrow",nzCollapsible:"nzCollapsible",nzCollapsed:"nzCollapsed"},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:es,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"],["nz-sider-trigger","",3,"click","matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"]],template:function(n,i){1&n&&(t.NAR(),t.j41(0,"div",0),t.SdG(1),t.k0s(),t.DNE(2,ds,1,8,"div",1)),2&n&&(t.R7$(2),t.vxM(2,i.nzCollapsible&&null!==i.nzTrigger?2:-1))},dependencies:[Ve],encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,R.H3)()],s.prototype,"nzReverseArrow",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzCollapsible",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzCollapsed",void 0),s})(),Xe=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[ps,Ve]})}return s})();var Ye=b(7685),He=b(4500),fe=b(851),Le=b(4085),At=b(7336),ie=b(8359),us=b(536),gs=b(5007),Ue=b(7673),me=b(7786),fs=b(3798),We=b(9172),ms=b(1594),bs=b(1986),Cs=b(494),Ke=b(5979),Je=b(1265);function vs(s,o){if(1&s&&(t.qex(0),t.nrm(1,"span",1),t.bVm()),2&s){const e=o.$implicit;t.R7$(),t.Y8G("nzType",e)}}const _s=()=>({minWidth:"46px"}),zs=()=>({visible:!1});function ys(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.tab.label," ")}}function xs(s,o){if(1&s){const e=t.RV6();t.j41(0,"li",8),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.onSelect(i))})("contextmenu",function(i){const r=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onContextmenu(r,i))}),t.DNE(1,ys,2,1,"ng-container",9),t.k0s()}if(2&s){const e=o.$implicit;t.AVh("ant-tabs-dropdown-menu-item-disabled",e.disabled),t.Y8G("nzSelected",e.active)("nzDisabled",e.disabled),t.R7$(),t.Y8G("nzStringTemplateOutlet",e.tab.label)("nzStringTemplateOutletContext",t.lJ4(6,zs))}}function ks(s,o){if(1&s&&(t.j41(0,"ul",6),t.DNE(1,xs,2,7,"li",7),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.items)}}function ws(s,o){if(1&s){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addClicked.emit())}),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("addIcon",e.addIcon)}}const Ss=["navWarp"],Ts=["navList"],As=["*"];function Es(s,o){if(1&s){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addClicked.emit())}),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("addIcon",e.addIcon),t.BMQ("tabindex",-1)}}function Bs(s,o){}function Is(s,o){if(1&s&&(t.j41(0,"div",9),t.DNE(1,Bs,0,0,"ng-template",10),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.extraTemplate)}}const Ns=["nz-tab-body",""];function Rs(s,o){}function Ps(s,o){if(1&s&&(t.qex(0),t.DNE(1,Rs,0,0,"ng-template",1),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngTemplateOutlet",e.content)}}function Ms(s,o){if(1&s&&(t.qex(0),t.nrm(1,"span",1),t.bVm()),2&s){const e=o.$implicit;t.R7$(),t.Y8G("nzType",e)}}const Ds=["contentTemplate"],js=[[["","nz-tab-link",""]],"*"],Gs=["[nz-tab-link]","*"];function Fs(s,o){1&s&&t.SdG(0)}function Os(s,o){1&s&&t.SdG(0,1)}const Vs=()=>({visible:!0});function Xs(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.label)}}function Ys(s,o){if(1&s){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(i){t.eBV(e);const r=t.XpG().index,a=t.XpG(2);return t.Njj(a.onClose(r,i))}),t.k0s()}if(2&s){const e=t.XpG().$implicit;t.Y8G("closeIcon",e.nzCloseIcon)}}function Hs(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",6),t.bIt("click",function(i){const r=t.eBV(e),a=r.$implicit,l=r.index,h=t.XpG(2);return t.Njj(h.clickNavItem(a,l,i))})("contextmenu",function(i){const r=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.contextmenuNavItem(r,i))}),t.j41(1,"button",7),t.DNE(2,Xs,2,1,"ng-container",8)(3,Ys,1,1,"button",9),t.k0s()()}if(2&s){const e=o.$implicit,n=o.index,i=t.XpG(2);t.xc7("margin-right","horizontal"===i.position?i.nzTabBarGutter:null,"px")("margin-bottom","vertical"===i.position?i.nzTabBarGutter:null,"px"),t.AVh("ant-tabs-tab-active",i.nzSelectedIndex===n)("ant-tabs-tab-disabled",e.nzDisabled),t.R7$(),t.Y8G("id",i.getTabContentId(n))("disabled",e.nzDisabled)("tab",e)("active",i.nzSelectedIndex===n),t.BMQ("tabIndex",i.getTabIndex(e,n))("aria-disabled",e.nzDisabled)("aria-selected",i.nzSelectedIndex===n&&!i.nzHideAll)("aria-controls",i.getTabContentId(n)),t.R7$(),t.Y8G("nzStringTemplateOutlet",e.label)("nzStringTemplateOutletContext",t.lJ4(19,Vs)),t.R7$(),t.Y8G("ngIf",e.nzClosable&&i.closable&&!e.nzDisabled)}}function Ls(s,o){if(1&s){const e=t.RV6();t.j41(0,"nz-tabs-nav",4),t.bIt("tabScroll",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.nzTabListScroll.emit(i))})("selectFocusedIndex",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.setSelectedIndex(i))})("addClicked",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onAdd())}),t.DNE(1,Hs,4,20,"div",5),t.k0s()}if(2&s){const e=t.XpG();t.Y8G("ngStyle",e.nzTabBarStyle)("selectedIndex",e.nzSelectedIndex||0)("inkBarAnimated",e.inkBarAnimated)("addable",e.addable)("addIcon",e.nzAddIcon)("hideBar",e.nzHideAll)("position",e.position)("extraTemplate",e.nzTabBarExtraContent),t.R7$(),t.Y8G("ngForOf",e.tabs)}}function Us(s,o){if(1&s&&t.nrm(0,"div",11),2&s){const e=o.$implicit,n=o.index,i=t.XpG();t.Y8G("id",i.getTabContentId(n))("active",i.nzSelectedIndex===n&&!i.nzHideAll)("content",e.content)("forceRender",e.nzForceRender)("animated",i.tabPaneAnimated),t.BMQ("aria-labelledby",i.getTabContentId(n))}}let Lt=(()=>{class s{constructor(e){this.elementRef=e,this.addIcon="plus",this.element=this.elementRef.nativeElement}getElementWidth(){return this.element?.offsetWidth||0}getElementHeight(){return this.element?.offsetHeight||0}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.aKT))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tab-add-button"],["button","nz-tab-add-button",""]],hostAttrs:["aria-label","Add tab","type","button",1,"ant-tabs-nav-add"],inputs:{addIcon:"addIcon"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(n,i){1&n&&t.DNE(0,vs,2,1,"ng-container",0),2&n&&t.Y8G("nzStringTemplateOutlet",i.addIcon)},dependencies:[q.C,q.m,Y.Y3,Y.Dn],encapsulation:2})}return s})(),be=(()=>{class s{get _animated(){return"NoopAnimations"!==this.animationMode&&this.animated}constructor(e,n,i){this.elementRef=e,this.ngZone=n,this.animationMode=i,this.position="horizontal",this.animated=!0}alignToElement(e){this.ngZone.runOutsideAngular(()=>{(0,He.j)(()=>this.setStyles(e))})}setStyles(e){const n=this.elementRef.nativeElement;"horizontal"===this.position?(n.style.top="",n.style.height="",n.style.left=this.getLeftPosition(e),n.style.width=this.getElementWidth(e)):(n.style.left="",n.style.width="",n.style.top=this.getTopPosition(e),n.style.height=this.getElementHeight(e))}getLeftPosition(e){return e?`${e.offsetLeft||0}px`:"0"}getElementWidth(e){return e?`${e.offsetWidth||0}px`:"0"}getTopPosition(e){return e?`${e.offsetTop||0}px`:"0"}getElementHeight(e){return e?`${e.offsetHeight||0}px`:"0"}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.aKT),t.rXU(t.SKi),t.rXU(t.bc$,8))};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["nz-tabs-ink-bar"],["","nz-tabs-ink-bar",""]],hostAttrs:[1,"ant-tabs-ink-bar"],hostVars:2,hostBindings:function(n,i){2&n&&t.AVh("ant-tabs-ink-bar-animated",i._animated)},inputs:{position:"position",animated:"animated"},standalone:!0})}return s})(),Ce=(()=>{class s{constructor(e){this.elementRef=e,this.disabled=!1,this.active=!1,this.el=e.nativeElement,this.parentElement=this.el.parentElement}focus(){this.el.focus()}get width(){return this.parentElement.offsetWidth}get height(){return this.parentElement.offsetHeight}get left(){return this.parentElement.offsetLeft}get top(){return this.parentElement.offsetTop}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["","nzTabNavItem",""]],inputs:{disabled:"disabled",tab:"tab",active:"active"},standalone:!0})}return s})(),se=(()=>{class s{constructor(e,n){this.cdr=e,this.elementRef=n,this.items=[],this.addable=!1,this.addIcon="plus",this.addClicked=new t.bkB,this.selected=new t.bkB,this.menuOpened=!1,this.element=this.elementRef.nativeElement}onSelect(e){e.disabled||(e.tab.nzClick.emit(),this.selected.emit(e))}onContextmenu(e,n){e.disabled||e.tab.nzContextmenu.emit(n)}showItems(){clearTimeout(this.closeAnimationWaitTimeoutId),this.menuOpened=!0,this.cdr.markForCheck()}menuVisChange(e){e||(this.closeAnimationWaitTimeoutId=setTimeout(()=>{this.menuOpened=!1,this.cdr.markForCheck()},150))}getElementWidth(){return this.element?.offsetWidth||0}getElementHeight(){return this.element?.offsetHeight||0}ngOnDestroy(){clearTimeout(this.closeAnimationWaitTimeoutId)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.gRc),t.rXU(t.aKT))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tab-nav-operation"]],hostAttrs:[1,"ant-tabs-nav-operations"],hostVars:2,hostBindings:function(n,i){2&n&&t.AVh("ant-tabs-nav-operations-hidden",0===i.items.length)},inputs:{items:"items",addable:"addable",addIcon:"addIcon"},outputs:{addClicked:"addClicked",selected:"selected"},exportAs:["nzTabNavOperation"],standalone:!0,features:[t.aNF],decls:7,vars:6,consts:[["dropdownTrigger","nzDropdown"],["menu","nzDropdownMenu"],["nz-dropdown","","type","button","tabindex","-1","aria-hidden","true","nzOverlayClassName","nz-tabs-dropdown",1,"ant-tabs-nav-more",3,"nzVisibleChange","mouseenter","nzDropdownMenu","nzOverlayStyle","nzMatchWidthElement"],["nz-icon","","nzType","ellipsis"],["nz-menu","",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-menu",""],["nz-menu-item","","class","ant-tabs-dropdown-menu-item",3,"ant-tabs-dropdown-menu-item-disabled","nzSelected","nzDisabled","click","contextmenu",4,"ngFor","ngForOf"],["nz-menu-item","",1,"ant-tabs-dropdown-menu-item",3,"click","contextmenu","nzSelected","nzDisabled"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-add-button","",3,"click","addIcon"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"button",2,0),t.bIt("nzVisibleChange",function(l){return t.eBV(r),t.Njj(i.menuVisChange(l))})("mouseenter",function(){return t.eBV(r),t.Njj(i.showItems())}),t.nrm(2,"span",3),t.k0s(),t.j41(3,"nz-dropdown-menu",null,1),t.DNE(5,ks,2,1,"ul",4),t.k0s(),t.DNE(6,ws,1,1,"button",5)}if(2&n){const r=t.sdS(4);t.Y8G("nzDropdownMenu",r)("nzOverlayStyle",t.lJ4(5,_s))("nzMatchWidthElement",null),t.R7$(5),t.Y8G("ngIf",i.menuOpened),t.R7$(),t.Y8G("ngIf",i.addable)}},dependencies:[Y.Y3,Y.Dn,S.bT,S.Sq,q.C,q.m,Lt,wt.wQ,kt.GP,kt.jS,kt.CU,wt.j3],encapsulation:2,changeDetection:0})}return s})();const Ze=.995**20;let $e=(()=>{class s{constructor(e,n){this.ngZone=e,this.elementRef=n,this.lastWheelDirection=null,this.lastWheelTimestamp=0,this.lastTimestamp=0,this.lastTimeDiff=0,this.lastMixedWheel=0,this.lastWheelPrevent=!1,this.touchPosition=null,this.lastOffset=null,this.motion=-1,this.unsubscribe=()=>{},this.offsetChange=new t.bkB,this.tabScroll=new t.bkB,this.onTouchEnd=i=>{if(!this.touchPosition)return;const r=this.lastOffset,a=this.lastTimeDiff;if(this.lastOffset=this.touchPosition=null,r){const l=r.x/a,h=r.y/a,d=Math.abs(l),p=Math.abs(h);if(Math.max(d,p)<.1)return;let u=l,f=h;this.motion=window.setInterval(()=>{Math.abs(u)<.01&&Math.abs(f)<.01?window.clearInterval(this.motion):(u*=Ze,f*=Ze,this.onOffset(20*u,20*f,i))},20)}},this.onTouchMove=i=>{if(!this.touchPosition)return;i.preventDefault();const{screenX:r,screenY:a}=i.touches[0],l=r-this.touchPosition.x,h=a-this.touchPosition.y;this.onOffset(l,h,i);const d=Date.now();this.lastTimeDiff=d-this.lastTimestamp,this.lastTimestamp=d,this.lastOffset={x:l,y:h},this.touchPosition={x:r,y:a}},this.onTouchStart=i=>{const{screenX:r,screenY:a}=i.touches[0];this.touchPosition={x:r,y:a},window.clearInterval(this.motion)},this.onWheel=i=>{const{deltaX:r,deltaY:a}=i;let l;const h=Math.abs(r),d=Math.abs(a);h===d?l="x"===this.lastWheelDirection?r:a:h>d?(l=r,this.lastWheelDirection="x"):(l=a,this.lastWheelDirection="y");const p=Date.now(),u=Math.abs(l);(p-this.lastWheelTimestamp>100||u-this.lastMixedWheel>10)&&(this.lastWheelPrevent=!1),this.onOffset(-l,-l,i),(i.defaultPrevented||this.lastWheelPrevent)&&(this.lastWheelPrevent=!0),this.lastWheelTimestamp=p,this.lastMixedWheel=u}}ngOnInit(){this.unsubscribe=this.ngZone.runOutsideAngular(()=>{const e=this.elementRef.nativeElement,n=(0,tt.R)(e,"wheel"),i=(0,tt.R)(e,"touchstart"),r=(0,tt.R)(e,"touchmove"),a=(0,tt.R)(e,"touchend"),l=new ie.yU;return l.add(this.subscribeWrap("wheel",n,this.onWheel)),l.add(this.subscribeWrap("touchstart",i,this.onTouchStart)),l.add(this.subscribeWrap("touchmove",r,this.onTouchMove)),l.add(this.subscribeWrap("touchend",a,this.onTouchEnd)),()=>{l.unsubscribe()}})}subscribeWrap(e,n,i){return n.subscribe(r=>{this.tabScroll.emit({type:e,event:r}),r.defaultPrevented||i(r)})}onOffset(e,n,i){this.ngZone.run(()=>{this.offsetChange.emit({x:e,y:n,event:i})})}ngOnDestroy(){this.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.SKi),t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["","nzTabScrollList",""]],outputs:{offsetChange:"offsetChange",tabScroll:"tabScroll"},standalone:!0})}return s})();const Ks=typeof requestAnimationFrame<"u"?us.X:gs.$;let re=(()=>{class s{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const n=(0,Le.OE)(e);this._selectedIndex!==n&&(this._selectedIndex=e,this.selectedIndexChanged=!0,this.keyManager&&this.keyManager.updateActiveItem(e))}get focusIndex(){return this.keyManager?this.keyManager.activeItemIndex:0}set focusIndex(e){!this.isValidIndex(e)||this.focusIndex===e||!this.keyManager||this.keyManager.setActiveItem(e)}get showAddButton(){return 0===this.hiddenItems.length&&this.addable}constructor(e,n,i,r,a){this.cdr=e,this.ngZone=n,this.viewportRuler=i,this.nzResizeObserver=r,this.dir=a,this.indexFocused=new t.bkB,this.selectFocusedIndex=new t.bkB,this.addClicked=new t.bkB,this.tabScroll=new t.bkB,this.position="horizontal",this.addable=!1,this.hideBar=!1,this.addIcon="plus",this.inkBarAnimated=!0,this.translate=null,this.transformX=0,this.transformY=0,this.pingLeft=!1,this.pingRight=!1,this.pingTop=!1,this.pingBottom=!1,this.hiddenItems=[],this.destroy$=new Tt.B,this._selectedIndex=0,this.wrapperWidth=0,this.wrapperHeight=0,this.scrollListWidth=0,this.scrollListHeight=0,this.operationWidth=0,this.operationHeight=0,this.addButtonWidth=0,this.addButtonHeight=0,this.selectedIndexChanged=!1}ngAfterViewInit(){const e=this.dir?this.dir.change.asObservable():(0,Ue.of)(null),n=this.viewportRuler.change(150),i=()=>{this.updateScrollListPosition(),this.alignInkBarToSelectedTab()};this.keyManager=new fe.Bu(this.items).withHorizontalOrientation(this.getLayoutDirection()).withWrap(),this.keyManager.updateActiveItem(this.selectedIndex),(0,He.j)(i),(0,me.h)(this.nzResizeObserver.observe(this.navWarpRef),this.nzResizeObserver.observe(this.navListRef)).pipe((0,U.Q)(this.destroy$),(0,fs.Z)(16,Ks)).subscribe(()=>{i()}),(0,me.h)(e,n,this.items.changes).pipe((0,U.Q)(this.destroy$)).subscribe(()=>{Promise.resolve().then(i),this.keyManager.withHorizontalOrientation(this.getLayoutDirection())}),this.keyManager.change.pipe((0,U.Q)(this.destroy$)).subscribe(r=>{this.indexFocused.emit(r),this.setTabFocus(r),this.scrollToTab(this.keyManager.activeItem)})}ngAfterContentChecked(){this.selectedIndexChanged&&(this.updateScrollListPosition(),this.alignInkBarToSelectedTab(),this.selectedIndexChanged=!1,this.cdr.markForCheck())}ngOnDestroy(){clearTimeout(this.lockAnimationTimeoutId),clearTimeout(this.cssTransformTimeWaitingId),this.destroy$.next(),this.destroy$.complete()}onSelectedFromMenu(e){const n=this.items.toArray().findIndex(i=>i===e);-1!==n&&(this.keyManager.updateActiveItem(n),this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this.scrollToTab(e)))}onOffsetChange(e){if("horizontal"===this.position){if(!this.lockAnimationTimeoutId&&(this.transformX>=0&&e.x>0||this.transformX<=this.wrapperWidth-this.scrollListWidth&&e.x<0))return;e.event.preventDefault(),this.transformX=this.clampTransformX(this.transformX+e.x),this.setTransform(this.transformX,0)}else{if(!this.lockAnimationTimeoutId&&(this.transformY>=0&&e.y>0||this.transformY<=this.wrapperHeight-this.scrollListHeight&&e.y<0))return;e.event.preventDefault(),this.transformY=this.clampTransformY(this.transformY+e.y),this.setTransform(0,this.transformY)}this.lockAnimation(),this.setVisibleRange(),this.setPingStatus()}handleKeydown(e){const n=this.navWarpRef.nativeElement.contains(e.target);if(!(0,At.rp)(e)&&n)switch(e.keyCode){case At.UQ:case At.i7:case At.LE:case At.n6:this.lockAnimation(),this.keyManager.onKeydown(e);break;case At.Fm:case At.t6:this.focusIndex!==this.selectedIndex&&this.selectFocusedIndex.emit(this.focusIndex);break;default:this.keyManager.onKeydown(e)}}isValidIndex(e){if(!this.items)return!0;const n=this.items?this.items.toArray()[e]:null;return!!n&&!n.disabled}scrollToTab(e){if(!this.items.find(i=>i===e))return;const n=this.items.toArray();if("horizontal"===this.position){let i=this.transformX;if("rtl"===this.getLayoutDirection()){const r=n[0].left+n[0].width-e.left-e.width;r<this.transformX?i=r:r+e.width>this.transformX+this.wrapperWidth&&(i=r+e.width-this.wrapperWidth)}else e.left<-this.transformX?i=-e.left:e.left+e.width>-this.transformX+this.wrapperWidth&&(i=-(e.left+e.width-this.wrapperWidth));this.transformX=i,this.transformY=0,this.setTransform(i,0)}else{let i=this.transformY;e.top<-this.transformY?i=-e.top:e.top+e.height>-this.transformY+this.wrapperHeight&&(i=-(e.top+e.height-this.wrapperHeight)),this.transformY=i,this.transformX=0,this.setTransform(0,i)}clearTimeout(this.cssTransformTimeWaitingId),this.cssTransformTimeWaitingId=setTimeout(()=>{this.setVisibleRange()},150)}lockAnimation(){this.lockAnimationTimeoutId||this.ngZone.runOutsideAngular(()=>{this.navListRef.nativeElement.style.transition="none",this.lockAnimationTimeoutId=setTimeout(()=>{this.navListRef.nativeElement.style.transition="",this.lockAnimationTimeoutId=void 0},150)})}setTransform(e,n){this.navListRef.nativeElement.style.transform=`translate(${e}px, ${n}px)`}clampTransformX(e){const n=this.wrapperWidth-this.scrollListWidth;return"rtl"===this.getLayoutDirection()?Math.max(Math.min(n,e),0):Math.min(Math.max(n,e),0)}clampTransformY(e){return Math.min(Math.max(this.wrapperHeight-this.scrollListHeight,e),0)}updateScrollListPosition(){this.resetSizes(),this.transformX=this.clampTransformX(this.transformX),this.transformY=this.clampTransformY(this.transformY),this.setVisibleRange(),this.setPingStatus(),this.keyManager&&(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex),this.keyManager.activeItem&&this.scrollToTab(this.keyManager.activeItem))}resetSizes(){this.addButtonWidth=this.addBtnRef?this.addBtnRef.getElementWidth():0,this.addButtonHeight=this.addBtnRef?this.addBtnRef.getElementHeight():0,this.operationWidth=this.operationRef.getElementWidth(),this.operationHeight=this.operationRef.getElementHeight(),this.wrapperWidth=this.navWarpRef.nativeElement.offsetWidth||0,this.wrapperHeight=this.navWarpRef.nativeElement.offsetHeight||0,this.scrollListHeight=this.navListRef.nativeElement.offsetHeight||0,this.scrollListWidth=this.navListRef.nativeElement.offsetWidth||0}alignInkBarToSelectedTab(){const e=this.items&&this.items.length?this.items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n&&this.inkBar.alignToElement(n.parentElement)}setPingStatus(){const e={top:!1,right:!1,bottom:!1,left:!1},n=this.navWarpRef.nativeElement;"horizontal"===this.position?"rtl"===this.getLayoutDirection()?(e.right=this.transformX>0,e.left=this.transformX+this.wrapperWidth<this.scrollListWidth):(e.left=this.transformX<0,e.right=-this.transformX+this.wrapperWidth<this.scrollListWidth):(e.top=this.transformY<0,e.bottom=-this.transformY+this.wrapperHeight<this.scrollListHeight),Object.keys(e).forEach(i=>{const r=`ant-tabs-nav-wrap-ping-${i}`;e[i]?n.classList.add(r):n.classList.remove(r)})}setVisibleRange(){let e,n,i,r,a,l;const h=this.items.toArray(),d={width:0,height:0,left:0,top:0,right:0},p=k=>{let z;return z="right"===n?h[0].left+h[0].width-h[k].left-h[k].width:(h[k]||d)[n],z};"horizontal"===this.position?(e="width",r=this.wrapperWidth,a=this.scrollListWidth-(this.hiddenItems.length?this.operationWidth:0),l=this.addButtonWidth,i=Math.abs(this.transformX),"rtl"===this.getLayoutDirection()?(n="right",this.pingRight=this.transformX>0,this.pingLeft=this.transformX+this.wrapperWidth<this.scrollListWidth):(this.pingLeft=this.transformX<0,this.pingRight=-this.transformX+this.wrapperWidth<this.scrollListWidth,n="left")):(e="height",r=this.wrapperHeight,a=this.scrollListHeight-(this.hiddenItems.length?this.operationHeight:0),l=this.addButtonHeight,n="top",i=-this.transformY,this.pingTop=this.transformY<0,this.pingBottom=-this.transformY+this.wrapperHeight<this.scrollListHeight);let u=r;if(a+l>r&&(u=r-l),!h.length)return this.hiddenItems=[],void this.cdr.markForCheck();const f=h.length;let m=f;for(let k=0;k<f;k+=1)if(p(k)+(h[k]||d)[e]>i+u){m=k-1;break}let y=0;for(let k=f-1;k>=0;k-=1)if(p(k)<i){y=k+1;break}const v=h.slice(0,y),_=h.slice(m+1);this.hiddenItems=[...v,..._],this.cdr.markForCheck()}getLayoutDirection(){return this.dir&&"rtl"===this.dir.value?"rtl":"ltr"}setTabFocus(e){}ngOnChanges(e){const{position:n}=e;n&&!n.isFirstChange()&&(this.alignInkBarToSelectedTab(),this.lockAnimation(),this.updateScrollListPosition())}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.gRc),t.rXU(t.SKi),t.rXU(Cs.Xj),t.rXU(Ke.xH),t.rXU(zt.dS,8))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tabs-nav"]],contentQueries:function(n,i,r){if(1&n&&t.wni(r,Ce,5),2&n){let a;t.mGM(a=t.lsd())&&(i.items=a)}},viewQuery:function(n,i){if(1&n&&(t.GBs(Ss,7),t.GBs(Ts,7),t.GBs(se,7),t.GBs(Lt,5),t.GBs(be,7)),2&n){let r;t.mGM(r=t.lsd())&&(i.navWarpRef=r.first),t.mGM(r=t.lsd())&&(i.navListRef=r.first),t.mGM(r=t.lsd())&&(i.operationRef=r.first),t.mGM(r=t.lsd())&&(i.addBtnRef=r.first),t.mGM(r=t.lsd())&&(i.inkBar=r.first)}},hostAttrs:[1,"ant-tabs-nav"],hostBindings:function(n,i){1&n&&t.bIt("keydown",function(a){return i.handleKeydown(a)})},inputs:{position:"position",addable:"addable",hideBar:"hideBar",addIcon:"addIcon",inkBarAnimated:"inkBarAnimated",extraTemplate:"extraTemplate",selectedIndex:"selectedIndex"},outputs:{indexFocused:"indexFocused",selectFocusedIndex:"selectFocusedIndex",addClicked:"addClicked",tabScroll:"tabScroll"},exportAs:["nzTabsNav"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:As,decls:9,vars:16,consts:[["navWarp",""],["navList",""],[1,"ant-tabs-nav-wrap"],["nzTabScrollList","","role","tablist",1,"ant-tabs-nav-list",3,"offsetChange","tabScroll"],["role","tab","nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-tabs-ink-bar","",3,"hidden","position","animated"],[3,"addClicked","selected","addIcon","addable","items"],["class","ant-tabs-extra-content",4,"ngIf"],["role","tab","nz-tab-add-button","",3,"click","addIcon"],[1,"ant-tabs-extra-content"],[3,"ngTemplateOutlet"]],template:function(n,i){if(1&n){const r=t.RV6();t.NAR(),t.j41(0,"div",2,0)(2,"div",3,1),t.bIt("offsetChange",function(l){return t.eBV(r),t.Njj(i.onOffsetChange(l))})("tabScroll",function(l){return t.eBV(r),t.Njj(i.tabScroll.emit(l))}),t.SdG(4),t.DNE(5,Es,1,2,"button",4),t.nrm(6,"div",5),t.k0s()(),t.j41(7,"nz-tab-nav-operation",6),t.bIt("addClicked",function(){return t.eBV(r),t.Njj(i.addClicked.emit())})("selected",function(l){return t.eBV(r),t.Njj(i.onSelectedFromMenu(l))}),t.k0s(),t.DNE(8,Is,2,1,"div",7)}2&n&&(t.AVh("ant-tabs-nav-wrap-ping-left",i.pingLeft)("ant-tabs-nav-wrap-ping-right",i.pingRight)("ant-tabs-nav-wrap-ping-top",i.pingTop)("ant-tabs-nav-wrap-ping-bottom",i.pingBottom),t.R7$(5),t.Y8G("ngIf",i.showAddButton),t.R7$(),t.Y8G("hidden",i.hideBar)("position",i.position)("animated",i.inkBarAnimated),t.R7$(),t.Y8G("addIcon",i.addIcon)("addable",i.addable)("items",i.hiddenItems),t.R7$(),t.Y8G("ngIf",i.extraTemplate))},dependencies:[$e,S.bT,Lt,be,se,S.T3],encapsulation:2,changeDetection:0})}return s})(),tn=(()=>{class s{constructor(){this.content=null,this.active=!1,this.animated=!0,this.forceRender=!1,this.hasBeenActive=!1}ngOnChanges(e){const{active:n}=e;n?.currentValue&&(this.hasBeenActive=!0)}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["","nz-tab-body",""]],hostAttrs:[1,"ant-tabs-tabpane"],hostVars:10,hostBindings:function(n,i){2&n&&(t.zvX("@tabSwitchMotion",i.active?"enter":"leave")("@.disabled",!i.animated),t.BMQ("tabindex",i.active?0:-1)("aria-hidden",!i.active),t.xc7("overflow-y",i.animated?i.active?null:"none":null),t.AVh("ant-tabs-tabpane-active",i.active)("ant-tabs-tabpane-hidden",i.animated?null:!i.active))},inputs:{content:"content",active:"active",animated:"animated",forceRender:"forceRender"},exportAs:["nzTabBody"],standalone:!0,features:[t.OA$,t.aNF],attrs:Ns,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(n,i){1&n&&t.DNE(0,Ps,2,1,"ng-container",0),2&n&&t.Y8G("ngIf",i.hasBeenActive||i.forceRender)},dependencies:[S.bT,S.T3],encapsulation:2,data:{animation:[Wt.eF]},changeDetection:0})}return s})(),ve=(()=>{class s{constructor(){this.closeIcon="close"}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tab-close-button"],["button","nz-tab-close-button",""]],hostAttrs:["aria-label","Close tab","type","button",1,"ant-tabs-tab-remove"],inputs:{closeIcon:"closeIcon"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(n,i){1&n&&t.DNE(0,Ms,2,1,"ng-container",0),2&n&&t.Y8G("nzStringTemplateOutlet",i.closeIcon)},dependencies:[q.C,q.m,Y.Y3,Y.Dn],encapsulation:2})}return s})(),en=(()=>{class s{constructor(e){this.templateRef=e}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.C4Q,1))};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["ng-template","nzTabLink",""]],exportAs:["nzTabLinkTemplate"],standalone:!0})}return s})(),nn=(()=>{class s{constructor(e,n){this.elementRef=e,this.routerLink=n}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.aKT),t.rXU(ct.Wk,10))};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["a","nz-tab-link",""]],exportAs:["nzTabLink"],standalone:!0})}return s})(),sn=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["","nz-tab",""]],exportAs:["nzTab"],standalone:!0})}return s})();const on=new t.nKC("NZ_TAB_SET");let rn=(()=>{class s{get content(){return this.template||this.contentTemplate}get label(){return this.nzTitle||this.nzTabLinkTemplateDirective?.templateRef}constructor(e){this.closestTabSet=e,this.nzTitle="",this.nzClosable=!1,this.nzCloseIcon="close",this.nzDisabled=!1,this.nzForceRender=!1,this.nzSelect=new t.bkB,this.nzDeselect=new t.bkB,this.nzClick=new t.bkB,this.nzContextmenu=new t.bkB,this.template=null,this.isActive=!1,this.position=null,this.origin=null,this.stateChanges=new Tt.B}ngOnChanges(e){const{nzTitle:n,nzDisabled:i,nzForceRender:r}=e;(n||i||r)&&this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(on))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tab"]],contentQueries:function(n,i,r){if(1&n&&(t.wni(r,en,5),t.wni(r,sn,5,t.C4Q),t.wni(r,nn,5)),2&n){let a;t.mGM(a=t.lsd())&&(i.nzTabLinkTemplateDirective=a.first),t.mGM(a=t.lsd())&&(i.template=a.first),t.mGM(a=t.lsd())&&(i.linkDirective=a.first)}},viewQuery:function(n,i){if(1&n&&t.GBs(Ds,7),2&n){let r;t.mGM(r=t.lsd())&&(i.contentTemplate=r.first)}},inputs:{nzTitle:"nzTitle",nzClosable:"nzClosable",nzCloseIcon:"nzCloseIcon",nzDisabled:"nzDisabled",nzForceRender:"nzForceRender"},outputs:{nzSelect:"nzSelect",nzDeselect:"nzDeselect",nzClick:"nzClick",nzContextmenu:"nzContextmenu"},exportAs:["nzTab"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:Gs,decls:4,vars:0,consts:[["tabLinkTemplate",""],["contentTemplate",""]],template:function(n,i){1&n&&(t.NAR(js),t.DNE(0,Fs,1,0,"ng-template",null,0,t.C5r)(2,Os,1,0,"ng-template",null,1,t.C5r))},encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,R.H3)()],s.prototype,"nzClosable",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzDisabled",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzForceRender",void 0),s})();class Js{}let Zs=0,an=(()=>{class s{get nzSelectedIndex(){return this.selectedIndex}set nzSelectedIndex(e){this.indexToSelect=(0,Le.OE)(e,null)}get position(){return-1===["top","bottom"].indexOf(this.nzTabPosition)?"vertical":"horizontal"}get addable(){return"editable-card"===this.nzType&&!this.nzHideAdd}get closable(){return"editable-card"===this.nzType}get line(){return"line"===this.nzType}get inkBarAnimated(){return this.line&&("boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.inkBar)}get tabPaneAnimated(){return"boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.tabPane}constructor(e,n,i,r,a){this.nzConfigService=e,this.ngZone=n,this.cdr=i,this.directionality=r,this.router=a,this._nzModuleName="tabs",this.nzTabPosition="top",this.nzCanDeactivate=null,this.nzAddIcon="plus",this.nzTabBarStyle=null,this.nzType="line",this.nzSize="default",this.nzAnimated=!0,this.nzTabBarGutter=void 0,this.nzHideAdd=!1,this.nzCentered=!1,this.nzHideAll=!1,this.nzLinkRouter=!1,this.nzLinkExact=!0,this.nzSelectChange=new t.bkB(!0),this.nzSelectedIndexChange=new t.bkB,this.nzTabListScroll=new t.bkB,this.nzClose=new t.bkB,this.nzAdd=new t.bkB,this.allTabs=new t.rOR,this.tabs=new t.rOR,this.dir="ltr",this.destroy$=new Tt.B,this.indexToSelect=0,this.selectedIndex=null,this.tabLabelSubscription=ie.yU.EMPTY,this.tabsSubscription=ie.yU.EMPTY,this.canDeactivateSubscription=ie.yU.EMPTY,this.tabSetId=Zs++}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,U.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.tabs.destroy(),this.tabLabelSubscription.unsubscribe(),this.tabsSubscription.unsubscribe(),this.canDeactivateSubscription.unsubscribe()}ngAfterContentInit(){this.ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>this.setUpRouter())}),this.subscribeToTabLabels(),this.subscribeToAllTabChanges(),this.tabsSubscription=this.tabs.changes.subscribe(()=>{if(this.clampTabIndex(this.indexToSelect)===this.selectedIndex){const n=this.tabs.toArray();for(let i=0;i<n.length;i++)if(n[i].isActive){this.indexToSelect=this.selectedIndex=i;break}}this.subscribeToTabLabels(),this.cdr.markForCheck()})}ngAfterContentChecked(){const e=this.indexToSelect=this.clampTabIndex(this.indexToSelect);if(this.selectedIndex!==e){const n=null==this.selectedIndex;n||this.nzSelectChange.emit(this.createChangeEvent(e)),Promise.resolve().then(()=>{this.tabs.forEach((i,r)=>i.isActive=r===e),n||this.nzSelectedIndexChange.emit(e)})}this.tabs.forEach((n,i)=>{n.position=i-e,null!=this.selectedIndex&&0===n.position&&!n.origin&&(n.origin=e-this.selectedIndex)}),this.selectedIndex!==e&&(this.selectedIndex=e,this.cdr.markForCheck())}onClose(e,n){n.preventDefault(),n.stopPropagation(),this.nzClose.emit({index:e})}onAdd(){this.nzAdd.emit()}clampTabIndex(e){return Math.min(this.tabs.length-1,Math.max(e||0,0))}createChangeEvent(e){const n=new Js;return n.index=e,this.tabs&&this.tabs.length&&(n.tab=this.tabs.toArray()[e],this.tabs.forEach((i,r)=>{r!==e&&i.nzDeselect.emit()}),n.tab.nzSelect.emit()),n}subscribeToTabLabels(){this.tabLabelSubscription&&this.tabLabelSubscription.unsubscribe(),this.tabLabelSubscription=(0,me.h)(...this.tabs.map(e=>e.stateChanges)).subscribe(()=>this.cdr.markForCheck())}subscribeToAllTabChanges(){this.allTabs.changes.pipe((0,We.Z)(this.allTabs)).subscribe(e=>{this.tabs.reset(e.filter(n=>n.closestTabSet===this)),this.tabs.notifyOnChanges()})}canDeactivateFun(e,n){return"function"==typeof this.nzCanDeactivate?(0,R.cG)(this.nzCanDeactivate(e,n)).pipe((0,ms.$)(),(0,U.Q)(this.destroy$)):(0,Ue.of)(!0)}clickNavItem(e,n,i){e.nzDisabled||(e.nzClick.emit(),this.isRouterLinkClickEvent(n,i)||this.setSelectedIndex(n))}isRouterLinkClickEvent(e,n){const i=n.target;return!!this.nzLinkRouter&&!!this.tabs.toArray()[e]?.linkDirective?.elementRef.nativeElement.contains(i)}contextmenuNavItem(e,n){e.nzDisabled||e.nzContextmenu.emit(n)}setSelectedIndex(e){this.canDeactivateSubscription.unsubscribe(),this.canDeactivateSubscription=this.canDeactivateFun(this.selectedIndex,e).subscribe(n=>{n&&(this.nzSelectedIndex=e,this.tabNavBarRef.focusIndex=e,this.cdr.markForCheck())})}getTabIndex(e,n){return e.nzDisabled?null:this.selectedIndex===n?0:-1}getTabContentId(e){return`nz-tabs-${this.tabSetId}-tab-${e}`}setUpRouter(){if(this.nzLinkRouter){if(!this.router)throw new Error(`${Je.H3} you should import 'RouterModule' if you want to use 'nzLinkRouter'!`);this.router.events.pipe((0,U.Q)(this.destroy$),(0,Bt.p)(e=>e instanceof ct.wF),(0,We.Z)(!0),(0,bs.c)(0)).subscribe(()=>{this.updateRouterActive(),this.cdr.markForCheck()})}}updateRouterActive(){if(this.router.navigated){const e=this.findShouldActiveTabIndex();e!==this.selectedIndex&&this.setSelectedIndex(e),this.nzHideAll=-1===e}}findShouldActiveTabIndex(){const e=this.tabs.toArray(),n=this.isLinkActive(this.router);return e.findIndex(i=>{const r=i.linkDirective;return!!r&&n(r.routerLink)})}isLinkActive(e){return n=>!!n&&e.isActive(n.urlTree||"",{paths:this.nzLinkExact?"exact":"subset",queryParams:this.nzLinkExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(et.yx),t.rXU(t.SKi),t.rXU(t.gRc),t.rXU(zt.dS,8),t.rXU(ct.Ix,8))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tabset"]],contentQueries:function(n,i,r){if(1&n&&t.wni(r,rn,5),2&n){let a;t.mGM(a=t.lsd())&&(i.allTabs=a)}},viewQuery:function(n,i){if(1&n&&t.GBs(re,5),2&n){let r;t.mGM(r=t.lsd())&&(i.tabNavBarRef=r.first)}},hostAttrs:[1,"ant-tabs"],hostVars:24,hostBindings:function(n,i){2&n&&t.AVh("ant-tabs-card","card"===i.nzType||"editable-card"===i.nzType)("ant-tabs-editable","editable-card"===i.nzType)("ant-tabs-editable-card","editable-card"===i.nzType)("ant-tabs-centered",i.nzCentered)("ant-tabs-rtl","rtl"===i.dir)("ant-tabs-top","top"===i.nzTabPosition)("ant-tabs-bottom","bottom"===i.nzTabPosition)("ant-tabs-left","left"===i.nzTabPosition)("ant-tabs-right","right"===i.nzTabPosition)("ant-tabs-default","default"===i.nzSize)("ant-tabs-small","small"===i.nzSize)("ant-tabs-large","large"===i.nzSize)},inputs:{nzSelectedIndex:"nzSelectedIndex",nzTabPosition:"nzTabPosition",nzTabBarExtraContent:"nzTabBarExtraContent",nzCanDeactivate:"nzCanDeactivate",nzAddIcon:"nzAddIcon",nzTabBarStyle:"nzTabBarStyle",nzType:"nzType",nzSize:"nzSize",nzAnimated:"nzAnimated",nzTabBarGutter:"nzTabBarGutter",nzHideAdd:"nzHideAdd",nzCentered:"nzCentered",nzHideAll:"nzHideAll",nzLinkRouter:"nzLinkRouter",nzLinkExact:"nzLinkExact"},outputs:{nzSelectChange:"nzSelectChange",nzSelectedIndexChange:"nzSelectedIndexChange",nzTabListScroll:"nzTabListScroll",nzClose:"nzClose",nzAdd:"nzAdd"},exportAs:["nzTabset"],standalone:!0,features:[t.Jv_([{provide:on,useExisting:s}]),t.aNF],decls:4,vars:12,consts:[[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked",4,"ngIf"],[1,"ant-tabs-content-holder"],[1,"ant-tabs-content"],["role","tabpanel","nz-tab-body","",3,"id","active","content","forceRender","animated",4,"ngFor","ngForOf"],[3,"tabScroll","selectFocusedIndex","addClicked","ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate"],["class","ant-tabs-tab",3,"margin-right","margin-bottom","ant-tabs-tab-active","ant-tabs-tab-disabled","click","contextmenu",4,"ngFor","ngForOf"],[1,"ant-tabs-tab",3,"click","contextmenu"],["type","button","role","tab","nzTabNavItem","","cdkMonitorElementFocus","",1,"ant-tabs-tab-btn",3,"id","disabled","tab","active"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["type","button","nz-tab-close-button","",3,"closeIcon","click",4,"ngIf"],["type","button","nz-tab-close-button","",3,"click","closeIcon"],["role","tabpanel","nz-tab-body","",3,"id","active","content","forceRender","animated"]],template:function(n,i){1&n&&(t.DNE(0,Ls,2,9,"nz-tabs-nav",0),t.j41(1,"div",1)(2,"div",2),t.DNE(3,Us,1,6,"div",3),t.k0s()()),2&n&&(t.Y8G("ngIf",i.tabs.length||i.addable),t.R7$(2),t.AVh("ant-tabs-content-top","top"===i.nzTabPosition)("ant-tabs-content-bottom","bottom"===i.nzTabPosition)("ant-tabs-content-left","left"===i.nzTabPosition)("ant-tabs-content-right","right"===i.nzTabPosition)("ant-tabs-content-animated",i.tabPaneAnimated),t.R7$(),t.Y8G("ngForOf",i.tabs))},dependencies:[re,S.bT,S.B3,S.Sq,Ce,fe.Pd,fe.vR,q.C,q.m,ve,tn],encapsulation:2})}return(0,B.Cg)([(0,et.H4)()],s.prototype,"nzType",void 0),(0,B.Cg)([(0,et.H4)()],s.prototype,"nzSize",void 0),(0,B.Cg)([(0,et.H4)()],s.prototype,"nzAnimated",void 0),(0,B.Cg)([(0,et.H4)()],s.prototype,"nzTabBarGutter",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzHideAdd",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzCentered",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzHideAll",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzLinkRouter",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzLinkExact",void 0),s})(),$s=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[an,re,se,Lt,ve]})}return s})();var ln=b(2986);let Qs=(()=>{class s{constructor(e){this.san=e}transform(e,...n){return this.san.bypassSecurityTrustHtml(e)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(rt.up,16))};static#e=this.\u0275pipe=t.EJ8({name:"html",type:s,pure:!0})}return s})();var to=b(6354);const eo=[[["nz-breadcrumb","nz-page-header-breadcrumb",""]],[["nz-avatar","nz-page-header-avatar",""]],[["nz-page-header-tags"],["","nz-page-header-tags",""]],[["nz-page-header-extra"],["","nz-page-header-extra",""]],[["nz-page-header-content"],["","nz-page-header-content",""]],[["nz-page-header-footer"],["","nz-page-header-footer",""]],[["nz-page-header-title"],["","nz-page-header-title",""]],[["nz-page-header-subtitle"],["","nz-page-header-subtitle",""]]],no=["nz-breadcrumb[nz-page-header-breadcrumb]","nz-avatar[nz-page-header-avatar]","nz-page-header-tags, [nz-page-header-tags]","nz-page-header-extra, [nz-page-header-extra]","nz-page-header-content, [nz-page-header-content]","nz-page-header-footer, [nz-page-header-footer]","nz-page-header-title, [nz-page-header-title]","nz-page-header-subtitle, [nz-page-header-subtitle]"];function io(s,o){if(1&s&&(t.qex(0),t.nrm(1,"span",8),t.bVm()),2&s){const e=o.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("nzType",e||n.getBackIcon())}}function so(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onBack())}),t.j41(1,"div",6),t.DNE(2,io,2,1,"ng-container",7),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(2),t.Y8G("nzStringTemplateOutlet",e.nzBackIcon)}}function oo(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.JRh(e.nzTitle)}}function ro(s,o){if(1&s&&(t.j41(0,"span",3),t.DNE(1,oo,2,1,"ng-container",7),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzTitle)}}function ao(s,o){1&s&&t.SdG(0,6)}function lo(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.JRh(e.nzSubtitle)}}function co(s,o){if(1&s&&(t.j41(0,"span",4),t.DNE(1,lo,2,1,"ng-container",7),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzSubtitle)}}function ho(s,o){1&s&&t.SdG(0,7)}let cn=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["nz-page-header-footer"],["","nz-page-header-footer",""]],hostAttrs:[1,"ant-page-header-footer"],exportAs:["nzPageHeaderFooter"],standalone:!0})}return s})(),hn=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275dir=t.FsC({type:s,selectors:[["nz-breadcrumb","nz-page-header-breadcrumb",""]],exportAs:["nzPageHeaderBreadcrumb"],standalone:!0})}return s})(),vo=(()=>{class s{constructor(e,n,i,r,a,l){this.location=e,this.nzConfigService=n,this.elementRef=i,this.nzResizeObserver=r,this.cdr=a,this.directionality=l,this._nzModuleName="pageHeader",this.nzBackIcon=null,this.nzGhost=!0,this.nzBack=new t.bkB,this.compact=!1,this.destroy$=new Tt.B,this.dir="ltr"}ngOnInit(){this.directionality.change?.pipe((0,U.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterViewInit(){this.nzResizeObserver.observe(this.elementRef).pipe((0,to.T)(([e])=>e.contentRect.width),(0,U.Q)(this.destroy$)).subscribe(e=>{this.compact=e<768,this.cdr.markForCheck()})}onBack(){if(this.nzBack.observers.length)this.nzBack.emit();else{if(!this.location)throw new Error(`${Je.H3} you should import 'RouterModule' or register 'Location' if you want to use 'nzBack' default event!`);this.location.back()}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getBackIcon(){return"rtl"===this.dir?"arrow-right":"arrow-left"}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S.aZ,8),t.rXU(et.yx),t.rXU(t.aKT),t.rXU(Ke.xH),t.rXU(t.gRc),t.rXU(zt.dS,8))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-page-header"]],contentQueries:function(n,i,r){if(1&n&&(t.wni(r,cn,5),t.wni(r,hn,5)),2&n){let a;t.mGM(a=t.lsd())&&(i.nzPageHeaderFooter=a.first),t.mGM(a=t.lsd())&&(i.nzPageHeaderBreadcrumb=a.first)}},hostAttrs:[1,"ant-page-header"],hostVars:10,hostBindings:function(n,i){2&n&&t.AVh("has-footer",i.nzPageHeaderFooter)("ant-page-header-ghost",i.nzGhost)("has-breadcrumb",i.nzPageHeaderBreadcrumb)("ant-page-header-compact",i.compact)("ant-page-header-rtl","rtl"===i.dir)},inputs:{nzBackIcon:"nzBackIcon",nzTitle:"nzTitle",nzSubtitle:"nzSubtitle",nzGhost:"nzGhost"},outputs:{nzBack:"nzBack"},exportAs:["nzPageHeader"],standalone:!0,features:[t.aNF],ngContentSelectors:no,decls:13,vars:3,consts:[[1,"ant-page-header-heading"],[1,"ant-page-header-heading-left"],[1,"ant-page-header-back"],[1,"ant-page-header-heading-title"],[1,"ant-page-header-heading-sub-title"],[1,"ant-page-header-back",3,"click"],["role","button","tabindex","0",1,"ant-page-header-back-button"],[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(n,i){1&n&&(t.NAR(eo),t.SdG(0),t.j41(1,"div",0)(2,"div",1),t.DNE(3,so,3,1,"div",2),t.SdG(4,1),t.DNE(5,ro,2,1,"span",3)(6,ao,1,0)(7,co,2,1,"span",4)(8,ho,1,0),t.SdG(9,2),t.k0s(),t.SdG(10,3),t.k0s(),t.SdG(11,4),t.SdG(12,5)),2&n&&(t.R7$(3),t.vxM(3,null!==i.nzBackIcon?3:-1),t.R7$(2),t.vxM(5,i.nzTitle?5:6),t.R7$(2),t.vxM(7,i.nzSubtitle?7:8))},dependencies:[q.C,q.m,Y.Y3,Y.Dn],encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,et.H4)()],s.prototype,"nzGhost",void 0),s})(),_o=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[vo]})}return s})();var zo=b(2358),dn=b(3190),pn=b(7064);const yo=["processDotTemplate"],xo=["itemContainer"],ko=(s,o,e)=>({$implicit:s,status:o,index:e});function wo(s,o){1&s&&t.nrm(0,"div",11)}function So(s,o){if(1&s&&(t.j41(0,"div",14),t.nrm(1,"nz-progress",15),t.k0s()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("nzPercent",e.nzPercentage)("nzWidth","small"===e.nzSize?32:40)("nzFormat",e.nullProcessFormat)("nzStrokeWidth",4)}}function To(s,o){1&s&&(t.j41(0,"span",16),t.nrm(1,"span",17),t.k0s())}function Ao(s,o){1&s&&(t.j41(0,"span",16),t.nrm(1,"span",18),t.k0s())}function Eo(s,o){if(1&s&&(t.j41(0,"span",16),t.EFF(1),t.k0s()),2&s){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.index+1," ")}}function Bo(s,o){if(1&s&&(t.qex(0),t.nrm(1,"span",19),t.bVm()),2&s){const e=o.$implicit,n=t.XpG(3);t.R7$(),t.Y8G("nzType",!n.oldAPIIcon&&e)("ngClass",n.oldAPIIcon&&e)}}function Io(s,o){if(1&s&&(t.j41(0,"span",16),t.DNE(1,Bo,2,2,"ng-container",8),t.k0s()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzIcon)}}function No(s,o){if(1&s&&t.DNE(0,So,2,4,"div",12)(1,To,2,0,"span",13)(2,Ao,2,0,"span",13)(3,Eo,2,1,"span",13)(4,Io,2,1,"span",13),2&s){const e=t.XpG();t.Y8G("ngIf",e.showProgress),t.R7$(),t.Y8G("ngIf","finish"===e.nzStatus&&!e.nzIcon),t.R7$(),t.Y8G("ngIf","error"===e.nzStatus),t.R7$(),t.Y8G("ngIf",("process"===e.nzStatus||"wait"===e.nzStatus)&&!e.nzIcon),t.R7$(),t.Y8G("ngIf",e.nzIcon)}}function Ro(s,o){1&s&&t.nrm(0,"span",21)}function Po(s,o){}function Mo(s,o){if(1&s&&(t.j41(0,"span",16),t.DNE(1,Ro,1,0,"ng-template",null,1,t.C5r)(3,Po,0,0,"ng-template",20),t.k0s()),2&s){const e=t.sdS(2),n=t.XpG();t.R7$(3),t.Y8G("ngTemplateOutlet",n.customProcessTemplate||e)("ngTemplateOutletContext",t.sMw(2,ko,e,n.nzStatus,n.index))}}function Do(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.JRh(e.nzTitle)}}function jo(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.JRh(e.nzSubtitle)}}function Go(s,o){if(1&s&&(t.j41(0,"div",22),t.DNE(1,jo,2,1,"ng-container",8),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("nzStringTemplateOutlet",e.nzSubtitle)}}function Fo(s,o){if(1&s&&(t.qex(0),t.EFF(1),t.bVm()),2&s){const e=t.XpG();t.R7$(),t.JRh(e.nzDescription)}}let Oo=(()=>{class s{get nzStatus(){return this._status}set nzStatus(e){this._status=e,this.isCustomStatus=!0}get nzIcon(){return this._icon}set nzIcon(e){e instanceof t.C4Q||(this.oldAPIIcon="string"==typeof e&&e.indexOf("anticon")>-1),this._icon=e}get showProgress(){return null!==this.nzPercentage&&!this.nzIcon&&"process"===this.nzStatus&&this.nzPercentage>=0&&this.nzPercentage<=100}get currentIndex(){return this._currentIndex}set currentIndex(e){this._currentIndex=e,this.isCustomStatus||(this._status=e>this.index?"finish":e===this.index?this.outStatus||"":"wait")}constructor(e,n,i){this.cdr=e,this.ngZone=n,this.destroy$=i,this.nzDisabled=!1,this.nzPercentage=null,this.nzSize="default",this.isCustomStatus=!1,this._status="wait",this.oldAPIIcon=!0,this.direction="horizontal",this.index=0,this.last=!1,this.outStatus="process",this.showProcessDot=!1,this.clickable=!1,this.clickOutsideAngular$=new Tt.B,this.nullProcessFormat=()=>null,this._currentIndex=0}ngOnInit(){this.ngZone.runOutsideAngular(()=>(0,tt.R)(this.itemContainer.nativeElement,"click").pipe((0,Bt.p)(()=>this.clickable&&this.currentIndex!==this.index&&!this.nzDisabled),(0,U.Q)(this.destroy$)).subscribe(()=>{this.clickOutsideAngular$.next(this.index)}))}enable(){this.nzDisabled=!1,this.cdr.markForCheck()}disable(){this.nzDisabled=!0,this.cdr.markForCheck()}markForCheck(){this.cdr.markForCheck()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.gRc),t.rXU(t.SKi),t.rXU(ht.y4))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-step"]],viewQuery:function(n,i){if(1&n&&(t.GBs(yo,5),t.GBs(xo,7)),2&n){let r;t.mGM(r=t.lsd())&&(i.processDotTemplate=r.first),t.mGM(r=t.lsd())&&(i.itemContainer=r.first)}},hostAttrs:[1,"ant-steps-item"],hostVars:16,hostBindings:function(n,i){2&n&&t.AVh("ant-steps-item-wait","wait"===i.nzStatus)("ant-steps-item-process","process"===i.nzStatus)("ant-steps-item-finish","finish"===i.nzStatus)("ant-steps-item-error","error"===i.nzStatus)("ant-steps-item-active",i.currentIndex===i.index)("ant-steps-item-disabled",i.nzDisabled)("ant-steps-item-custom",!!i.nzIcon)("ant-steps-next-error","error"===i.outStatus&&i.currentIndex===i.index+1)},inputs:{nzTitle:"nzTitle",nzSubtitle:"nzSubtitle",nzDescription:"nzDescription",nzDisabled:"nzDisabled",nzPercentage:"nzPercentage",nzSize:"nzSize",nzStatus:"nzStatus",nzIcon:"nzIcon"},exportAs:["nzStep"],standalone:!0,features:[t.Jv_([ht.y4]),t.aNF],decls:12,vars:8,consts:[["itemContainer",""],["processDotTemplate",""],[1,"ant-steps-item-container",3,"tabindex"],["class","ant-steps-item-tail",4,"ngIf"],[1,"ant-steps-item-icon"],[3,"ngIf"],[1,"ant-steps-item-content"],[1,"ant-steps-item-title"],[4,"nzStringTemplateOutlet"],["class","ant-steps-item-subtitle",4,"ngIf"],[1,"ant-steps-item-description"],[1,"ant-steps-item-tail"],["class","ant-steps-progress-icon",4,"ngIf"],["class","ant-steps-icon",4,"ngIf"],[1,"ant-steps-progress-icon"],["nzType","circle",3,"nzPercent","nzWidth","nzFormat","nzStrokeWidth"],[1,"ant-steps-icon"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"],["nz-icon","",3,"nzType","ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-steps-icon-dot"],[1,"ant-steps-item-subtitle"]],template:function(n,i){1&n&&(t.j41(0,"div",2,0),t.DNE(2,wo,1,0,"div",3),t.j41(3,"div",4),t.DNE(4,No,5,5,"ng-template",5)(5,Mo,4,6,"ng-template",5),t.k0s(),t.j41(6,"div",6)(7,"div",7),t.DNE(8,Do,2,1,"ng-container",8)(9,Go,2,1,"div",9),t.k0s(),t.j41(10,"div",10),t.DNE(11,Fo,2,1,"ng-container",8),t.k0s()()()),2&n&&(t.Y8G("tabindex",i.clickable&&!i.nzDisabled?0:null),t.BMQ("role",i.clickable&&!i.nzDisabled?"button":null),t.R7$(2),t.Y8G("ngIf",!0!==i.last),t.R7$(2),t.Y8G("ngIf",!i.showProcessDot),t.R7$(),t.Y8G("ngIf",i.showProcessDot),t.R7$(3),t.Y8G("nzStringTemplateOutlet",i.nzTitle),t.R7$(),t.Y8G("ngIf",i.nzSubtitle),t.R7$(2),t.Y8G("nzStringTemplateOutlet",i.nzDescription))},dependencies:[S.bT,pn.m,pn.V,Y.Y3,Y.Dn,q.C,q.m,S.YU,S.T3],encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,R.H3)()],s.prototype,"nzDisabled",void 0),s})(),un=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[Oo]})}return s})();var gn=b(9247),fn=b(2983);let Vo=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({providers:[Qs],imports:[S.MD,A.YN,A.X1,Fe,ln.IJ,Y.Y3,ee.j,pe.Zw,Xe,_o,Ye.pc,zo.SE,dn.Sw,un,gn.$G,$t.GP,fn.V]})}return s})(),Xo=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({}),s})();var ae=b(6006);const Yo=["*"];function Ho(s,o){if(1&s){const e=t.RV6();t.j41(0,"span",1),t.bIt("click",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.closeTag(i))}),t.k0s()}}let Lo=(()=>{class s{constructor(e,n,i,r){this.cdr=e,this.renderer=n,this.elementRef=i,this.directionality=r,this.isPresetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzBordered=!0,this.nzOnClose=new t.bkB,this.nzCheckedChange=new t.bkB,this.dir="ltr",this.destroy$=new Tt.B}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked))}closeTag(e){this.nzOnClose.emit(e),e.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}clearPresetColor(){const e=this.elementRef.nativeElement,n=new RegExp(`(ant-tag-(?:${[...ae.un,...ae.PA].join("|")}))`,"g"),i=e.classList.toString(),r=[];let a=n.exec(i);for(;null!==a;)r.push(a[1]),a=n.exec(i);e.classList.remove(...r)}setPresetColor(){const e=this.elementRef.nativeElement;this.clearPresetColor(),this.isPresetColor=!!this.nzColor&&((0,ae.nP)(this.nzColor)||(0,ae.uP)(this.nzColor)),this.isPresetColor&&e.classList.add(`ant-tag-${this.nzColor}`)}ngOnInit(){this.directionality.change?.pipe((0,U.Q)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){const{nzColor:n}=e;n&&this.setPresetColor()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(t.gRc),t.rXU(t.sFG),t.rXU(t.aKT),t.rXU(zt.dS,8))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["nz-tag"]],hostAttrs:[1,"ant-tag"],hostVars:12,hostBindings:function(n,i){1&n&&t.bIt("click",function(){return i.updateCheckedStatus()}),2&n&&(t.xc7("background-color",i.isPresetColor?"":i.nzColor),t.AVh("ant-tag-has-color",i.nzColor&&!i.isPresetColor)("ant-tag-checkable","checkable"===i.nzMode)("ant-tag-checkable-checked",i.nzChecked)("ant-tag-rtl","rtl"===i.dir)("ant-tag-borderless",!i.nzBordered))},inputs:{nzMode:"nzMode",nzColor:"nzColor",nzChecked:"nzChecked",nzBordered:"nzBordered"},outputs:{nzOnClose:"nzOnClose",nzCheckedChange:"nzCheckedChange"},exportAs:["nzTag"],standalone:!0,features:[t.OA$,t.aNF],ngContentSelectors:Yo,decls:2,vars:1,consts:[["nz-icon","","nzType","close","class","ant-tag-close-icon","tabindex","-1",3,"click",4,"ngIf"],["nz-icon","","nzType","close","tabindex","-1",1,"ant-tag-close-icon",3,"click"]],template:function(n,i){1&n&&(t.NAR(),t.SdG(0),t.DNE(1,Ho,1,0,"span",0)),2&n&&(t.R7$(),t.Y8G("ngIf","closeable"===i.nzMode))},dependencies:[Y.Y3,Y.Dn,S.bT],encapsulation:2,changeDetection:0})}return(0,B.Cg)([(0,R.H3)()],s.prototype,"nzChecked",void 0),(0,B.Cg)([(0,R.H3)()],s.prototype,"nzBordered",void 0),s})(),Uo=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[Lo]})}return s})();var Wo=b(7481),Ko=b(1166);let Jo=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({providers:[{provide:bt.xh},pt.b],imports:[S.MD,A.YN,A.X1,Qi,Y.Y3.forChild([G.Cnd,G.XMK,G.VJ5,G.vjn,G.bRU,G.O9N,G.nIb,G.OgO,G.xrU,G.BNP,G.MO3,G.RR4,G.rj,G.dJK,G.q_y,G.ptz,G.qZ3,G.rXM,G.EOi,G.loe,G.z7U,G.eNq,G.lr0,G.O8m,G.gX4]),Kn,pe.Zw,Fe,ut.PQ,ee.j,Qt.U6,Xe,Ye.pc,$s,ln.IJ,Vo,ue.DH,$t.GP,Xo,Uo,Wo.$,wt.Cu,dn.Sw,un,gn.$G,fn.V,Ko.Sk,Jt,N,E,xe,ye,ke,we]})}return s})()},7184:(jt,Gt,b)=>{var S;!function(ct,Ft,t){if(ct){for(var B,rt={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},mt={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bt={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},pt={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},tt=1;tt<20;++tt)rt[111+tt]="f"+tt;for(tt=0;tt<=9;++tt)rt[tt+96]=tt.toString();Z.prototype.bind=function(g,C,I){var O=this;return O._bindMultiple.call(O,g=g instanceof Array?g:[g],C,I),O},Z.prototype.unbind=function(g,C){return this.bind.call(this,g,function(){},C)},Z.prototype.trigger=function(g,C){var I=this;return I._directMap[g+":"+C]&&I._directMap[g+":"+C]({},g),I},Z.prototype.reset=function(){var g=this;return g._callbacks={},g._directMap={},g},Z.prototype.stopCallback=function(g,C){if((" "+C.className+" ").indexOf(" mousetrap ")>-1||Kt(C,this.target))return!1;if("composedPath"in g&&"function"==typeof g.composedPath){var O=g.composedPath()[0];O!==g.target&&(C=O)}return"INPUT"==C.tagName||"SELECT"==C.tagName||"TEXTAREA"==C.tagName||C.isContentEditable},Z.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},Z.addKeycodes=function(g){for(var C in g)g.hasOwnProperty(C)&&(rt[C]=g[C]);B=null},Z.init=function(){var g=Z(Ft);for(var C in g)"_"!==C.charAt(0)&&(Z[C]=function(I){return function(){return g[I].apply(g,arguments)}}(C))},Z.init(),ct.Mousetrap=Z,jt.exports&&(jt.exports=Z),void 0!==(S=function(){return Z}.call(Gt,b,Gt,jt))&&(jt.exports=S)}function U(g,C,I){g.addEventListener?g.addEventListener(C,I,!1):g.attachEvent("on"+C,I)}function Bt(g){if("keypress"==g.type){var C=String.fromCharCode(g.which);return g.shiftKey||(C=C.toLowerCase()),C}return rt[g.which]?rt[g.which]:mt[g.which]?mt[g.which]:String.fromCharCode(g.which).toLowerCase()}function Wt(g,C){return g.sort().join(",")===C.sort().join(",")}function R(g){return"shift"==g||"ctrl"==g||"alt"==g||"meta"==g}function zt(g,C,I){return I||(I=function Y(){if(!B)for(var g in B={},rt)g>95&&g<112||rt.hasOwnProperty(g)&&(B[rt[g]]=g);return B}()[g]?"keydown":"keypress"),"keypress"==I&&C.length&&(I="keydown"),I}function Ot(g,C){var I,O,at,ot=[];for(I=function ce(g){return"+"===g?["+"]:(g=g.replace(/\+{2}/g,"+plus")).split("+")}(g),at=0;at<I.length;++at)pt[O=I[at]]&&(O=pt[O]),C&&"keypress"!=C&&bt[O]&&(O=bt[O],ot.push("shift")),R(O)&&ot.push(O);return{key:O,modifiers:ot,action:C=zt(O,ot,C)}}function Kt(g,C){return null!==g&&g!==Ft&&(g===C||Kt(g.parentNode,C))}function Z(g){var C=this;if(g=g||Ft,!(C instanceof Z))return new Z(g);C.target=g,C._callbacks={},C._directMap={};var O,I={},at=!1,ot=!1,It=!1;function Ct(w){w=w||{};var D,N=!1;for(D in I)w[D]?N=!0:I[D]=0;N||(It=!1)}function Nt(w,N,D,E,j,lt){var P,$,vt=[],dt=D.type;if(!C._callbacks[w])return[];for("keyup"==dt&&R(w)&&(N=[w]),P=0;P<C._callbacks[w].length;++P)$=C._callbacks[w][P],!E&&$.seq&&I[$.seq]!=$.level||dt!=$.action||("keypress"!=dt||D.metaKey||D.ctrlKey)&&!Wt(N,$.modifiers)||((!E&&$.combo==j||E&&$.seq==E&&$.level==lt)&&C._callbacks[w].splice(P,1),vt.push($));return vt}function Vt(w,N,D,E){C.stopCallback(N,N.target||N.srcElement,D,E)||!1===w(N,D)&&(function q(g){g.preventDefault?g.preventDefault():g.returnValue=!1}(N),function ht(g){g.stopPropagation?g.stopPropagation():g.cancelBubble=!0}(N))}function Xt(w){"number"!=typeof w.which&&(w.which=w.keyCode);var N=Bt(w);if(N){if("keyup"==w.type&&at===N)return void(at=!1);C.handleKey(N,function et(g){var C=[];return g.shiftKey&&C.push("shift"),g.altKey&&C.push("alt"),g.ctrlKey&&C.push("ctrl"),g.metaKey&&C.push("meta"),C}(w),w)}}function qt(w,N,D,E,j){C._directMap[w+":"+D]=N;var P,lt=(w=w.replace(/\s+/g," ")).split(" ");lt.length>1?function Jt(w,N,D,E){function j(dt){return function(){It=dt,++I[w],function he(){clearTimeout(O),O=setTimeout(Ct,1e3)}()}}function lt(dt){Vt(D,dt,w),"keyup"!==E&&(at=Bt(dt)),setTimeout(Ct,10)}I[w]=0;for(var P=0;P<N.length;++P){var vt=P+1===N.length?lt:j(E||Ot(N[P+1]).action);qt(N[P],vt,E,w,P)}}(w,lt,N,D):(P=Ot(w,D),C._callbacks[P.key]=C._callbacks[P.key]||[],Nt(P.key,P.modifiers,{type:P.action},E,w,j),C._callbacks[P.key][E?"unshift":"push"]({callback:N,modifiers:P.modifiers,action:P.action,seq:E,level:j,combo:w}))}C._handleKey=function(w,N,D){var j,E=Nt(w,N,D),lt={},P=0,$=!1;for(j=0;j<E.length;++j)E[j].seq&&(P=Math.max(P,E[j].level));for(j=0;j<E.length;++j)if(E[j].seq){if(E[j].level!=P)continue;$=!0,lt[E[j].seq]=1,Vt(E[j].callback,D,E[j].combo,E[j].seq)}else $||Vt(E[j].callback,D,E[j].combo);var vt="keypress"==D.type&&ot;D.type==It&&!R(w)&&!vt&&Ct(lt),ot=$&&"keydown"==D.type},C._bindMultiple=function(w,N,D){for(var E=0;E<w.length;++E)qt(w[E],N,D)},U(g,"keypress",Xt),U(g,"keydown",Xt),U(g,"keyup",Xt)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)}}]);