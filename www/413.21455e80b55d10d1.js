(self.webpackChunkiot_master_nuwa=self.webpackChunkiot_master_nuwa||[]).push([[413],{2413:(Ee,ve,fe)=>{"use strict";fe.r(ve),fe.d(ve,{ViewerModule:()=>Z});var be=fe(177),ye=fe(6530),ue=fe(4438),I=fe(345),H=fe(5013),U=fe(4104),p=fe(6504),d=fe(3053),m=fe(7301),u=fe(7553),i=fe(4412),a=fe(1413),o=fe(1985),s=fe(8750),b=fe(983),f=fe(8359),_=fe(7786),h=fe(2771),w=fe(17),y=fe(8071),x=fe(9974);const A={connector:()=>new a.B};function W(q,N=A){const{connector:S}=N;return(0,x.N)((D,z)=>{const R=S();(0,s.Tg)(q(function P(q){return new o.c(N=>q.subscribe(N))}(R))).subscribe(z),z.add(D.subscribe(R))})}function $(q,N){const S=(0,y.T)(q)?q:()=>q;return(0,y.T)(N)?W(N,{connector:S}):D=>new w.G(D,S)}var C=fe(5964),E=fe(9898),c=function(q){return q[q.CLOSED=0]="CLOSED",q[q.CONNECTING=1]="CONNECTING",q[q.CONNECTED=2]="CONNECTED",q}(c||{});const K=new ue.nKC("NgxMqttServiceConfig"),G=new ue.nKC("NgxMqttClientService");let Q=(()=>{class q{constructor(S,D){this.options=S,this.client=D,this.observables={},this.state=new i.t(c.CLOSED),this.messages=new a.B,this._clientId=this._generateClientId(),this._connectTimeout=1e4,this._reconnectPeriod=1e4,this._url=void 0,this._onConnect=new ue.bkB,this._onReconnect=new ue.bkB,this._onClose=new ue.bkB,this._onOffline=new ue.bkB,this._onError=new ue.bkB,this._onEnd=new ue.bkB,this._onMessage=new ue.bkB,this._onSuback=new ue.bkB,this._onPacketsend=new ue.bkB,this._onPacketreceive=new ue.bkB,this._handleOnConnect=z=>{!0===this.options.connectOnCreate&&Object.keys(this.observables).forEach(R=>{this.client.subscribe(R)}),this.state.next(c.CONNECTED),this._onConnect.emit(z)},this._handleOnReconnect=()=>{!0===this.options.connectOnCreate&&Object.keys(this.observables).forEach(z=>{this.client.subscribe(z)}),this.state.next(c.CONNECTING),this._onReconnect.emit()},this._handleOnClose=()=>{this.state.next(c.CLOSED),this._onClose.emit()},this._handleOnOffline=()=>{this._onOffline.emit()},this._handleOnError=z=>{this._onError.emit(z),console.error(z)},this._handleOnEnd=()=>{this._onEnd.emit()},this._handleOnMessage=(z,R,n)=>{this._onMessage.emit(n),"publish"===n.cmd&&this.messages.next(n)},this._handleOnPacketsend=z=>{this._onPacketsend.emit()},this._handleOnPacketreceive=z=>{this._onPacketreceive.emit()},!1!==S.connectOnCreate&&this.connect({},D),this.state.subscribe()}get clientId(){return this._clientId}get onConnect(){return this._onConnect}get onReconnect(){return this._onReconnect}get onClose(){return this._onClose}get onOffline(){return this._onOffline}get onError(){return this._onError}get onEnd(){return this._onEnd}get onMessage(){return this._onMessage}get onPacketsend(){return this._onPacketsend}get onPacketreceive(){return this._onPacketreceive}get onSuback(){return this._onSuback}static filterMatchesTopic(S,D){if("#"===S[0]&&"$"===D[0])return!1;const z=(S||"").split("/").reverse(),R=(D||"").split("/").reverse(),n=()=>{const l=z.pop(),k=R.pop();switch(l){case"#":return!0;case"+":return!!k&&n();default:return l===k&&(void 0===l||n())}};return n()}connect(S,D){const z=u(this.options||{},S),R=z.protocol||"ws",n=z.hostname||"localhost";z.url?this._url=z.url:(this._url=`${R}://${n}`,this._url+=z.port?`:${z.port}`:"",this._url+=z.path?`${z.path}`:""),this.state.next(c.CONNECTING);const l=u({clientId:this._clientId,reconnectPeriod:this._reconnectPeriod,connectTimeout:this._connectTimeout},z);this.client&&this.client.end(!0),this.client=D||(0,m.connect)(this._url,l),this._clientId=l.clientId,this.client.on("connect",this._handleOnConnect),this.client.on("reconnect",this._handleOnReconnect),this.client.on("close",this._handleOnClose),this.client.on("offline",this._handleOnOffline),this.client.on("error",this._handleOnError),this.client.stream.on("error",this._handleOnError),this.client.on("end",this._handleOnEnd),this.client.on("message",this._handleOnMessage),this.client.on("packetsend",this._handleOnPacketsend),this.client.on("packetreceive",this._handleOnPacketreceive)}disconnect(S=!0){if(!this.client)throw new Error("mqtt client not connected");this.client.end(S)}observeRetained(S,D={qos:1}){return this._generalObserve(S,()=>function V(q,N,S,D){S&&!(0,y.T)(S)&&(D=S);const z=(0,y.T)(S)?S:void 0;return R=>$(new h.m(q,N,D),z)(R)}(1),D)}observe(S,D={qos:1}){return this._generalObserve(S,()=>function M(q){return q?N=>W(q)(N):N=>$(new a.B)(N)}(),D)}_generalObserve(S,D,z){if(!this.client)throw new Error("mqtt client not connected");if(!this.observables[S]){const R=new a.B;this.observables[S]=function T(q,N){return new o.c(S=>{const D=q(),z=N(D);return(z?(0,s.Tg)(z):b.w).subscribe(S),()=>{D&&D.unsubscribe()}})}(()=>{const n=new f.yU;return this.client.subscribe(S,z,(l,k)=>{k&&k.forEach(B=>{128===B.qos&&(delete this.observables[B.topic],this.client.unsubscribe(B.topic),R.error(`subscription for '${B.topic}' rejected!`)),this._onSuback.emit({filter:S,granted:128!==B.qos})})}),n.add(()=>{delete this.observables[S],this.client.unsubscribe(S)}),n},n=>(0,_.h)(R,this.messages)).pipe((0,C.p)(n=>q.filterMatchesTopic(S,n.topic)),D(),(0,E.B)())}return this.observables[S]}publish(S,D,z={}){if(!this.client)throw new Error("mqtt client not connected");return o.c.create(R=>{this.client.publish(S,D,z,n=>{n?R.error(n):(R.next(null),R.complete())})})}unsafePublish(S,D,z={}){if(!this.client)throw new Error("mqtt client not connected");this.client.publish(S,D,z,R=>{if(R)throw R})}_generateClientId(){return"client-"+Math.random().toString(36).substr(2,19)}}return q.\u0275prov=ue.jDH({factory:function(){return new q(ue.KVO(K),ue.KVO(G))},token:q,providedIn:"root"}),q})();var re=fe(763);const se=[{path:":id",component:(()=>{class q{constructor(S,D,z,R,n,l,k,B){function g(t){let e=n.snapshot.queryParams[t];return"true"==e||"1"==e}this.title=S,this.element=D,this.rs=z,this.cs=R,this.route=n,this.ns=l,this.ms=k,this.mqtt=B,this.id="",this.mousewheel=!1,this.panning=!1,this.full=!1,this.padding=10,this.index=0,this.subs=[],this.load(),this.mousewheel=g("mousewheel"),this.panning=g("panning"),this.full=g("full")}load(){this.id=this.route.snapshot.paramMap.get("id"),this.rs.get(`api/project/${this.id}`).subscribe(S=>{this.project=S.data,this.title.setTitle(this.project.name),this.page=this.project.pages[0]})}ngOnDestroy(){this.subs.forEach(S=>S.unsubscribe())}static#e=this.\u0275fac=function(D){return new(D||q)(ue.rXU(I.hE),ue.rXU(ue.aKT),ue.rXU(H.By),ue.rXU(U.b),ue.rXU(ye.nX),ue.rXU(p.xY),ue.rXU(d.N_),ue.rXU(Q))};static#t=this.\u0275cmp=ue.VBU({type:q,selectors:[["app-viewer"]],decls:1,vars:5,consts:[[3,"page","mousewheel","panning","full","padding"]],template:function(D,z){1&D&&ue.nrm(0,"app-render",0),2&D&&ue.Y8G("page",z.page)("mousewheel",z.mousewheel)("panning",z.panning)("full",z.full)("padding",z.padding)},dependencies:[re.y],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}"]})}return q})()}];let ne=(()=>{class q{static#e=this.\u0275fac=function(D){return new(D||q)};static#t=this.\u0275mod=ue.$C({type:q});static#r=this.\u0275inj=ue.G2t({imports:[ye.iI.forChild(se),ye.iI]})}return q})();var ie=fe(1011),ee=fe(4341),X=fe(5103),O=fe(513),F=fe(8927);let Z=(()=>{class q{static#e=this.\u0275fac=function(D){return new(D||q)};static#t=this.\u0275mod=ue.$C({type:q});static#r=this.\u0275inj=ue.G2t({imports:[be.MD,ne,p.K9,d.U6,ie.j,ee.YN,X.Y3,O.Zw,F.PQ,ee.X1]})}return q})()},7301:(Ee,ve,fe)=>{Ee.exports=function(){return function I(H,U,p){function d(i,a){if(!U[i]){if(!H[i]){if(m)return m(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var b=U[i]={exports:{}};H[i][0].call(b.exports,function(T){return d(H[i][1][T]||T)},b,b.exports,I,H,U,p)}return U[i].exports}for(var m=void 0,u=0;u<p.length;u++)d(p[u]);return d}}()({1:[function(I,H,U){"use strict";U.byteLength=function s(w){var y=o(w),P=y[1];return 3*(y[0]+P)/4-P},U.toByteArray=function T(w){var y,M,x=o(w),P=x[0],A=x[1],W=new m(function b(w,y,x){return 3*(y+x)/4-x}(0,P,A)),$=0,V=A>0?P-4:P;for(M=0;M<V;M+=4)y=d[w.charCodeAt(M)]<<18|d[w.charCodeAt(M+1)]<<12|d[w.charCodeAt(M+2)]<<6|d[w.charCodeAt(M+3)],W[$++]=y>>16&255,W[$++]=y>>8&255,W[$++]=255&y;return 2===A&&(y=d[w.charCodeAt(M)]<<2|d[w.charCodeAt(M+1)]>>4,W[$++]=255&y),1===A&&(y=d[w.charCodeAt(M)]<<10|d[w.charCodeAt(M+1)]<<4|d[w.charCodeAt(M+2)]>>2,W[$++]=y>>8&255,W[$++]=255&y),W},U.fromByteArray=function h(w){for(var y,x=w.length,P=x%3,A=[],W=16383,$=0,V=x-P;$<V;$+=W)A.push(_(w,$,$+W>V?V:$+W));return 1===P?A.push(p[(y=w[x-1])>>2]+p[y<<4&63]+"=="):2===P&&A.push(p[(y=(w[x-2]<<8)+w[x-1])>>10]+p[y>>4&63]+p[y<<2&63]+"="),A.join("")};for(var p=[],d=[],m=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)p[i]=u[i],d[u.charCodeAt(i)]=i;function o(w){var y=w.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=w.indexOf("=");return-1===x&&(x=y),[x,x===y?0:4-x%4]}function f(w){return p[w>>18&63]+p[w>>12&63]+p[w>>6&63]+p[63&w]}function _(w,y,x){for(var A=[],W=y;W<x;W+=3)A.push(f((w[W]<<16&16711680)+(w[W+1]<<8&65280)+(255&w[W+2])));return A.join("")}d[45]=62,d[95]=63},{}],2:[function(I,H,U){},{}],3:[function(I,H,U){(function(p){(function(){"use strict";var d=I("base64-js"),m=I("ieee754");U.Buffer=o,U.SlowBuffer=function P(t){return+t!=t&&(t=0),o.alloc(+t)},U.INSPECT_MAX_BYTES=50;var u=2147483647;function a(t){if(t>u)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return f(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function _(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|A(t,e),v=a(r),L=v.write(t,e);return L!==r&&(v=v.slice(0,L)),v}(t,e);if(ArrayBuffer.isView(t))return h(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(B(t,ArrayBuffer)||t&&B(t.buffer,ArrayBuffer))return function w(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var v;return(v=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=o.prototype,v}(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var v=t.valueOf&&t.valueOf();if(null!=v&&v!==t)return o.from(v,e,r);var L=function y(t){if(o.isBuffer(t)){var e=0|x(t.length),r=a(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||g(t.length)?a(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(L)return L;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function b(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return b(t),a(t<0?0:0|x(t))}function h(t){for(var e=t.length<0?0:0|x(t.length),r=a(e),v=0;v<e;v+=1)r[v]=255&t[v];return r}function x(t){if(t>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|t}function A(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,v=arguments.length>2&&!0===arguments[2];if(!v&&0===r)return 0;for(var L=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return l(t).length;default:if(L)return v?-1:z(t).length;e=(""+e).toLowerCase(),L=!0}}function W(t,e,r){var v=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return ie(this,e,r);case"utf8":case"utf-8":return Q(this,e,r);case"ascii":return se(this,e,r);case"latin1":case"binary":return ne(this,e,r);case"base64":return J(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,e,r);default:if(v)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),v=!0}}function $(t,e,r){var v=t[e];t[e]=t[r],t[r]=v}function V(t,e,r,v,L){if(0===t.length)return-1;if("string"==typeof r?(v=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),g(r=+r)&&(r=L?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(L)return-1;r=t.length-1}else if(r<0){if(!L)return-1;r=0}if("string"==typeof e&&(e=o.from(e,v)),o.isBuffer(e))return 0===e.length?-1:M(t,e,r,v,L);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?L?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):M(t,[e],r,v,L);throw new TypeError("val must be string, number or Buffer")}function M(t,e,r,v,L){var he,Y=1,te=t.length,ae=e.length;if(void 0!==v&&("ucs2"===(v=String(v).toLowerCase())||"ucs-2"===v||"utf16le"===v||"utf-16le"===v)){if(t.length<2||e.length<2)return-1;Y=2,te/=2,ae/=2,r/=2}function le(ge,_e){return 1===Y?ge[_e]:ge.readUInt16BE(_e*Y)}if(L){var de=-1;for(he=r;he<te;he++)if(le(t,he)===le(e,-1===de?0:he-de)){if(-1===de&&(de=he),he-de+1===ae)return de*Y}else-1!==de&&(he-=he-de),de=-1}else for(r+ae>te&&(r=te-ae),he=r;he>=0;he--){for(var ce=!0,pe=0;pe<ae;pe++)if(le(t,he+pe)!==le(e,pe)){ce=!1;break}if(ce)return he}return-1}function C(t,e,r,v){r=Number(r)||0;var L=t.length-r;v?(v=Number(v))>L&&(v=L):v=L;var Y=e.length;v>Y/2&&(v=Y/2);for(var te=0;te<v;++te){var ae=parseInt(e.substr(2*te,2),16);if(g(ae))return te;t[r+te]=ae}return te}function E(t,e,r,v){return k(z(e,t.length-r),t,r,v)}function c(t,e,r,v){return k(function R(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,v)}function j(t,e,r,v){return c(t,e,r,v)}function K(t,e,r,v){return k(l(e),t,r,v)}function G(t,e,r,v){return k(function n(t,e){for(var r,v,Y=[],te=0;te<t.length&&!((e-=2)<0);++te)v=(r=t.charCodeAt(te))>>8,Y.push(r%256),Y.push(v);return Y}(e,t.length-r),t,r,v)}function J(t,e,r){return d.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function Q(t,e,r){r=Math.min(t.length,r);for(var v=[],L=e;L<r;){var le,he,de,ce,Y=t[L],te=null,ae=Y>239?4:Y>223?3:Y>191?2:1;if(L+ae<=r)switch(ae){case 1:Y<128&&(te=Y);break;case 2:128==(192&(le=t[L+1]))&&(ce=(31&Y)<<6|63&le)>127&&(te=ce);break;case 3:he=t[L+2],128==(192&(le=t[L+1]))&&128==(192&he)&&(ce=(15&Y)<<12|(63&le)<<6|63&he)>2047&&(ce<55296||ce>57343)&&(te=ce);break;case 4:he=t[L+2],de=t[L+3],128==(192&(le=t[L+1]))&&128==(192&he)&&128==(192&de)&&(ce=(15&Y)<<18|(63&le)<<12|(63&he)<<6|63&de)>65535&&ce<1114112&&(te=ce)}null===te?(te=65533,ae=1):te>65535&&(v.push((te-=65536)>>>10&1023|55296),te=56320|1023&te),v.push(te),L+=ae}return function oe(t){var e=t.length;if(e<=re)return String.fromCharCode.apply(String,t);for(var r="",v=0;v<e;)r+=String.fromCharCode.apply(String,t.slice(v,v+=re));return r}(v)}U.kMaxLength=u,!(o.TYPED_ARRAY_SUPPORT=function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,r){return s(t,e,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,r){return function T(t,e,r){return b(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},o.allocUnsafe=function(t){return f(t)},o.allocUnsafeSlow=function(t){return f(t)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,r){if(B(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),B(r,Uint8Array)&&(r=o.from(r,r.offset,r.byteLength)),!o.isBuffer(e)||!o.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var v=e.length,L=r.length,Y=0,te=Math.min(v,L);Y<te;++Y)if(e[Y]!==r[Y]){v=e[Y],L=r[Y];break}return v<L?-1:L<v?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var v;if(void 0===r)for(r=0,v=0;v<e.length;++v)r+=e[v].length;var L=o.allocUnsafe(r),Y=0;for(v=0;v<e.length;++v){var te=e[v];if(B(te,Uint8Array)&&(te=o.from(te)),!o.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(L,Y),Y+=te.length}return L},o.byteLength=A,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)$(this,r,r+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)$(this,r,r+3),$(this,r+1,r+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)$(this,r,r+7),$(this,r+1,r+6),$(this,r+2,r+5),$(this,r+3,r+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?Q(this,0,e):W.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=U.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,r,v,L,Y){if(B(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===v&&(v=e?e.length:0),void 0===L&&(L=0),void 0===Y&&(Y=this.length),r<0||v>e.length||L<0||Y>this.length)throw new RangeError("out of range index");if(L>=Y&&r>=v)return 0;if(L>=Y)return-1;if(r>=v)return 1;if(this===e)return 0;for(var te=(Y>>>=0)-(L>>>=0),ae=(v>>>=0)-(r>>>=0),le=Math.min(te,ae),he=this.slice(L,Y),de=e.slice(r,v),ce=0;ce<le;++ce)if(he[ce]!==de[ce]){te=he[ce],ae=de[ce];break}return te<ae?-1:ae<te?1:0},o.prototype.includes=function(e,r,v){return-1!==this.indexOf(e,r,v)},o.prototype.indexOf=function(e,r,v){return V(this,e,r,v,!0)},o.prototype.lastIndexOf=function(e,r,v){return V(this,e,r,v,!1)},o.prototype.write=function(e,r,v,L){if(void 0===r)L="utf8",v=this.length,r=0;else if(void 0===v&&"string"==typeof r)L=r,v=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(v)?(v>>>=0,void 0===L&&(L="utf8")):(L=v,v=void 0)}var Y=this.length-r;if((void 0===v||v>Y)&&(v=Y),e.length>0&&(v<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var te=!1;;)switch(L){case"hex":return C(this,e,r,v);case"utf8":case"utf-8":return E(this,e,r,v);case"ascii":return c(this,e,r,v);case"latin1":case"binary":return j(this,e,r,v);case"base64":return K(this,e,r,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,e,r,v);default:if(te)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),te=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var re=4096;function se(t,e,r){var v="";r=Math.min(t.length,r);for(var L=e;L<r;++L)v+=String.fromCharCode(127&t[L]);return v}function ne(t,e,r){var v="";r=Math.min(t.length,r);for(var L=e;L<r;++L)v+=String.fromCharCode(t[L]);return v}function ie(t,e,r){var v=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>v)&&(r=v);for(var L="",Y=e;Y<r;++Y)L+=D(t[Y]);return L}function ee(t,e,r){for(var v=t.slice(e,r),L="",Y=0;Y<v.length;Y+=2)L+=String.fromCharCode(v[Y]+256*v[Y+1]);return L}function X(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,v,L,Y){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>L||e<Y)throw new RangeError('"value" argument is out of bounds');if(r+v>t.length)throw new RangeError("Index out of range")}function F(t,e,r,v,L,Y){if(r+v>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Z(t,e,r,v,L){return e=+e,r>>>=0,L||F(t,0,r,4),m.write(t,e,r,v,23,4),r+4}function q(t,e,r,v,L){return e=+e,r>>>=0,L||F(t,0,r,8),m.write(t,e,r,v,52,8),r+8}o.prototype.slice=function(e,r){var v=this.length;(e=~~e)<0?(e+=v)<0&&(e=0):e>v&&(e=v),(r=void 0===r?v:~~r)<0?(r+=v)<0&&(r=0):r>v&&(r=v),r<e&&(r=e);var L=this.subarray(e,r);return L.__proto__=o.prototype,L},o.prototype.readUIntLE=function(e,r,v){e>>>=0,r>>>=0,v||X(e,r,this.length);for(var L=this[e],Y=1,te=0;++te<r&&(Y*=256);)L+=this[e+te]*Y;return L},o.prototype.readUIntBE=function(e,r,v){e>>>=0,r>>>=0,v||X(e,r,this.length);for(var L=this[e+--r],Y=1;r>0&&(Y*=256);)L+=this[e+--r]*Y;return L},o.prototype.readUInt8=function(e,r){return e>>>=0,r||X(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,r){return e>>>=0,r||X(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,r){return e>>>=0,r||X(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,r){return e>>>=0,r||X(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,r){return e>>>=0,r||X(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,r,v){e>>>=0,r>>>=0,v||X(e,r,this.length);for(var L=this[e],Y=1,te=0;++te<r&&(Y*=256);)L+=this[e+te]*Y;return L>=(Y*=128)&&(L-=Math.pow(2,8*r)),L},o.prototype.readIntBE=function(e,r,v){e>>>=0,r>>>=0,v||X(e,r,this.length);for(var L=r,Y=1,te=this[e+--L];L>0&&(Y*=256);)te+=this[e+--L]*Y;return te>=(Y*=128)&&(te-=Math.pow(2,8*r)),te},o.prototype.readInt8=function(e,r){return e>>>=0,r||X(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,r){e>>>=0,r||X(e,2,this.length);var v=this[e]|this[e+1]<<8;return 32768&v?4294901760|v:v},o.prototype.readInt16BE=function(e,r){e>>>=0,r||X(e,2,this.length);var v=this[e+1]|this[e]<<8;return 32768&v?4294901760|v:v},o.prototype.readInt32LE=function(e,r){return e>>>=0,r||X(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,r){return e>>>=0,r||X(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,r){return e>>>=0,r||X(e,4,this.length),m.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,r){return e>>>=0,r||X(e,4,this.length),m.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,r){return e>>>=0,r||X(e,8,this.length),m.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,r){return e>>>=0,r||X(e,8,this.length),m.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,r,v,L){e=+e,r>>>=0,v>>>=0,L||O(this,e,r,v,Math.pow(2,8*v)-1,0);var te=1,ae=0;for(this[r]=255&e;++ae<v&&(te*=256);)this[r+ae]=e/te&255;return r+v},o.prototype.writeUIntBE=function(e,r,v,L){e=+e,r>>>=0,v>>>=0,L||O(this,e,r,v,Math.pow(2,8*v)-1,0);var te=v-1,ae=1;for(this[r+te]=255&e;--te>=0&&(ae*=256);)this[r+te]=e/ae&255;return r+v},o.prototype.writeUInt8=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,1,255,0),this[r]=255&e,r+1},o.prototype.writeUInt16LE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},o.prototype.writeUInt16BE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},o.prototype.writeUInt32LE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},o.prototype.writeUInt32BE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},o.prototype.writeIntLE=function(e,r,v,L){if(e=+e,r>>>=0,!L){var Y=Math.pow(2,8*v-1);O(this,e,r,v,Y-1,-Y)}var te=0,ae=1,le=0;for(this[r]=255&e;++te<v&&(ae*=256);)e<0&&0===le&&0!==this[r+te-1]&&(le=1),this[r+te]=(e/ae|0)-le&255;return r+v},o.prototype.writeIntBE=function(e,r,v,L){if(e=+e,r>>>=0,!L){var Y=Math.pow(2,8*v-1);O(this,e,r,v,Y-1,-Y)}var te=v-1,ae=1,le=0;for(this[r+te]=255&e;--te>=0&&(ae*=256);)e<0&&0===le&&0!==this[r+te+1]&&(le=1),this[r+te]=(e/ae|0)-le&255;return r+v},o.prototype.writeInt8=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},o.prototype.writeInt16LE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},o.prototype.writeInt16BE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},o.prototype.writeInt32LE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},o.prototype.writeInt32BE=function(e,r,v){return e=+e,r>>>=0,v||O(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},o.prototype.writeFloatLE=function(e,r,v){return Z(this,e,r,!0,v)},o.prototype.writeFloatBE=function(e,r,v){return Z(this,e,r,!1,v)},o.prototype.writeDoubleLE=function(e,r,v){return q(this,e,r,!0,v)},o.prototype.writeDoubleBE=function(e,r,v){return q(this,e,r,!1,v)},o.prototype.copy=function(e,r,v,L){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(v||(v=0),!L&&0!==L&&(L=this.length),r>=e.length&&(r=e.length),r||(r=0),L>0&&L<v&&(L=v),L===v||0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),e.length-r<L-v&&(L=e.length-r+v);var Y=L-v;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,v,L);else if(this===e&&v<r&&r<L)for(var te=Y-1;te>=0;--te)e[te+r]=this[te+v];else Uint8Array.prototype.set.call(e,this.subarray(v,L),r);return Y},o.prototype.fill=function(e,r,v,L){if("string"==typeof e){if("string"==typeof r?(L=r,r=0,v=this.length):"string"==typeof v&&(L=v,v=this.length),void 0!==L&&"string"!=typeof L)throw new TypeError("encoding must be a string");if("string"==typeof L&&!o.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(1===e.length){var Y=e.charCodeAt(0);("utf8"===L&&Y<128||"latin1"===L)&&(e=Y)}}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<v)throw new RangeError("Out of range index");if(v<=r)return this;var te;if(r>>>=0,v=void 0===v?this.length:v>>>0,e||(e=0),"number"==typeof e)for(te=r;te<v;++te)this[te]=e;else{var ae=o.isBuffer(e)?e:o.from(e,L),le=ae.length;if(0===le)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(te=0;te<v-r;++te)this[te+r]=ae[te%le]}return this};var N=/[^+/0-9A-Za-z-_]/g;function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var r,v=t.length,L=null,Y=[],te=0;te<v;++te){if((r=t.charCodeAt(te))>55295&&r<57344){if(!L){if(r>56319){(e-=3)>-1&&Y.push(239,191,189);continue}if(te+1===v){(e-=3)>-1&&Y.push(239,191,189);continue}L=r;continue}if(r<56320){(e-=3)>-1&&Y.push(239,191,189),L=r;continue}r=65536+(L-55296<<10|r-56320)}else L&&(e-=3)>-1&&Y.push(239,191,189);if(L=null,r<128){if((e-=1)<0)break;Y.push(r)}else if(r<2048){if((e-=2)<0)break;Y.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;Y.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;Y.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return Y}function l(t){return d.toByteArray(function S(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function k(t,e,r,v){for(var L=0;L<v&&!(L+r>=e.length||L>=t.length);++L)e[L+r]=t[L];return L}function B(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function g(t){return t!=t}}).call(this)}).call(this,I("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:5}],4:[function(I,H,U){"use strict";var m,p="object"==typeof Reflect?Reflect:null,d=p&&"function"==typeof p.apply?p.apply:function(M,C,E){return Function.prototype.apply.call(M,C,E)};m=p&&"function"==typeof p.ownKeys?p.ownKeys:Object.getOwnPropertySymbols?function(M){return Object.getOwnPropertyNames(M).concat(Object.getOwnPropertySymbols(M))}:function(M){return Object.getOwnPropertyNames(M)};var i=Number.isNaN||function(M){return M!=M};function a(){a.init.call(this)}H.exports=a,H.exports.once=function A(V,M){return new Promise(function(C,E){function c(K){V.removeListener(M,j),E(K)}function j(){"function"==typeof V.removeListener&&V.removeListener("error",c),C([].slice.call(arguments))}$(V,M,j,{once:!0}),"error"!==M&&function W(V,M,C){"function"==typeof V.on&&$(V,"error",M,C)}(V,c,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(V){if("function"!=typeof V)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof V)}function b(V){return void 0===V._maxListeners?a.defaultMaxListeners:V._maxListeners}function T(V,M,C,E){var c,j,K;if(s(C),void 0===(j=V._events)?(j=V._events=Object.create(null),V._eventsCount=0):(void 0!==j.newListener&&(V.emit("newListener",M,C.listener?C.listener:C),j=V._events),K=j[M]),void 0===K)K=j[M]=C,++V._eventsCount;else if("function"==typeof K?K=j[M]=E?[C,K]:[K,C]:E?K.unshift(C):K.push(C),(c=b(V))>0&&K.length>c&&!K.warned){K.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(M)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=V,G.type=M,G.count=K.length,function u(V){console&&console.warn&&console.warn(V)}(G)}return V}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(V,M,C){var E={fired:!1,wrapFn:void 0,target:V,type:M,listener:C},c=f.bind(E);return c.listener=C,E.wrapFn=c,c}function h(V,M,C){var E=V._events;if(void 0===E)return[];var c=E[M];return void 0===c?[]:"function"==typeof c?C?[c.listener||c]:[c]:C?function P(V){for(var M=new Array(V.length),C=0;C<M.length;++C)M[C]=V[C].listener||V[C];return M}(c):y(c,c.length)}function w(V){var M=this._events;if(void 0!==M){var C=M[V];if("function"==typeof C)return 1;if(void 0!==C)return C.length}return 0}function y(V,M){for(var C=new Array(M),E=0;E<M;++E)C[E]=V[E];return C}function $(V,M,C,E){if("function"==typeof V.on)E.once?V.once(M,C):V.on(M,C);else{if("function"!=typeof V.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof V);V.addEventListener(M,function c(j){E.once&&V.removeEventListener(M,c),C(j)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(V){if("number"!=typeof V||V<0||i(V))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+V+".");o=V}}),a.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(M){if("number"!=typeof M||M<0||i(M))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+M+".");return this._maxListeners=M,this},a.prototype.getMaxListeners=function(){return b(this)},a.prototype.emit=function(M){for(var C=[],E=1;E<arguments.length;E++)C.push(arguments[E]);var c="error"===M,j=this._events;if(void 0!==j)c=c&&void 0===j.error;else if(!c)return!1;if(c){var K;if(C.length>0&&(K=C[0]),K instanceof Error)throw K;var G=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw G.context=K,G}var J=j[M];if(void 0===J)return!1;if("function"==typeof J)d(J,this,C);else{var Q=J.length,re=y(J,Q);for(E=0;E<Q;++E)d(re[E],this,C)}return!0},a.prototype.on=a.prototype.addListener=function(M,C){return T(this,M,C,!1)},a.prototype.prependListener=function(M,C){return T(this,M,C,!0)},a.prototype.once=function(M,C){return s(C),this.on(M,_(this,M,C)),this},a.prototype.prependOnceListener=function(M,C){return s(C),this.prependListener(M,_(this,M,C)),this},a.prototype.off=a.prototype.removeListener=function(M,C){var E,c,j,K,G;if(s(C),void 0===(c=this._events))return this;if(void 0===(E=c[M]))return this;if(E===C||E.listener===C)0==--this._eventsCount?this._events=Object.create(null):(delete c[M],c.removeListener&&this.emit("removeListener",M,E.listener||C));else if("function"!=typeof E){for(j=-1,K=E.length-1;K>=0;K--)if(E[K]===C||E[K].listener===C){G=E[K].listener,j=K;break}if(j<0)return this;0===j?E.shift():function x(V,M){for(;M+1<V.length;M++)V[M]=V[M+1];V.pop()}(E,j),1===E.length&&(c[M]=E[0]),void 0!==c.removeListener&&this.emit("removeListener",M,G||C)}return this},a.prototype.removeAllListeners=function(M){var C,E,c;if(void 0===(E=this._events))return this;if(void 0===E.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==E[M]&&(0==--this._eventsCount?this._events=Object.create(null):delete E[M]),this;if(0===arguments.length){var K,j=Object.keys(E);for(c=0;c<j.length;++c)"removeListener"!==(K=j[c])&&this.removeAllListeners(K);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(C=E[M]))this.removeListener(M,C);else if(void 0!==C)for(c=C.length-1;c>=0;c--)this.removeListener(M,C[c]);return this},a.prototype.listeners=function(M){return h(this,M,!0)},a.prototype.rawListeners=function(M){return h(this,M,!1)},a.listenerCount=function(V,M){return"function"==typeof V.listenerCount?V.listenerCount(M):w.call(V,M)},a.prototype.listenerCount=w,a.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},{}],5:[function(I,H,U){U.read=function(p,d,m,u,i){var a,o,s=8*i-u-1,b=(1<<s)-1,T=b>>1,f=-7,_=m?i-1:0,h=m?-1:1,w=p[d+_];for(_+=h,a=w&(1<<-f)-1,w>>=-f,f+=s;f>0;a=256*a+p[d+_],_+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=u;f>0;o=256*o+p[d+_],_+=h,f-=8);if(0===a)a=1-T;else{if(a===b)return o?NaN:1/0*(w?-1:1);o+=Math.pow(2,u),a-=T}return(w?-1:1)*o*Math.pow(2,a-u)},U.write=function(p,d,m,u,i,a){var o,s,b,T=8*a-i-1,f=(1<<T)-1,_=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,w=u?0:a-1,y=u?1:-1,x=d<0||0===d&&1/d<0?1:0;for(d=Math.abs(d),isNaN(d)||d===1/0?(s=isNaN(d)?1:0,o=f):(o=Math.floor(Math.log(d)/Math.LN2),d*(b=Math.pow(2,-o))<1&&(o--,b*=2),(d+=o+_>=1?h/b:h*Math.pow(2,1-_))*b>=2&&(o++,b/=2),o+_>=f?(s=0,o=f):o+_>=1?(s=(d*b-1)*Math.pow(2,i),o+=_):(s=d*Math.pow(2,_-1)*Math.pow(2,i),o=0));i>=8;p[m+w]=255&s,w+=y,s/=256,i-=8);for(o=o<<i|s,T+=i;T>0;p[m+w]=255&o,w+=y,o/=256,T-=8);p[m+w-y]|=128*x}},{}],6:[function(I,H,U){function p(m){return!!m.constructor&&"function"==typeof m.constructor.isBuffer&&m.constructor.isBuffer(m)}H.exports=function(m){return null!=m&&(p(m)||function d(m){return"function"==typeof m.readFloatLE&&"function"==typeof m.slice&&p(m.slice(0,0))}(m)||!!m._isBuffer)}},{}],7:[function(I,H,U){(function(p,d){(function(){"use strict";var m=I("events").EventEmitter,u=I("./store"),i=I("mqtt-packet"),a=I("readable-stream").Writable,o=I("inherits"),s=I("reinterval"),b=I("./validations"),T=I("xtend"),f=I("debug")("mqttjs:client"),_=p?p.nextTick:function(E){setTimeout(E,0)},h=d.setImmediate||function(E){_(E)},w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},y=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],x={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function A(E,c,j){f("sendPacket :: packet: %O",c),f("sendPacket :: emitting `packetsend`"),E.emit("packetsend",c),f("sendPacket :: writing to stream");var K=i.writeToStream(c,E.stream,E.options);f("sendPacket :: writeToStream result %s",K),!K&&j?(f("sendPacket :: handle events on `drain` once through callback."),E.stream.once("drain",j)):j&&(f("sendPacket :: invoking cb"),j())}function V(E,c,j,K){f("storeAndSend :: store packet with cmd %s to outgoingStore",c.cmd),E.outgoingStore.put(c,function(J){if(J)return j&&j(J);K(),A(E,c,j)})}function M(E){f("nop ::",E)}function C(E,c){var j,K=this;if(!(this instanceof C))return new C(E,c);for(j in this.options=c||{},w)this.options[j]=typeof this.options[j]>"u"?w[j]:c[j];f("MqttClient :: options.protocol",c.protocol),f("MqttClient :: options.protocolVersion",c.protocolVersion),f("MqttClient :: options.username",c.username),f("MqttClient :: options.keepalive",c.keepalive),f("MqttClient :: options.reconnectPeriod",c.reconnectPeriod),f("MqttClient :: options.rejectUnauthorized",c.rejectUnauthorized),this.options.clientId="string"==typeof c.clientId?c.clientId:function P(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}(),f("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===c.protocolVersion&&c.customHandleAcks?c.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=E,this.outgoingStore=c.outgoingStore||new u,this.incomingStore=c.incomingStore||new u,this.queueQoSZero=void 0===c.queueQoSZero||c.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",function(){var G=this.queue;f("connect :: sending queued packets"),function J(){var Q=G.shift();f("deliver :: entry %o",Q);var re=null;Q&&(f("deliver :: call _sendPacket for %o",re=Q.packet),K._sendPacket(re,function(oe){Q.cb&&Q.cb(oe),J()}))}()}),this.on("close",function(){f("close :: connected set to `false`"),this.connected=!1,f("close :: clearing connackTimer"),clearTimeout(this.connackTimer),f("close :: clearing ping timer"),null!==K.pingTimer&&(K.pingTimer.clear(),K.pingTimer=null),f("close :: calling _setupReconnect"),this._setupReconnect()}),m.call(this),f("MqttClient :: setting up stream"),this._setupStream()}o(C,m),C.prototype._setupStream=function(){var E,c=this,j=new a,K=i.parser(this.options),G=null,J=[];function Q(){if(J.length)_(re);else{var ne=G;G=null,ne()}}function re(){f("work :: getting next packet in queue");var ne=J.shift();if(ne)f("work :: packet pulled from queue"),c._handlePacket(ne,Q);else{f("work :: no packets in queue");var ie=G;G=null,f("work :: done flag is %s",!!ie),ie&&ie()}}if(f("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),f("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),K.on("packet",function(ne){f("parser :: on packet push to packets array."),J.push(ne)}),j._write=function(ne,ie,ee){G=ee,f("writable stream :: parsing buffer"),K.parse(ne),re()},f("_setupStream :: pipe stream to writable stream"),this.stream.pipe(j),this.stream.on("error",function oe(ne){f("streamErrorHandler :: error",ne.message),y.includes(ne.code)?(f("streamErrorHandler :: emitting error"),c.emit("error",ne)):M(ne)}),this.stream.on("close",function(){f("(%s)stream :: on close",c.options.clientId),function $(E){E&&(f("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(E).forEach(function(c){E[c].volatile&&"function"==typeof E[c].cb&&(E[c].cb(new Error("Connection closed")),delete E[c])}))}(c.outgoing),f("stream: emit close to MqttClient"),c.emit("close")}),f("_setupStream: sending packet `connect`"),(E=Object.create(this.options)).cmd="connect",A(this,E),K.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return c.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&A(this,T({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){f("!!connectTimeout hit!! Calling _cleanUp with force `true`"),c._cleanUp(!0)},this.options.connectTimeout)},C.prototype._handlePacket=function(E,c){var j=this.options;if(5===j.protocolVersion&&j.properties&&j.properties.maximumPacketSize&&j.properties.maximumPacketSize<E.length)return this.emit("error",new Error("exceeding packets size "+E.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(f("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",E),E.cmd){case"publish":this._handlePublish(E,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(E),c();break;case"pubrel":this._handlePubrel(E,c);break;case"connack":this._handleConnack(E),c();break;case"pingresp":this._handlePingresp(E),c();break;case"disconnect":this._handleDisconnect(E),c()}},C.prototype._checkDisconnecting=function(E){return this.disconnecting&&(E?E(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},C.prototype.publish=function(E,c,j,K){f("publish :: message `%s` to topic `%s`",c,E);var G,J=this.options;if("function"==typeof j&&(K=j,j=null),j=T({qos:0,retain:!1,dup:!1},j),this._checkDisconnecting(K))return this;switch(G={cmd:"publish",topic:E,payload:c,qos:j.qos,retain:j.retain,messageId:this._nextId(),dup:j.dup},5===J.protocolVersion&&(G.properties=j.properties,(!J.properties&&G.properties&&G.properties.topicAlias||j.properties&&J.properties&&(j.properties.topicAlias&&J.properties.topicAliasMaximum&&j.properties.topicAlias>J.properties.topicAliasMaximum||!J.properties.topicAliasMaximum&&j.properties.topicAlias))&&delete G.properties.topicAlias),f("publish :: qos",j.qos),j.qos){case 1:case 2:this.outgoing[G.messageId]={volatile:!1,cb:K||M},this._storeProcessing?(f("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[G.messageId]=!1,this._storePacket(G,void 0,j.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",G.cmd),this._sendPacket(G,void 0,j.cbStorePut));break;default:this._storeProcessing?(f("_storeProcessing enabled"),this._storePacket(G,K,j.cbStorePut)):(f("MqttClient:publish: packet cmd: %s",G.cmd),this._sendPacket(G,K,j.cbStorePut))}return this},C.prototype.subscribe=function(){for(var E,c=new Array(arguments.length),j=0;j<arguments.length;j++)c[j]=arguments[j];var oe,K=[],G=c.shift(),J=G.resubscribe,Q=c.pop()||M,re=c.pop(),se=this,ne=this.options.protocolVersion;if(delete G.resubscribe,"string"==typeof G&&(G=[G]),"function"!=typeof Q&&(re=Q,Q=M),null!==(oe=b.validateTopics(G)))return h(Q,new Error("Invalid topic "+oe)),this;if(this._checkDisconnecting(Q))return f("subscribe: discconecting true"),this;var ie={qos:0};if(5===ne&&(ie.nl=!1,ie.rap=!1,ie.rh=0),re=T(ie,re),Array.isArray(G)?G.forEach(function(X){if(f("subscribe: array topic %s",X),!se._resubscribeTopics.hasOwnProperty(X)||se._resubscribeTopics[X].qos<re.qos||J){var O={topic:X,qos:re.qos};5===ne&&(O.nl=re.nl,O.rap=re.rap,O.rh=re.rh,O.properties=re.properties),f("subscribe: pushing topic `%s` and qos `%s` to subs list",O.topic,O.qos),K.push(O)}}):Object.keys(G).forEach(function(X){if(f("subscribe: object topic %s",X),!se._resubscribeTopics.hasOwnProperty(X)||se._resubscribeTopics[X].qos<G[X].qos||J){var O={topic:X,qos:G[X].qos};5===ne&&(O.nl=G[X].nl,O.rap=G[X].rap,O.rh=G[X].rh,O.properties=re.properties),f("subscribe: pushing `%s` to subs list",O),K.push(O)}}),E={cmd:"subscribe",subscriptions:K,qos:1,retain:!1,dup:!1,messageId:this._nextId()},re.properties&&(E.properties=re.properties),K.length){if(this.options.resubscribe){f("subscribe :: resubscribe true");var ee=[];K.forEach(function(X){if(se.options.reconnectPeriod>0){var O={qos:X.qos};5===ne&&(O.nl=X.nl||!1,O.rap=X.rap||!1,O.rh=X.rh||0,O.properties=X.properties),se._resubscribeTopics[X.topic]=O,ee.push(X.topic)}}),se.messageIdToTopic[E.messageId]=ee}return this.outgoing[E.messageId]={volatile:!0,cb:function(X,O){if(!X)for(var F=O.granted,Z=0;Z<F.length;Z+=1)K[Z].qos=F[Z];Q(X,K)}},f("subscribe :: call _sendPacket"),this._sendPacket(E),this}Q(null,[])},C.prototype.unsubscribe=function(){for(var E={cmd:"unsubscribe",qos:1,messageId:this._nextId()},c=this,j=new Array(arguments.length),K=0;K<arguments.length;K++)j[K]=arguments[K];var G=j.shift(),J=j.pop()||M,Q=j.pop();return"string"==typeof G&&(G=[G]),"function"!=typeof J&&(Q=J,J=M),this._checkDisconnecting(J)||("string"==typeof G?E.unsubscriptions=[G]:Array.isArray(G)&&(E.unsubscriptions=G),this.options.resubscribe&&E.unsubscriptions.forEach(function(re){delete c._resubscribeTopics[re]}),"object"==typeof Q&&Q.properties&&(E.properties=Q.properties),this.outgoing[E.messageId]={volatile:!0,cb:J},f("unsubscribe: call _sendPacket"),this._sendPacket(E)),this},C.prototype.end=function(E,c,j){var K=this;function G(){f("end :: closeStores: closing incoming and outgoing stores"),K.disconnected=!0,K.incomingStore.close(function(Q){K.outgoingStore.close(function(re){if(f("end :: closeStores: emitting end"),K.emit("end"),j){let oe=Q||re;f("end :: closeStores: invoking callback with args"),j(oe)}})}),K._deferredReconnect&&K._deferredReconnect()}function J(){f("end :: (%s) :: finish :: calling _cleanUp with force %s",K.options.clientId,E),K._cleanUp(E,()=>{f("end :: finish :: calling process.nextTick on closeStores"),_(G.bind(K))},c)}return f("end :: (%s)",this.options.clientId),(null==E||"boolean"!=typeof E)&&(j=c||M,c=E,E=!1,"object"!=typeof c&&(j=c,c=null,"function"!=typeof j&&(j=M))),"object"!=typeof c&&(j=c,c=null),f("end :: cb? %s",!!j),j=j||M,this.disconnecting?(j(),this):(this._clearReconnect(),this.disconnecting=!0,!E&&Object.keys(this.outgoing).length>0?(f("end :: (%s) :: calling finish in 10ms once outgoing is empty",K.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,J,10))):(f("end :: (%s) :: immediately calling finish",K.options.clientId),J()),this)},C.prototype.removeOutgoingMessage=function(E){var c=this.outgoing[E]?this.outgoing[E].cb:null;return delete this.outgoing[E],this.outgoingStore.del({messageId:E},function(){c(new Error("Message removed"))}),this},C.prototype.reconnect=function(E){f("client reconnect");var c=this,j=function(){E?(c.options.incomingStore=E.incomingStore,c.options.outgoingStore=E.outgoingStore):(c.options.incomingStore=null,c.options.outgoingStore=null),c.incomingStore=c.options.incomingStore||new u,c.outgoingStore=c.options.outgoingStore||new u,c.disconnecting=!1,c.disconnected=!1,c._deferredReconnect=null,c._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=j:j(),this},C.prototype._reconnect=function(){f("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),f("client already connected. disconnecting first.")):(f("_reconnect: calling _setupStream"),this._setupStream())},C.prototype._setupReconnect=function(){var E=this;!E.disconnecting&&!E.reconnectTimer&&E.options.reconnectPeriod>0?(this.reconnecting||(f("_setupReconnect :: emit `offline` state"),this.emit("offline"),f("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),f("_setupReconnect :: setting reconnectTimer for %d ms",E.options.reconnectPeriod),E.reconnectTimer=setInterval(function(){f("reconnectTimer :: reconnect triggered!"),E._reconnect()},E.options.reconnectPeriod)):f("_setupReconnect :: doing nothing...")},C.prototype._clearReconnect=function(){f("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},C.prototype._cleanUp=function(E,c){var j=arguments[2];if(c&&(f("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",c)),f("_cleanUp :: forced? %s",E),E)0===this.options.reconnectPeriod&&this.options.clean&&function W(E){E&&(f("flush: queue exists? %b",!!E),Object.keys(E).forEach(function(c){"function"==typeof E[c].cb&&(E[c].cb(new Error("Connection closed")),delete E[c])}))}(this.outgoing),f("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{var K=T({cmd:"disconnect"},j);f("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(K,h.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(f("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(f("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),c&&!this.connected&&(f("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",c),c())},C.prototype._sendPacket=function(E,c,j){if(f("_sendPacket :: (%s) ::  start",this.options.clientId),j=j||M,!this.connected)return f("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(E,c,j);switch(this._shiftPingInterval(),E.cmd){case"publish":break;case"pubrel":return void V(this,E,c,j);default:return void A(this,E,c)}switch(E.qos){case 2:case 1:V(this,E,c,j);break;default:A(this,E,c)}f("_sendPacket :: (%s) ::  end",this.options.clientId)},C.prototype._storePacket=function(E,c,j){f("_storePacket :: packet: %o",E),f("_storePacket :: cb? %s",!!c),j=j||M,0===(E.qos||0)&&this.queueQoSZero||"publish"!==E.cmd?this.queue.push({packet:E,cb:c}):E.qos>0?(c=this.outgoing[E.messageId]?this.outgoing[E.messageId].cb:null,this.outgoingStore.put(E,function(K){if(K)return c&&c(K);j()})):c&&c(new Error("No connection to broker"))},C.prototype._setupPingTimer=function(){f("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);var E=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=s(function(){E._checkPing()},1e3*this.options.keepalive))},C.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},C.prototype._checkPing=function(){f("_checkPing :: checking ping..."),this.pingResp?(f("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(f("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},C.prototype._handlePingresp=function(){this.pingResp=!0},C.prototype._handleConnack=function(E){f("_handleConnack");var c=this.options,K=5===c.protocolVersion?E.reasonCode:E.returnCode;if(clearTimeout(this.connackTimer),E.properties&&(E.properties.topicAliasMaximum&&(c.properties||(c.properties={}),c.properties.topicAliasMaximum=E.properties.topicAliasMaximum),E.properties.serverKeepAlive&&c.keepalive&&(c.keepalive=E.properties.serverKeepAlive,this._shiftPingInterval()),E.properties.maximumPacketSize&&(c.properties||(c.properties={}),c.properties.maximumPacketSize=E.properties.maximumPacketSize)),0===K)this.reconnecting=!1,this._onConnect(E);else if(K>0){var G=new Error("Connection refused: "+x[K]);G.code=K,this.emit("error",G)}},C.prototype._handlePublish=function(E,c){f("_handlePublish: packet %o",E),c=typeof c<"u"?c:M;var j=E.topic.toString(),K=E.payload,G=E.qos,J=E.messageId,Q=this,re=this.options,oe=[0,16,128,131,135,144,145,151,153];switch(f("_handlePublish: qos %d",G),G){case 2:re.customHandleAcks(j,K,E,function(se,ne){return se instanceof Error||(ne=se,se=null),se?Q.emit("error",se):-1===oe.indexOf(ne)?Q.emit("error",new Error("Wrong reason code for pubrec")):void(ne?Q._sendPacket({cmd:"pubrec",messageId:J,reasonCode:ne},c):Q.incomingStore.put(E,function(){Q._sendPacket({cmd:"pubrec",messageId:J},c)}))});break;case 1:re.customHandleAcks(j,K,E,function(se,ne){return se instanceof Error||(ne=se,se=null),se?Q.emit("error",se):-1===oe.indexOf(ne)?Q.emit("error",new Error("Wrong reason code for puback")):(ne||Q.emit("message",j,K,E),void Q.handleMessage(E,function(ie){if(ie)return c&&c(ie);Q._sendPacket({cmd:"puback",messageId:J,reasonCode:ne},c)}))});break;case 0:this.emit("message",j,K,E),this.handleMessage(E,c);break;default:f("_handlePublish: unknown QoS. Doing nothing.")}},C.prototype.handleMessage=function(E,c){c()},C.prototype._handleAck=function(E){var Q,c=E.messageId,j=E.cmd,K=null,G=this.outgoing[c]?this.outgoing[c].cb:null,J=this;if(G){switch(f("_handleAck :: packet type",j),j){case"pubcomp":case"puback":var re=E.reasonCode;re&&re>0&&16!==re&&((Q=new Error("Publish error: "+x[re])).code=re,G(Q,E)),delete this.outgoing[c],this.outgoingStore.del(E,G);break;case"pubrec":K={cmd:"pubrel",qos:2,messageId:c};var oe=E.reasonCode;oe&&oe>0&&16!==oe?((Q=new Error("Publish error: "+x[oe])).code=oe,G(Q,E)):this._sendPacket(K);break;case"suback":delete this.outgoing[c];for(var se=0;se<E.granted.length;se++)if(128&E.granted[se]){var ne=this.messageIdToTopic[c];ne&&ne.forEach(function(ie){delete J._resubscribeTopics[ie]})}G(null,E);break;case"unsuback":delete this.outgoing[c],G(null);break;default:J.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else f("_handleAck :: Server sent an ack in error. Ignoring.")},C.prototype._handlePubrel=function(E,c){f("handling pubrel packet"),c=typeof c<"u"?c:M;var K=this,G={cmd:"pubcomp",messageId:E.messageId};K.incomingStore.get(E,function(J,Q){J?K._sendPacket(G,c):(K.emit("message",Q.topic,Q.payload,Q),K.handleMessage(Q,function(re){if(re)return c(re);K.incomingStore.del(Q,M),K._sendPacket(G,c)}))})},C.prototype._handleDisconnect=function(E){this.emit("disconnect",E)},C.prototype._nextId=function(){var E=this.nextId++;return 65536===this.nextId&&(this.nextId=1),E},C.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},C.prototype._resubscribe=function(E){f("_resubscribe");var c=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!E.sessionPresent)&&c.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){f("_resubscribe: protocolVersion 5");for(var j=0;j<c.length;j++){var K={};K[c[j]]=this._resubscribeTopics[c[j]],K.resubscribe=!0,this.subscribe(K,{properties:K[c[j]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},C.prototype._onConnect=function(E){if(this.disconnected)this.emit("connect",E);else{var c=this;this._setupPingTimer(),this._resubscribe(E),this.connected=!0,function j(){var K=c.outgoingStore.createStream();function G(){c._storeProcessing=!1,c._packetIdsDuringStoreProcessing={}}function J(){K.destroy(),K=null,G()}function Q(){if(K){c._storeProcessing=!0;var oe,re=K.read(1);if(!re)return void K.once("readable",Q);if(c._packetIdsDuringStoreProcessing[re.messageId])return void Q();c.disconnecting||c.reconnectTimer?K.destroy&&K.destroy():(oe=c.outgoing[re.messageId]?c.outgoing[re.messageId].cb:null,c.outgoing[re.messageId]={volatile:!1,cb:function(se,ne){oe&&oe(se,ne),Q()}},c._packetIdsDuringStoreProcessing[re.messageId]=!0,c._sendPacket(re))}}c.once("close",J),K.on("error",function(re){G(),c.removeListener("close",J),c.emit("error",re)}),K.on("end",function(){var re=!0;for(var oe in c._packetIdsDuringStoreProcessing)if(!c._packetIdsDuringStoreProcessing[oe]){re=!1;break}re?(G(),c.removeListener("close",J),c.emit("connect",E)):j()}),Q()}()}},H.exports=C}).call(this)}).call(this,I("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./store":13,"./validations":14,_process:69,debug:19,events:4,inherits:34,"mqtt-packet":38,"readable-stream":60,reinterval:61,xtend:68}],8:[function(I,H,U){(function(p){(function(){"use strict";var u,i,a,d=I("readable-stream").Transform,m=I("duplexify"),o=!1;H.exports=function _(h,w){if(w.hostname=w.hostname||w.host,!w.hostname)throw new Error("Could not determine host. Specify host manually.");var y="MQIsdp"===w.protocolId&&3===w.protocolVersion?"mqttv3.1":"mqtt";!function b(h){h.hostname||(h.hostname="localhost"),h.path||(h.path="/"),h.wsOptions||(h.wsOptions={})}(w);var x=function T(h,w){var y="alis"===h.protocol?"wss":"ws",x=y+"://"+h.hostname+h.path;return h.port&&80!==h.port&&443!==h.port&&(x=y+"://"+h.hostname+":"+h.port+h.path),"function"==typeof h.transformWsUrl&&(x=h.transformWsUrl(x,h,w)),x}(w,h);return(u=w.my).connectSocket({url:x,protocols:y}),i=function s(){var h=new d;return h._write=function(w,y,x){u.sendSocketMessage({data:w.buffer,success:function(){x()},fail:function(){x(new Error)}})},h._flush=function(y){u.closeSocket({success:function(){y()}})},h}(),a=m.obj(),function f(){o||(o=!0,u.onSocketOpen(function(){a.setReadable(i),a.setWritable(i),a.emit("connect")}),u.onSocketMessage(function(h){if("string"==typeof h.data){var w=p.from(h.data,"base64");i.push(w)}else{var y=new FileReader;y.addEventListener("load",function(){var x=y.result;x=x instanceof ArrayBuffer?p.from(x):p.from(x,"utf8"),i.push(x)}),y.readAsArrayBuffer(h.data)}}),u.onSocketClose(function(){a.end(),a.destroy()}),u.onSocketError(function(h){a.destroy(h)}))}(),a}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:3,duplexify:21,"readable-stream":60}],9:[function(I,H,U){"use strict";var p=I("net"),d=I("debug")("mqttjs:tcp");H.exports=function m(u,i){var a,o;return i.port=i.port||1883,i.hostname=i.hostname||i.host||"localhost",d("port %d and host %s",a=i.port,o=i.hostname),p.createConnection(a,o)}},{debug:19,net:2}],10:[function(I,H,U){"use strict";var p=I("tls"),d=I("debug")("mqttjs:tls");H.exports=function m(u,i){var a;function o(s){i.rejectUnauthorized&&u.emit("error",s),a.end()}return i.port=i.port||8883,i.host=i.hostname||i.host||"localhost",i.servername=i.host,i.rejectUnauthorized=!1!==i.rejectUnauthorized,delete i.path,d("port %d host %s rejectUnauthorized %b",i.port,i.host,i.rejectUnauthorized),(a=p.connect(i)).on("secureConnect",function(){i.rejectUnauthorized&&!a.authorized?a.emit("error",new Error("TLS not authorized")):a.removeListener("error",o)}),a.on("error",o),a}},{debug:19,tls:2}],11:[function(I,H,U){(function(p,d){(function(){"use strict";const m=I("ws"),u=I("debug")("mqttjs:ws"),i=I("duplexify"),a=I("readable-stream").Transform;let o=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];const s=typeof p<"u"&&"browser"===p.title||"function"==typeof fe;function b(x,P){let A=x.protocol+"://"+x.hostname+":"+x.port+x.path;return"function"==typeof x.transformWsUrl&&(A=x.transformWsUrl(A,x,P)),A}function T(x){let P=x;return x.hostname||(P.hostname="localhost"),x.port||(P.port="wss"===x.protocol?443:80),x.path||(P.path="/"),x.wsOptions||(P.wsOptions={}),!s&&"wss"===x.protocol&&o.forEach(function(A){x.hasOwnProperty(A)&&!x.wsOptions.hasOwnProperty(A)&&(P.wsOptions[A]=x[A])}),P}H.exports=s?function y(x,P){let A;u("browserStreamBuilder");const $=function f(x){let P=T(x);if(P.hostname||(P.hostname=P.host),!P.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const A=new URL(document.URL);P.hostname=A.hostname,P.port||(P.port=A.port)}return void 0===P.objectMode&&(P.objectMode=!(!0===P.binary||void 0===P.binary)),P}(P).browserBufferSize||524288,V=P.browserBufferTimeout||1e3,M=!P.objectMode;let C=function h(x,P){const A="MQIsdp"===P.protocolId&&3===P.protocolVersion?"mqttv3.1":"mqtt";let W=b(P,x),$=new WebSocket(W,[A]);return $.binaryType="arraybuffer",$}(x,P),E=function j(ne,ie,ee){let X=new a({objectModeMode:ne.objectMode});return X._write=ie,X._flush=ee,X}(P,function oe(ne,ie,ee){C.bufferedAmount>$&&setTimeout(oe,V,ne,ie,ee),M&&"string"==typeof ne&&(ne=d.from(ne,"utf8"));try{C.send(ne)}catch(X){return ee(X)}ee()},function se(ne){C.close(),ne()});P.objectMode||(E._writev=re),E.on("close",()=>{C.close()});const c=typeof C.addEventListener>"u";function K(){A.setReadable(E),A.setWritable(E),A.emit("connect")}function G(){A.end(),A.destroy()}function J(ne){A.destroy(ne)}function Q(ne){let ie=ne.data;ie=ie instanceof ArrayBuffer?d.from(ie):d.from(ie,"utf8"),E.push(ie)}function re(ne,ie){const ee=new Array(ne.length);for(let X=0;X<ne.length;X++)ee[X]="string"==typeof ne[X].chunk?d.from(ne[X],"utf8"):ne[X].chunk;this._write(d.concat(ee),"binary",ie)}return C.readyState===C.OPEN?A=E:(A=A=i(void 0,void 0,P),P.objectMode||(A._writev=re),c?C.addEventListener("open",K):C.onopen=K),A.socket=C,c?(C.addEventListener("close",G),C.addEventListener("error",J),C.addEventListener("message",Q)):(C.onclose=G,C.onerror=J,C.onmessage=Q),A}:function w(x,P){u("streamBuilder");let A=T(P);const W=b(A,x);let $=function _(x,P,A){u("createWebSocket"),u("protocol: "+A.protocolId+" "+A.protocolVersion);const W="MQIsdp"===A.protocolId&&3===A.protocolVersion?"mqttv3.1":"mqtt";return u("creating new Websocket for url: "+P+" and protocol: "+W),new m(P,[W],A.wsOptions)}(0,W,A),V=m.createWebSocketStream($,A.wsOptions);return V.url=W,V}}).call(this)}).call(this,I("_process"),I("buffer").Buffer)},{_process:69,buffer:3,debug:19,duplexify:21,"readable-stream":60,ws:67}],12:[function(I,H,U){(function(p){(function(){"use strict";var u,i,a,d=I("readable-stream").Transform,m=I("duplexify");H.exports=function f(_,h){if(h.hostname=h.hostname||h.host,!h.hostname)throw new Error("Could not determine host. Specify host manually.");var w="MQIsdp"===h.protocolId&&3===h.protocolVersion?"mqttv3.1":"mqtt";!function s(_){_.hostname||(_.hostname="localhost"),_.path||(_.path="/"),_.wsOptions||(_.wsOptions={})}(h);var y=function b(_,h){var w="wxs"===_.protocol?"wss":"ws",y=w+"://"+_.hostname+_.path;return _.port&&80!==_.port&&443!==_.port&&(y=w+"://"+_.hostname+":"+_.port+_.path),"function"==typeof _.transformWsUrl&&(y=_.transformWsUrl(y,_,h)),y}(h,_);u=wx.connectSocket({url:y,protocols:[w]}),i=function o(){var _=new d;return _._write=function(h,w,y){u.send({data:h.buffer,success:function(){y()},fail:function(x){y(new Error(x))}})},_._flush=function(w){u.close({success:function(){w()}})},_}(),(a=m.obj())._destroy=function(P,A){u.close({success:function(){A&&A(P)}})};var x=a.destroy;return a.destroy=function(){a.destroy=x;var P=this;setTimeout(function(){u.close({fail:function(){P._destroy(new Error)}})},0)}.bind(a),function T(){u.onOpen(function(){a.setReadable(i),a.setWritable(i),a.emit("connect")}),u.onMessage(function(_){var h=_.data;h=h instanceof ArrayBuffer?p.from(h):p.from(h,"utf8"),i.push(h)}),u.onClose(function(){a.end(),a.destroy()}),u.onError(function(_){a.destroy(new Error(_.errMsg))})}(),a}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:3,duplexify:21,"readable-stream":60}],13:[function(I,H,U){"use strict";var p=I("xtend"),d=I("readable-stream").Readable,m={objectMode:!0},u={clean:!0};function i(a){if(!(this instanceof i))return new i(a);this.options=a||{},this.options=p(u,a),this._inflights=new Map}i.prototype.put=function(a,o){return this._inflights.set(a.messageId,a),o&&o(),this},i.prototype.createStream=function(){var a=new d(m),o=!1,s=[],b=0;return this._inflights.forEach(function(T,f){s.push(T)}),a._read=function(){this.push(!o&&b<s.length?s[b++]:null)},a.destroy=function(){if(!o){var T=this;o=!0,setTimeout(function(){T.emit("close")},0)}},a},i.prototype.del=function(a,o){return(a=this._inflights.get(a.messageId))?(this._inflights.delete(a.messageId),o(null,a)):o&&o(new Error("missing packet")),this},i.prototype.get=function(a,o){return(a=this._inflights.get(a.messageId))?o(null,a):o&&o(new Error("missing packet")),this},i.prototype.close=function(a){this.options.clean&&(this._inflights=null),a&&a()},H.exports=i},{"readable-stream":60,xtend:68}],14:[function(I,H,U){"use strict";function p(m){for(var u=m.split("/"),i=0;i<u.length;i++)if("+"!==u[i]){if("#"===u[i])return i===u.length-1;if(-1!==u[i].indexOf("+")||-1!==u[i].indexOf("#"))return!1}return!0}H.exports={validateTopics:function d(m){if(0===m.length)return"empty_topic_list";for(var u=0;u<m.length;u++)if(!p(m[u]))return m[u];return null}}},{}],15:[function(I,H,U){(function(p){(function(){"use strict";var d=I("../client"),m=I("../store"),u=I("url"),i=I("xtend"),a=I("debug")("mqttjs"),o={};function b(T,f){if(a("connecting to an MQTT broker..."),"object"==typeof T&&!f&&(f=T,T=null),f=f||{},T){var _=u.parse(T,!0);if(null!=_.port&&(_.port=Number(_.port)),null===(f=i(_,f)).protocol)throw new Error("Missing protocol");f.protocol=f.protocol.replace(/:$/,"")}if(function s(T){var f;T.auth&&((f=T.auth.match(/^(.+):(.+)$/))?(T.username=f[1],T.password=f[2]):T.username=T.auth)}(f),f.query&&"string"==typeof f.query.clientId&&(f.clientId=f.query.clientId),f.cert&&f.key){if(!f.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(f.protocol))switch(f.protocol){case"mqtt":f.protocol="mqtts";break;case"ws":f.protocol="wss";break;case"wx":f.protocol="wxs";break;case"ali":f.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+f.protocol+'"!')}}if(!o[f.protocol]){var h=-1!==["mqtts","wss"].indexOf(f.protocol);f.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(x,P){return(!h||P%2!=0)&&"function"==typeof o[x]})[0]}if(!1===f.clean&&!f.clientId)throw new Error("Missing clientId for unclean clients");f.protocol&&(f.defaultProtocol=f.protocol);var y=new d(function w(x){return f.servers&&((!x._reconnectCount||x._reconnectCount===f.servers.length)&&(x._reconnectCount=0),f.host=f.servers[x._reconnectCount].host,f.port=f.servers[x._reconnectCount].port,f.protocol=f.servers[x._reconnectCount].protocol?f.servers[x._reconnectCount].protocol:f.defaultProtocol,f.hostname=f.host,x._reconnectCount++),a("calling streambuilder for",f.protocol),o[f.protocol](x,f)},f);return y.on("error",function(){}),y}typeof p<"u"&&"browser"!==p.title||"function"!=typeof fe?(o.mqtt=I("./tcp"),o.tcp=I("./tcp"),o.ssl=I("./tls"),o.tls=I("./tls"),o.mqtts=I("./tls")):(o.wx=I("./wx"),o.wxs=I("./wx"),o.ali=I("./ali"),o.alis=I("./ali")),o.ws=I("./ws"),o.wss=I("./ws"),H.exports=b,H.exports.connect=b,H.exports.MqttClient=d,H.exports.Store=m}).call(this)}).call(this,I("_process"))},{"../client":7,"../store":13,"./ali":8,"./tcp":9,"./tls":10,"./ws":11,"./wx":12,_process:69,debug:19,url:75,xtend:68}],16:[function(I,H,U){"use strict";const{Buffer:p}=I("buffer"),d=Symbol.for("BufferList");function m(u){if(!(this instanceof m))return new m(u);m._init.call(this,u)}m._init=function(i){Object.defineProperty(this,d,{value:!0}),this._bufs=[],this.length=0,i&&this.append(i)},m.prototype._new=function(i){return new m(i)},m.prototype._offset=function(i){if(0===i)return[0,0];let a=0;for(let o=0;o<this._bufs.length;o++){const s=a+this._bufs[o].length;if(i<s||o===this._bufs.length-1)return[o,i-a];a=s}},m.prototype._reverseOffset=function(u){const i=u[0];let a=u[1];for(let o=0;o<i;o++)a+=this._bufs[o].length;return a},m.prototype.get=function(i){if(i>this.length||i<0)return;const a=this._offset(i);return this._bufs[a[0]][a[1]]},m.prototype.slice=function(i,a){return"number"==typeof i&&i<0&&(i+=this.length),"number"==typeof a&&a<0&&(a+=this.length),this.copy(null,0,i,a)},m.prototype.copy=function(i,a,o,s){if(("number"!=typeof o||o<0)&&(o=0),("number"!=typeof s||s>this.length)&&(s=this.length),o>=this.length||s<=0)return i||p.alloc(0);const b=!!i,T=this._offset(o),f=s-o;let _=f,h=b&&a||0,w=T[1];if(0===o&&s===this.length){if(!b)return 1===this._bufs.length?this._bufs[0]:p.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(i,h),h+=this._bufs[y].length;return i}if(_<=this._bufs[T[0]].length-w)return b?this._bufs[T[0]].copy(i,a,w,w+_):this._bufs[T[0]].slice(w,w+_);b||(i=p.allocUnsafe(f));for(let y=T[0];y<this._bufs.length;y++){const x=this._bufs[y].length-w;if(!(_>x)){this._bufs[y].copy(i,h,w,w+_),h+=x;break}this._bufs[y].copy(i,h,w),h+=x,_-=x,w&&(w=0)}return i.length>h?i.slice(0,h):i},m.prototype.shallowSlice=function(i,a){if((i=i||0)<0&&(i+=this.length),(a="number"!=typeof a?this.length:a)<0&&(a+=this.length),i===a)return this._new();const o=this._offset(i),s=this._offset(a),b=this._bufs.slice(o[0],s[0]+1);return 0===s[1]?b.pop():b[b.length-1]=b[b.length-1].slice(0,s[1]),0!==o[1]&&(b[0]=b[0].slice(o[1])),this._new(b)},m.prototype.toString=function(i,a,o){return this.slice(a,o).toString(i)},m.prototype.consume=function(i){if(i=Math.trunc(i),Number.isNaN(i)||i<=0)return this;for(;this._bufs.length;){if(!(i>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(i),this.length-=i;break}i-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},m.prototype.duplicate=function(){const i=this._new();for(let a=0;a<this._bufs.length;a++)i.append(this._bufs[a]);return i},m.prototype.append=function(i){if(null==i)return this;if(i.buffer)this._appendBuffer(p.from(i.buffer,i.byteOffset,i.byteLength));else if(Array.isArray(i))for(let a=0;a<i.length;a++)this.append(i[a]);else if(this._isBufferList(i))for(let a=0;a<i._bufs.length;a++)this.append(i._bufs[a]);else"number"==typeof i&&(i=i.toString()),this._appendBuffer(p.from(i));return this},m.prototype._appendBuffer=function(i){this._bufs.push(i),this.length+=i.length},m.prototype.indexOf=function(u,i,a){if(void 0===a&&"string"==typeof i&&(a=i,i=void 0),"function"==typeof u||Array.isArray(u))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof u?u=p.from([u]):"string"==typeof u?u=p.from(u,a):this._isBufferList(u)?u=u.slice():Array.isArray(u.buffer)?u=p.from(u.buffer,u.byteOffset,u.byteLength):p.isBuffer(u)||(u=p.from(u)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),0===u.length)return i>this.length?this.length:i;const o=this._offset(i);let s=o[0],b=o[1];for(;s<this._bufs.length;s++){const T=this._bufs[s];for(;b<T.length;)if(T.length-b>=u.length){const _=T.indexOf(u,b);if(-1!==_)return this._reverseOffset([s,_]);b=T.length-u.length+1}else{const _=this._reverseOffset([s,b]);if(this._match(_,u))return _;b++}b=0}return-1},m.prototype._match=function(u,i){if(this.length-u<i.length)return!1;for(let a=0;a<i.length;a++)if(this.get(u+a)!==i[a])return!1;return!0},function(){const u={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const i in u)!function(a){m.prototype[a]=null===u[a]?function(o,s){return this.slice(o,o+s)[a](0,s)}:function(o=0){return this.slice(o,o+u[a])[a](0)}}(i)}(),m.prototype._isBufferList=function(i){return i instanceof m||m.isBufferList(i)},m.isBufferList=function(i){return null!=i&&i[d]},H.exports=m},{buffer:3}],17:[function(I,H,U){"use strict";const p=I("readable-stream").Duplex,d=I("inherits"),m=I("./BufferList");function u(i){if(!(this instanceof u))return new u(i);if("function"==typeof i){this._callback=i;const a=function(s){this._callback&&(this._callback(s),this._callback=null)}.bind(this);this.on("pipe",function(s){s.on("error",a)}),this.on("unpipe",function(s){s.removeListener("error",a)}),i=null}m._init.call(this,i),p.call(this)}d(u,p),Object.assign(u.prototype,m.prototype),u.prototype._new=function(a){return new u(a)},u.prototype._write=function(a,o,s){this._appendBuffer(a),"function"==typeof s&&s()},u.prototype._read=function(a){if(!this.length)return this.push(null);a=Math.min(a,this.length),this.push(this.slice(0,a)),this.consume(a)},u.prototype.end=function(a){p.prototype.end.call(this,a),this._callback&&(this._callback(null,this.slice()),this._callback=null)},u.prototype._destroy=function(a,o){this._bufs.length=0,this.length=0,o(a)},u.prototype._isBufferList=function(a){return a instanceof u||a instanceof m||u.isBufferList(a)},u.isBufferList=m.isBufferList,H.exports=u,H.exports.BufferListStream=u,H.exports.BufferList=m},{"./BufferList":16,inherits:34,"readable-stream":60}],18:[function(I,H,U){(function(p){(function(){function x(P){return Object.prototype.toString.call(P)}U.isArray=function d(P){return Array.isArray?Array.isArray(P):"[object Array]"===x(P)},U.isBoolean=function m(P){return"boolean"==typeof P},U.isNull=function u(P){return null===P},U.isNullOrUndefined=function i(P){return null==P},U.isNumber=function a(P){return"number"==typeof P},U.isString=function o(P){return"string"==typeof P},U.isSymbol=function s(P){return"symbol"==typeof P},U.isUndefined=function b(P){return void 0===P},U.isRegExp=function T(P){return"[object RegExp]"===x(P)},U.isObject=function f(P){return"object"==typeof P&&null!==P},U.isDate=function _(P){return"[object Date]"===x(P)},U.isError=function h(P){return"[object Error]"===x(P)||P instanceof Error},U.isFunction=function w(P){return"function"==typeof P},U.isPrimitive=function y(P){return null===P||"boolean"==typeof P||"number"==typeof P||"string"==typeof P||"symbol"==typeof P||typeof P>"u"},U.isBuffer=p.isBuffer}).call(this)}).call(this,{isBuffer:I("../../../../is-buffer/index.js")})},{"../../../../is-buffer/index.js":6}],19:[function(I,H,U){(function(p){(function(){U.formatArgs=function m(s){if(s[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+s[0]+(this.useColors?"%c ":" ")+"+"+H.exports.humanize(this.diff),!this.useColors)return;const b="color: "+this.color;s.splice(1,0,b,"color: inherit");let T=0,f=0;s[0].replace(/%[a-zA-Z%]/g,_=>{"%%"!==_&&(T++,"%c"===_&&(f=T))}),s.splice(f,0,b)},U.save=function u(s){try{s?U.storage.setItem("debug",s):U.storage.removeItem("debug")}catch{}},U.load=function i(){let s;try{s=U.storage.getItem("debug")}catch{}return!s&&typeof p<"u"&&"env"in p&&(s=p.env.DEBUG),s},U.useColors=function d(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},U.storage=function a(){try{return localStorage}catch{}}(),U.destroy=(()=>{let s=!1;return()=>{s||(s=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),U.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],U.log=console.debug||console.log||(()=>{}),H.exports=I("./common")(U);const{formatters:o}=H.exports;o.j=function(s){try{return JSON.stringify(s)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}}}).call(this)}).call(this,I("_process"))},{"./common":20,_process:69}],20:[function(I,H,U){H.exports=function p(d){function u(_){let h,w=null;function y(...x){if(!y.enabled)return;const P=y,A=Number(new Date);P.diff=A-(h||A),P.prev=h,P.curr=A,h=A,x[0]=u.coerce(x[0]),"string"!=typeof x[0]&&x.unshift("%O");let $=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(M,C)=>{if("%%"===M)return"%";$++;const E=u.formatters[C];return"function"==typeof E&&(M=E.call(P,x[$]),x.splice($,1),$--),M}),u.formatArgs.call(P,x),(P.log||u.log).apply(P,x)}return y.namespace=_,y.useColors=u.useColors(),y.color=u.selectColor(_),y.extend=i,y.destroy=u.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>null===w?u.enabled(_):w,set:x=>{w=x}}),"function"==typeof u.init&&u.init(y),y}function i(_,h){const w=u(this.namespace+(typeof h>"u"?":":h)+_);return w.log=this.log,w}function b(_){return _.toString().substring(2,_.toString().length-2).replace(/\.\*\?$/,"*")}return u.debug=u,u.default=u,u.coerce=function T(_){return _ instanceof Error?_.stack||_.message:_},u.disable=function o(){const _=[...u.names.map(b),...u.skips.map(b).map(h=>"-"+h)].join(",");return u.enable(""),_},u.enable=function a(_){let h;u.save(_),u.names=[],u.skips=[];const w=("string"==typeof _?_:"").split(/[\s,]+/),y=w.length;for(h=0;h<y;h++)w[h]&&("-"===(_=w[h].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+_.substr(1)+"$")):u.names.push(new RegExp("^"+_+"$")))},u.enabled=function s(_){if("*"===_[_.length-1])return!0;let h,w;for(h=0,w=u.skips.length;h<w;h++)if(u.skips[h].test(_))return!1;for(h=0,w=u.names.length;h<w;h++)if(u.names[h].test(_))return!0;return!1},u.humanize=I("ms"),u.destroy=function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(d).forEach(_=>{u[_]=d[_]}),u.names=[],u.skips=[],u.formatters={},u.selectColor=function m(_){let h=0;for(let w=0;w<_.length;w++)h=(h<<5)-h+_.charCodeAt(w),h|=0;return u.colors[Math.abs(h)%u.colors.length]},u.enable(u.load()),u}},{ms:43}],21:[function(I,H,U){(function(p,d){(function(){var m=I("readable-stream"),u=I("end-of-stream"),i=I("inherits"),a=I("stream-shift"),o=d.from&&d.from!==Uint8Array.from?d.from([0]):new d([0]),s=function(w,y){w._corked?w.once("uncork",y):y()},T=function(w,y){return function(x){x?function(w,y){w._autoDestroy&&w.destroy(y)}(w,"premature close"===x.message?null:x):y&&!w._ended&&w.end()}},h=function(w,y,x){if(!(this instanceof h))return new h(w,y,x);m.Duplex.call(this,x),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!x||!1!==x.autoDestroy,this._forwardDestroy=!x||!1!==x.destroy,this._forwardEnd=!x||!1!==x.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,w&&this.setWritable(w),y&&this.setReadable(y)};i(h,m.Duplex),h.obj=function(w,y,x){return x||(x={}),x.objectMode=!0,x.highWaterMark=16,new h(w,y,x)},h.prototype.cork=function(){1==++this._corked&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},h.prototype.setWritable=function(w){if(this._unwrite&&this._unwrite(),this.destroyed)w&&w.destroy&&w.destroy();else if(null!==w&&!1!==w){var y=this,x=u(w,{writable:!0,readable:!1},T(this,this._forwardEnd)),P=function(){var W=y._ondrain;y._ondrain=null,W&&W()};this._unwrite&&p.nextTick(P),this._writable=w,this._writable.on("drain",P),this._unwrite=function(){y._writable.removeListener("drain",P),x()},this.uncork()}else this.end()},h.prototype.setReadable=function(w){if(this._unread&&this._unread(),this.destroyed)w&&w.destroy&&w.destroy();else{if(null===w||!1===w)return this.push(null),void this.resume();var y=this,x=u(w,{writable:!1,readable:!0},T(this)),P=function(){y._forward()},A=function(){y.push(null)};this._drained=!0,this._readable=w,this._readable2=w._readableState?w:function(w){return new m.Readable({objectMode:!0,highWaterMark:16}).wrap(w)}(w),this._readable2.on("readable",P),this._readable2.on("end",A),this._unread=function(){y._readable2.removeListener("readable",P),y._readable2.removeListener("end",A),x()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var w;this._drained&&null!==(w=a(this._readable2));)this.destroyed||(this._drained=this.push(w));this._forwarding=!1}},h.prototype.destroy=function(w){if(!this.destroyed){this.destroyed=!0;var y=this;p.nextTick(function(){y._destroy(w)})}},h.prototype._destroy=function(w){if(w){var y=this._ondrain;this._ondrain=null,y?y(w):this.emit("error",w)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(w,y,x){return this.destroyed?x():this._corked?s(this,this._write.bind(this,w,y,x)):w===o?this._finish(x):this._writable?void(!1===this._writable.write(w)?this._ondrain=x:x()):x()},h.prototype._finish=function(w){var y=this;this.emit("preend"),s(this,function(){!function(w,y){!w||w._writableState&&w._writableState.finished?y():w._writableState?w.end(y):(w.end(),y())}(y._forwardEnd&&y._writable,function(){!1===y._writableState.prefinished&&(y._writableState.prefinished=!0),y.emit("prefinish"),s(y,w)})})},h.prototype.end=function(w,y,x){return"function"==typeof w?this.end(null,null,w):"function"==typeof y?this.end(w,null,y):(this._ended=!0,w&&this.write(w),this._writableState.ending||this.write(o),m.Writable.prototype.end.call(this,x))},H.exports=h}).call(this)}).call(this,I("_process"),I("buffer").Buffer)},{_process:69,buffer:3,"end-of-stream":33,inherits:34,"readable-stream":30,"stream-shift":63}],22:[function(I,H,U){"use strict";var p=I("process-nextick-args"),d=Object.keys||function(_){var h=[];for(var w in _)h.push(w);return h};H.exports=b;var m=Object.create(I("core-util-is"));m.inherits=I("inherits");var u=I("./_stream_readable"),i=I("./_stream_writable");m.inherits(b,u);for(var a=d(i.prototype),o=0;o<a.length;o++){var s=a[o];b.prototype[s]||(b.prototype[s]=i.prototype[s])}function b(_){if(!(this instanceof b))return new b(_);u.call(this,_),i.call(this,_),_&&!1===_.readable&&(this.readable=!1),_&&!1===_.writable&&(this.writable=!1),this.allowHalfOpen=!0,_&&!1===_.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",T)}function T(){this.allowHalfOpen||this._writableState.ended||p.nextTick(f,this)}function f(_){_.end()}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=_,this._writableState.destroyed=_)}}),b.prototype._destroy=function(_,h){this.push(null),this.end(),p.nextTick(h,_)}},{"./_stream_readable":24,"./_stream_writable":26,"core-util-is":18,inherits:34,"process-nextick-args":45}],23:[function(I,H,U){"use strict";H.exports=m;var p=I("./_stream_transform"),d=Object.create(I("core-util-is"));function m(u){if(!(this instanceof m))return new m(u);p.call(this,u)}d.inherits=I("inherits"),d.inherits(m,p),m.prototype._transform=function(u,i,a){a(null,u)}},{"./_stream_transform":25,"core-util-is":18,inherits:34}],24:[function(I,H,U){(function(p,d){(function(){"use strict";var m=I("process-nextick-args");H.exports=M;var i,u=I("isarray");M.ReadableState=V,I("events");var o=function(n,l){return n.listeners(l).length},s=I("./internal/streams/stream"),b=I("safe-buffer").Buffer,T=d.Uint8Array||function(){};var h=Object.create(I("core-util-is"));h.inherits=I("inherits");var w=I("util"),y=void 0;y=w&&w.debuglog?w.debuglog("stream"):function(){};var A,x=I("./internal/streams/BufferList"),P=I("./internal/streams/destroy");h.inherits(M,s);var W=["error","close","destroy","pause","resume"];function V(n,l){var k=l instanceof(i=i||I("./_stream_duplex"));this.objectMode=!!(n=n||{}).objectMode,k&&(this.objectMode=this.objectMode||!!n.readableObjectMode);var B=n.highWaterMark,g=n.readableHighWaterMark;this.highWaterMark=B||0===B?B:k&&(g||0===g)?g:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new x,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=n.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,n.encoding&&(A||(A=I("string_decoder/").StringDecoder),this.decoder=new A(n.encoding),this.encoding=n.encoding)}function M(n){if(i=i||I("./_stream_duplex"),!(this instanceof M))return new M(n);this._readableState=new V(n,this),this.readable=!0,n&&("function"==typeof n.read&&(this._read=n.read),"function"==typeof n.destroy&&(this._destroy=n.destroy)),s.call(this)}function C(n,l,k,B,g){var e,t=n._readableState;return null===l?(t.reading=!1,function Q(n,l){if(!l.ended){if(l.decoder){var k=l.decoder.end();k&&k.length&&(l.buffer.push(k),l.length+=l.objectMode?1:k.length)}l.ended=!0,re(n)}}(n,t)):(g||(e=function c(n,l){var k;return!function _(n){return b.isBuffer(n)||n instanceof T}(l)&&"string"!=typeof l&&void 0!==l&&!n.objectMode&&(k=new TypeError("Invalid non-string/buffer chunk")),k}(t,l)),e?n.emit("error",e):t.objectMode||l&&l.length>0?("string"!=typeof l&&!t.objectMode&&Object.getPrototypeOf(l)!==b.prototype&&(l=function f(n){return b.from(n)}(l)),B?t.endEmitted?n.emit("error",new Error("stream.unshift() after end event")):E(n,t,l,!0):t.ended?n.emit("error",new Error("stream.push() after EOF")):(t.reading=!1,t.decoder&&!k?(l=t.decoder.write(l),t.objectMode||0!==l.length?E(n,t,l,!1):se(n,t)):E(n,t,l,!1))):B||(t.reading=!1)),function j(n){return!n.ended&&(n.needReadable||n.length<n.highWaterMark||0===n.length)}(t)}function E(n,l,k,B){l.flowing&&0===l.length&&!l.sync?(n.emit("data",k),n.read(0)):(l.length+=l.objectMode?1:k.length,B?l.buffer.unshift(k):l.buffer.push(k),l.needReadable&&re(n)),se(n,l)}Object.defineProperty(M.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(n){this._readableState&&(this._readableState.destroyed=n)}}),M.prototype.destroy=P.destroy,M.prototype._undestroy=P.undestroy,M.prototype._destroy=function(n,l){this.push(null),l(n)},M.prototype.push=function(n,l){var B,k=this._readableState;return k.objectMode?B=!0:"string"==typeof n&&((l=l||k.defaultEncoding)!==k.encoding&&(n=b.from(n,l),l=""),B=!0),C(this,n,l,!1,B)},M.prototype.unshift=function(n){return C(this,n,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(n){return A||(A=I("string_decoder/").StringDecoder),this._readableState.decoder=new A(n),this._readableState.encoding=n,this};var K=8388608;function J(n,l){return n<=0||0===l.length&&l.ended?0:l.objectMode?1:n!=n?l.flowing&&l.length?l.buffer.head.data.length:l.length:(n>l.highWaterMark&&(l.highWaterMark=function G(n){return n>=K?n=K:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=l.length?n:l.ended?l.length:(l.needReadable=!0,0))}function re(n){var l=n._readableState;l.needReadable=!1,l.emittedReadable||(y("emitReadable",l.flowing),l.emittedReadable=!0,l.sync?m.nextTick(oe,n):oe(n))}function oe(n){y("emit readable"),n.emit("readable"),F(n)}function se(n,l){l.readingMore||(l.readingMore=!0,m.nextTick(ne,n,l))}function ne(n,l){for(var k=l.length;!l.reading&&!l.flowing&&!l.ended&&l.length<l.highWaterMark&&(y("maybeReadMore read 0"),n.read(0),k!==l.length);)k=l.length;l.readingMore=!1}function ee(n){y("readable nexttick read 0"),n.read(0)}function O(n,l){l.reading||(y("resume read 0"),n.read(0)),l.resumeScheduled=!1,l.awaitDrain=0,n.emit("resume"),F(n),l.flowing&&!l.reading&&n.read(0)}function F(n){var l=n._readableState;for(y("flow",l.flowing);l.flowing&&null!==n.read(););}function Z(n,l){return 0===l.length?null:(l.objectMode?k=l.buffer.shift():!n||n>=l.length?(k=l.decoder?l.buffer.join(""):1===l.buffer.length?l.buffer.head.data:l.buffer.concat(l.length),l.buffer.clear()):k=function q(n,l,k){var B;return n<l.head.data.length?(B=l.head.data.slice(0,n),l.head.data=l.head.data.slice(n)):B=n===l.head.data.length?l.shift():k?function N(n,l){var k=l.head,B=1,g=k.data;for(n-=g.length;k=k.next;){var t=k.data,e=n>t.length?t.length:n;if(g+=e===t.length?t:t.slice(0,n),0==(n-=e)){e===t.length?(++B,l.head=k.next?k.next:l.tail=null):(l.head=k,k.data=t.slice(e));break}++B}return l.length-=B,g}(n,l):function S(n,l){var k=b.allocUnsafe(n),B=l.head,g=1;for(B.data.copy(k),n-=B.data.length;B=B.next;){var t=B.data,e=n>t.length?t.length:n;if(t.copy(k,k.length-n,0,e),0==(n-=e)){e===t.length?(++g,l.head=B.next?B.next:l.tail=null):(l.head=B,B.data=t.slice(e));break}++g}return l.length-=g,k}(n,l),B}(n,l.buffer,l.decoder),k);var k}function D(n){var l=n._readableState;if(l.length>0)throw new Error('"endReadable()" called on non-empty stream');l.endEmitted||(l.ended=!0,m.nextTick(z,l,n))}function z(n,l){!n.endEmitted&&0===n.length&&(n.endEmitted=!0,l.readable=!1,l.emit("end"))}function R(n,l){for(var k=0,B=n.length;k<B;k++)if(n[k]===l)return k;return-1}M.prototype.read=function(n){y("read",n),n=parseInt(n,10);var l=this._readableState,k=n;if(0!==n&&(l.emittedReadable=!1),0===n&&l.needReadable&&(l.length>=l.highWaterMark||l.ended))return y("read: emitReadable",l.length,l.ended),0===l.length&&l.ended?D(this):re(this),null;if(0===(n=J(n,l))&&l.ended)return 0===l.length&&D(this),null;var g,B=l.needReadable;return y("need readable",B),(0===l.length||l.length-n<l.highWaterMark)&&y("length less than watermark",B=!0),l.ended||l.reading?y("reading or ended",B=!1):B&&(y("do read"),l.reading=!0,l.sync=!0,0===l.length&&(l.needReadable=!0),this._read(l.highWaterMark),l.sync=!1,l.reading||(n=J(k,l))),null===(g=n>0?Z(n,l):null)?(l.needReadable=!0,n=0):l.length-=n,0===l.length&&(l.ended||(l.needReadable=!0),k!==n&&l.ended&&D(this)),null!==g&&this.emit("data",g),g},M.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},M.prototype.pipe=function(n,l){var k=this,B=this._readableState;switch(B.pipesCount){case 0:B.pipes=n;break;case 1:B.pipes=[B.pipes,n];break;default:B.pipes.push(n)}B.pipesCount+=1,y("pipe count=%d opts=%j",B.pipesCount,l);var t=l&&!1===l.end||n===p.stdout||n===p.stderr?ce:r;function e(pe,ge){y("onunpipe"),pe===k&&ge&&!1===ge.hasUnpiped&&(ge.hasUnpiped=!0,function Y(){y("cleanup"),n.removeListener("close",he),n.removeListener("finish",de),n.removeListener("drain",v),n.removeListener("error",le),n.removeListener("unpipe",e),k.removeListener("end",r),k.removeListener("end",ce),k.removeListener("data",ae),L=!0,B.awaitDrain&&(!n._writableState||n._writableState.needDrain)&&v()}())}function r(){y("onend"),n.end()}B.endEmitted?m.nextTick(t):k.once("end",t),n.on("unpipe",e);var v=function ie(n){return function(){var l=n._readableState;y("pipeOnDrain",l.awaitDrain),l.awaitDrain&&l.awaitDrain--,0===l.awaitDrain&&o(n,"data")&&(l.flowing=!0,F(n))}}(k);n.on("drain",v);var L=!1;var te=!1;function ae(pe){y("ondata"),te=!1,!1===n.write(pe)&&!te&&((1===B.pipesCount&&B.pipes===n||B.pipesCount>1&&-1!==R(B.pipes,n))&&!L&&(y("false write response, pause",k._readableState.awaitDrain),k._readableState.awaitDrain++,te=!0),k.pause())}function le(pe){y("onerror",pe),ce(),n.removeListener("error",le),0===o(n,"error")&&n.emit("error",pe)}function he(){n.removeListener("finish",de),ce()}function de(){y("onfinish"),n.removeListener("close",he),ce()}function ce(){y("unpipe"),k.unpipe(n)}return k.on("data",ae),function $(n,l,k){if("function"==typeof n.prependListener)return n.prependListener(l,k);n._events&&n._events[l]?u(n._events[l])?n._events[l].unshift(k):n._events[l]=[k,n._events[l]]:n.on(l,k)}(n,"error",le),n.once("close",he),n.once("finish",de),n.emit("pipe",k),B.flowing||(y("pipe resume"),k.resume()),n},M.prototype.unpipe=function(n){var l=this._readableState,k={hasUnpiped:!1};if(0===l.pipesCount)return this;if(1===l.pipesCount)return n&&n!==l.pipes||(n||(n=l.pipes),l.pipes=null,l.pipesCount=0,l.flowing=!1,n&&n.emit("unpipe",this,k)),this;if(!n){var B=l.pipes,g=l.pipesCount;l.pipes=null,l.pipesCount=0,l.flowing=!1;for(var t=0;t<g;t++)B[t].emit("unpipe",this,k);return this}var e=R(l.pipes,n);return-1===e||(l.pipes.splice(e,1),l.pipesCount-=1,1===l.pipesCount&&(l.pipes=l.pipes[0]),n.emit("unpipe",this,k)),this},M.prototype.addListener=M.prototype.on=function(n,l){var k=s.prototype.on.call(this,n,l);if("data"===n)!1!==this._readableState.flowing&&this.resume();else if("readable"===n){var B=this._readableState;!B.endEmitted&&!B.readableListening&&(B.readableListening=B.needReadable=!0,B.emittedReadable=!1,B.reading?B.length&&re(this):m.nextTick(ee,this))}return k},M.prototype.resume=function(){var n=this._readableState;return n.flowing||(y("resume"),n.flowing=!0,function X(n,l){l.resumeScheduled||(l.resumeScheduled=!0,m.nextTick(O,n,l))}(this,n)),this},M.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},M.prototype.wrap=function(n){var l=this,k=this._readableState,B=!1;for(var g in n.on("end",function(){if(y("wrapped end"),k.decoder&&!k.ended){var e=k.decoder.end();e&&e.length&&l.push(e)}l.push(null)}),n.on("data",function(e){y("wrapped data"),k.decoder&&(e=k.decoder.write(e)),k.objectMode&&null==e||!(k.objectMode||e&&e.length)||l.push(e)||(B=!0,n.pause())}),n)void 0===this[g]&&"function"==typeof n[g]&&(this[g]=function(e){return function(){return n[e].apply(n,arguments)}}(g));for(var t=0;t<W.length;t++)n.on(W[t],this.emit.bind(this,W[t]));return this._read=function(e){y("wrapped _read",e),B&&(B=!1,n.resume())},this},Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),M._fromList=Z}).call(this)}).call(this,I("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":22,"./internal/streams/BufferList":27,"./internal/streams/destroy":28,"./internal/streams/stream":29,_process:69,"core-util-is":18,events:4,inherits:34,isarray:35,"process-nextick-args":45,"safe-buffer":31,"string_decoder/":32,util:2}],25:[function(I,H,U){"use strict";H.exports=u;var p=I("./_stream_duplex"),d=Object.create(I("core-util-is"));function m(o,s){var b=this._transformState;b.transforming=!1;var T=b.writecb;if(!T)return this.emit("error",new Error("write callback called multiple times"));b.writechunk=null,b.writecb=null,null!=s&&this.push(s),T(o);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function u(o){if(!(this instanceof u))return new u(o);p.call(this,o),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&("function"==typeof o.transform&&(this._transform=o.transform),"function"==typeof o.flush&&(this._flush=o.flush)),this.on("prefinish",i)}function i(){var o=this;"function"==typeof this._flush?this._flush(function(s,b){a(o,s,b)}):a(this,null,null)}function a(o,s,b){if(s)return o.emit("error",s);if(null!=b&&o.push(b),o._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(o._transformState.transforming)throw new Error("Calling transform done when still transforming");return o.push(null)}d.inherits=I("inherits"),d.inherits(u,p),u.prototype.push=function(o,s){return this._transformState.needTransform=!1,p.prototype.push.call(this,o,s)},u.prototype._transform=function(o,s,b){throw new Error("_transform() is not implemented")},u.prototype._write=function(o,s,b){var T=this._transformState;if(T.writecb=b,T.writechunk=o,T.writeencoding=s,!T.transforming){var f=this._readableState;(T.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},u.prototype._read=function(o){var s=this._transformState;null!==s.writechunk&&s.writecb&&!s.transforming?(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform)):s.needTransform=!0},u.prototype._destroy=function(o,s){var b=this;p.prototype._destroy.call(this,o,function(T){s(T),b.emit("close")})}},{"./_stream_duplex":22,"core-util-is":18,inherits:34}],26:[function(I,H,U){(function(p,d,m){(function(){"use strict";var u=I("process-nextick-args");function a(O){var F=this;this.next=null,this.entry=null,this.finish=function(){!function X(O,F,Z){var q=O.entry;for(O.entry=null;q;){var N=q.callback;F.pendingcb--,N(Z),q=q.next}F.corkedRequestsFree?F.corkedRequestsFree.next=O:F.corkedRequestsFree=O}(F,O)}}H.exports=$;var s,o=!p.browser&&["v0.10","v0.9."].indexOf(p.version.slice(0,5))>-1?m:u.nextTick;$.WritableState=A;var b=Object.create(I("core-util-is"));b.inherits=I("inherits");var T={deprecate:I("util-deprecate")},f=I("./internal/streams/stream"),_=I("safe-buffer").Buffer,h=d.Uint8Array||function(){};var W,x=I("./internal/streams/destroy");function P(){}function A(O,F){s=s||I("./_stream_duplex");var Z=F instanceof s;this.objectMode=!!(O=O||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!O.writableObjectMode);var q=O.highWaterMark,N=O.writableHighWaterMark;this.highWaterMark=q||0===q?q:Z&&(N||0===N)?N:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===O.decodeStrings),this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(z){!function G(O,F){var Z=O._writableState,q=Z.sync,N=Z.writecb;if(function K(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}(Z),F)!function j(O,F,Z,q,N){--F.pendingcb,Z?(u.nextTick(N,q),u.nextTick(ie,O,F),O._writableState.errorEmitted=!0,O.emit("error",q)):(N(q),O._writableState.errorEmitted=!0,O.emit("error",q),ie(O,F))}(O,Z,q,F,N);else{var S=oe(Z);!S&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&re(O,Z),q?o(J,O,Z,S,N):J(O,Z,S,N)}}(F,z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function $(O){if(s=s||I("./_stream_duplex"),!(W.call($,this)||this instanceof s))return new $(O);this._writableState=new A(O,this),this.writable=!0,O&&("function"==typeof O.write&&(this._write=O.write),"function"==typeof O.writev&&(this._writev=O.writev),"function"==typeof O.destroy&&(this._destroy=O.destroy),"function"==typeof O.final&&(this._final=O.final)),f.call(this)}function E(O,F,Z,q,N,S){if(!Z){var D=function C(O,F,Z){return!O.objectMode&&!1!==O.decodeStrings&&"string"==typeof F&&(F=_.from(F,Z)),F}(F,q,N);q!==D&&(Z=!0,N="buffer",q=D)}var z=F.objectMode?1:q.length;F.length+=z;var R=F.length<F.highWaterMark;if(R||(F.needDrain=!0),F.writing||F.corked){var n=F.lastBufferedRequest;F.lastBufferedRequest={chunk:q,encoding:N,isBuf:Z,callback:S,next:null},n?n.next=F.lastBufferedRequest:F.bufferedRequest=F.lastBufferedRequest,F.bufferedRequestCount+=1}else c(O,F,!1,z,q,N,S);return R}function c(O,F,Z,q,N,S,D){F.writelen=q,F.writecb=D,F.writing=!0,F.sync=!0,Z?O._writev(N,F.onwrite):O._write(N,S,F.onwrite),F.sync=!1}function J(O,F,Z,q){Z||function Q(O,F){0===F.length&&F.needDrain&&(F.needDrain=!1,O.emit("drain"))}(O,F),F.pendingcb--,q(),ie(O,F)}function re(O,F){F.bufferProcessing=!0;var Z=F.bufferedRequest;if(O._writev&&Z&&Z.next){var N=new Array(F.bufferedRequestCount),S=F.corkedRequestsFree;S.entry=Z;for(var D=0,z=!0;Z;)N[D]=Z,Z.isBuf||(z=!1),Z=Z.next,D+=1;N.allBuffers=z,c(O,F,!0,F.length,N,"",S.finish),F.pendingcb++,F.lastBufferedRequest=null,S.next?(F.corkedRequestsFree=S.next,S.next=null):F.corkedRequestsFree=new a(F),F.bufferedRequestCount=0}else{for(;Z;){var R=Z.chunk;if(c(O,F,!1,F.objectMode?1:R.length,R,Z.encoding,Z.callback),Z=Z.next,F.bufferedRequestCount--,F.writing)break}null===Z&&(F.lastBufferedRequest=null)}F.bufferedRequest=Z,F.bufferProcessing=!1}function oe(O){return O.ending&&0===O.length&&null===O.bufferedRequest&&!O.finished&&!O.writing}function se(O,F){O._final(function(Z){F.pendingcb--,Z&&O.emit("error",Z),F.prefinished=!0,O.emit("prefinish"),ie(O,F)})}function ie(O,F){var Z=oe(F);return Z&&(function ne(O,F){!F.prefinished&&!F.finalCalled&&("function"==typeof O._final?(F.pendingcb++,F.finalCalled=!0,u.nextTick(se,O,F)):(F.prefinished=!0,O.emit("prefinish")))}(O,F),0===F.pendingcb&&(F.finished=!0,O.emit("finish"))),Z}b.inherits($,f),A.prototype.getBuffer=function(){for(var F=this.bufferedRequest,Z=[];F;)Z.push(F),F=F.next;return Z},function(){try{Object.defineProperty(A.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty($,Symbol.hasInstance,{value:function(O){return!!W.call(this,O)||this===$&&O&&O._writableState instanceof A}})):W=function(O){return O instanceof this},$.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},$.prototype.write=function(O,F,Z){var q=this._writableState,N=!1,S=!q.objectMode&&function y(O){return _.isBuffer(O)||O instanceof h}(O);return S&&!_.isBuffer(O)&&(O=function w(O){return _.from(O)}(O)),"function"==typeof F&&(Z=F,F=null),S?F="buffer":F||(F=q.defaultEncoding),"function"!=typeof Z&&(Z=P),q.ended?function V(O,F){var Z=new Error("write after end");O.emit("error",Z),u.nextTick(F,Z)}(this,Z):(S||function M(O,F,Z,q){var N=!0,S=!1;return null===Z?S=new TypeError("May not write null values to stream"):"string"!=typeof Z&&void 0!==Z&&!F.objectMode&&(S=new TypeError("Invalid non-string/buffer chunk")),S&&(O.emit("error",S),u.nextTick(q,S),N=!1),N}(this,q,O,Z))&&(q.pendingcb++,N=E(this,q,S,O,F,Z)),N},$.prototype.cork=function(){this._writableState.corked++},$.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.finished&&!O.bufferProcessing&&O.bufferedRequest&&re(this,O))},$.prototype.setDefaultEncoding=function(F){if("string"==typeof F&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+F);return this._writableState.defaultEncoding=F,this},Object.defineProperty($.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),$.prototype._write=function(O,F,Z){Z(new Error("_write() is not implemented"))},$.prototype._writev=null,$.prototype.end=function(O,F,Z){var q=this._writableState;"function"==typeof O?(Z=O,O=null,F=null):"function"==typeof F&&(Z=F,F=null),null!=O&&this.write(O,F),q.corked&&(q.corked=1,this.uncork()),!q.ending&&!q.finished&&function ee(O,F,Z){F.ending=!0,ie(O,F),Z&&(F.finished?u.nextTick(Z):O.once("finish",Z)),F.ended=!0,O.writable=!1}(this,q,Z)},Object.defineProperty($.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),$.prototype.destroy=x.destroy,$.prototype._undestroy=x.undestroy,$.prototype._destroy=function(O,F){this.end(),F(O)}}).call(this)}).call(this,I("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},I("timers").setImmediate)},{"./_stream_duplex":22,"./internal/streams/destroy":28,"./internal/streams/stream":29,_process:69,"core-util-is":18,inherits:34,"process-nextick-args":45,"safe-buffer":31,timers:74,"util-deprecate":65}],27:[function(I,H,U){"use strict";var d=I("safe-buffer").Buffer,m=I("util");function u(i,a,o){i.copy(a,o)}H.exports=function(){function i(){(function p(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")})(this,i),this.head=null,this.tail=null,this.length=0}return i.prototype.push=function(o){var s={data:o,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length},i.prototype.unshift=function(o){var s={data:o,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length},i.prototype.shift=function(){if(0!==this.length){var o=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,o}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(o){if(0===this.length)return"";for(var s=this.head,b=""+s.data;s=s.next;)b+=o+s.data;return b},i.prototype.concat=function(o){if(0===this.length)return d.alloc(0);if(1===this.length)return this.head.data;for(var s=d.allocUnsafe(o>>>0),b=this.head,T=0;b;)u(b.data,s,T),T+=b.data.length,b=b.next;return s},i}(),m&&m.inspect&&m.inspect.custom&&(H.exports.prototype[m.inspect.custom]=function(){var i=m.inspect({length:this.length});return this.constructor.name+" "+i})},{"safe-buffer":31,util:2}],28:[function(I,H,U){"use strict";var p=I("process-nextick-args");function u(i,a){i.emit("error",a)}H.exports={destroy:function d(i,a){var o=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(a?a(i):i&&(!this._writableState||!this._writableState.errorEmitted)&&p.nextTick(u,this,i),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(T){!a&&T?(p.nextTick(u,o,T),o._writableState&&(o._writableState.errorEmitted=!0)):a&&a(T)}),this)},undestroy:function m(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":45}],29:[function(I,H,U){H.exports=I("events").EventEmitter},{events:4}],30:[function(I,H,U){(U=H.exports=I("./lib/_stream_readable.js")).Stream=U,U.Readable=U,U.Writable=I("./lib/_stream_writable.js"),U.Duplex=I("./lib/_stream_duplex.js"),U.Transform=I("./lib/_stream_transform.js"),U.PassThrough=I("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":22,"./lib/_stream_passthrough.js":23,"./lib/_stream_readable.js":24,"./lib/_stream_transform.js":25,"./lib/_stream_writable.js":26}],31:[function(I,H,U){var p=I("buffer"),d=p.Buffer;function m(i,a){for(var o in i)a[o]=i[o]}function u(i,a,o){return d(i,a,o)}d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?H.exports=p:(m(p,U),U.Buffer=u),m(d,u),u.from=function(i,a,o){if("number"==typeof i)throw new TypeError("Argument must not be a number");return d(i,a,o)},u.alloc=function(i,a,o){if("number"!=typeof i)throw new TypeError("Argument must be a number");var s=d(i);return void 0!==a?"string"==typeof o?s.fill(a,o):s.fill(a):s.fill(0),s},u.allocUnsafe=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return d(i)},u.allocUnsafeSlow=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return p.SlowBuffer(i)}},{buffer:3}],32:[function(I,H,U){"use strict";var p=I("safe-buffer").Buffer,d=p.isEncoding||function(A){switch((A=""+A)&&A.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(A){var W;switch(this.encoding=function u(A){var W=function m(A){if(!A)return"utf8";for(var W;;)switch(A){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return A;default:if(W)return;A=(""+A).toLowerCase(),W=!0}}(A);if("string"!=typeof W&&(p.isEncoding===d||!d(A)))throw new Error("Unknown encoding: "+A);return W||A}(A),this.encoding){case"utf16le":this.text=_,this.end=h,W=4;break;case"utf8":this.fillLast=b,W=4;break;case"base64":this.text=w,this.end=y,W=3;break;default:return this.write=x,void(this.end=P)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(W)}function a(A){return A<=127?0:A>>5==6?2:A>>4==14?3:A>>3==30?4:A>>6==2?-1:-2}function b(A){var W=this.lastTotal-this.lastNeed,$=function s(A,W,$){if(128!=(192&W[0]))return A.lastNeed=0,"\ufffd";if(A.lastNeed>1&&W.length>1){if(128!=(192&W[1]))return A.lastNeed=1,"\ufffd";if(A.lastNeed>2&&W.length>2&&128!=(192&W[2]))return A.lastNeed=2,"\ufffd"}}(this,A);return void 0!==$?$:this.lastNeed<=A.length?(A.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(A.copy(this.lastChar,W,0,A.length),void(this.lastNeed-=A.length))}function _(A,W){if((A.length-W)%2==0){var $=A.toString("utf16le",W);if($){var V=$.charCodeAt($.length-1);if(V>=55296&&V<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1],$.slice(0,-1)}return $}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=A[A.length-1],A.toString("utf16le",W,A.length-1)}function h(A){var W=A&&A.length?this.write(A):"";return this.lastNeed?W+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):W}function w(A,W){var $=(A.length-W)%3;return 0===$?A.toString("base64",W):(this.lastNeed=3-$,this.lastTotal=3,1===$?this.lastChar[0]=A[A.length-1]:(this.lastChar[0]=A[A.length-2],this.lastChar[1]=A[A.length-1]),A.toString("base64",W,A.length-$))}function y(A){var W=A&&A.length?this.write(A):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function x(A){return A.toString(this.encoding)}function P(A){return A&&A.length?this.write(A):""}U.StringDecoder=i,i.prototype.write=function(A){if(0===A.length)return"";var W,$;if(this.lastNeed){if(void 0===(W=this.fillLast(A)))return"";$=this.lastNeed,this.lastNeed=0}else $=0;return $<A.length?W?W+this.text(A,$):this.text(A,$):W||""},i.prototype.end=function f(A){var W=A&&A.length?this.write(A):"";return this.lastNeed?W+"\ufffd":W},i.prototype.text=function T(A,W){var $=function o(A,W,$){var V=W.length-1;if(V<$)return 0;var M=a(W[V]);return M>=0?(M>0&&(A.lastNeed=M-1),M):--V<$||-2===M?0:(M=a(W[V]))>=0?(M>0&&(A.lastNeed=M-2),M):--V<$||-2===M?0:(M=a(W[V]))>=0?(M>0&&(2===M?M=0:A.lastNeed=M-3),M):0}(this,A,W);if(!this.lastNeed)return A.toString("utf8",W);this.lastTotal=$;var V=A.length-($-this.lastNeed);return A.copy(this.lastChar,0,V),A.toString("utf8",W,V)},i.prototype.fillLast=function(A){if(this.lastNeed<=A.length)return A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);A.copy(this.lastChar,this.lastTotal-this.lastNeed,0,A.length),this.lastNeed-=A.length}},{"safe-buffer":31}],33:[function(I,H,U){(function(p){(function(){var d=I("once"),m=function(){},a=function(o,s,b){if("function"==typeof s)return a(o,null,s);s||(s={}),b=d(b||m);var T=o._writableState,f=o._readableState,_=s.readable||!1!==s.readable&&o.readable,h=s.writable||!1!==s.writable&&o.writable,w=!1,y=function(){o.writable||x()},x=function(){h=!1,_||b.call(o)},P=function(){_=!1,h||b.call(o)},A=function(C){b.call(o,C?new Error("exited with error code: "+C):null)},W=function(C){b.call(o,C)},$=function(){p.nextTick(V)},V=function(){if(!w){if(_&&(!f||!f.ended||f.destroyed))return b.call(o,new Error("premature close"));if(h&&(!T||!T.ended||T.destroyed))return b.call(o,new Error("premature close"))}},M=function(){o.req.on("finish",x)};return function(o){return o.setHeader&&"function"==typeof o.abort}(o)?(o.on("complete",x),o.on("abort",$),o.req?M():o.on("request",M)):h&&!T&&(o.on("end",y),o.on("close",y)),function(o){return o.stdio&&Array.isArray(o.stdio)&&3===o.stdio.length}(o)&&o.on("exit",A),o.on("end",P),o.on("finish",x),!1!==s.error&&o.on("error",W),o.on("close",$),function(){w=!0,o.removeListener("complete",x),o.removeListener("abort",$),o.removeListener("request",M),o.req&&o.req.removeListener("finish",x),o.removeListener("end",y),o.removeListener("close",y),o.removeListener("finish",x),o.removeListener("exit",A),o.removeListener("end",P),o.removeListener("error",W),o.removeListener("close",$)}};H.exports=a}).call(this)}).call(this,I("_process"))},{_process:69,once:44}],34:[function(I,H,U){H.exports="function"==typeof Object.create?function(d,m){m&&(d.super_=m,d.prototype=Object.create(m.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}))}:function(d,m){if(m){d.super_=m;var u=function(){};u.prototype=m.prototype,d.prototype=new u,d.prototype.constructor=d}}},{}],35:[function(I,H,U){var p={}.toString;H.exports=Array.isArray||function(d){return"[object Array]"==p.call(d)}},{}],36:[function(I,H,U){(function(p){(function(){const d=H.exports;d.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},d.codes={};for(const u in d.types)d.codes[d.types[u]]=u;d.CMD_SHIFT=4,d.CMD_MASK=240,d.DUP_MASK=8,d.QOS_MASK=3,d.QOS_SHIFT=1,d.RETAIN_MASK=1,d.VARBYTEINT_MASK=127,d.VARBYTEINT_FIN_MASK=128,d.VARBYTEINT_MAX=268435455,d.SESSIONPRESENT_MASK=1,d.SESSIONPRESENT_HEADER=p.from([d.SESSIONPRESENT_MASK]),d.CONNACK_HEADER=p.from([d.codes.connack<<d.CMD_SHIFT]),d.USERNAME_MASK=128,d.PASSWORD_MASK=64,d.WILL_RETAIN_MASK=32,d.WILL_QOS_MASK=24,d.WILL_QOS_SHIFT=3,d.WILL_FLAG_MASK=4,d.CLEAN_SESSION_MASK=2,d.CONNECT_HEADER=p.from([d.codes.connect<<d.CMD_SHIFT]),d.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},d.propertiesCodes={};for(const u in d.properties)d.propertiesCodes[d.properties[u]]=u;function m(u){return[0,1,2].map(i=>[0,1].map(a=>[0,1].map(o=>{const s=p.alloc(1);return s.writeUInt8(d.codes[u]<<d.CMD_SHIFT|(a?d.DUP_MASK:0)|i<<d.QOS_SHIFT|o,0,!0),s})))}d.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},d.PUBLISH_HEADER=m("publish"),d.SUBSCRIBE_HEADER=m("subscribe"),d.SUBSCRIBE_OPTIONS_QOS_MASK=3,d.SUBSCRIBE_OPTIONS_NL_MASK=1,d.SUBSCRIBE_OPTIONS_NL_SHIFT=2,d.SUBSCRIBE_OPTIONS_RAP_MASK=1,d.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,d.SUBSCRIBE_OPTIONS_RH_MASK=3,d.SUBSCRIBE_OPTIONS_RH_SHIFT=4,d.SUBSCRIBE_OPTIONS_RH=[0,16,32],d.SUBSCRIBE_OPTIONS_NL=4,d.SUBSCRIBE_OPTIONS_RAP=8,d.SUBSCRIBE_OPTIONS_QOS=[0,1,2],d.UNSUBSCRIBE_HEADER=m("unsubscribe"),d.ACKS={unsuback:m("unsuback"),puback:m("puback"),pubcomp:m("pubcomp"),pubrel:m("pubrel"),pubrec:m("pubrec")},d.SUBACK_HEADER=p.from([d.codes.suback<<d.CMD_SHIFT]),d.VERSION3=p.from([3]),d.VERSION4=p.from([4]),d.VERSION5=p.from([5]),d.VERSION131=p.from([131]),d.VERSION132=p.from([132]),d.QOS=[0,1,2].map(u=>p.from([u])),d.EMPTY={pingreq:p.from([d.codes.pingreq<<4,0]),pingresp:p.from([d.codes.pingresp<<4,0]),disconnect:p.from([d.codes.disconnect<<4,0])}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:3}],37:[function(I,H,U){(function(p){(function(){const d=I("./writeToStream"),m=I("events");class i extends m{constructor(){super(),this._array=new Array(20),this._i=0}write(o){return this._array[this._i++]=o,!0}concat(){let o=0;const s=new Array(this._array.length),b=this._array;let f,T=0;for(f=0;f<b.length&&void 0!==b[f];f++)s[f]="string"!=typeof b[f]?b[f].length:p.byteLength(b[f]),o+=s[f];const _=p.allocUnsafe(o);for(f=0;f<b.length&&void 0!==b[f];f++)"string"!=typeof b[f]?(b[f].copy(_,T),T+=s[f]):(_.write(b[f],T),T+=s[f]);return _}}H.exports=function u(a,o){const s=new i;return d(a,s,o),s.concat()}}).call(this)}).call(this,I("buffer").Buffer)},{"./writeToStream":42,buffer:3,events:4}],38:[function(I,H,U){U.parser=I("./parser").parser,U.generate=I("./generate"),U.writeToStream=I("./writeToStream")},{"./generate":37,"./parser":41,"./writeToStream":42}],39:[function(I,H,U){(function(p){(function(){const m={},u=p.isBuffer(p.from([1,2]).subarray(0,1));function i(b){const T=p.allocUnsafe(2);return T.writeUInt8(b>>8,0),T.writeUInt8(255&b,1),T}H.exports={cache:m,generateCache:function a(){for(let b=0;b<65536;b++)m[b]=i(b)},generateNumber:i,genBufVariableByteInt:function o(b){let f=0,_=0;const h=p.allocUnsafe(4);do{f=b%128|0,(b=b/128|0)>0&&(f|=128),h.writeUInt8(f,_++)}while(b>0&&_<4);return b>0&&(_=0),u?h.subarray(0,_):h.slice(0,_)},generate4ByteBuffer:function s(b){const T=p.allocUnsafe(4);return T.writeUInt32BE(b,0),T}}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:3}],40:[function(I,H,U){H.exports=class p{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],41:[function(I,H,U){const p=I("bl"),d=I("events"),m=I("./packet"),u=I("./constants"),i=I("debug")("mqtt-packet:parser");class a extends d{constructor(){super(),this.parser=this.constructor.parser}static parser(s){return this instanceof a?(this.settings=s||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new a).parser(s)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new m,this.error=null,this._list=p(),this._stateCounter=0}parse(s){for(this.error&&this._resetState(),this._list.append(s),i("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const s=this._list.readUInt8(0);return this.packet.cmd=u.types[s>>u.CMD_SHIFT],this.packet.retain=!!(s&u.RETAIN_MASK),this.packet.qos=s>>u.QOS_SHIFT&u.QOS_MASK,this.packet.dup=!!(s&u.DUP_MASK),i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const s=this._parseVarByteNum(!0);return s&&(this.packet.length=s.value,this._list.consume(s.bytes)),i("_parseLength %d",s.value),!!s}_parsePayload(){i("_parsePayload: payload %O",this._list);let s=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}s=!0}return i("_parsePayload complete result: %s",s),s}_parseConnect(){let s,b,T,f;i("_parseConnect");const _={},h=this.packet,w=this._parseString();if(null===w)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==w&&"MQIsdp"!==w)return this._emitError(new Error("Invalid protocolId"));if(h.protocolId=w,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(h.protocolVersion=this._list.readUInt8(this._pos),h.protocolVersion>=128&&(h.bridgeMode=!0,h.protocolVersion=h.protocolVersion-128),3!==h.protocolVersion&&4!==h.protocolVersion&&5!==h.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(_.username=this._list.readUInt8(this._pos)&u.USERNAME_MASK,_.password=this._list.readUInt8(this._pos)&u.PASSWORD_MASK,_.will=this._list.readUInt8(this._pos)&u.WILL_FLAG_MASK,_.will&&(h.will={},h.will.retain=!!(this._list.readUInt8(this._pos)&u.WILL_RETAIN_MASK),h.will.qos=(this._list.readUInt8(this._pos)&u.WILL_QOS_MASK)>>u.WILL_QOS_SHIFT),h.clean=!!(this._list.readUInt8(this._pos)&u.CLEAN_SESSION_MASK),this._pos++,h.keepalive=this._parseNum(),-1===h.keepalive)return this._emitError(new Error("Packet too short"));if(5===h.protocolVersion){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(h.properties=x)}const y=this._parseString();if(null===y)return this._emitError(new Error("Packet too short"));if(h.clientId=y,i("_parseConnect: packet.clientId: %s",h.clientId),_.will){if(5===h.protocolVersion){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(h.will.properties=x)}if(s=this._parseString(),null===s)return this._emitError(new Error("Cannot parse will topic"));if(h.will.topic=s,i("_parseConnect: packet.will.topic: %s",h.will.topic),b=this._parseBuffer(),null===b)return this._emitError(new Error("Cannot parse will payload"));h.will.payload=b,i("_parseConnect: packet.will.paylaod: %s",h.will.payload)}if(_.username){if(f=this._parseString(),null===f)return this._emitError(new Error("Cannot parse username"));h.username=f,i("_parseConnect: packet.username: %s",h.username)}if(_.password){if(T=this._parseBuffer(),null===T)return this._emitError(new Error("Cannot parse password"));h.password=T}return this.settings=h,i("_parseConnect: complete"),h}_parseConnack(){i("_parseConnack");const s=this.packet;if(this._list.length<1)return null;if(s.sessionPresent=!!(this._list.readUInt8(this._pos++)&u.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)s.reasonCode=this._list.length>=2?this._list.readUInt8(this._pos++):0;else{if(this._list.length<2)return null;s.returnCode=this._list.readUInt8(this._pos++)}if(-1===s.returnCode||-1===s.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(s.properties=b)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");const s=this.packet;if(s.topic=this._parseString(),null===s.topic)return this._emitError(new Error("Cannot parse topic"));if(!(s.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(s.properties=b)}s.payload=this._list.slice(this._pos,s.length),i("_parsePublish: payload from buffer list: %o",s.payload)}}_parseSubscribe(){i("_parseSubscribe");const s=this.packet;let b,T,f,_,h,w,y;if(1!==s.qos)return this._emitError(new Error("Wrong subscribe header"));if(s.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(s.properties=x)}for(;this._pos<s.length;){if(b=this._parseString(),null===b)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));T=this._parseByte(),f=T&u.SUBSCRIBE_OPTIONS_QOS_MASK,w=!!(T>>u.SUBSCRIBE_OPTIONS_NL_SHIFT&u.SUBSCRIBE_OPTIONS_NL_MASK),h=!!(T>>u.SUBSCRIBE_OPTIONS_RAP_SHIFT&u.SUBSCRIBE_OPTIONS_RAP_MASK),_=T>>u.SUBSCRIBE_OPTIONS_RH_SHIFT&u.SUBSCRIBE_OPTIONS_RH_MASK,y={topic:b,qos:f},5===this.settings.protocolVersion?(y.nl=w,y.rap=h,y.rh=_):this.settings.bridgeMode&&(y.rh=0,y.rap=!0,y.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",y),s.subscriptions.push(y)}}}_parseSuback(){i("_parseSuback");const s=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(s.properties=b)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){i("_parseUnsubscribe");const s=this.packet;if(s.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(s.properties=b)}for(;this._pos<s.length;){const b=this._parseString();if(null===b)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",b),s.unsubscriptions.push(b)}}}_parseUnsuback(){i("_parseUnsuback");const s=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const b=this._parseProperties();for(Object.getOwnPropertyNames(b).length&&(s.properties=b),s.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const s=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(s.length>2?(s.reasonCode=this._parseByte(),i("_parseConfirmation: packet.reasonCode `%d`",s.reasonCode)):s.reasonCode=0,s.length>3)){const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(s.properties=b)}return!0}_parseDisconnect(){const s=this.packet;if(i("_parseDisconnect"),5===this.settings.protocolVersion){s.reasonCode=this._list.length>0?this._parseByte():0;const b=this._parseProperties();Object.getOwnPropertyNames(b).length&&(s.properties=b)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");const s=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));s.reasonCode=this._parseByte();const b=this._parseProperties();return Object.getOwnPropertyNames(b).length&&(s.properties=b),i("_parseAuth: result: true"),!0}_parseMessageId(){const s=this.packet;return s.messageId=this._parseNum(),null===s.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",s.messageId),!0)}_parseString(s){const b=this._parseNum(),T=b+this._pos;if(-1===b||T>this._list.length||T>this.packet.length)return null;const f=this._list.toString("utf8",this._pos,T);return this._pos+=b,i("_parseString: result: %s",f),f}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const s=this._parseNum(),b=s+this._pos;if(-1===s||b>this._list.length||b>this.packet.length)return null;const T=this._list.slice(this._pos,b);return this._pos+=s,i("_parseBuffer: result: %o",T),T}_parseNum(){if(this._list.length-this._pos<2)return-1;const s=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",s),s}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const s=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",s),s}_parseVarByteNum(s){i("_parseVarByteNum");let w,T=0,f=1,_=0,h=!1;const y=this._pos?this._pos:0;for(;T<4&&y+T<this._list.length;){if(w=this._list.readUInt8(y+T++),_+=f*(w&u.VARBYTEINT_MASK),f*=128,!(w&u.VARBYTEINT_FIN_MASK)){h=!0;break}if(this._list.length<=T)break}return!h&&4===T&&this._list.length>=T&&this._emitError(new Error("Invalid variable byte integer")),y&&(this._pos+=T),h=!!h&&(s?{bytes:T,value:_}:_),i("_parseVarByteNum: result: %o",h),h}_parseByte(){let s;return this._pos<this._list.length&&(s=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",s),s}_parseByType(s){switch(i("_parseByType: type: %s",s),s){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");const s=this._parseVarByteNum(),T=this._pos+s,f={};for(;this._pos<T;){const _=this._parseByte();if(!_)return this._emitError(new Error("Cannot parse property code type")),!1;const h=u.propertiesCodes[_];if(!h)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==h)f[h]?(Array.isArray(f[h])||(f[h]=[f[h]]),f[h].push(this._parseByType(u.propertiesTypes[h]))):f[h]=this._parseByType(u.propertiesTypes[h]);else{f[h]||(f[h]=Object.create(null));const w=this._parseByType(u.propertiesTypes[h]);f[h][w.name]?(Array.isArray(f[h][w.name])||(f[h][w.name]=[f[h][w.name]]),f[h][w.name].push(w.value)):f[h][w.name]=w.value}}return f}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new m,this._pos=0,!0}_emitError(s){i("_emitError"),this.error=s,this.emit("error",s)}}H.exports=a},{"./constants":36,"./packet":40,bl:17,debug:19,events:4}],42:[function(I,H,U){(function(p){(function(){const d=I("./constants"),m=p.allocUnsafe(0),u=p.from([0]),i=I("./numbers"),a=I("process-nextick-args").nextTick,o=I("debug")("mqtt-packet:writeToStream"),s=i.cache,b=i.generateNumber,T=i.generateCache,f=i.genBufVariableByteInt,_=i.generate4ByteBuffer;let h=oe,w=!0;function y(N,S,D){switch(o("generate called"),S.cork&&(S.cork(),a(x,S)),w&&(w=!1,T()),o("generate: packet.cmd: %s",N.cmd),N.cmd){case"connect":return function P(N,S,D){const z=N||{},R=z.protocolId||"MQTT";let n=z.protocolVersion||4;const l=z.will;let k=z.clean;const B=z.keepalive||0,g=z.clientId||"",t=z.username,e=z.password,r=z.properties;void 0===k&&(k=!0);let v=0;if(!R||"string"!=typeof R&&!p.isBuffer(R))return S.emit("error",new Error("Invalid protocolId")),!1;if(v+=R.length+2,3!==n&&4!==n&&5!==n)return S.emit("error",new Error("Invalid protocol version")),!1;if(v+=1,("string"==typeof g||p.isBuffer(g))&&(g||n>=4)&&(g||k))v+=p.byteLength(g)+2;else{if(n<4)return S.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*k==0)return S.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof B||B<0||B>65535||B%1!=0)return S.emit("error",new Error("Invalid keepalive")),!1;if(v+=2,v+=1,5===n){var L=ee(S,r);if(!L)return!1;v+=L.length}if(l){if("object"!=typeof l)return S.emit("error",new Error("Invalid will")),!1;if(!l.topic||"string"!=typeof l.topic)return S.emit("error",new Error("Invalid will topic")),!1;if(v+=p.byteLength(l.topic)+2,v+=2,l.payload){if(!(l.payload.length>=0))return S.emit("error",new Error("Invalid will payload")),!1;v+="string"==typeof l.payload?p.byteLength(l.payload):l.payload.length}var Y={};if(5===n){if(!(Y=ee(S,l.properties)))return!1;v+=Y.length}}let te=!1;if(null!=t){if(!q(t))return S.emit("error",new Error("Invalid username")),!1;te=!0,v+=p.byteLength(t)+2}if(null!=e){if(!te)return S.emit("error",new Error("Username is required to use password")),!1;if(!q(e))return S.emit("error",new Error("Invalid password")),!1;v+=Z(e)+2}S.write(d.CONNECT_HEADER),J(S,v),ie(S,R),z.bridgeMode&&(n+=128),S.write(131===n?d.VERSION131:132===n?d.VERSION132:4===n?d.VERSION4:5===n?d.VERSION5:d.VERSION3);let ae=0;return ae|=null!=t?d.USERNAME_MASK:0,ae|=null!=e?d.PASSWORD_MASK:0,ae|=l&&l.retain?d.WILL_RETAIN_MASK:0,ae|=l&&l.qos?l.qos<<d.WILL_QOS_SHIFT:0,ae|=l?d.WILL_FLAG_MASK:0,ae|=k?d.CLEAN_SESSION_MASK:0,S.write(p.from([ae])),h(S,B),5===n&&L.write(),ie(S,g),l&&(5===n&&Y.write(),Q(S,l.topic),ie(S,l.payload)),null!=t&&ie(S,t),null!=e&&ie(S,e),!0}(N,S);case"connack":return function A(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=5===z?R.reasonCode:R.returnCode,l=R.properties;let k=2;if("number"!=typeof n)return S.emit("error",new Error("Invalid return code")),!1;let B=null;if(5===z){if(B=ee(S,l),!B)return!1;k+=B.length}return S.write(d.CONNACK_HEADER),J(S,k),S.write(R.sessionPresent?d.SESSIONPRESENT_HEADER:u),S.write(p.from([n])),B?.write(),!0}(N,S,D);case"publish":return function W(N,S,D){o("publish: packet: %o",N);const z=D?D.protocolVersion:4,R=N||{},n=R.qos||0,l=R.retain?d.RETAIN_MASK:0,k=R.topic,B=R.payload||m,g=R.messageId,t=R.properties;let e=0;if("string"==typeof k)e+=p.byteLength(k)+2;else{if(!p.isBuffer(k))return S.emit("error",new Error("Invalid topic")),!1;e+=k.length+2}if(p.isBuffer(B)?e+=B.length:e+=p.byteLength(B),n&&"number"!=typeof g)return S.emit("error",new Error("Invalid messageId")),!1;n&&(e+=2);let r=null;if(5===z){if(r=ee(S,t),!r)return!1;e+=r.length}return S.write(d.PUBLISH_HEADER[n][R.dup?1:0][l?1:0]),J(S,e),h(S,Z(k)),S.write(k),n>0&&h(S,g),r?.write(),o("publish: payload: %o",B),S.write(B)}(N,S,D);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function $(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=R.cmd||"puback",l=R.messageId,k=R.dup&&"pubrel"===n?d.DUP_MASK:0;let B=0;const g=R.reasonCode,t=R.properties;let e=5===z?3:2;if("pubrel"===n&&(B=1),"number"!=typeof l)return S.emit("error",new Error("Invalid messageId")),!1;let r=null;if(5===z&&"object"==typeof t){if(r=X(S,t,D,e),!r)return!1;e+=r.length}return S.write(d.ACKS[n][B][k][0]),J(S,e),h(S,l),5===z&&S.write(p.from([g])),null!==r&&r.write(),!0}(N,S,D);case"subscribe":return function V(N,S,D){o("subscribe: packet: ");const z=D?D.protocolVersion:4,R=N||{},n=R.dup?d.DUP_MASK:0,l=R.messageId,k=R.subscriptions,B=R.properties;let g=0;if("number"!=typeof l)return S.emit("error",new Error("Invalid messageId")),!1;g+=2;let t=null;if(5===z){if(t=ee(S,B),!t)return!1;g+=t.length}if("object"!=typeof k||!k.length)return S.emit("error",new Error("Invalid subscriptions")),!1;for(let r=0;r<k.length;r+=1){const v=k[r].topic,L=k[r].qos;if("string"!=typeof v)return S.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof L)return S.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===z){if("boolean"!=typeof(k[r].nl||!1))return S.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(k[r].rap||!1))return S.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=k[r].rh||0;if("number"!=typeof ae||ae>2)return S.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}g+=p.byteLength(v)+2+1}o("subscribe: writing to stream: %o",d.SUBSCRIBE_HEADER),S.write(d.SUBSCRIBE_HEADER[1][n?1:0][0]),J(S,g),h(S,l),null!==t&&t.write();let e=!0;for(const r of k){const L=r.qos,Y=+r.nl,te=+r.rap,ae=r.rh;let le;Q(S,r.topic),le=d.SUBSCRIBE_OPTIONS_QOS[L],5===z&&(le|=Y?d.SUBSCRIBE_OPTIONS_NL:0,le|=te?d.SUBSCRIBE_OPTIONS_RAP:0,le|=ae?d.SUBSCRIBE_OPTIONS_RH[ae]:0),e=S.write(p.from([le]))}return e}(N,S,D);case"suback":return function M(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=R.messageId,l=R.granted,k=R.properties;let B=0;if("number"!=typeof n)return S.emit("error",new Error("Invalid messageId")),!1;if(B+=2,"object"!=typeof l||!l.length)return S.emit("error",new Error("Invalid qos vector")),!1;for(let t=0;t<l.length;t+=1){if("number"!=typeof l[t])return S.emit("error",new Error("Invalid qos vector")),!1;B+=1}let g=null;if(5===z){if(g=X(S,k,D,B),!g)return!1;B+=g.length}return S.write(d.SUBACK_HEADER),J(S,B),h(S,n),null!==g&&g.write(),S.write(p.from(l))}(N,S,D);case"unsubscribe":return function C(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=R.messageId,l=R.dup?d.DUP_MASK:0,k=R.unsubscriptions,B=R.properties;let g=0;if("number"!=typeof n)return S.emit("error",new Error("Invalid messageId")),!1;if(g+=2,"object"!=typeof k||!k.length)return S.emit("error",new Error("Invalid unsubscriptions")),!1;for(let r=0;r<k.length;r+=1){if("string"!=typeof k[r])return S.emit("error",new Error("Invalid unsubscriptions")),!1;g+=p.byteLength(k[r])+2}let t=null;if(5===z){if(t=ee(S,B),!t)return!1;g+=t.length}S.write(d.UNSUBSCRIBE_HEADER[1][l?1:0][0]),J(S,g),h(S,n),null!==t&&t.write();let e=!0;for(let r=0;r<k.length;r++)e=Q(S,k[r]);return e}(N,S,D);case"unsuback":return function E(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=R.messageId,l=R.dup?d.DUP_MASK:0,k=R.granted,B=R.properties,g=R.cmd,t=0;let e=2;if("number"!=typeof n)return S.emit("error",new Error("Invalid messageId")),!1;if(5===z){if("object"!=typeof k||!k.length)return S.emit("error",new Error("Invalid qos vector")),!1;for(let v=0;v<k.length;v+=1){if("number"!=typeof k[v])return S.emit("error",new Error("Invalid qos vector")),!1;e+=1}}let r=null;if(5===z){if(r=X(S,B,D,e),!r)return!1;e+=r.length}return S.write(d.ACKS[g][t][l][0]),J(S,e),h(S,n),null!==r&&r.write(),5===z&&S.write(p.from(k)),!0}(N,S,D);case"pingreq":case"pingresp":return function c(N,S,D){return S.write(d.EMPTY[N.cmd])}(N,S);case"disconnect":return function j(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=R.reasonCode;let k=5===z?1:0,B=null;if(5===z){if(B=X(S,R.properties,D,k),!B)return!1;k+=B.length}return S.write(p.from([d.codes.disconnect<<4])),J(S,k),5===z&&S.write(p.from([n])),null!==B&&B.write(),!0}(N,S,D);case"auth":return function K(N,S,D){const z=D?D.protocolVersion:4,R=N||{},n=R.reasonCode,l=R.properties;let k=5===z?1:0;5!==z&&S.emit("error",new Error("Invalid mqtt version for auth packet"));const B=X(S,l,D,k);return!!B&&(k+=B.length,S.write(p.from([d.codes.auth<<4])),J(S,k),S.write(p.from([n])),null!==B&&B.write(),!0)}(N,S,D);default:return S.emit("error",new Error("Unknown command")),!1}}function x(N){N.uncork()}Object.defineProperty(y,"cacheNumbers",{get:()=>h===oe,set(N){N?((!s||0===Object.keys(s).length)&&(w=!0),h=oe):(w=!1,h=se)}});const G={};function J(N,S){if(S>d.VARBYTEINT_MAX)return N.emit("error",new Error(`Invalid variable byte integer: ${S}`)),!1;let D=G[S];return D||(D=f(S),S<16384&&(G[S]=D)),o("writeVarByteInt: writing to stream: %o",D),N.write(D)}function Q(N,S){const D=p.byteLength(S);return h(N,D),o("writeString: %s",S),N.write(S,"utf8")}function re(N,S,D){Q(N,S),Q(N,D)}function oe(N,S){return o("writeNumberCached: number: %d",S),o("writeNumberCached: %o",s[S]),N.write(s[S])}function se(N,S){const D=b(S);return o("writeNumberGenerated: %o",D),N.write(D)}function ie(N,S){"string"==typeof S?Q(N,S):S?(h(N,S.length),N.write(S)):h(N,0)}function ee(N,S){if("object"!=typeof S||null!=S.length)return{length:1,write(){F(N,{},0)}};let D=0;function z(n,l){let B=0;switch(d.propertiesTypes[n]){case"byte":if("boolean"!=typeof l)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=2;break;case"int8":if("number"!=typeof l||l<0||l>255)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=2;break;case"binary":if(l&&null===l)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=1+p.byteLength(l)+2;break;case"int16":if("number"!=typeof l||l<0||l>65535)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=3;break;case"int32":if("number"!=typeof l||l<0||l>4294967295)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=5;break;case"var":if("number"!=typeof l||l<0||l>268435455)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=1+p.byteLength(f(l));break;case"string":if("string"!=typeof l)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=3+p.byteLength(l.toString());break;case"pair":if("object"!=typeof l)return N.emit("error",new Error(`Invalid ${n}: ${l}`)),!1;B+=Object.getOwnPropertyNames(l).reduce((g,t)=>{const e=l[t];return Array.isArray(e)?g+=e.reduce((r,v)=>r+(3+p.byteLength(t.toString())+2+p.byteLength(v.toString())),0):g+=3+p.byteLength(t.toString())+2+p.byteLength(l[t].toString()),g},0);break;default:return N.emit("error",new Error(`Invalid property ${n}: ${l}`)),!1}return B}if(S)for(const n in S){let l=0,k=0;const B=S[n];if(Array.isArray(B))for(let g=0;g<B.length;g++){if(k=z(n,B[g]),!k)return!1;l+=k}else{if(k=z(n,B),!k)return!1;l=k}if(!l)return!1;D+=l}return{length:p.byteLength(f(D))+D,write(){F(N,S,D)}}}function X(N,S,D,z){const R=["reasonString","userProperties"],n=D&&D.properties&&D.properties.maximumPacketSize?D.properties.maximumPacketSize:0;let l=ee(N,S);if(n)for(;z+l.length>n;){const k=R.shift();if(!k||!S[k])return!1;delete S[k],l=ee(N,S)}return l}function O(N,S,D){switch(d.propertiesTypes[S]){case"byte":N.write(p.from([d.properties[S]])),N.write(p.from([+D]));break;case"int8":N.write(p.from([d.properties[S]])),N.write(p.from([D]));break;case"binary":N.write(p.from([d.properties[S]])),ie(N,D);break;case"int16":N.write(p.from([d.properties[S]])),h(N,D);break;case"int32":N.write(p.from([d.properties[S]])),function ne(N,S){const D=_(S);return o("write4ByteNumber: %o",D),N.write(D)}(N,D);break;case"var":N.write(p.from([d.properties[S]])),J(N,D);break;case"string":N.write(p.from([d.properties[S]])),Q(N,D);break;case"pair":Object.getOwnPropertyNames(D).forEach(R=>{const n=D[R];Array.isArray(n)?n.forEach(l=>{N.write(p.from([d.properties[S]])),re(N,R.toString(),l.toString())}):(N.write(p.from([d.properties[S]])),re(N,R.toString(),n.toString()))});break;default:return N.emit("error",new Error(`Invalid property ${S} value: ${D}`)),!1}}function F(N,S,D){J(N,D);for(const z in S)if(Object.prototype.hasOwnProperty.call(S,z)&&null!==S[z]){const R=S[z];if(Array.isArray(R))for(let n=0;n<R.length;n++)O(N,z,R[n]);else O(N,z,R)}}function Z(N){return N?N instanceof p?N.length:p.byteLength(N):0}function q(N){return"string"==typeof N||N instanceof p}H.exports=y}).call(this)}).call(this,I("buffer").Buffer)},{"./constants":36,"./numbers":39,buffer:3,debug:19,"process-nextick-args":45}],43:[function(I,H,U){var p=1e3,d=60*p,m=60*d,u=24*m;function T(f,_,h,w){var y=_>=1.5*h;return Math.round(f/h)+" "+w+(y?"s":"")}H.exports=function(f,_){_=_||{};var h=typeof f;if("string"===h&&f.length>0)return function o(f){if(!((f=String(f)).length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(_){var h=parseFloat(_[1]);switch((_[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*h;case"weeks":case"week":case"w":return 6048e5*h;case"days":case"day":case"d":return h*u;case"hours":case"hour":case"hrs":case"hr":case"h":return h*m;case"minutes":case"minute":case"mins":case"min":case"m":return h*d;case"seconds":case"second":case"secs":case"sec":case"s":return h*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}(f);if("number"===h&&isFinite(f))return _.long?function b(f){var _=Math.abs(f);return _>=u?T(f,_,u,"day"):_>=m?T(f,_,m,"hour"):_>=d?T(f,_,d,"minute"):_>=p?T(f,_,p,"second"):f+" ms"}(f):function s(f){var _=Math.abs(f);return _>=u?Math.round(f/u)+"d":_>=m?Math.round(f/m)+"h":_>=d?Math.round(f/d)+"m":_>=p?Math.round(f/p)+"s":f+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},{}],44:[function(I,H,U){var p=I("wrappy");function d(u){var i=function(){return i.called?i.value:(i.called=!0,i.value=u.apply(this,arguments))};return i.called=!1,i}function m(u){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=u.apply(this,arguments)};return i.onceError=(u.name||"Function wrapped with `once`")+" shouldn't be called more than once",i.called=!1,i}H.exports=p(d),H.exports.strict=p(m),d.proto=d(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return d(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return m(this)},configurable:!0})})},{wrappy:66}],45:[function(I,H,U){(function(p){(function(){"use strict";H.exports=typeof p>"u"||!p.version||0===p.version.indexOf("v0.")||0===p.version.indexOf("v1.")&&0!==p.version.indexOf("v1.8.")?{nextTick:function d(m,u,i,a){if("function"!=typeof m)throw new TypeError('"callback" argument must be a function');var s,b,o=arguments.length;switch(o){case 0:case 1:return p.nextTick(m);case 2:return p.nextTick(function(){m.call(null,u)});case 3:return p.nextTick(function(){m.call(null,u,i)});case 4:return p.nextTick(function(){m.call(null,u,i,a)});default:for(s=new Array(o-1),b=0;b<s.length;)s[b++]=arguments[b];return p.nextTick(function(){m.apply(null,s)})}}}:p}).call(this)}).call(this,I("_process"))},{_process:69}],46:[function(I,H,U){"use strict";var d={};function m(s,b,T){T||(T=Error);var _=function(h){function w(y,x,P){return h.call(this,function f(h,w,y){return"string"==typeof b?b:b(h,w,y)}(y,x,P))||this}return function p(s,b){s.prototype=Object.create(b.prototype),s.prototype.constructor=s,s.__proto__=b}(w,h),w}(T);_.prototype.name=T.name,_.prototype.code=s,d[s]=_}function u(s,b){if(Array.isArray(s)){var T=s.length;return s=s.map(function(f){return String(f)}),T>2?"one of ".concat(b," ").concat(s.slice(0,T-1).join(", "),", or ")+s[T-1]:2===T?"one of ".concat(b," ").concat(s[0]," or ").concat(s[1]):"of ".concat(b," ").concat(s[0])}return"of ".concat(b," ").concat(String(s))}m("ERR_INVALID_OPT_VALUE",function(s,b){return'The value "'+b+'" is invalid for option "'+s+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(s,b,T){var f,_;if("string"==typeof b&&function i(s,b,T){return s.substr(!T||T<0?0:+T,b.length)===b}(b,"not ")?(f="must not be",b=b.replace(/^not /,"")):f="must be",function a(s,b,T){return(void 0===T||T>s.length)&&(T=s.length),s.substring(T-b.length,T)===b}(s," argument"))_="The ".concat(s," ").concat(f," ").concat(u(b,"type"));else{var h=function o(s,b,T){return"number"!=typeof T&&(T=0),!(T+b.length>s.length)&&-1!==s.indexOf(b,T)}(s,".")?"property":"argument";_='The "'.concat(s,'" ').concat(h," ").concat(f," ").concat(u(b,"type"))}return _+". Received type ".concat(typeof T)},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),H.exports.codes=d},{}],47:[function(I,H,U){(function(p){(function(){"use strict";var d=Object.keys||function(f){var _=[];for(var h in f)_.push(h);return _};H.exports=s;var m=I("./_stream_readable"),u=I("./_stream_writable");I("inherits")(s,m);for(var i=d(u.prototype),a=0;a<i.length;a++){var o=i[a];s.prototype[o]||(s.prototype[o]=u.prototype[o])}function s(f){if(!(this instanceof s))return new s(f);m.call(this,f),u.call(this,f),this.allowHalfOpen=!0,f&&(!1===f.readable&&(this.readable=!1),!1===f.writable&&(this.writable=!1),!1===f.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",b)))}function b(){this._writableState.ended||p.nextTick(T,this)}function T(f){f.end()}Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(_){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=_,this._writableState.destroyed=_)}})}).call(this)}).call(this,I("_process"))},{"./_stream_readable":49,"./_stream_writable":51,_process:69,inherits:34}],48:[function(I,H,U){"use strict";H.exports=d;var p=I("./_stream_transform");function d(m){if(!(this instanceof d))return new d(m);p.call(this,m)}I("inherits")(d,p),d.prototype._transform=function(m,u,i){i(null,m)}},{"./_stream_transform":50,inherits:34}],49:[function(I,H,U){(function(p,d){(function(){"use strict";var m;H.exports=J,J.ReadableState=G,I("events");var i=function(t,e){return t.listeners(e).length},a=I("./internal/streams/stream"),o=I("buffer").Buffer,s=d.Uint8Array||function(){};var _,f=I("util");_=f&&f.debuglog?f.debuglog("stream"):function(){};var M,C,E,h=I("./internal/streams/buffer_list"),w=I("./internal/streams/destroy"),x=I("./internal/streams/state").getHighWaterMark,P=I("../errors").codes,A=P.ERR_INVALID_ARG_TYPE,W=P.ERR_STREAM_PUSH_AFTER_EOF,$=P.ERR_METHOD_NOT_IMPLEMENTED,V=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;I("inherits")(J,a);var c=w.errorOrDestroy,j=["error","close","destroy","pause","resume"];function G(g,t,e){m=m||I("./_stream_duplex"),"boolean"!=typeof e&&(e=t instanceof m),this.objectMode=!!(g=g||{}).objectMode,e&&(this.objectMode=this.objectMode||!!g.readableObjectMode),this.highWaterMark=x(this,g,"readableHighWaterMark",e),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==g.emitClose,this.autoDestroy=!!g.autoDestroy,this.destroyed=!1,this.defaultEncoding=g.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,g.encoding&&(M||(M=I("string_decoder/").StringDecoder),this.decoder=new M(g.encoding),this.encoding=g.encoding)}function J(g){if(m=m||I("./_stream_duplex"),!(this instanceof J))return new J(g);this._readableState=new G(g,this,this instanceof m),this.readable=!0,g&&("function"==typeof g.read&&(this._read=g.read),"function"==typeof g.destroy&&(this._destroy=g.destroy)),a.call(this)}function Q(g,t,e,r,v){_("readableAddChunk",t);var Y,L=g._readableState;if(null===t)L.reading=!1,function ee(g,t){if(_("onEofChunk"),!t.ended){if(t.decoder){var e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?X(g):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(g)))}}(g,L);else if(v||(Y=function oe(g,t){var e;return!function T(g){return o.isBuffer(g)||g instanceof s}(t)&&"string"!=typeof t&&void 0!==t&&!g.objectMode&&(e=new A("chunk",["string","Buffer","Uint8Array"],t)),e}(L,t)),Y)c(g,Y);else if(L.objectMode||t&&t.length>0)if("string"!=typeof t&&!L.objectMode&&Object.getPrototypeOf(t)!==o.prototype&&(t=function b(g){return o.from(g)}(t)),r)L.endEmitted?c(g,new V):re(g,L,t,!0);else if(L.ended)c(g,new W);else{if(L.destroyed)return!1;L.reading=!1,L.decoder&&!e?(t=L.decoder.write(t),L.objectMode||0!==t.length?re(g,L,t,!1):F(g,L)):re(g,L,t,!1)}else r||(L.reading=!1,F(g,L));return!L.ended&&(L.length<L.highWaterMark||0===L.length)}function re(g,t,e,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,g.emit("data",e)):(t.length+=t.objectMode?1:e.length,r?t.buffer.unshift(e):t.buffer.push(e),t.needReadable&&X(g)),F(g,t)}Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),J.prototype.destroy=w.destroy,J.prototype._undestroy=w.undestroy,J.prototype._destroy=function(g,t){t(g)},J.prototype.push=function(g,t){var r,e=this._readableState;return e.objectMode?r=!0:"string"==typeof g&&((t=t||e.defaultEncoding)!==e.encoding&&(g=o.from(g,t),t=""),r=!0),Q(this,g,t,!1,r)},J.prototype.unshift=function(g){return Q(this,g,null,!0,!1)},J.prototype.isPaused=function(){return!1===this._readableState.flowing},J.prototype.setEncoding=function(g){M||(M=I("string_decoder/").StringDecoder);var t=new M(g);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var e=this._readableState.buffer.head,r="";null!==e;)r+=t.write(e.data),e=e.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var se=1073741824;function ie(g,t){return g<=0||0===t.length&&t.ended?0:t.objectMode?1:g!=g?t.flowing&&t.length?t.buffer.head.data.length:t.length:(g>t.highWaterMark&&(t.highWaterMark=function ne(g){return g>=se?g=se:(g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++),g}(g)),g<=t.length?g:t.ended?t.length:(t.needReadable=!0,0))}function X(g){var t=g._readableState;_("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,p.nextTick(O,g))}function O(g){var t=g._readableState;_("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(g.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,R(g)}function F(g,t){t.readingMore||(t.readingMore=!0,p.nextTick(Z,g,t))}function Z(g,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var e=t.length;if(_("maybeReadMore read 0"),g.read(0),e===t.length)break}t.readingMore=!1}function N(g){var t=g._readableState;t.readableListening=g.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:g.listenerCount("data")>0&&g.resume()}function S(g){_("readable nexttick read 0"),g.read(0)}function z(g,t){_("resume",t.reading),t.reading||g.read(0),t.resumeScheduled=!1,g.emit("resume"),R(g),t.flowing&&!t.reading&&g.read(0)}function R(g){var t=g._readableState;for(_("flow",t.flowing);t.flowing&&null!==g.read(););}function n(g,t){return 0===t.length?null:(t.objectMode?e=t.buffer.shift():!g||g>=t.length?(e=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):e=t.buffer.consume(g,t.decoder),e);var e}function l(g){var t=g._readableState;_("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,p.nextTick(k,t,g))}function k(g,t){if(_("endReadableNT",g.endEmitted,g.length),!g.endEmitted&&0===g.length&&(g.endEmitted=!0,t.readable=!1,t.emit("end"),g.autoDestroy)){var e=t._writableState;(!e||e.autoDestroy&&e.finished)&&t.destroy()}}function B(g,t){for(var e=0,r=g.length;e<r;e++)if(g[e]===t)return e;return-1}J.prototype.read=function(g){_("read",g),g=parseInt(g,10);var t=this._readableState,e=g;if(0!==g&&(t.emittedReadable=!1),0===g&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?l(this):X(this),null;if(0===(g=ie(g,t))&&t.ended)return 0===t.length&&l(this),null;var v,r=t.needReadable;return _("need readable",r),(0===t.length||t.length-g<t.highWaterMark)&&_("length less than watermark",r=!0),t.ended||t.reading?_("reading or ended",r=!1):r&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(g=ie(e,t))),null===(v=g>0?n(g,t):null)?(t.needReadable=t.length<=t.highWaterMark,g=0):(t.length-=g,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),e!==g&&t.ended&&l(this)),null!==v&&this.emit("data",v),v},J.prototype._read=function(g){c(this,new $("_read()"))},J.prototype.pipe=function(g,t){var e=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=g;break;case 1:r.pipes=[r.pipes,g];break;default:r.pipes.push(g)}r.pipesCount+=1,_("pipe count=%d opts=%j",r.pipesCount,t);var L=t&&!1===t.end||g===p.stdout||g===p.stderr?_e:te;function Y(me,we){_("onunpipe"),me===e&&we&&!1===we.hasUnpiped&&(we.hasUnpiped=!0,function he(){_("cleanup"),g.removeListener("close",pe),g.removeListener("finish",ge),g.removeListener("drain",ae),g.removeListener("error",ce),g.removeListener("unpipe",Y),e.removeListener("end",te),e.removeListener("end",_e),e.removeListener("data",de),le=!0,r.awaitDrain&&(!g._writableState||g._writableState.needDrain)&&ae()}())}function te(){_("onend"),g.end()}r.endEmitted?p.nextTick(L):e.once("end",L),g.on("unpipe",Y);var ae=function q(g){return function(){var e=g._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&i(g,"data")&&(e.flowing=!0,R(g))}}(e);g.on("drain",ae);var le=!1;function de(me){_("ondata");var we=g.write(me);_("dest.write",we),!1===we&&((1===r.pipesCount&&r.pipes===g||r.pipesCount>1&&-1!==B(r.pipes,g))&&!le&&(_("false write response, pause",r.awaitDrain),r.awaitDrain++),e.pause())}function ce(me){_("onerror",me),_e(),g.removeListener("error",ce),0===i(g,"error")&&c(g,me)}function pe(){g.removeListener("finish",ge),_e()}function ge(){_("onfinish"),g.removeListener("close",pe),_e()}function _e(){_("unpipe"),e.unpipe(g)}return e.on("data",de),function K(g,t,e){if("function"==typeof g.prependListener)return g.prependListener(t,e);g._events&&g._events[t]?Array.isArray(g._events[t])?g._events[t].unshift(e):g._events[t]=[e,g._events[t]]:g.on(t,e)}(g,"error",ce),g.once("close",pe),g.once("finish",ge),g.emit("pipe",e),r.flowing||(_("pipe resume"),e.resume()),g},J.prototype.unpipe=function(g){var t=this._readableState,e={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return g&&g!==t.pipes||(g||(g=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,g&&g.emit("unpipe",this,e)),this;if(!g){var r=t.pipes,v=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var L=0;L<v;L++)r[L].emit("unpipe",this,{hasUnpiped:!1});return this}var Y=B(t.pipes,g);return-1===Y||(t.pipes.splice(Y,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),g.emit("unpipe",this,e)),this},J.prototype.addListener=J.prototype.on=function(g,t){var e=a.prototype.on.call(this,g,t),r=this._readableState;return"data"===g?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===g&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,_("on readable",r.length,r.reading),r.length?X(this):r.reading||p.nextTick(S,this)),e},J.prototype.removeListener=function(g,t){var e=a.prototype.removeListener.call(this,g,t);return"readable"===g&&p.nextTick(N,this),e},J.prototype.removeAllListeners=function(g){var t=a.prototype.removeAllListeners.apply(this,arguments);return("readable"===g||void 0===g)&&p.nextTick(N,this),t},J.prototype.resume=function(){var g=this._readableState;return g.flowing||(_("resume"),g.flowing=!g.readableListening,function D(g,t){t.resumeScheduled||(t.resumeScheduled=!0,p.nextTick(z,g,t))}(this,g)),g.paused=!1,this},J.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},J.prototype.wrap=function(g){var t=this,e=this._readableState,r=!1;for(var v in g.on("end",function(){if(_("wrapped end"),e.decoder&&!e.ended){var Y=e.decoder.end();Y&&Y.length&&t.push(Y)}t.push(null)}),g.on("data",function(Y){_("wrapped data"),e.decoder&&(Y=e.decoder.write(Y)),e.objectMode&&null==Y||!(e.objectMode||Y&&Y.length)||t.push(Y)||(r=!0,g.pause())}),g)void 0===this[v]&&"function"==typeof g[v]&&(this[v]=function(te){return function(){return g[te].apply(g,arguments)}}(v));for(var L=0;L<j.length;L++)g.on(j[L],this.emit.bind(this,j[L]));return this._read=function(Y){_("wrapped _read",Y),r&&(r=!1,g.resume())},this},"function"==typeof Symbol&&(J.prototype[Symbol.asyncIterator]=function(){return void 0===C&&(C=I("./internal/streams/async_iterator")),C(this)}),Object.defineProperty(J.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(J.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(J.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),J._fromList=n,Object.defineProperty(J.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(J.from=function(g,t){return void 0===E&&(E=I("./internal/streams/from")),E(J,g,t)})}).call(this)}).call(this,I("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":46,"./_stream_duplex":47,"./internal/streams/async_iterator":52,"./internal/streams/buffer_list":53,"./internal/streams/destroy":54,"./internal/streams/from":56,"./internal/streams/state":58,"./internal/streams/stream":59,_process:69,buffer:3,events:4,inherits:34,"string_decoder/":64,util:2}],50:[function(I,H,U){"use strict";H.exports=s;var p=I("../errors").codes,d=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,u=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=p.ERR_TRANSFORM_WITH_LENGTH_0,a=I("./_stream_duplex");function o(f,_){var h=this._transformState;h.transforming=!1;var w=h.writecb;if(null===w)return this.emit("error",new m);h.writechunk=null,h.writecb=null,null!=_&&this.push(_),w(f);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function s(f){if(!(this instanceof s))return new s(f);a.call(this,f),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&("function"==typeof f.transform&&(this._transform=f.transform),"function"==typeof f.flush&&(this._flush=f.flush)),this.on("prefinish",b)}function b(){var f=this;"function"!=typeof this._flush||this._readableState.destroyed?T(this,null,null):this._flush(function(_,h){T(f,_,h)})}function T(f,_,h){if(_)return f.emit("error",_);if(null!=h&&f.push(h),f._writableState.length)throw new i;if(f._transformState.transforming)throw new u;return f.push(null)}I("inherits")(s,a),s.prototype.push=function(f,_){return this._transformState.needTransform=!1,a.prototype.push.call(this,f,_)},s.prototype._transform=function(f,_,h){h(new d("_transform()"))},s.prototype._write=function(f,_,h){var w=this._transformState;if(w.writecb=h,w.writechunk=f,w.writeencoding=_,!w.transforming){var y=this._readableState;(w.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},s.prototype._read=function(f){var _=this._transformState;null===_.writechunk||_.transforming?_.needTransform=!0:(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform))},s.prototype._destroy=function(f,_){a.prototype._destroy.call(this,f,function(h){_(h)})}},{"../errors":46,"./_stream_duplex":47,inherits:34}],51:[function(I,H,U){(function(p,d){(function(){"use strict";function u(R){var n=this;this.next=null,this.entry=null,this.finish=function(){!function z(R,n,l){var k=R.entry;for(R.entry=null;k;){var B=k.callback;n.pendingcb--,B(l),k=k.next}n.corkedRequestsFree.next=R}(n,R)}}var i;H.exports=G,G.WritableState=j;var a={deprecate:I("util-deprecate")},o=I("./internal/streams/stream"),s=I("buffer").Buffer,b=d.Uint8Array||function(){};var K,_=I("./internal/streams/destroy"),w=I("./internal/streams/state").getHighWaterMark,y=I("../errors").codes,x=y.ERR_INVALID_ARG_TYPE,P=y.ERR_METHOD_NOT_IMPLEMENTED,A=y.ERR_MULTIPLE_CALLBACK,W=y.ERR_STREAM_CANNOT_PIPE,$=y.ERR_STREAM_DESTROYED,V=y.ERR_STREAM_NULL_VALUES,M=y.ERR_STREAM_WRITE_AFTER_END,C=y.ERR_UNKNOWN_ENCODING,E=_.errorOrDestroy;function c(){}function j(R,n,l){i=i||I("./_stream_duplex"),"boolean"!=typeof l&&(l=n instanceof i),this.objectMode=!!(R=R||{}).objectMode,l&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=w(this,R,"writableHighWaterMark",l),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===R.decodeStrings),this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(B){!function ee(R,n){var l=R._writableState,k=l.sync,B=l.writecb;if("function"!=typeof B)throw new A;if(function ie(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}(l),n)!function ne(R,n,l,k,B){--n.pendingcb,l?(p.nextTick(B,k),p.nextTick(S,R,n),R._writableState.errorEmitted=!0,E(R,k)):(B(k),R._writableState.errorEmitted=!0,E(R,k),S(R,n))}(R,l,k,n,B);else{var g=Z(l)||R.destroyed;!g&&!l.corked&&!l.bufferProcessing&&l.bufferedRequest&&F(R,l),k?p.nextTick(X,R,l,g,B):X(R,l,g,B)}}(n,B)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new u(this)}function G(R){var n=this instanceof(i=i||I("./_stream_duplex"));if(!n&&!K.call(G,this))return new G(R);this._writableState=new j(R,this,n),this.writable=!0,R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final)),o.call(this)}function oe(R,n,l,k,B,g){if(!l){var t=function re(R,n,l){return!R.objectMode&&!1!==R.decodeStrings&&"string"==typeof n&&(n=s.from(n,l)),n}(n,k,B);k!==t&&(l=!0,B="buffer",k=t)}var e=n.objectMode?1:k.length;n.length+=e;var r=n.length<n.highWaterMark;if(r||(n.needDrain=!0),n.writing||n.corked){var v=n.lastBufferedRequest;n.lastBufferedRequest={chunk:k,encoding:B,isBuf:l,callback:g,next:null},v?v.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else se(R,n,!1,e,k,B,g);return r}function se(R,n,l,k,B,g,t){n.writelen=k,n.writecb=t,n.writing=!0,n.sync=!0,n.destroyed?n.onwrite(new $("write")):l?R._writev(B,n.onwrite):R._write(B,g,n.onwrite),n.sync=!1}function X(R,n,l,k){l||function O(R,n){0===n.length&&n.needDrain&&(n.needDrain=!1,R.emit("drain"))}(R,n),n.pendingcb--,k(),S(R,n)}function F(R,n){n.bufferProcessing=!0;var l=n.bufferedRequest;if(R._writev&&l&&l.next){var B=new Array(n.bufferedRequestCount),g=n.corkedRequestsFree;g.entry=l;for(var t=0,e=!0;l;)B[t]=l,l.isBuf||(e=!1),l=l.next,t+=1;B.allBuffers=e,se(R,n,!0,n.length,B,"",g.finish),n.pendingcb++,n.lastBufferedRequest=null,g.next?(n.corkedRequestsFree=g.next,g.next=null):n.corkedRequestsFree=new u(n),n.bufferedRequestCount=0}else{for(;l;){var r=l.chunk;if(se(R,n,!1,n.objectMode?1:r.length,r,l.encoding,l.callback),l=l.next,n.bufferedRequestCount--,n.writing)break}null===l&&(n.lastBufferedRequest=null)}n.bufferedRequest=l,n.bufferProcessing=!1}function Z(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function q(R,n){R._final(function(l){n.pendingcb--,l&&E(R,l),n.prefinished=!0,R.emit("prefinish"),S(R,n)})}function S(R,n){var l=Z(n);if(l&&(function N(R,n){!n.prefinished&&!n.finalCalled&&("function"!=typeof R._final||n.destroyed?(n.prefinished=!0,R.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,p.nextTick(q,R,n)))}(R,n),0===n.pendingcb&&(n.finished=!0,R.emit("finish"),n.autoDestroy))){var k=R._readableState;(!k||k.autoDestroy&&k.endEmitted)&&R.destroy()}return l}I("inherits")(G,o),j.prototype.getBuffer=function(){for(var n=this.bufferedRequest,l=[];n;)l.push(n),n=n.next;return l},function(){try{Object.defineProperty(j.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(K=Function.prototype[Symbol.hasInstance],Object.defineProperty(G,Symbol.hasInstance,{value:function(n){return!!K.call(this,n)||this===G&&n&&n._writableState instanceof j}})):K=function(n){return n instanceof this},G.prototype.pipe=function(){E(this,new W)},G.prototype.write=function(R,n,l){var k=this._writableState,B=!1,g=!k.objectMode&&function f(R){return s.isBuffer(R)||R instanceof b}(R);return g&&!s.isBuffer(R)&&(R=function T(R){return s.from(R)}(R)),"function"==typeof n&&(l=n,n=null),g?n="buffer":n||(n=k.defaultEncoding),"function"!=typeof l&&(l=c),k.ending?function J(R,n){var l=new M;E(R,l),p.nextTick(n,l)}(this,l):(g||function Q(R,n,l,k){var B;return null===l?B=new V:"string"!=typeof l&&!n.objectMode&&(B=new x("chunk",["string","Buffer"],l)),!B||(E(R,B),p.nextTick(k,B),!1)}(this,k,R,l))&&(k.pendingcb++,B=oe(this,k,g,R,n,l)),B},G.prototype.cork=function(){this._writableState.corked++},G.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&F(this,R))},G.prototype.setDefaultEncoding=function(n){if("string"==typeof n&&(n=n.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((n+"").toLowerCase())>-1))throw new C(n);return this._writableState.defaultEncoding=n,this},Object.defineProperty(G.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(G.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),G.prototype._write=function(R,n,l){l(new P("_write()"))},G.prototype._writev=null,G.prototype.end=function(R,n,l){var k=this._writableState;return"function"==typeof R?(l=R,R=null,n=null):"function"==typeof n&&(l=n,n=null),null!=R&&this.write(R,n),k.corked&&(k.corked=1,this.uncork()),k.ending||function D(R,n,l){n.ending=!0,S(R,n),l&&(n.finished?p.nextTick(l):R.once("finish",l)),n.ended=!0,R.writable=!1}(this,k,l),this},Object.defineProperty(G.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(G.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(n){this._writableState&&(this._writableState.destroyed=n)}}),G.prototype.destroy=_.destroy,G.prototype._undestroy=_.undestroy,G.prototype._destroy=function(R,n){n(R)}}).call(this)}).call(this,I("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":46,"./_stream_duplex":47,"./internal/streams/destroy":54,"./internal/streams/state":58,"./internal/streams/stream":59,_process:69,buffer:3,inherits:34,"util-deprecate":65}],52:[function(I,H,U){(function(p){(function(){"use strict";var d;function m(W,$,V){return $ in W?Object.defineProperty(W,$,{value:V,enumerable:!0,configurable:!0,writable:!0}):W[$]=V,W}var u=I("./end-of-stream"),i=Symbol("lastResolve"),a=Symbol("lastReject"),o=Symbol("error"),s=Symbol("ended"),b=Symbol("lastPromise"),T=Symbol("handlePromise"),f=Symbol("stream");function _(W,$){return{value:W,done:$}}function h(W){var $=W[i];if(null!==$){var V=W[f].read();null!==V&&(W[b]=null,W[i]=null,W[a]=null,$(_(V,!1)))}}function w(W){p.nextTick(h,W)}var x=Object.getPrototypeOf(function(){}),P=Object.setPrototypeOf((m(d={get stream(){return this[f]},next:function(){var $=this,V=this[o];if(null!==V)return Promise.reject(V);if(this[s])return Promise.resolve(_(void 0,!0));if(this[f].destroyed)return new Promise(function(c,j){p.nextTick(function(){$[o]?j($[o]):c(_(void 0,!0))})});var C,M=this[b];if(M)C=new Promise(function y(W,$){return function(V,M){W.then(function(){$[s]?V(_(void 0,!0)):$[T](V,M)},M)}}(M,this));else{var E=this[f].read();if(null!==E)return Promise.resolve(_(E,!1));C=new Promise(this[T])}return this[b]=C,C}},Symbol.asyncIterator,function(){return this}),m(d,"return",function(){var $=this;return new Promise(function(V,M){$[f].destroy(null,function(C){C?M(C):V(_(void 0,!0))})})}),d),x);H.exports=function($){var V,M=Object.create(P,(m(V={},f,{value:$,writable:!0}),m(V,i,{value:null,writable:!0}),m(V,a,{value:null,writable:!0}),m(V,o,{value:null,writable:!0}),m(V,s,{value:$._readableState.endEmitted,writable:!0}),m(V,T,{value:function(E,c){var j=M[f].read();j?(M[b]=null,M[i]=null,M[a]=null,E(_(j,!1))):(M[i]=E,M[a]=c)},writable:!0}),V));return M[b]=null,u($,function(C){if(C&&"ERR_STREAM_PREMATURE_CLOSE"!==C.code){var E=M[a];return null!==E&&(M[b]=null,M[i]=null,M[a]=null,E(C)),void(M[o]=C)}var c=M[i];null!==c&&(M[b]=null,M[i]=null,M[a]=null,c(_(void 0,!0))),M[s]=!0}),$.on("readable",w.bind(null,M)),M}}).call(this)}).call(this,I("_process"))},{"./end-of-stream":55,_process:69}],53:[function(I,H,U){"use strict";function p(h,w){var y=Object.keys(h);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(h);w&&(x=x.filter(function(P){return Object.getOwnPropertyDescriptor(h,P).enumerable})),y.push.apply(y,x)}return y}function m(h,w,y){return w in h?Object.defineProperty(h,w,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[w]=y,h}function i(h,w){for(var y=0;y<w.length;y++){var x=w[y];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}var s=I("buffer").Buffer,T=I("util").inspect,f=T&&T.custom||"inspect";function _(h,w,y){s.prototype.copy.call(h,w,y)}H.exports=function(){function h(){(function u(h,w){if(!(h instanceof w))throw new TypeError("Cannot call a class as a function")})(this,h),this.head=null,this.tail=null,this.length=0}return function a(h,w,y){return w&&i(h.prototype,w),y&&i(h,y),h}(h,[{key:"push",value:function(y){var x={data:y,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(y){var x={data:y,next:this.head};0===this.length&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(0!==this.length){var y=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(0===this.length)return"";for(var x=this.head,P=""+x.data;x=x.next;)P+=y+x.data;return P}},{key:"concat",value:function(y){if(0===this.length)return s.alloc(0);for(var x=s.allocUnsafe(y>>>0),P=this.head,A=0;P;)_(P.data,x,A),A+=P.data.length,P=P.next;return x}},{key:"consume",value:function(y,x){var P;return y<this.head.data.length?(P=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):P=y===this.head.data.length?this.shift():x?this._getString(y):this._getBuffer(y),P}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var x=this.head,P=1,A=x.data;for(y-=A.length;x=x.next;){var W=x.data,$=y>W.length?W.length:y;if(A+=$===W.length?W:W.slice(0,y),0==(y-=$)){$===W.length?(++P,this.head=x.next?x.next:this.tail=null):(this.head=x,x.data=W.slice($));break}++P}return this.length-=P,A}},{key:"_getBuffer",value:function(y){var x=s.allocUnsafe(y),P=this.head,A=1;for(P.data.copy(x),y-=P.data.length;P=P.next;){var W=P.data,$=y>W.length?W.length:y;if(W.copy(x,x.length-y,0,$),0==(y-=$)){$===W.length?(++A,this.head=P.next?P.next:this.tail=null):(this.head=P,P.data=W.slice($));break}++A}return this.length-=A,x}},{key:f,value:function(y,x){return T(this,function d(h){for(var w=1;w<arguments.length;w++){var y=null!=arguments[w]?arguments[w]:{};w%2?p(Object(y),!0).forEach(function(x){m(h,x,y[x])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(y)):p(Object(y)).forEach(function(x){Object.defineProperty(h,x,Object.getOwnPropertyDescriptor(y,x))})}return h}({},x,{depth:0,customInspect:!1}))}}]),h}()},{buffer:3,util:2}],54:[function(I,H,U){(function(p){(function(){"use strict";function m(s,b){a(s,b),u(s)}function u(s){s._writableState&&!s._writableState.emitClose||s._readableState&&!s._readableState.emitClose||s.emit("close")}function a(s,b){s.emit("error",b)}H.exports={destroy:function d(s,b){var T=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(b?b(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.nextTick(a,this,s)):p.nextTick(a,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(h){!b&&h?T._writableState?T._writableState.errorEmitted?p.nextTick(u,T):(T._writableState.errorEmitted=!0,p.nextTick(m,T,h)):p.nextTick(m,T,h):b?(p.nextTick(u,T),b(h)):p.nextTick(u,T)}),this)},undestroy:function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function o(s,b){var T=s._readableState,f=s._writableState;T&&T.autoDestroy||f&&f.autoDestroy?s.destroy(b):s.emit("error",b)}}}).call(this)}).call(this,I("_process"))},{_process:69}],55:[function(I,H,U){"use strict";var p=I("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}H.exports=function i(a,o,s){if("function"==typeof o)return i(a,null,o);o||(o={}),s=function d(a){var o=!1;return function(){if(!o){o=!0;for(var s=arguments.length,b=new Array(s),T=0;T<s;T++)b[T]=arguments[T];a.apply(this,b)}}}(s||m);var b=o.readable||!1!==o.readable&&a.readable,T=o.writable||!1!==o.writable&&a.writable,f=function(){a.writable||h()},_=a._writableState&&a._writableState.finished,h=function(){T=!1,_=!0,b||s.call(a)},w=a._readableState&&a._readableState.endEmitted,y=function(){b=!1,w=!0,T||s.call(a)},x=function($){s.call(a,$)},P=function(){var $;return b&&!w?((!a._readableState||!a._readableState.ended)&&($=new p),s.call(a,$)):T&&!_?((!a._writableState||!a._writableState.ended)&&($=new p),s.call(a,$)):void 0},A=function(){a.req.on("finish",h)};return function u(a){return a.setHeader&&"function"==typeof a.abort}(a)?(a.on("complete",h),a.on("abort",P),a.req?A():a.on("request",A)):T&&!a._writableState&&(a.on("end",f),a.on("close",f)),a.on("end",y),a.on("finish",h),!1!==o.error&&a.on("error",x),a.on("close",P),function(){a.removeListener("complete",h),a.removeListener("abort",P),a.removeListener("request",A),a.req&&a.req.removeListener("finish",h),a.removeListener("end",f),a.removeListener("close",f),a.removeListener("finish",h),a.removeListener("end",y),a.removeListener("error",x),a.removeListener("close",P)}}},{"../../../errors":46}],56:[function(I,H,U){H.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],57:[function(I,H,U){"use strict";var p;var m=I("../../../errors").codes,u=m.ERR_MISSING_ARGS,i=m.ERR_STREAM_DESTROYED;function a(h){if(h)throw h}function b(h){h()}function T(h,w){return h.pipe(w)}H.exports=function _(){for(var h=arguments.length,w=new Array(h),y=0;y<h;y++)w[y]=arguments[y];var x=function f(h){return h.length&&"function"==typeof h[h.length-1]?h.pop():a}(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new u("streams");var P,A=w.map(function(W,$){var V=$<w.length-1;return function s(h,w,y,x){x=function d(h){var w=!1;return function(){w||(w=!0,h.apply(void 0,arguments))}}(x);var P=!1;h.on("close",function(){P=!0}),void 0===p&&(p=I("./end-of-stream")),p(h,{readable:w,writable:y},function(W){if(W)return x(W);P=!0,x()});var A=!1;return function(W){if(!P&&!A){if(A=!0,function o(h){return h.setHeader&&"function"==typeof h.abort}(h))return h.abort();if("function"==typeof h.destroy)return h.destroy();x(W||new i("pipe"))}}}(W,V,$>0,function(C){P||(P=C),C&&A.forEach(b),!V&&(A.forEach(b),x(P))})});return w.reduce(T)}},{"../../../errors":46,"./end-of-stream":55}],58:[function(I,H,U){"use strict";var p=I("../../../errors").codes.ERR_INVALID_OPT_VALUE;H.exports={getHighWaterMark:function m(u,i,a,o){var s=function d(u,i,a){return null!=u.highWaterMark?u.highWaterMark:i?u[a]:null}(i,o,a);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new p(o?a:"highWaterMark",s);return Math.floor(s)}return u.objectMode?16:16384}}},{"../../../errors":46}],59:[function(I,H,U){arguments[4][29][0].apply(U,arguments)},{dup:29,events:4}],60:[function(I,H,U){(U=H.exports=I("./lib/_stream_readable.js")).Stream=U,U.Readable=U,U.Writable=I("./lib/_stream_writable.js"),U.Duplex=I("./lib/_stream_duplex.js"),U.Transform=I("./lib/_stream_transform.js"),U.PassThrough=I("./lib/_stream_passthrough.js"),U.finished=I("./lib/internal/streams/end-of-stream.js"),U.pipeline=I("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":47,"./lib/_stream_passthrough.js":48,"./lib/_stream_readable.js":49,"./lib/_stream_transform.js":50,"./lib/_stream_writable.js":51,"./lib/internal/streams/end-of-stream.js":55,"./lib/internal/streams/pipeline.js":57}],61:[function(I,H,U){"use strict";function p(m,u,i){var a=this;this._callback=m,this._args=i,this._interval=setInterval(m,u,this._args),this.reschedule=function(o){o||(o=a._interval),a._interval&&clearInterval(a._interval),a._interval=setInterval(a._callback,o,a._args)},this.clear=function(){a._interval&&(clearInterval(a._interval),a._interval=void 0)},this.destroy=function(){a._interval&&clearInterval(a._interval),a._callback=void 0,a._interval=void 0,a._args=void 0}}H.exports=function d(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var m;if(arguments.length>0){m=new Array(arguments.length-2);for(var u=0;u<m.length;u++)m[u]=arguments[u+2]}return new p(arguments[0],arguments[1],m)}},{}],62:[function(I,H,U){var p=I("buffer"),d=p.Buffer;function m(i,a){for(var o in i)a[o]=i[o]}function u(i,a,o){return d(i,a,o)}d.from&&d.alloc&&d.allocUnsafe&&d.allocUnsafeSlow?H.exports=p:(m(p,U),U.Buffer=u),u.prototype=Object.create(d.prototype),m(d,u),u.from=function(i,a,o){if("number"==typeof i)throw new TypeError("Argument must not be a number");return d(i,a,o)},u.alloc=function(i,a,o){if("number"!=typeof i)throw new TypeError("Argument must be a number");var s=d(i);return void 0!==a?"string"==typeof o?s.fill(a,o):s.fill(a):s.fill(0),s},u.allocUnsafe=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return d(i)},u.allocUnsafeSlow=function(i){if("number"!=typeof i)throw new TypeError("Argument must be a number");return p.SlowBuffer(i)}},{buffer:3}],63:[function(I,H,U){H.exports=function p(m){var u=m._readableState;return u?u.objectMode||"number"==typeof m._duplexState?m.read():m.read(function d(m){return m.buffer.length?m.buffer.head?m.buffer.head.data.length:m.buffer[0].length:m.length}(u)):null}},{}],64:[function(I,H,U){arguments[4][32][0].apply(U,arguments)},{dup:32,"safe-buffer":62}],65:[function(I,H,U){(function(p){(function(){function m(u){try{if(!p.localStorage)return!1}catch{return!1}var i=p.localStorage[u];return null!=i&&"true"===String(i).toLowerCase()}H.exports=function d(u,i){if(m("noDeprecation"))return u;var a=!1;return function o(){if(!a){if(m("throwDeprecation"))throw new Error(i);m("traceDeprecation")?console.trace(i):console.warn(i),a=!0}return u.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],66:[function(I,H,U){H.exports=function p(d,m){if(d&&m)return p(d)(m);if("function"!=typeof d)throw new TypeError("need wrapper function");return Object.keys(d).forEach(function(i){u[i]=d[i]}),u;function u(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];var o=d.apply(this,i),s=i[i.length-1];return"function"==typeof o&&o!==s&&Object.keys(s).forEach(function(b){o[b]=s[b]}),o}}},{}],67:[function(I,H,U){"use strict";H.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],68:[function(I,H,U){H.exports=function d(){for(var m={},u=0;u<arguments.length;u++){var i=arguments[u];for(var a in i)p.call(i,a)&&(m[a]=i[a])}return m};var p=Object.prototype.hasOwnProperty},{}],69:[function(I,H,U){var d,m,p=H.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(x){if(d===setTimeout)return setTimeout(x,0);if((d===u||!d)&&setTimeout)return d=setTimeout,setTimeout(x,0);try{return d(x,0)}catch{try{return d.call(null,x,0)}catch{return d.call(this,x,0)}}}!function(){try{d="function"==typeof setTimeout?setTimeout:u}catch{d=u}try{m="function"==typeof clearTimeout?clearTimeout:i}catch{m=i}}();var T,s=[],b=!1,f=-1;function _(){!b||!T||(b=!1,T.length?s=T.concat(s):f=-1,s.length&&h())}function h(){if(!b){var x=a(_);b=!0;for(var P=s.length;P;){for(T=s,s=[];++f<P;)T&&T[f].run();f=-1,P=s.length}T=null,b=!1,function o(x){if(m===clearTimeout)return clearTimeout(x);if((m===i||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(x);try{return m(x)}catch{try{return m.call(null,x)}catch{return m.call(this,x)}}}(x)}}function w(x,P){this.fun=x,this.array=P}function y(){}p.nextTick=function(x){var P=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)P[A-1]=arguments[A];s.push(new w(x,P)),1===s.length&&!b&&a(h)},w.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=y,p.addListener=y,p.once=y,p.off=y,p.removeListener=y,p.removeAllListeners=y,p.emit=y,p.prependListener=y,p.prependOnceListener=y,p.listeners=function(x){return[]},p.binding=function(x){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(x){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],70:[function(I,H,U){(function(p){(function(){!function(d){var m="object"==typeof U&&U&&!U.nodeType&&U,u="object"==typeof H&&H&&!H.nodeType&&H,i="object"==typeof p&&p;(i.global===i||i.window===i||i.self===i)&&(d=i);var a,C,o=2147483647,s=36,b=1,T=26,f=38,_=700,h=72,w=128,y="-",x=/^xn--/,P=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,W={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=s-b,V=Math.floor,M=String.fromCharCode;function E(ee){throw new RangeError(W[ee])}function c(ee,X){for(var O=ee.length,F=[];O--;)F[O]=X(ee[O]);return F}function j(ee,X){var O=ee.split("@"),F="";return O.length>1&&(F=O[0]+"@",ee=O[1]),F+c((ee=ee.replace(A,".")).split("."),X).join(".")}function K(ee){for(var Z,q,X=[],O=0,F=ee.length;O<F;)(Z=ee.charCodeAt(O++))>=55296&&Z<=56319&&O<F?56320==(64512&(q=ee.charCodeAt(O++)))?X.push(((1023&Z)<<10)+(1023&q)+65536):(X.push(Z),O--):X.push(Z);return X}function G(ee){return c(ee,function(X){var O="";return X>65535&&(O+=M((X-=65536)>>>10&1023|55296),X=56320|1023&X),O+M(X)}).join("")}function J(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:s}function Q(ee,X){return ee+22+75*(ee<26)-((0!=X)<<5)}function re(ee,X,O){var F=0;for(ee=O?V(ee/_):ee>>1,ee+=V(ee/X);ee>$*T>>1;F+=s)ee=V(ee/$);return V(F+($+1)*ee/(ee+f))}function oe(ee){var F,S,D,z,R,n,l,k,B,g,X=[],O=ee.length,Z=0,q=w,N=h;for((S=ee.lastIndexOf(y))<0&&(S=0),D=0;D<S;++D)ee.charCodeAt(D)>=128&&E("not-basic"),X.push(ee.charCodeAt(D));for(z=S>0?S+1:0;z<O;){for(R=Z,n=1,l=s;z>=O&&E("invalid-input"),((k=J(ee.charCodeAt(z++)))>=s||k>V((o-Z)/n))&&E("overflow"),Z+=k*n,!(k<(B=l<=N?b:l>=N+T?T:l-N));l+=s)n>V(o/(g=s-B))&&E("overflow"),n*=g;N=re(Z-R,F=X.length+1,0==R),V(Z/F)>o-q&&E("overflow"),q+=V(Z/F),Z%=F,X.splice(Z++,0,q)}return G(X)}function se(ee){var X,O,F,Z,q,N,S,D,z,R,n,k,B,g,t,l=[];for(k=(ee=K(ee)).length,X=w,O=0,q=h,N=0;N<k;++N)(n=ee[N])<128&&l.push(M(n));for(F=Z=l.length,Z&&l.push(y);F<k;){for(S=o,N=0;N<k;++N)(n=ee[N])>=X&&n<S&&(S=n);for(S-X>V((o-O)/(B=F+1))&&E("overflow"),O+=(S-X)*B,X=S,N=0;N<k;++N)if((n=ee[N])<X&&++O>o&&E("overflow"),n==X){for(D=O,z=s;!(D<(R=z<=q?b:z>=q+T?T:z-q));z+=s)l.push(M(Q(R+(t=D-R)%(g=s-R),0))),D=V(t/g);l.push(M(Q(D,0))),q=re(O,B,F==Z),O=0,++F}++O,++X}return l.join("")}if(a={version:"1.4.1",ucs2:{decode:K,encode:G},decode:oe,encode:se,toASCII:function ie(ee){return j(ee,function(X){return P.test(X)?"xn--"+se(X):X})},toUnicode:function ne(ee){return j(ee,function(X){return x.test(X)?oe(X.slice(4).toLowerCase()):X})}},m&&u)if(H.exports==m)u.exports=a;else for(C in a)a.hasOwnProperty(C)&&(m[C]=a[C]);else d.punycode=a}(this)}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],71:[function(I,H,U){"use strict";function p(m,u){return Object.prototype.hasOwnProperty.call(m,u)}H.exports=function(m,u,i,a){i=i||"=";var o={};if("string"!=typeof m||0===m.length)return o;var s=/\+/g;m=m.split(u=u||"&");var b=1e3;a&&"number"==typeof a.maxKeys&&(b=a.maxKeys);var T=m.length;b>0&&T>b&&(T=b);for(var f=0;f<T;++f){var w,y,x,P,_=m[f].replace(s,"%20"),h=_.indexOf(i);h>=0?(w=_.substr(0,h),y=_.substr(h+1)):(w=_,y=""),x=decodeURIComponent(w),P=decodeURIComponent(y),p(o,x)?d(o[x])?o[x].push(P):o[x]=[o[x],P]:o[x]=P}return o};var d=Array.isArray||function(m){return"[object Array]"===Object.prototype.toString.call(m)}},{}],72:[function(I,H,U){"use strict";var p=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};H.exports=function(i,a,o,s){return a=a||"&",o=o||"=",null===i&&(i=void 0),"object"==typeof i?m(u(i),function(b){var T=encodeURIComponent(p(b))+o;return d(i[b])?m(i[b],function(f){return T+encodeURIComponent(p(f))}).join(a):T+encodeURIComponent(p(i[b]))}).join(a):s?encodeURIComponent(p(s))+o+encodeURIComponent(p(i)):""};var d=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)};function m(i,a){if(i.map)return i.map(a);for(var o=[],s=0;s<i.length;s++)o.push(a(i[s],s));return o}var u=Object.keys||function(i){var a=[];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a}},{}],73:[function(I,H,U){"use strict";U.decode=U.parse=I("./decode"),U.encode=U.stringify=I("./encode")},{"./decode":71,"./encode":72}],74:[function(I,H,U){(function(p,d){(function(){var m=I("process/browser.js").nextTick,u=Function.prototype.apply,i=Array.prototype.slice,a={},o=0;function s(b,T){this._id=b,this._clearFn=T}U.setTimeout=function(){return new s(u.call(setTimeout,window,arguments),clearTimeout)},U.setInterval=function(){return new s(u.call(setInterval,window,arguments),clearInterval)},U.clearTimeout=U.clearInterval=function(b){b.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(window,this._id)},U.enroll=function(b,T){clearTimeout(b._idleTimeoutId),b._idleTimeout=T},U.unenroll=function(b){clearTimeout(b._idleTimeoutId),b._idleTimeout=-1},U._unrefActive=U.active=function(b){clearTimeout(b._idleTimeoutId);var T=b._idleTimeout;T>=0&&(b._idleTimeoutId=setTimeout(function(){b._onTimeout&&b._onTimeout()},T))},U.setImmediate="function"==typeof p?p:function(b){var T=o++,f=!(arguments.length<2)&&i.call(arguments,1);return a[T]=!0,m(function(){a[T]&&(f?b.apply(null,f):b.call(null),U.clearImmediate(T))}),T},U.clearImmediate="function"==typeof d?d:function(b){delete a[b]}}).call(this)}).call(this,I("timers").setImmediate,I("timers").clearImmediate)},{"process/browser.js":69,timers:74}],75:[function(I,H,U){"use strict";var p=I("punycode"),d=I("./util");function m(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}U.parse=W,U.resolve=function V(C,E){return W(C,!1,!0).resolve(E)},U.resolveObject=function M(C,E){return C?W(C,!1,!0).resolveObject(E):E},U.format=function $(C){return d.isString(C)&&(C=W(C)),C instanceof m?C.format():m.prototype.format.call(C)},U.Url=m;var u=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(s),T=["%","/","?",";","#"].concat(b),f=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},P={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=I("querystring");function W(C,E,c){if(C&&d.isObject(C)&&C instanceof m)return C;var j=new m;return j.parse(C,E,c),j}m.prototype.parse=function(C,E,c){if(!d.isString(C))throw new TypeError("Parameter 'url' must be a string, not "+typeof C);var j=C.indexOf("?"),K=-1!==j&&j<C.indexOf("#")?"?":"#",G=C.split(K);G[0]=G[0].replace(/\\/g,"/");var Q=C=G.join(K);if(Q=Q.trim(),!c&&1===C.split("#").length){var re=a.exec(Q);if(re)return this.path=Q,this.href=Q,this.pathname=re[1],re[2]?(this.search=re[2],this.query=E?A.parse(this.search.substr(1)):this.search.substr(1)):E&&(this.search="",this.query={}),this}var oe=u.exec(Q);if(oe){var se=(oe=oe[0]).toLowerCase();this.protocol=se,Q=Q.substr(oe.length)}if(c||oe||Q.match(/^\/\/[^@\/]+@[^@\/]+/)){var ne="//"===Q.substr(0,2);ne&&(!oe||!x[oe])&&(Q=Q.substr(2),this.slashes=!0)}if(!x[oe]&&(ne||oe&&!P[oe])){for(var ie=-1,ee=0;ee<f.length;ee++)-1!==(X=Q.indexOf(f[ee]))&&(-1===ie||X<ie)&&(ie=X);var O,F;for(-1!==(F=-1===ie?Q.lastIndexOf("@"):Q.lastIndexOf("@",ie))&&(O=Q.slice(0,F),Q=Q.slice(F+1),this.auth=decodeURIComponent(O)),ie=-1,ee=0;ee<T.length;ee++){var X;-1!==(X=Q.indexOf(T[ee]))&&(-1===ie||X<ie)&&(ie=X)}-1===ie&&(ie=Q.length),this.host=Q.slice(0,ie),Q=Q.slice(ie),this.parseHost(),this.hostname=this.hostname||"";var Z="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Z)for(var q=this.hostname.split(/\./),N=(ee=0,q.length);ee<N;ee++){var S=q[ee];if(S&&!S.match(h)){for(var D="",z=0,R=S.length;z<R;z++)S.charCodeAt(z)>127?D+="x":D+=S[z];if(!D.match(h)){var n=q.slice(0,ee),l=q.slice(ee+1),k=S.match(w);k&&(n.push(k[1]),l.unshift(k[2])),l.length&&(Q="/"+l.join(".")+Q),this.hostname=n.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Z||(this.hostname=p.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==Q[0]&&(Q="/"+Q))}if(!y[se])for(ee=0,N=b.length;ee<N;ee++){var t=b[ee];if(-1!==Q.indexOf(t)){var e=encodeURIComponent(t);e===t&&(e=escape(t)),Q=Q.split(t).join(e)}}var r=Q.indexOf("#");-1!==r&&(this.hash=Q.substr(r),Q=Q.slice(0,r));var v=Q.indexOf("?");return-1!==v?(this.search=Q.substr(v),this.query=Q.substr(v+1),E&&(this.query=A.parse(this.query)),Q=Q.slice(0,v)):E&&(this.search="",this.query={}),Q&&(this.pathname=Q),P[se]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},m.prototype.format=function(){var C=this.auth||"";C&&(C=(C=encodeURIComponent(C)).replace(/%3A/i,":"),C+="@");var E=this.protocol||"",c=this.pathname||"",j=this.hash||"",K=!1,G="";this.host?K=C+this.host:this.hostname&&(K=C+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(K+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(G=A.stringify(this.query));var J=this.search||G&&"?"+G||"";return E&&":"!==E.substr(-1)&&(E+=":"),this.slashes||(!E||P[E])&&!1!==K?(K="//"+(K||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):K||(K=""),j&&"#"!==j.charAt(0)&&(j="#"+j),J&&"?"!==J.charAt(0)&&(J="?"+J),E+K+(c=c.replace(/[?#]/g,function(Q){return encodeURIComponent(Q)}))+(J=J.replace("#","%23"))+j},m.prototype.resolve=function(C){return this.resolveObject(W(C,!1,!0)).format()},m.prototype.resolveObject=function(C){if(d.isString(C)){var E=new m;E.parse(C,!1,!0),C=E}for(var c=new m,j=Object.keys(this),K=0;K<j.length;K++){var G=j[K];c[G]=this[G]}if(c.hash=C.hash,""===C.href)return c.href=c.format(),c;if(C.slashes&&!C.protocol){for(var J=Object.keys(C),Q=0;Q<J.length;Q++){var re=J[Q];"protocol"!==re&&(c[re]=C[re])}return P[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(C.protocol&&C.protocol!==c.protocol){if(!P[C.protocol]){for(var oe=Object.keys(C),se=0;se<oe.length;se++){var ne=oe[se];c[ne]=C[ne]}return c.href=c.format(),c}if(c.protocol=C.protocol,C.host||x[C.protocol])c.pathname=C.pathname;else{for(var N=(C.pathname||"").split("/");N.length&&!(C.host=N.shift()););C.host||(C.host=""),C.hostname||(C.hostname=""),""!==N[0]&&N.unshift(""),N.length<2&&N.unshift(""),c.pathname=N.join("/")}return c.search=C.search,c.query=C.query,c.host=C.host||"",c.auth=C.auth,c.hostname=C.hostname||C.host,c.port=C.port,(c.pathname||c.search)&&(c.path=(c.pathname||"")+(c.search||"")),c.slashes=c.slashes||C.slashes,c.href=c.format(),c}var X=c.pathname&&"/"===c.pathname.charAt(0),O=C.host||C.pathname&&"/"===C.pathname.charAt(0),F=O||X||c.host&&C.pathname,Z=F,q=c.pathname&&c.pathname.split("/")||[],S=(N=C.pathname&&C.pathname.split("/")||[],c.protocol&&!P[c.protocol]);if(S&&(c.hostname="",c.port=null,c.host&&(""===q[0]?q[0]=c.host:q.unshift(c.host)),c.host="",C.protocol&&(C.hostname=null,C.port=null,C.host&&(""===N[0]?N[0]=C.host:N.unshift(C.host)),C.host=null),F=F&&(""===N[0]||""===q[0])),O)c.host=C.host||""===C.host?C.host:c.host,c.hostname=C.hostname||""===C.hostname?C.hostname:c.hostname,c.search=C.search,c.query=C.query,q=N;else if(N.length)q||(q=[]),q.pop(),q=q.concat(N),c.search=C.search,c.query=C.query;else if(!d.isNullOrUndefined(C.search))return S&&(c.hostname=c.host=q.shift(),(D=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=D.shift(),c.host=c.hostname=D.shift())),c.search=C.search,c.query=C.query,(!d.isNull(c.pathname)||!d.isNull(c.search))&&(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!q.length)return c.pathname=null,c.path=c.search?"/"+c.search:null,c.href=c.format(),c;for(var z=q.slice(-1)[0],R=(c.host||C.host||q.length>1)&&("."===z||".."===z)||""===z,n=0,l=q.length;l>=0;l--)"."===(z=q[l])?q.splice(l,1):".."===z?(q.splice(l,1),n++):n&&(q.splice(l,1),n--);if(!F&&!Z)for(;n--;n)q.unshift("..");F&&""!==q[0]&&(!q[0]||"/"!==q[0].charAt(0))&&q.unshift(""),R&&"/"!==q.join("/").substr(-1)&&q.push("");var D,k=""===q[0]||q[0]&&"/"===q[0].charAt(0);return S&&(c.hostname=c.host=k?"":q.length?q.shift():"",(D=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@"))&&(c.auth=D.shift(),c.host=c.hostname=D.shift())),(F=F||c.host&&q.length)&&!k&&q.unshift(""),q.length?c.pathname=q.join("/"):(c.pathname=null,c.path=null),(!d.isNull(c.pathname)||!d.isNull(c.search))&&(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=C.auth||c.auth,c.slashes=c.slashes||C.slashes,c.href=c.format(),c},m.prototype.parseHost=function(){var C=this.host,E=i.exec(C);E&&(":"!==(E=E[0])&&(this.port=E.substr(1)),C=C.substr(0,C.length-E.length)),C&&(this.hostname=C)}},{"./util":76,punycode:70,querystring:73}],76:[function(I,H,U){"use strict";H.exports={isString:function(p){return"string"==typeof p},isObject:function(p){return"object"==typeof p&&null!==p},isNull:function(p){return null===p},isNullOrUndefined:function(p){return null==p}}},{}]},{},[15])(15)},7553:Ee=>{Ee.exports=function fe(){for(var be={},ye=0;ye<arguments.length;ye++){var ue=arguments[ye];for(var I in ue)ve.call(ue,I)&&(be[I]=ue[I])}return be};var ve=Object.prototype.hasOwnProperty}}]);